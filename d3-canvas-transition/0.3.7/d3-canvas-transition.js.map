{"version":3,"file":"d3-canvas-transition.js","sources":["../src/size.js","../src/attrs/style.js","../src/attrs/set.js","../src/deque.js","../src/attrs/transform.js","../src/draw.js","../src/iterator.js","../src/events.js","../src/element.js","../src/resolution.js","../src/attrs/path.js","../src/selection.js","../src/polygon.js","../src/tags/circle.js","../src/tags/line.js","../src/tags/path.js","../src/tags/rect.js","../src/tags/text.js","../index.js"],"sourcesContent":["export default function (value, dim) {\n    if (typeof(value) == 'string') {\n        if (value.substring(value.length - 2) === 'px')\n            return +value.substring(0, value.length - 2);\n        else if (value.substring(value.length - 1) === '%')\n            return 0.01 * value.substring(0, value.length - 1) * (dim || 1);\n        else if (value.substring(value.length - 2) === 'em')\n            return value.substring(0, value.length - 2) * (dim || 1);\n    }\n    else if (typeof(value) == 'number')\n        return value;\n}\n\n\nexport var sizeTags = {};\n\n\nexport function nodeDim (node) {\n    var tag = sizeTags[node.tagName];\n    return tag ? tag(node) : {x: 0, y: 0, width: node.context.canvas.width, height: node.context.canvas.height};\n}\n","import selectCanvas from '../selection';\nimport getSize, {nodeDim} from '../size';\n\nimport {color} from 'd3-color';\n\n\nconst gradients = {\n\n    linearGradient (node, gradNode, opacity) {\n        var ctx = gradNode.context,\n            dim = nodeDim(node),\n            x1 = getSize(gradNode.attrs.get('x1') || '0%', dim.width),\n            x2 = getSize(gradNode.attrs.get('x2') || '100%', dim.width),\n            y1 = getSize(gradNode.attrs.get('y1') || '0%', dim.height),\n            y2 = getSize(gradNode.attrs.get('y2') || '0%', dim.height),\n            col;\n\n        var gradient = ctx.createLinearGradient(x1, y1, x2, y2);\n        gradNode.each((child) => {\n            col = color(child.attrs.get('stop-color'));\n            if (opacity || opacity === 0) col.opacity = opacity;\n            gradient.addColorStop(\n                getSize(child.attrs.get('offset')),\n                '' + col\n            );\n        });\n        return gradient;\n    },\n\n    radialGradient (node, gradNode, opacity) {\n        var ctx = gradNode.context,\n            dim = nodeDim(node),\n            cx = getSize(gradNode.attrs.get('cx') || '50%', dim.width),\n            cy = getSize(gradNode.attrs.get('cy') || '50%', dim.height),\n            fx = getSize(gradNode.attrs.get('fx') || cx, dim.width),\n            fy = getSize(gradNode.attrs.get('fy') || cy, dim.height),\n            r = getSize(gradNode.attrs.get('r') || '50%', Math.max(dim.height, dim.width)),\n            col;\n\n        var gradient = ctx.createRadialGradient(dim.x + fx, dim.y + fy, 0, dim.x + cx, dim.y + cy, r);\n        gradNode.each((child) => {\n            col = color(child.attrs.get('stop-color'));\n            if (opacity || opacity === 0) col.opacity = opacity;\n            gradient.addColorStop(\n                getSize(child.attrs.get('offset')),\n                '' + col\n            );\n        });\n        return gradient;\n    }\n};\n\n\nexport function getColor(node, value, opacity) {\n    if (value === 'none') return false;\n    if (value) {\n        if (typeof(value) === 'string' && value.substring(0, 4) === 'url(') {\n            var selector = value.substring(4, value.length-1),\n                gradNode = selectCanvas(node.rootNode).select(selector).node();\n            return gradNode ? gradient(node, gradNode, opacity) : null;\n        }\n        if (opacity || opacity===0) {\n            var col = color(value);\n            if (col) {\n                col.opacity = opacity;\n                return '' + col;\n            }\n        } else return value;\n    }\n}\n\n\nexport function StyleNode (node) {\n    this.node = node;\n}\n\n\nStyleNode.prototype = {\n\n    getPropertyValue (name) {\n        var value = this.node.getValue(name);\n        if (value === undefined)\n            value = window.getComputedStyle(this.node.context.canvas).getPropertyValue(name);\n        return value;\n    }\n\n};\n\n\nfunction gradient(node, gradNode, opacity) {\n    var g = gradients[gradNode.tagName];\n    if (g) return g(node, gradNode, opacity);\n}\n","export default function (node, attr, value) {\n    var current = node.attrs.get(attr);\n    if (current === value) return false;\n    node.attrs.set(attr, value);\n    return true;\n}\n","export default function deque () {\n    return new Deque;\n}\n\n\nfunction Deque () {\n    this._head = null;\n    this._tail = null;\n    this._length = 0;\n\n    Object.defineProperty(this, 'length',  {\n        get () {\n            return this._length;\n        }\n    });\n}\n\n\nDeque.prototype = deque.prototype = {\n\n    prepend (child, refChild) {\n        if (!this._length) {\n            child._prev = null;\n            child._next = null;\n        }\n        else if (refChild) {\n            child._prev = refChild._prev;\n            child._next = refChild;\n\n            if (refChild._prev)\n                refChild._prev._next = child;\n\n            refChild._prev = child;\n        }\n        else {\n            child._prev = this._tail;\n            child._next = null;\n            this._tail._next = child;\n        }\n        if (!child._prev) this._head = child;\n        if (!child._next) this._tail = child;\n        this._length++;\n    },\n\n    remove (child) {\n        if (child._prev)\n            child._prev._next = child._next;\n\n        if (child._next)\n            child._next._prev = child._prev;\n\n        if (this._head === child)\n            this._head = child._next;\n\n        if (this._tail === child)\n            this._tail = child._prev;\n\n        delete child._prev;\n        delete child._next;\n\n        this._length--;\n    },\n\n    list () {\n        var child = this._head,\n            list = [];\n        while (child) {\n            list.push(child);\n            child = child._next;\n        }\n        return list;\n    },\n\n    each (f) {\n        var child = this._head;\n        while (child) {\n            f(child);\n            child = child._next;\n        }\n    }\n};\n","var conv = Math.PI/180;\n\n\nexport default function (node) {\n    var x = +(node.attrs.get('x') || 0),\n        y = +(node.attrs.get('y') || 0),\n        trans = node.attrs.get('transform'),\n        ctx = node.context,\n        sx, sy, angle;\n\n    if (typeof(trans) === 'string') {\n        var index1 = trans.indexOf('translate('),\n            index2, s, bits;\n        if (index1 > -1) {\n            s = trans.substring(index1 + 10);\n            index2 = s.indexOf(')');\n            bits = s.substring(0, index2).split(',');\n            x += +bits[0];\n            if (bits.length === 2) y += +bits[1];\n        }\n\n        index1 = trans.indexOf('rotate(');\n        if (index1 > -1) {\n            s = trans.substring(index1 + 7);\n            angle = +s.substring(0, s.indexOf(')'));\n        }\n\n        index1 = trans.indexOf('scale(');\n        if (index1 > -1) {\n            s = trans.substring(index1 + 6);\n            index2 = s.indexOf(')');\n            bits = s.substring(0, index2).split(',');\n            sx = +bits[0];\n            if (bits.length === 2) sy = +bits[1];\n        }\n\n    } else if (trans) {\n        x += trans.x;\n        y += trans.y;\n        sx = trans.k;\n    }\n    if (sx) {\n        sy = sy || sx;\n        ctx.scale(sx, sy);\n    }\n    if (x || y) ctx.translate(ctx._factor * x, ctx._factor * y);\n    if(angle && angle === angle) ctx.rotate(conv*angle);\n}\n","import {map} from 'd3-collection';\nimport {timeout} from 'd3-timer';\nimport transform from './attrs/transform';\n\nimport {getColor} from './attrs/style';\nimport getSize from './size';\n\nexport var tagDraws = map();\n\n\nexport function touch (node, v) {\n    var root = node.rootNode;\n    if (!root._touches) root._touches = 0;\n    root._touches += v;\n    if (!root._touches || root._scheduled) return;\n    root._scheduled = timeout(redraw(root));\n}\n\n\nexport function draw (node, point) {\n    var children = node.countNodes,\n        drawer = tagDraws.get(node.tagName),\n        factor = node.factor,\n        attrs = node.attrs;\n\n    if (drawer === false)\n        return;\n    else if (node.attrs) {\n        var ctx = node.context,\n            stroke, width;\n\n        // save the current context\n        ctx.save();\n        //\n        if (attrs['$opacity'] !== undefined) ctx.globalAlpha = +attrs['$opacity'];\n        if (attrs['$stroke-linecap']) ctx.lineCap = attrs['$stroke-linecap'];\n        if (attrs['$stroke-linejoin']) ctx.lineJoin = attrs['$stroke-linejoin'];\n        if (attrs['$mix-blend-mode']) ctx.globalCompositeOperation = attrs['$mix-blend-mode'];\n        transform(node);\n        //\n        // Stroke\n        stroke = node.getValue('stroke');\n        if (stroke === 'none')\n            stroke = false;\n        else {\n            stroke = getColor(node, node.getValue('stroke'), node.getValue('stroke-opacity'));\n            if (stroke) ctx.strokeStyle = stroke;\n            if (attrs['$stroke-width'] !== undefined) {\n                width = getSize(node.attrs['$stroke-width']);\n                if (width) ctx.lineWidth = factor * width;\n            }\n            stroke = width === 0 ? false : true;\n        }\n        //\n        // Fill\n        var fill = getColor(node, node.getValue('fill'), node.getValue('fill-opacity'));\n        if (fill) ctx.fillStyle = fill;\n        fill === 'none' || !fill ? false : true;\n        //\n        if (drawer) drawer(node, stroke, fill, point);\n        if (children) node.each((child) => draw(child, point));\n        //\n        // restore\n        ctx.restore();\n    } else if (children) {\n        node.each((child) => draw(child, point));\n    }\n}\n\n\nexport function redraw (node, point, force) {\n\n    return function () {\n        if (!node._scheduled && !force) return;\n        var ctx = node.context;\n        node._touches = 0;\n        ctx.beginPath();\n        ctx.closePath();\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        if (point) point.nodes = [];\n        draw(node, point);\n        node._scheduled = false;\n        touch(node, 0);\n        return point ? point.nodes : null;\n    };\n}\n","export function NodeIterator (node) {\n    this.node = node;\n    this.context = node.context;\n    this.current = node;\n}\n\nNodeIterator.prototype = {\n\n    next () {\n        var current = this.current;\n        if (!current) return null;\n        if (current.firstChild)\n            current = current.firstChild;\n        else {\n            while (current) {\n                if (current.nextSibling) {\n                    current = current.nextSibling;\n                    break;\n                }\n                current = current.parentNode;\n                if (current === this.node) current = null;\n            }\n        }\n        this.current = current;\n        return current;\n    }\n};\n","import {redraw} from './draw';\n\n\nexport var mouseEvents = {\n    mouseenter: 'mousemove',\n    mouseleave: 'mousemove'\n};\n\n\nexport function canvasListener (event) {\n    var context = this.getContext('2d'),\n        root = context._rootElement;\n    if (!root) return;\n    trigger(root, event);\n}\n\n\nexport function canvasNodeListener (event) {\n    var context = this.getContext('2d'),\n        root = context._rootElement;\n    if (!root) return;\n\n    event.canvasPoint = {\n        x: root.factor*event.offsetX,\n        y: root.factor*event.offsetY\n    };\n\n    var nodes = redraw(root, event.canvasPoint, true)(),\n        handler = event.type === 'mousemove' ? mousemoveEvent : defaultEvent;\n\n    handler(context, nodes, event);\n}\n\n\nfunction defaultEvent (context, nodes, event) {\n    for (var i=nodes.length-1; i>=0; --i) {\n        if (trigger(nodes[i], event)) break;\n    }\n}\n\n\nfunction mousemoveEvent (context, nodes, event) {\n    var actives = context._activeNodes,\n        newActives = [],\n        active = nodes.length ? nodes[nodes.length-1] : null,\n        node, i;\n\n    // Handle actives\n    if (actives) {\n        for (i = 0; i < actives.length; ++i) {\n            node = actives[i];\n            if (active && node !== active && node.parentNode === active.parentNode)\n                trigger(node, event, 'mouseleave');\n            else if (nodes.indexOf(node) > -1) {\n                newActives.push(node);\n                trigger(node, event, 'mousemove');\n            }\n            else\n                trigger(node, event, 'mouseleave');\n        }\n    }\n\n    context._activeNodes = actives = newActives;\n\n    if (actives.indexOf(active) === -1) {\n        actives.push(active);\n        trigger(active, event, 'mouseenter');\n    }\n}\n\n\nfunction trigger (node, event, type) {\n    var listeners = node.events[type || event.type];\n    if (listeners) {\n        for (var j = 0; j < listeners.length; ++j)\n            listeners[j].call(node, event);\n        return node;\n    }\n}\n","import {map} from 'd3-collection';\n\nimport {StyleNode} from './attrs/style';\nimport setAttribute from './attrs/set';\nimport deque from './deque';\nimport {touch} from './draw';\nimport {NodeIterator} from './iterator';\nimport {canvasListener, canvasNodeListener, mouseEvents} from './events';\n\n\nvar namespace = 'canvas';\nvar canvasStyles = ['cursor'];\n\n/**\n * A proxy for a data entry on canvas\n *\n * It partially implements the Node Api (please pull request!)\n * https://developer.mozilla.org/en-US/docs/Web/API/Node\n *\n * It allows the use the d3-select and d3-transition libraries\n * on canvas joins\n */\nexport function CanvasElement (tagName, context) {\n    var _deque,\n        events = {},\n        text = '';\n\n    Object.defineProperties(this, {\n        context: {\n            get () {\n                return context;\n            }\n        },\n        deque: {\n            get () {\n                if (!_deque) _deque = deque();\n                return _deque;\n            }\n        },\n        events: {\n            get () {\n                return events;\n            }\n        },\n        tagName: {\n            get () {\n                return tagName;\n            }\n        },\n        childNodes: {\n            get () {\n                return _deque ? _deque.list() : [];\n            }\n        },\n        firstChild: {\n            get () {\n                return _deque ? _deque._head : null;\n            }\n        },\n        lastChild: {\n            get () {\n                return _deque ? _deque._tail : null;\n            }\n        },\n        parentNode: {\n            get() {\n                return this._parent;\n            }\n        },\n        previousSibling: {\n            get () {\n                return this._prev;\n            }\n        },\n        nextSibling: {\n            get () {\n                return this._next;\n            }\n        },\n        namespaceURI: {\n            get () {\n                return namespace;\n            }\n        },\n        textContent: {\n            get () {\n                return text;\n            },\n            set (value) {\n                text = ''+value;\n                touch(this, 1);\n            }\n        },\n        clientLeft: {\n            get () {\n                return context.canvas.clientLeft;\n            }\n        },\n        clientTop: {\n            get () {\n                return context.canvas.clientTop;\n            }\n        },\n        clientWidth: {\n            get () {\n                return context.canvas.clientWidth;\n            }\n        },\n        clientHeight: {\n            get () {\n                return context.canvas.clientHeight;\n            }\n        },\n        rootNode: {\n            get () {\n                return this.context._rootElement;\n            }\n        },\n        //\n        // Canvas Element properties\n        countNodes: {\n            get () {\n                return _deque ? _deque._length : 0;\n            }\n        },\n        factor: {\n            get () {\n                return this.context._factor;\n            }\n        }\n    });\n}\n\nCanvasElement.prototype = {\n\n    querySelectorAll (selector) {\n        return this.countNodes ? select(selector, this, []) : [];\n    },\n\n    querySelector (selector) {\n        if (this.countNodes) return select(selector, this);\n    },\n\n    createElementNS (namespaceURI, qualifiedName) {\n        return new CanvasElement(qualifiedName, this.context);\n    },\n\n    hasChildNodes () {\n        return this.countNodes > 0;\n    },\n\n    contains (child) {\n        while(child) {\n            if(child._parent == this) return true;\n            child = child._parent;\n        }\n        return false;\n    },\n\n    appendChild (child) {\n        return this.insertBefore(child);\n    },\n\n    insertBefore (child, refChild) {\n        if (child === this) throw Error('inserting self into children');\n        if (!(child instanceof CanvasElement))\n            throw Error('Cannot insert a non canvas element into a canvas element');\n        if (child._parent) child._parent.removeChild(child);\n        this.deque.prepend(child, refChild);\n        child._parent = this;\n        touch(this, 1);\n        return child;\n    },\n\n    removeChild (child) {\n        if (child._parent === this) {\n            delete child._parent;\n            this.deque.remove(child);\n            touch(this, 1);\n            return child;\n        }\n    },\n\n    setAttribute (attr, value) {\n        if (attr === 'class') {\n            this.class = value;\n        }\n        else if (attr === 'id') {\n            this.id = value;\n        }\n        else {\n            if (!this.attrs) this.attrs = map();\n            if (setAttribute(this, attr, value)) touch(this, 1);\n        }\n    },\n\n    removeAttribute (attr) {\n        if (this.attrs) {\n            this.attrs.remove(attr);\n            touch(this, 1);\n        }\n    },\n\n    getAttribute (attr) {\n        var value = this.attrs ? this.attrs.get(attr) : undefined;\n        if (value === undefined && !this._parent)\n            value = this.context.canvas[attr];\n        return value;\n    },\n\n    addEventListener (type, listener) {\n        var canvas = this.context.canvas;\n        if (this.rootNode === this) {\n            arguments[1] = canvasListener;\n            canvas.addEventListener.apply(canvas, arguments);\n        }\n        else {\n            arguments[0] = mouseEvents[type] || type;\n            arguments[1] = canvasNodeListener;\n            canvas.addEventListener.apply(canvas, arguments);\n        }\n        var listeners = this.events[type];\n        if (!listeners) this.events[type] = listeners = [];\n        if (listeners.indexOf(listener) === -1) listeners.push(listener);\n    },\n\n    removeEventListener (type, listener) {\n        var listeners = this.events[type];\n        if (listeners) {\n            var i = listeners.indexOf(listener);\n            if (i > -1) listeners.splice(i, 1);\n        }\n    },\n\n    getBoundingClientRect () {\n        return this.context.canvas.getBoundingClientRect();\n    },\n\n    // Canvas methods\n    each (f) {\n        if (this.countNodes) this.deque.each(f);\n    },\n\n    getValue (attr) {\n        var value = this.getAttribute(attr);\n        if (value === undefined && this._parent) return this._parent.getValue(attr);\n        return value;\n    },\n\n    // Additional attribute functions\n    removeProperty(name) {\n        this.removeAttribute(name);\n    },\n\n    setProperty(name, value) {\n        if (canvasStyles.indexOf(name) > -1)\n            this.context.canvas.style[name] = value;\n        else\n            this.setAttribute(name, value);\n    },\n\n    getProperty(name) {\n        return this.getAttribute(name);\n    },\n\n    getPropertyValue (name) {\n        return this.getAttribute(name);\n    },\n\n    // Proxies to this object\n    getComputedStyle (node) {\n        return new StyleNode(node);\n    },\n\n    get ownerDocument () {\n        return this;\n    },\n\n    get style () {\n        return this;\n    },\n\n    get defaultView () {\n        return this;\n    },\n\n    get document () {\n        return this.rootNode;\n    }\n};\n\n\nfunction select(selector, node, selections) {\n\n    var selectors = selector.split(' '),\n        iterator = new NodeIterator(node),\n        child = iterator.next(),\n        classes, bits, tag, id, sel;\n\n    for (let s=0; s<selectors.length; ++s) {\n        selector = selectors[s];\n        if (selector === '*') {\n            selector = {};\n        } else {\n            if (selector.indexOf('#') > -1) {\n                bits = selector.split('#');\n                tag = bits[0];\n                id = bits[1];\n            }\n            else if (selector.indexOf('.') > -1) {\n                bits = selector.split('.');\n                tag = bits[0];\n                classes = bits.splice(1).join(' ');\n            }\n            else\n                tag = selector;\n            selector = {tag, id, classes};\n        }\n        selectors[s] = selector;\n    }\n\n    while (child) {\n        for (let s=0; s<selectors.length; ++s) {\n            sel = selectors[s];\n\n            if (!sel.tag || child.tagName === sel.tag) {\n                if ((sel.id && child.id !== sel.id) ||\n                    (sel.classes && child.class !== sel.classes)) {\n                    // nothing to do\n                }\n                else if (selections) {\n                    selections.push(child);\n                    break;\n                }\n                else\n                    return child;\n            }\n        }\n        child = iterator.next();\n    }\n\n    return selections;\n}\n","export default function (factor) {\n    return factor || window.devicePixelRatio || 1;\n}\n","export default function (p) {\n\n    function cp () {\n        return canvasPath(p, arguments);\n    }\n\n    return cp;\n}\n\n\nfunction canvasPath (p, parameters) {\n\n    return function () {\n        p.apply(this, parameters);\n    };\n}\n","import {selection, select} from 'd3-selection';\n\nimport {CanvasElement} from './element';\nimport resolution from './resolution';\nimport path from './attrs/path';\nimport {draw, redraw} from './draw';\n\n\nvar originalAttr = selection.prototype.attr;\nvar defaultFactor;\n\n\nselection.prototype.attr = selectionAttr;\nselection.prototype.canvas = asCanvas;\nselection.prototype.canvasResolution = canvasResolution;\nselection.prototype.draw = drawNode;\n\n\n\nexport default function selectCanvas (context, factor) {\n    var s = selection();\n    if (!context) return s;\n\n    if (isCanvas(context) && arguments.length === 1)\n        return s.select(() => context);\n\n    if (typeof(context) === 'string') {\n        context = select(context).node();\n        if (!context) return s;\n    }\n    if (context.getContext) context = context.getContext('2d');\n\n    if (!context._rootElement) {\n        if (!factor) factor = defaultFactor || resolution();\n        context._factor = factor;\n        context._rootElement = new CanvasElement('canvas', context);\n    }\n    return s.select(() => context._rootElement);\n}\n\n\nfunction selectionAttr (name, value) {\n    if (arguments.length > 1) {\n        var node = this._parents[0] || this.node(),\n            attr;\n        if (isCanvas(node) && typeof(value.context) === 'function') {\n            attr = value.pathObject;\n            if (!attr) {\n                attr = path(value);\n                value.pathObject = attr;\n            }\n            if (!value.context())\n                value.context(wrapContext(node.context, node.factor));\n            arguments[1] = attr;\n        }\n    }\n    return originalAttr.apply(this, arguments);\n}\n\n\nfunction isCanvas(node) {\n    return node instanceof CanvasElement;\n}\n\n\nfunction asCanvas (reset) {\n    var s = this,\n        node = s.node();\n\n    if (node.tagName === 'CANVAS' && !isCanvas(node)) {\n        s = selectCanvas(node);\n        node = s.node();\n    }\n\n    if (isCanvas(node) && reset) {\n        var ctx = node.context,\n            factor = node.factor,\n            width = ctx.canvas.width,\n            height = ctx.canvas.height;\n        ctx.beginPath();\n        ctx.closePath();\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.clearRect(0, 0, width, height);\n        if (factor > 1) {\n            ctx.canvas.style.width = width + 'px';\n            ctx.canvas.style.height = height + 'px';\n            ctx.canvas.width = width * factor;\n            ctx.canvas.height = height * factor;\n            ctx.scale(factor, factor);\n        }\n    }\n\n    return s;\n}\n\n\nfunction canvasResolution (value) {\n    if (arguments.length === 1) {\n        defaultFactor = value;\n        return this;\n    }\n    return this.factor;\n}\n\n\nfunction drawNode () {\n    var node = this.node();\n    if (isCanvas(node)) {\n        var root = node.rootNode;\n        if (root === node) redraw(node)();\n        else {\n            if (root._scheduled) {\n                root._scheduled = null;\n                root._touches = 0;\n            }\n            draw(node);\n        }\n    }\n    return this;\n}\n\n\nfunction wrapContext(context, factor) {\n    if (factor === 1) return context;\n    return new Context(context, factor);\n}\n\n\nfunction Context (context, factor) {\n    this._context = context;\n    this._factor = 1;\n    this._f = factor;\n}\n\n\nContext.prototype = {\n    beginPath () {\n        this._context.beginPath();\n    },\n    closePath () {\n        this._context.closePath();\n    },\n    moveTo (x, y) {\n        this._context.moveTo(this._f*x, this._f*y);\n    },\n    lineTo (x, y) {\n        this._context.lineTo(this._f*x, this._f*y);\n    },\n    arc () {\n        arguments[0] = this._f*arguments[0];\n        arguments[1] = this._f*arguments[1];\n        arguments[2] = this._f*arguments[2];\n        this._context.arc.apply(this._context, arguments);\n    },\n    rect (x, y, w, h) {\n        this._context.rect(this._f*x, this._f*y, this._f*w, this._f*h);\n    },\n    quadraticCurveTo (cpx, cpy, x, y) {\n        this._context.quadraticCurveTo(this._f*cpx, this._f*cpy, this._f*x, this._f*y);\n    },\n    bezierCurveTo (cp1x,cp1y,cp2x,cp2y,x,y) {\n        this._context.bezierCurveTo(\n            this._f*cp1x, this._f*cp1y,\n            this._f*cp2x, this._f*cp2y, this._f*x, this._f*y\n        );\n    }\n};\n","export default function (ctx, pts, radius) {\n    if (radius > 0)\n        pts = getRoundedPoints(pts, radius);\n    var i, pt, len = pts.length;\n    ctx.beginPath();\n    for (i = 0; i < len; i++) {\n        pt = pts[i];\n        if (i === 0)\n            ctx.moveTo(pt[0], pt[1]);\n        else\n            ctx.lineTo(pt[0], pt[1]);\n        if (radius > 0)\n            ctx.quadraticCurveTo(pt[2], pt[3], pt[4], pt[5]);\n    }\n    ctx.closePath();\n}\n\n\nfunction getRoundedPoints (pts, radius) {\n    var i1, i2, i3, p1, p2, p3, prevPt, nextPt,\n        len = pts.length,\n        res = new Array(len);\n    for (i2 = 0; i2 < len; i2++) {\n        i1 = i2-1;\n        i3 = i2+1;\n        if (i1 < 0)\n            i1 = len - 1;\n        if (i3 === len) i3 = 0;\n        p1 = pts[i1];\n        p2 = pts[i2];\n        p3 = pts[i3];\n        prevPt = getRoundedPoint(p1[0], p1[1], p2[0], p2[1], radius, false);\n        nextPt = getRoundedPoint(p2[0], p2[1], p3[0], p3[1], radius, true);\n        res[i2] = [prevPt[0], prevPt[1], p2[0], p2[1], nextPt[0], nextPt[1]];\n    }\n  return res;\n}\n\n\nfunction getRoundedPoint(x1, y1, x2, y2, radius, first) {\n    var total = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)),\n        idx = first ? radius / total : (total - radius) / total;\n    return [x1 + (idx * (x2 - x1)), y1 + (idx * (y2 - y1))];\n}\n","import {sizeTags} from '../size';\n\nvar tau = 2 * Math.PI;\n\nexport default function (node, stroke, fill, point) {\n    var attrs = node.attrs,\n        ctx = node.context,\n        f = node.factor;\n    ctx.beginPath();\n    ctx.arc(\n        f*(attrs['$cx'] || 0),\n        f*(attrs['$cy'] ||  0),\n        f*(attrs['$r'] || 0),\n        0, tau\n    );\n    ctx.closePath();\n    if (stroke) ctx.stroke();\n    if (fill) ctx.fill();\n    if (point && ctx.isPointInPath(point.x, point.y)) point.nodes.push(node);\n}\n\n\nsizeTags.circle = function (node) {\n    var r = node.factor*(node.attrs.get('r') || 0);\n    return {\n        x: node.factor*(node.attrs.get('cx') || 0) - r,\n        y: node.factor*(node.attrs.get('cy') || 0) - r,\n        width: 2*r,\n        height: 2*r\n    };\n};\n","export default function (node, stroke, fill, point) {\n    var attrs = node.attrs,\n        factor = node.factor,\n        ctx = node.context;\n    ctx.beginPath();\n    ctx.moveTo(factor*(attrs['$x1'] || 0), factor*(attrs['$y1'] || 0));\n    ctx.lineTo(factor*attrs['$x2'], factor*attrs['$y2']);\n    if (stroke) ctx.stroke();\n    if (point && ctx.isPointInPath(point.x, point.y)) point.nodes.push(node);\n}\n","var re = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g;\n\n\nexport default function (node, stroke, fill, point) {\n    var path = node.attrs.get('d'),\n        ctx = node.context;\n    if (path) {\n        if (typeof(path) === 'function') {\n            ctx.beginPath();\n            path(node);\n            if (stroke) ctx.stroke();\n            if (fill) ctx.fill();\n            if (point && ctx.isPointInPath(point.x, point.y))\n                point.nodes.push(node);\n        } else if (window.Path2D) {\n            var Path2D = window.Path2D,\n                p = new Path2D(multiply(path, node.factor));\n            if (stroke) ctx.stroke(p);\n            if (fill) ctx.fill(p);\n            if (point && ctx.isPointInPath(p, point.x, point.y))\n                point.nodes.push(node);\n        }\n    }\n}\n\n\nfunction multiply(path, factor) {\n    if (factor === 1) return path;\n    var pm, index = 0, result = '';\n    path = path + '';\n    while (pm = re.exec(path)) {\n        result += path.substring(index, pm.index) + factor*pm[0];\n        index = pm.index + pm[0].length;\n    }\n    return result+path.substring(index);\n}\n","import {sizeTags} from '../size';\nimport polygon from '../polygon';\n\n\nexport default function (node, stroke, fill, point) {\n    var attrs = node.attrs,\n        ctx = node.context,\n        factor = ctx._factor,\n        rx = attrs.get('rx') || 0,\n        //ry = attrs.get('ry') || 0,\n        height = attrs.get('height') || 0,\n        width = attrs.get('width') || 0;\n    if (width && height && height !== width) ctx.scale(1.0, height/width);\n    if (rx) {\n        polygon(ctx, [[0, 0], [factor*width, 0], [factor*width, factor*width], [0, factor*width]], factor*rx);\n    }\n    else {\n        ctx.beginPath();\n        ctx.rect(0, 0, factor*width, factor*width);\n        ctx.closePath();\n    }\n    if (stroke) ctx.stroke();\n    if (fill) ctx.fill();\n    if (point && ctx.isPointInPath(point.x, point.y)) point.nodes.push(node);\n}\n\n\nsizeTags.rect = function (node) {\n    var w = node.factor*(node.attrs.get('width') || 0);\n    return {\n        x: 0,\n        y: 0,\n        height: w,\n        width: w\n    };\n};\n","import getSize from '../size';\n\nvar fontProperties = ['style', 'variant', 'weight', 'size', 'family'],\n    defaultBaseline = 'middle',\n    textAlign = {\n        start: 'start',\n        middle: 'center',\n        end: 'end'\n    };\n\n\nexport default function (node) {\n    var factor = node.factor,\n        size = fontString(node)/factor,\n        ctx = node.context;\n    ctx.textAlign = textAlign[node.getValue('text-anchor')] || textAlign.middle;\n    ctx.textBaseline = node.getValue('text-baseline') || defaultBaseline;\n    ctx.fillText(\n        node.textContent || '',\n        factor*getSize(node.attrs.get('dx') || 0, size),\n        factor*(getSize(node.attrs.get('dy') || 0, size) - 2)\n    );\n}\n\n\nfunction fontString (node) {\n    let bits = [],\n        size = 0,\n        key, v, family;\n    for (let i=0; i<fontProperties.length; ++i) {\n        key = fontProperties[i];\n        v = node.getValue('font-' + key);\n        if (v) {\n            if (key === 'size') {\n                size = node.factor*getSize(v);\n                v = size + 'px';\n            } else if (key === 'family') {\n                family = v;\n            }\n            bits.push(v);\n        }\n    }\n    //\n    if (size) {\n        if (!family) bits.push('sans serif');\n        node.context.font = bits.join(' ');\n    }\n    return size;\n}\n","export {default as selectCanvas} from './src/selection';\nexport {default as resolution} from './src/resolution';\nexport {default as getSize} from './src/size';\nexport {default as canvasPolygon} from './src/polygon';\nexport {version as canvasVersion} from './package.json';\n\nimport {tagDraws} from './src/draw';\n\nimport circle from './src/tags/circle';\nimport line from './src/tags/line';\nimport path from './src/tags/path';\nimport rect from './src/tags/rect';\nimport text from './src/tags/text';\n\ntagDraws.set('circle', circle);\ntagDraws.set('line', line);\ntagDraws.set('path', path);\ntagDraws.set('rect', rect);\ntagDraws.set('text', text);\n\ntagDraws.set('linearGradient', false);\ntagDraws.set('radialGradient', false);\n"],"names":["value","dim","substring","length","sizeTags","nodeDim","node","tag","tagName","x","y","width","context","canvas","height","gradients","gradNode","opacity","ctx","x1","getSize","attrs","get","x2","y1","y2","col","gradient","createLinearGradient","each","child","color","addColorStop","cx","cy","fx","fy","r","Math","max","createRadialGradient","getColor","selector","selectCanvas","rootNode","select","StyleNode","prototype","name","getValue","undefined","window","getComputedStyle","getPropertyValue","g","attr","current","set","deque","Deque","_head","_tail","_length","defineProperty","refChild","_prev","_next","list","push","f","conv","PI","trans","sx","sy","angle","index1","indexOf","index2","s","bits","split","k","scale","translate","_factor","rotate","tagDraws","map","touch","v","root","_touches","_scheduled","timeout","redraw","draw","point","children","countNodes","drawer","factor","stroke","save","globalAlpha","lineCap","lineJoin","globalCompositeOperation","strokeStyle","lineWidth","fill","fillStyle","restore","force","beginPath","closePath","setTransform","clearRect","nodes","NodeIterator","firstChild","nextSibling","parentNode","mouseEvents","canvasListener","event","getContext","_rootElement","canvasNodeListener","canvasPoint","offsetX","offsetY","handler","type","mousemoveEvent","defaultEvent","i","trigger","actives","_activeNodes","newActives","active","listeners","events","j","call","namespace","canvasStyles","CanvasElement","_deque","text","defineProperties","_parent","clientLeft","clientTop","clientWidth","clientHeight","namespaceURI","qualifiedName","insertBefore","Error","removeChild","prepend","remove","class","id","setAttribute","listener","addEventListener","apply","arguments","splice","getBoundingClientRect","getAttribute","removeAttribute","style","ownerDocument","defaultView","document","selections","selectors","iterator","next","classes","sel","join","devicePixelRatio","p","cp","canvasPath","parameters","originalAttr","selection","defaultFactor","selectionAttr","asCanvas","canvasResolution","drawNode","isCanvas","resolution","_parents","pathObject","path","wrapContext","reset","Context","_context","_f","moveTo","lineTo","arc","w","h","rect","cpx","cpy","quadraticCurveTo","cp1x","cp1y","cp2x","cp2y","bezierCurveTo","pts","radius","getRoundedPoints","pt","len","i1","i2","i3","p1","p2","p3","prevPt","nextPt","res","Array","getRoundedPoint","first","total","sqrt","pow","idx","tau","isPointInPath","circle","re","Path2D","multiply","pm","index","result","exec","rx","fontProperties","defaultBaseline","textAlign","size","fontString","middle","textBaseline","fillText","textContent","key","family","font","line"],"mappings":"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"}
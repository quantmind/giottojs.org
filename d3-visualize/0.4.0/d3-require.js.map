{"version":3,"file":"d3-require.js","sources":["../src/require.js"],"sourcesContent":["//\n//  Asynchronous module definitions\nvar queue = [], map = queue.map, some = queue.some, hasOwnProperty = queue.hasOwnProperty;\n\nconst isAbsolute = new RegExp('^([a-z]+://|//)');\nconst libs = new Map;\nconst modules = new Map;\n\n\nfunction urlIsAbsolute (url) {\n    return typeof url === 'string' && isAbsolute.test(url);\n}\n\n\nexport const require = requireFrom(name => {\n    var nameUrl = libs.get(name) || name;\n    if (nameUrl.local) return nameUrl.url;\n    if (urlIsAbsolute(nameUrl)) return nameUrl;\n    return `https://unpkg.com/${name}`;\n});\n\n\nexport function requireFrom(source) {\n\n    function load (name) {\n        var url = source(name + \"\"), module = modules.get(url);\n        if (!module) modules.set(url, module = new Promise(function(resolve, reject) {\n            var script = document.createElement(\"script\");\n            script.onload = function() {\n                if (queue.length !== 1) return reject(new Error(\"invalid module\"));\n                resolve(queue.pop()(load));\n            };\n            script.onerror = function() {\n                reject(new Error(\"unable to load module\"));\n            };\n            script.async = true;\n            script.src = url;\n            window.define = define;\n            document.head.appendChild(script);\n        }));\n        return module;\n    }\n\n    function require (name) {\n        return arguments.length > 1 ? Promise.all(map.call(arguments, load)).then(merge) : load(name);\n    }\n\n    require.libs = libs;\n    require.modules = modules;\n\n    require.local = function (name, url) {\n        libs.set(name, {\n            local: true,\n            url: url\n        });\n    };\n\n    return require;\n}\n\nfunction merge(modules) {\n  var o = {}, i = -1, n = modules.length, m, k;\n  while (++i < n) {\n    for (k in (m = modules[i])) {\n      if (hasOwnProperty.call(m, k)) {\n        if (m[k] == null) Object.defineProperty(o, k, {get: getter(m, k)});\n        else o[k] = m[k];\n      }\n    }\n  }\n  return o;\n}\n\nfunction getter(object, name) {\n  return function() { return object[name]; };\n}\n\nfunction isexports(name) {\n  return (name + \"\") === \"exports\";\n}\n\nfunction define(name, dependencies, factory) {\n  if (arguments.length < 3) factory = dependencies, dependencies = name;\n  if (arguments.length < 2) factory = dependencies, dependencies = [];\n  queue.push(some.call(dependencies, isexports) ? function(require) {\n    var exports = {};\n    return Promise.all(map.call(dependencies, function(name) {\n      return isexports(name += \"\") ? exports : require(name);\n    })).then(function(dependencies) {\n      factory.apply(null, dependencies);\n      return exports;\n    });\n  } : function(require) {\n    return Promise.all(map.call(dependencies, require)).then(function(dependencies) {\n      return typeof factory === \"function\" ? factory.apply(null, dependencies) : factory;\n    });\n  });\n}\n\ndefine.amd = {};\n"],"names":["queue","map","some","hasOwnProperty","isAbsolute","RegExp","libs","Map","modules","urlIsAbsolute","url","test","require","requireFrom","nameUrl","get","name","local","source","load","module","set","Promise","resolve","reject","script","document","createElement","onload","length","Error","pop","onerror","async","src","define","head","appendChild","arguments","all","call","then","merge","o","i","n","m","k","Object","defineProperty","getter","object","isexports","dependencies","factory","push","exports","apply","amd"],"mappings":"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"}
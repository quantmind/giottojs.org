{"version":3,"file":"d3-view.js","sources":["../node_modules/d3-let/src/consts.js","../node_modules/d3-let/src/logger.js","../node_modules/d3-let/src/inspect.js","../node_modules/d3-let/src/pop.js","../node_modules/d3-let/src/map.js","../src/utils/providers.js","../src/utils/warn.js","../src/directives/attr.js","../src/directives/html.js","../node_modules/object-assign/index.js","../src/utils/debounce.js","../src/directives/tags/tag.js","../src/directives/tags/input.js","../src/directives/tags/textarea.js","../src/directives/tags/all.js","../src/directives/value.js","../src/directives/show.js","../src/directives/on.js","../src/core/getdirs.js","../src/utils/slice.js","../src/core/selection.js","../src/parser/jsep.js","../src/parser/eval.js","../src/parser/expression.js","../src/utils/uid.js","../src/utils/sel.js","../src/core/directive.js","../src/utils/select.js","../src/utils/maybeJson.js","../src/utils/html.js","../src/core/component.js","../src/model/dispatch.js","../src/model/as.js","../src/model/get.js","../src/model/set.js","../src/model/on.js","../src/model/update.js","../src/model/setbase.js","../src/model/off.js","../src/model/change.js","../src/model/main.js","../src/core/view.js","../src/directives/for.js","../src/directives/if.js","../src/directives/index.js","../src/main.js","../src/utils/dom.js","../src/forms/providers.js","../src/forms/warn.js","../src/forms/utils.js","../src/forms/field-set.js","../src/forms/field.js","../src/forms/validators.js","../src/forms/field-input.js","../src/forms/field-textarea.js","../src/forms/field-select.js","../src/forms/field-submit.js","../src/forms/responses.js","../src/forms/actions.js","../src/forms/form.js","../src/forms/plugin.js","../src/forms/bootstrap/label.js","../src/forms/bootstrap/form-group.js","../src/forms/bootstrap/input-group.js","../src/forms/bootstrap/submit.js","../src/forms/bootstrap/plugin.js"],"sourcesContent":["export const ostring = Object.prototype.toString;\nexport const inBrowser = typeof window !== 'undefined' && ostring.call(window) !== '[object Object]';\n","import {inBrowser} from './consts';\n\nexport const logger = inBrowser ? window.console : require('console');\n","import {ostring} from './consts';\n\n\nexport function isObject (value) {\n    return ostring.call(value) === '[object Object]';\n}\n\n\nexport function isString (value) {\n    return ostring.call(value) === '[object String]';\n}\n\n\nexport function isFunction (value) {\n    return ostring.call(value) === '[object Function]';\n}\n\n\nexport function isArray (value) {\n    return ostring.call(value) === '[object Array]';\n}\n\n\nexport function isDate (value) {\n    return ostring.call(value) === '[object Date]';\n}\n\n\nexport function isNumber (value) {\n    return ostring.call(value) === '[object Number]';\n}\n\n\nexport function isPromise (value) {\n    return ostring.call(value) === '[object Promise]';\n}\n","import {isObject, isArray} from './inspect';\n\nexport default function (obj, prop) {\n    let value;\n    if (isObject(obj)) {\n        value = obj[prop];\n        delete obj[prop];\n        return value;\n    } else if (isArray(obj)) {\n        var index = +prop;\n        if (index === index) return obj.splice(index, 1)[0];\n        value = obj[prop];\n        delete obj[prop];\n        return value;\n    }\n}\n","const prefix = \"$\";\n\n\nfunction Map () {\n    this._array = [];\n}\n\n\nMap.prototype = map.prototype = {\n    constructor: Map,\n\n    size () {\n        return this._array.length;\n    },\n\n    get (key) {\n        return this[prefix + key];\n    },\n\n    set (key, value) {\n        if (!this.has(key))\n            this._array.push(key);\n        this[prefix + key] = value;\n        return this;\n    },\n\n    has (key) {\n        return (prefix + key) in this;\n    },\n\n    clear () {\n        var self = this;\n        this.each((_, property) => {\n            delete self[prefix + property];\n        });\n        this._array.splice(0);\n    },\n\n    keys () {\n        var entries = [];\n        this.each((_, key) => {\n            entries.push(key);\n        });\n        return entries;\n    },\n\n    values () {\n        var entries = [];\n        this.each((v) => {\n            entries.push(v);\n        });\n        return entries;\n    },\n\n    each (callback) {\n        var a = this._array,\n            key;\n        for (var i=0; i<a.length; ++i) {\n            key = a[i];\n            callback(this.get(key), key, i);\n        }\n    }\n\n};\n\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n      if (f == null) while (++i < n) map.set(i, object[i]);\n      else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {logger, inBrowser} from 'd3-let';\n\nexport default {\n    logger: logger,\n    fetch: fetch(),\n    readyCallbacks: []\n};\n\n\nfunction fetch() {\n    if (inBrowser) return window.fetch;\n}\n","import providers from './providers';\n\nconst prefix = '[d3-view]';\n\n\nexport default function (msg) {\n    providers.logger.warn(`${prefix} ${msg}`);\n}\n","import {isArray} from 'd3-let';\n\nimport warn from '../utils/warn';\n\nconst properties = ['disabled', 'readonly', 'required'];\n\n//\n//  d3-attr-<attr> directive\n//  ==============================\n//\n//  Create a one-way binding between a model and a HTML element attribute\n//\nexport default {\n\n    create: function (expression) {\n        if (!this.arg) return warn('Cannot bind to empty attribute. Specify :<attr-name>');\n        return expression;\n    },\n\n    refresh: function (model, value) {\n        if (this.arg === 'class') return this.refreshClass(value);\n        if (isArray(value)) return warn(`Cannot apply array to attribute ${this.arg}`);\n        if (properties.indexOf(this.arg) > -1) this.sel.property(this.arg, value || null);\n        else this.sel.attr(this.arg, value);\n    },\n\n    refreshClass: function (value) {\n        var sel = this.sel;\n\n        if (!isArray(value)) value = [value];\n\n        if (this.oldValue)\n            this.oldValue.forEach((entry) => {\n                if (entry)\n                    sel.classed(entry, false);\n            });\n\n        this.oldValue = value.map((entry) => {\n            var exist = true;\n            if (isArray(entry)) {\n                exist = entry[1];\n                entry = entry[0];\n            }\n            if (entry)\n                sel.classed(entry, exist);\n            return entry;\n        });\n    }\n\n};\n","import {isString} from 'd3-let';\n//\n//  d3-html\n//  =============\n//  attach html or text to the innerHtml property\n//\n//  Usage:\n//      <div id=\"foo\" d3-html=\"output\"></div>\nexport default {\n\n    refresh: function (model, html) {\n        if (isString(html)) this.sel.html(html);\n    }\n};\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","import {timeout} from 'd3-timer';\n\n//\n// Evaluate a callback (optional) with given delay (optional)\n//\n// if delay is not given or 0, the callback is evaluated at the next tick\n// of the event loop.\n// Calling this method multiple times in the dsame event loop tick produces\n// always the initial promise\nexport default function (callback, delay) {\n    var promise = null;\n\n    return function () {\n        if (promise !== null) return promise;\n        var self = this,\n            args = arguments;\n\n        promise = new Promise((resolve, reject) => {\n\n            timeout(() => {\n                promise = null;\n                try {\n                    resolve(callback ? callback.call(self, ...args) : undefined);\n                } catch (err) {\n                    reject(err);\n                }\n            }, delay);\n        });\n\n        return promise;\n    };\n}\n","import assign from 'object-assign';\nimport {select} from 'd3-selection';\n\nimport debounce from '../../utils/debounce';\n\n\nconst base = {\n\n    on: function (model, attrName) {\n        var refresh = refreshFunction(this, model, attrName);\n\n        // DOM => model binding\n        select(this.el)\n            .on('input', refresh)\n            .on('change', refresh);\n    }\n};\n\n\nexport function createTag (proto) {\n\n    function Tag(el) {\n        this.el = el;\n    }\n\n    Tag.prototype = assign({}, base, proto);\n\n    function tag (el) {\n        var t = new Tag(el);\n\n        Object.defineProperty(t, 'value', {\n            get: function () {\n                return select(t.el).property('value');\n            },\n            set: function (v) {\n                select(t.el).property('value', v);\n            }\n        });\n\n        return t;\n    }\n\n    tag.prototype = Tag.prototype;\n\n    return tag;\n}\n\n\nexport function refreshFunction (dom, model, attrName) {\n\n    return debounce(() => {\n        model.$set(attrName, dom.value);\n    });\n}\n","import {createTag} from './tag';\n\nexport default createTag();\n","import {createTag} from './tag';\n\nexport default createTag();\n","import input from './input';\nimport textarea from './textarea';\n\nexport default {\n    input,\n    textarea\n};\n","import tags from './tags/all';\n\nimport warn from '../utils/warn';\n\n//\n//  d3-value directive\n//  ===================\n//\n//  Two-way data binding for HTML elements supporting the value property\nexport default {\n\n    create: function (expression) {\n        var type = this.sel.attr('type'),\n            tag = this.el.tagName.toLowerCase(),\n            Tag = tags[type] || tags[tag];\n\n        if (!Tag) return warn(`Cannot apply d3-value directive to ${tag}`);\n        this.tag = new Tag(this.el);\n        return expression;\n    },\n\n    mount: function (model) {\n        var expr = this.expression;\n        // TODO: relax this constraint\n        if (expr.parsed.type !== expr.codes.IDENTIFIER)\n            return warn(`d3-value expression support identifiers only, got \"${expr.parsed.type}\": ${this.expression}`);\n        var attrName = this.expression.expr;\n        //\n        // Create the model reactive attribute\n        model.$set(attrName, this.tag.value);\n\n        this.tag.on(model, attrName);\n        return model;\n    },\n\n    refresh: function (model, value) {\n        this.tag.value = value;\n    },\n\n    destroy: function () {\n        this.tag.off();\n    }\n};\n\n\n","//\n//  d3-show\n//  =============\n//  Show or hide an element\n//\nexport default {\n\n    mount: function (model) {\n        this.display = this.sel.style('display');\n        if (!this.display || this.display === 'none') this.display = 'block';\n        return model;\n    },\n\n    refresh: function (model, value) {\n        if (value) this.sel.style('display', this.display);\n        else this.sel.style('display', 'none');\n    }\n};\n","//\n//  d3-on directive\nexport default {\n\n    mount: function (model) {\n        var event = this.arg || 'click',\n            expr = this.expression;\n\n        // DOM event => model binding\n        this.sel.on(`${event}.${this.uid}`, () => {\n            expr.eval(model);\n        });\n    }\n};\n","import {select} from 'd3-selection';\nimport {isPromise} from 'd3-let';\n\nimport warn from '../utils/warn';\n\n// No value, it has its own directive\nconst attributes = ['name', 'class', 'disabled', 'readonly', 'required', 'href'];\n\n\nexport default function (element, directives) {\n    var sel = select(element),\n        dirs = sel.directives();\n    if (dirs) return dirs;\n    dirs = new Directives();\n\n    if (!directives) return dirs;\n\n    for (let i = 0; i < element.attributes.length; ++i) {\n        let attr = element.attributes[i],\n            bits = attr.name.split('-'),\n            arg = bits[2],\n            dirName = bits[0] === 'd3' ? bits[1] : null;\n\n        if (dirName) {\n            if (!arg && attributes.indexOf(dirName) > -1) {\n                arg = dirName;\n                dirName = 'attr';\n            }\n            var directive = directives.get(dirName);\n            if (directive) dirs.add(directive(element, attr, arg));\n            else warn(`${element.tagName} cannot find directive \"${dirName}\". Did you forget to register it?`);\n        }\n        dirs.attrs[attr.name] = attr.value;\n    }\n\n    if (dirs.size()) sel.directives(dirs);\n    return dirs;\n}\n\n\n// Directives container\nfunction Directives () {\n    this.attrs = {};\n    this.all = [];\n}\n\n\nDirectives.prototype = {\n\n    size () {\n        return this.all.length;\n    },\n\n    pop: function (dir) {\n        var index = this.all.indexOf(dir);\n        if (index > -1) {\n            dir.removeAttribute();\n            this.all.splice(index, 1);\n        }\n        return dir;\n    },\n\n    add (dir) {\n        this.all.push(dir);\n    },\n\n    forEach (callback) {\n        this.all.forEach(callback);\n    },\n\n    preMount () {\n        let dir;\n        for (let i=0; i<this.all.length; ++i) {\n            dir = this.all[i];\n            if (dir.preMount()) return this.pop(dir);\n        }\n    },\n\n    execute (model) {\n        if (!this.size()) return;\n        var promises = [];\n        let promise;\n        this.forEach((d) => {\n            promise = d.execute(model);\n            if (isPromise(promise)) promises.push(promise);\n        });\n        if (promises.length)\n            return Promise.all(promises);\n    }\n};\n","export default function (obj, idx=0) {\n    return Array.prototype.slice.call(obj, idx);\n}\n","import {select, selection} from 'd3-selection';\nimport {isPromise} from 'd3-let';\n\nimport getdirs from './getdirs';\nimport slice from '../utils/slice';\n\n\n// Extend selection prototype with new methods\nselection.prototype.mount = mount;\nselection.prototype.view = view;\nselection.prototype.model = model;\nselection.prototype.directives = directives;\n\n\nfunction directives (value) {\n    return arguments.length\n      ? this.property(\"__d3_directives__\", value)\n      : this.node().__d3_directives__;\n}\n\n\nfunction model () {\n    var vm = this.view();\n    return vm ? vm.model : null;\n}\n\n\nfunction view (value) {\n    if (arguments.length) {\n        return this.property(\"__d3_view__\", value);\n    } else {\n        var element = this.node(),\n            view = element.__d3_view__,\n            parent = element.parentNode;\n\n        while (parent && !view) {\n            view = parent.__d3_view__;\n            parent = parent.parentNode;\n        }\n        return view;\n    }\n}\n\n//\n// mount function on a d3 selection\n// Use this function to mount the selection\n// Return nothing or a promise\nfunction mount (data) {\n    var promises = [];\n    let promise;\n    this.each(function () {\n        var view = select(this).view();\n        if (view) {\n            promise = mountElement(this, view, data);\n            if (isPromise(promise)) promises.push(promise);\n        }\n    });\n    if (promises.length)\n        return Promise.all(promises);\n}\n\n\n// mount an element into a given model\nfunction mountElement (element, vm, data) {\n    var component = vm.components.get(element.tagName.toLowerCase()),\n        directives = getdirs(element, vm.directives),\n        preMount = directives.preMount();\n\n    if (preMount)\n        return preMount.execute(vm.model);\n    else {\n        let promise;\n        if (component) {\n            vm = component({parent: vm});\n            promise = vm.mount(element, data);\n        } else {\n            var promises = [],\n                children = slice(element.children);\n            for (let i=0; i<children.length; ++i) {\n                promise = mountElement(children[i], vm, data);\n                if (isPromise(promise)) promises.push(promise);\n            }\n            if (promises.length)\n                promise = Promise.all(promises);\n        }\n\n        if (isPromise(promise))\n            return promise.then(() => {\n                return directives.execute(vm.model);\n            });\n        else\n            return directives.execute(vm.model);\n    }\n}\n","// Code originally from https://github.com/soney/jsep\n// Copyright (c) 2013 Stephen Oney, http://jsep.from.so/\n\n// This is the full set of types that any JSEP node can be.\n// Store them here to save space when minified\nexport const code = {\n    COMPOUND: 'Compound',\n    IDENTIFIER: 'Identifier',\n    MEMBER_EXP: 'MemberExpression',\n    LITERAL: 'Literal',\n    THIS_EXP: 'ThisExpression',\n    CALL_EXP: 'CallExpression',\n    UNARY_EXP: 'UnaryExpression',\n    BINARY_EXP: 'BinaryExpression',\n    LOGICAL_EXP: 'LogicalExpression',\n    CONDITIONAL_EXP: 'ConditionalExpression',\n    ARRAY_EXP: 'ArrayExpression'\n};\n\nvar PERIOD_CODE = 46, // '.'\n    COMMA_CODE  = 44, // ','\n    SQUOTE_CODE = 39, // single quote\n    DQUOTE_CODE = 34, // double quotes\n    OPAREN_CODE = 40, // (\n    CPAREN_CODE = 41, // )\n    OBRACK_CODE = 91, // [\n    CBRACK_CODE = 93, // ]\n    QUMARK_CODE = 63, // ?\n    SEMCOL_CODE = 59, // ;\n    COLON_CODE  = 58, // :\n\n    throwError = function(message, index) {\n        var error = new Error(message + ' at character ' + index);\n        error.index = index;\n        error.description = message;\n        throw error;\n    },\n\n// Operations\n// ----------\n\n// Set `t` to `true` to save space (when minified, not gzipped)\n    t = true,\n// Use a quickly-accessible map to store all of the unary operators\n// Values are set to `true` (it really doesn't matter)\n    unary_ops = {'-': t, '!': t, '~': t, '+': t},\n// Also use a map for the binary operations but set their values to their\n// binary precedence for quick reference:\n// see [Order of operations](http://en.wikipedia.org/wiki/Order_of_operations#Programming_language)\n    binary_ops = {\n        '||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\n        '==': 6, '!=': 6, '===': 6, '!==': 6,\n        '<': 7,  '>': 7,  '<=': 7,  '>=': 7,\n        '<<':8,  '>>': 8, '>>>': 8,\n        '+': 9, '-': 9,\n        '*': 10, '/': 10, '%': 10\n    },\n// Get return the longest key length of any object\n    getMaxKeyLen = function(obj) {\n        var max_len = 0, len;\n        for(var key in obj) {\n            if((len = key.length) > max_len && obj.hasOwnProperty(key)) {\n                max_len = len;\n            }\n        }\n        return max_len;\n    },\n    max_unop_len = getMaxKeyLen(unary_ops),\n    max_binop_len = getMaxKeyLen(binary_ops),\n// Literals\n// ----------\n// Store the values to return for the various literals we may encounter\n    literals = {\n        'true': true,\n        'false': false,\n        'null': null\n    },\n// Except for `this`, which is special. This could be changed to something like `'self'` as well\n    this_str = 'this',\n// Returns the precedence of a binary operator or `0` if it isn't a binary operator\n    binaryPrecedence = function(op_val) {\n        return binary_ops[op_val] || 0;\n    },\n// Utility function (gets called from multiple places)\n// Also note that `a && b` and `a || b` are *logical* expressions, not binary expressions\n    createBinaryExpression = function (operator, left, right) {\n        var type = (operator === '||' || operator === '&&') ? code.LOGICAL_EXP : code.BINARY_EXP;\n        return {\n            type: type,\n            operator: operator,\n            left: left,\n            right: right\n        };\n    },\n    // `ch` is a character code in the next three functions\n    isDecimalDigit = function(ch) {\n        return (ch >= 48 && ch <= 57); // 0...9\n    },\n    isIdentifierStart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n    isIdentifierPart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 48 && ch <= 57) || // 0...9\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n\n    // Parsing\n    // -------\n    // `expr` is a string with the passed in expression\n    jsep = function(expr) {\n        // `index` stores the character number we are currently at while `length` is a constant\n        // All of the gobbles below will modify `index` as we move along\n        var index = 0,\n            charAtFunc = expr.charAt,\n            charCodeAtFunc = expr.charCodeAt,\n            exprI = function(i) { return charAtFunc.call(expr, i); },\n            exprICode = function(i) { return charCodeAtFunc.call(expr, i); },\n            length = expr.length,\n\n            // Push `index` up to the next non-space character\n            gobbleSpaces = function() {\n                var ch = exprICode(index);\n                // space or tab\n                while(ch === 32 || ch === 9) {\n                    ch = exprICode(++index);\n                }\n            },\n\n            // The main parsing function. Much of this code is dedicated to ternary expressions\n            gobbleExpression = function() {\n                var test = gobbleBinaryExpression(),\n                    consequent, alternate;\n                gobbleSpaces();\n                if(exprICode(index) === QUMARK_CODE) {\n                    // Ternary expression: test ? consequent : alternate\n                    index++;\n                    consequent = gobbleExpression();\n                    if(!consequent) {\n                        throwError('Expected expression', index);\n                    }\n                    gobbleSpaces();\n                    if(exprICode(index) === COLON_CODE) {\n                        index++;\n                        alternate = gobbleExpression();\n                        if(!alternate) {\n                            throwError('Expected expression', index);\n                        }\n                        return {\n                            type: code.CONDITIONAL_EXP,\n                            test: test,\n                            consequent: consequent,\n                            alternate: alternate\n                        };\n                    } else {\n                        throwError('Expected :', index);\n                    }\n                } else {\n                    return test;\n                }\n            },\n\n            // Search for the operation portion of the string (e.g. `+`, `===`)\n            // Start by taking the longest possible binary operations (3 characters: `===`, `!==`, `>>>`)\n            // and move down from 3 to 2 to 1 character until a matching binary operation is found\n            // then, return that binary operation\n            gobbleBinaryOp = function() {\n                gobbleSpaces();\n                var to_check = expr.substr(index, max_binop_len), tc_len = to_check.length;\n                while(tc_len > 0) {\n                    if(binary_ops.hasOwnProperty(to_check)) {\n                        index += tc_len;\n                        return to_check;\n                    }\n                    to_check = to_check.substr(0, --tc_len);\n                }\n                return false;\n            },\n\n            // This function is responsible for gobbling an individual expression,\n            // e.g. `1`, `1+2`, `a+(b*2)-Math.sqrt(2)`\n            gobbleBinaryExpression = function() {\n                var node, biop, prec, stack, biop_info, left, right, i;\n\n                // First, try to get the leftmost thing\n                // Then, check to see if there's a binary operator operating on that leftmost thing\n                left = gobbleToken();\n                biop = gobbleBinaryOp();\n\n                // If there wasn't a binary operator, just return the leftmost node\n                if(!biop) {\n                    return left;\n                }\n\n                // Otherwise, we need to start a stack to properly place the binary operations in their\n                // precedence structure\n                biop_info = { value: biop, prec: binaryPrecedence(biop)};\n\n                right = gobbleToken();\n                if(!right) {\n                    throwError(\"Expected expression after \" + biop, index);\n                }\n                stack = [left, biop_info, right];\n\n                // Properly deal with precedence using [recursive descent](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)\n                while((biop = gobbleBinaryOp())) {\n                    prec = binaryPrecedence(biop);\n\n                    if(prec === 0) {\n                        break;\n                    }\n                    biop_info = { value: biop, prec: prec };\n\n                    // Reduce: make a binary expression from the three topmost entries.\n                    while ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\n                        right = stack.pop();\n                        biop = stack.pop().value;\n                        left = stack.pop();\n                        node = createBinaryExpression(biop, left, right);\n                        stack.push(node);\n                    }\n\n                    node = gobbleToken();\n                    if(!node) {\n                        throwError(\"Expected expression after \" + biop, index);\n                    }\n                    stack.push(biop_info, node);\n                }\n\n                i = stack.length - 1;\n                node = stack[i];\n                while(i > 1) {\n                    node = createBinaryExpression(stack[i - 1].value, stack[i - 2], node);\n                    i -= 2;\n                }\n                return node;\n            },\n\n            // An individual part of a binary expression:\n            // e.g. `foo.bar(baz)`, `1`, `\"abc\"`, `(a % 2)` (because it's in parenthesis)\n            gobbleToken = function() {\n                var ch, to_check, tc_len;\n\n                gobbleSpaces();\n                ch = exprICode(index);\n\n                if(isDecimalDigit(ch) || ch === PERIOD_CODE) {\n                    // Char code 46 is a dot `.` which can start off a numeric literal\n                    return gobbleNumericLiteral();\n                } else if(ch === SQUOTE_CODE || ch === DQUOTE_CODE) {\n                    // Single or double quotes\n                    return gobbleStringLiteral();\n                } else if(isIdentifierStart(ch) || ch === OPAREN_CODE) { // open parenthesis\n                    // `foo`, `bar.baz`\n                    return gobbleVariable();\n                } else if (ch === OBRACK_CODE) {\n                    return gobbleArray();\n                } else {\n                    to_check = expr.substr(index, max_unop_len);\n                    tc_len = to_check.length;\n                    while(tc_len > 0) {\n                        if(unary_ops.hasOwnProperty(to_check)) {\n                            index += tc_len;\n                            return {\n                                type: code.UNARY_EXP,\n                                operator: to_check,\n                                argument: gobbleToken(),\n                                prefix: true\n                            };\n                        }\n                        to_check = to_check.substr(0, --tc_len);\n                    }\n\n                    return false;\n                }\n            },\n            // Parse simple numeric literals: `12`, `3.4`, `.5`. Do this by using a string to\n            // keep track of everything in the numeric literal and then calling `parseFloat` on that string\n            gobbleNumericLiteral = function() {\n                var number = '', ch, chCode;\n                while(isDecimalDigit(exprICode(index))) {\n                    number += exprI(index++);\n                }\n\n                if(exprICode(index) === PERIOD_CODE) { // can start with a decimal marker\n                    number += exprI(index++);\n\n                    while(isDecimalDigit(exprICode(index))) {\n                        number += exprI(index++);\n                    }\n                }\n\n                ch = exprI(index);\n                if(ch === 'e' || ch === 'E') { // exponent marker\n                    number += exprI(index++);\n                    ch = exprI(index);\n                    if(ch === '+' || ch === '-') { // exponent sign\n                        number += exprI(index++);\n                    }\n                    while(isDecimalDigit(exprICode(index))) { //exponent itself\n                        number += exprI(index++);\n                    }\n                    if(!isDecimalDigit(exprICode(index-1)) ) {\n                        throwError('Expected exponent (' + number + exprI(index) + ')', index);\n                    }\n                }\n\n\n                chCode = exprICode(index);\n                // Check to make sure this isn't a variable name that start with a number (123abc)\n                if(isIdentifierStart(chCode)) {\n                    throwError('Variable names cannot start with a number (' +\n                                number + exprI(index) + ')', index);\n                } else if(chCode === PERIOD_CODE) {\n                    throwError('Unexpected period', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: parseFloat(number),\n                    raw: number\n                };\n            },\n\n            // Parses a string literal, staring with single or double quotes with basic support for escape codes\n            // e.g. `\"hello world\"`, `'this is\\nJSEP'`\n            gobbleStringLiteral = function() {\n                var str = '', quote = exprI(index++), closed = false, ch;\n\n                while(index < length) {\n                    ch = exprI(index++);\n                    if(ch === quote) {\n                        closed = true;\n                        break;\n                    } else if(ch === '\\\\') {\n                        // Check for all of the common escape codes\n                        ch = exprI(index++);\n                        switch(ch) {\n                            case 'n': str += '\\n'; break;\n                            case 'r': str += '\\r'; break;\n                            case 't': str += '\\t'; break;\n                            case 'b': str += '\\b'; break;\n                            case 'f': str += '\\f'; break;\n                            case 'v': str += '\\x0B'; break;\n                            default : str += '\\\\' + ch;\n                        }\n                    } else {\n                        str += ch;\n                    }\n                }\n\n                if(!closed) {\n                    throwError('Unclosed quote after \"'+str+'\"', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: str,\n                    raw: quote + str + quote\n                };\n            },\n\n            // Gobbles only identifiers\n            // e.g.: `foo`, `_value`, `$x1`\n            // Also, this function checks if that identifier is a literal:\n            // (e.g. `true`, `false`, `null`) or `this`\n            gobbleIdentifier = function() {\n                var ch = exprICode(index), start = index, identifier;\n\n                if(isIdentifierStart(ch)) {\n                    index++;\n                } else {\n                    throwError('Unexpected ' + exprI(index), index);\n                }\n\n                while(index < length) {\n                    ch = exprICode(index);\n                    if(isIdentifierPart(ch)) {\n                        index++;\n                    } else {\n                        break;\n                    }\n                }\n                identifier = expr.slice(start, index);\n\n                if(literals.hasOwnProperty(identifier)) {\n                    return {\n                        type: code.LITERAL,\n                        value: literals[identifier],\n                        raw: identifier\n                    };\n                } else if(identifier === this_str) {\n                    return { type: code.THIS_EXP };\n                } else {\n                    return {\n                        type: code.IDENTIFIER,\n                        name: identifier\n                    };\n                }\n            },\n\n            // Gobbles a list of arguments within the context of a function call\n            // or array literal. This function also assumes that the opening character\n            // `(` or `[` has already been gobbled, and gobbles expressions and commas\n            // until the terminator character `)` or `]` is encountered.\n            // e.g. `foo(bar, baz)`, `my_func()`, or `[bar, baz]`\n            gobbleArguments = function(termination) {\n                var ch_i, args = [], node, closed = false;\n                while(index < length) {\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                    if(ch_i === termination) { // done parsing\n                        closed = true;\n                        index++;\n                        break;\n                    } else if (ch_i === COMMA_CODE) { // between expressions\n                        index++;\n                    } else {\n                        node = gobbleExpression();\n                        if(!node || node.type === code.COMPOUND) {\n                            throwError('Expected comma', index);\n                        }\n                        args.push(node);\n                    }\n                }\n                if (!closed) {\n                    throwError('Expected ' + String.fromCharCode(termination), index);\n                }\n                return args;\n            },\n\n            // Gobble a non-literal variable name. This variable name may include properties\n            // e.g. `foo`, `bar.baz`, `foo['bar'].baz`\n            // It also gobbles function calls:\n            // e.g. `Math.acos(obj.angle)`\n            gobbleVariable = function() {\n                var ch_i, node;\n                ch_i = exprICode(index);\n\n                if(ch_i === OPAREN_CODE) {\n                    node = gobbleGroup();\n                } else {\n                    node = gobbleIdentifier();\n                }\n                gobbleSpaces();\n                ch_i = exprICode(index);\n                while(ch_i === PERIOD_CODE || ch_i === OBRACK_CODE || ch_i === OPAREN_CODE) {\n                    index++;\n                    if(ch_i === PERIOD_CODE) {\n                        gobbleSpaces();\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: false,\n                            object: node,\n                            property: gobbleIdentifier()\n                        };\n                    } else if(ch_i === OBRACK_CODE) {\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: true,\n                            object: node,\n                            property: gobbleExpression()\n                        };\n                        gobbleSpaces();\n                        ch_i = exprICode(index);\n                        if(ch_i !== CBRACK_CODE) {\n                            throwError('Unclosed [', index);\n                        }\n                        index++;\n                    } else if(ch_i === OPAREN_CODE) {\n                        // A function call is being made; gobble all the arguments\n                        node = {\n                            type: code.CALL_EXP,\n                            'arguments': gobbleArguments(CPAREN_CODE),\n                            callee: node\n                        };\n                    }\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                }\n                return node;\n            },\n\n            // Responsible for parsing a group of things within parentheses `()`\n            // This function assumes that it needs to gobble the opening parenthesis\n            // and then tries to gobble everything within that parenthesis, assuming\n            // that the next thing it should see is the close parenthesis. If not,\n            // then the expression probably doesn't have a `)`\n            gobbleGroup = function() {\n                index++;\n                var node = gobbleExpression();\n                gobbleSpaces();\n                if(exprICode(index) === CPAREN_CODE) {\n                    index++;\n                    return node;\n                } else {\n                    throwError('Unclosed (', index);\n                }\n            },\n\n            // Responsible for parsing Array literals `[1, 2, 3]`\n            // This function assumes that it needs to gobble the opening bracket\n            // and then tries to gobble the expressions as arguments.\n            gobbleArray = function() {\n                index++;\n                return {\n                    type: code.ARRAY_EXP,\n                    elements: gobbleArguments(CBRACK_CODE)\n                };\n            },\n\n            nodes = [], ch_i, node;\n\n        while(index < length) {\n            ch_i = exprICode(index);\n\n            // Expressions can be separated by semicolons, commas, or just inferred without any\n            // separators\n            if(ch_i === SEMCOL_CODE || ch_i === COMMA_CODE) {\n                index++; // ignore separators\n            } else {\n                // Try to gobble each expression individually\n                if((node = gobbleExpression())) {\n                    nodes.push(node);\n                // If we weren't able to find a binary expression and are out of room, then\n                // the expression passed in probably has too much\n                } else if(index < length) {\n                    throwError('Unexpected \"' + exprI(index) + '\"', index);\n                }\n            }\n        }\n\n        // If there's only one expression just try returning the expression\n        if(nodes.length === 1) {\n            return nodes[0];\n        } else {\n            return {\n                type: code.COMPOUND,\n                body: nodes\n            };\n        }\n    };\n\n\n/**\n * @method jsep.addUnaryOp\n * @param {string} op_name The name of the unary op to add\n * @return jsep\n */\njsep.addUnaryOp = function(op_name) {\n    max_unop_len = Math.max(op_name.length, max_unop_len);\n    unary_ops[op_name] = t; return this;\n};\n\n/**\n * @method jsep.addBinaryOp\n * @param {string} op_name The name of the binary op to add\n * @param {number} precedence The precedence of the binary op (can be a float)\n * @return jsep\n */\njsep.addBinaryOp = function(op_name, precedence) {\n    max_binop_len = Math.max(op_name.length, max_binop_len);\n    binary_ops[op_name] = precedence;\n    return this;\n};\n\n/**\n * @method jsep.addLiteral\n * @param {string} literal_name The name of the literal to add\n * @param {*} literal_value The value of the literal\n * @return jsep\n */\njsep.addLiteral = function(literal_name, literal_value) {\n    literals[literal_name] = literal_value;\n    return this;\n};\n\n/**\n * @method jsep.removeUnaryOp\n * @param {string} op_name The name of the unary op to remove\n * @return jsep\n */\njsep.removeUnaryOp = function(op_name) {\n    delete unary_ops[op_name];\n    if(op_name.length === max_unop_len) {\n        max_unop_len = getMaxKeyLen(unary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeBinaryOp\n * @param {string} op_name The name of the binary op to remove\n * @return jsep\n */\njsep.removeBinaryOp = function(op_name) {\n    delete binary_ops[op_name];\n    if(op_name.length === max_binop_len) {\n        max_binop_len = getMaxKeyLen(binary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeLiteral\n * @param {string} literal_name The name of the literal to remove\n * @return jsep\n */\njsep.removeLiteral = function(literal_name) {\n    delete literals[literal_name];\n    return this;\n};\n\n\nexport default jsep;\n","import {set} from 'd3-collection';\n\nimport {code} from './jsep';\n\n\nexport function evaluate (self, expr) {\n\n    switch(expr.type) {\n        case code.IDENTIFIER: return self[expr.name];\n        case code.LITERAL: return expr.value;\n        case code.ARRAY_EXP: return expr.elements.map((elem) => {return evaluate(self, elem);});\n        case code.LOGICAL_EXP:\n        case code.BINARY_EXP: return binaryExp(expr.operator, evaluate(self, expr.left), evaluate(self, expr.right));\n        case code.CALL_EXP: return callExpression(self, expr.callee, expr.arguments);\n        case code.MEMBER_EXP: return evaluate(evaluate(self, expr.object), expr.property);\n        case code.CONDITIONAL_EXP: return evaluate(self, expr.test) ? evaluate(self, expr.consequent) : evaluate(self, expr.alternate);\n        case code.UNARY_EXP: return unaryExp(expr.operator, evaluate(self, expr.argument));\n    }\n}\n\nexport function identifiers (expr, all) {\n    if (arguments.length === 1) all = set();\n    switch(expr.type) {\n        case code.IDENTIFIER: all.add(expr.name); break;\n        case code.ARRAY_EXP: expr.elements.forEach((elem) => {identifiers(elem, all);}); break;\n        case code.BINARY_EXP: identifiers(expr.left, all); identifiers(expr.right, all); break;\n        case code.CALL_EXP: identifiers(expr.arguments, all); break;\n        case code.MEMBER_EXP: identifiers(expr.object, all); break;\n        case code.CONDITIONAL_EXP: identifiers(expr.test, all); identifiers(expr.consequent, all); evaluate(expr.alternate, all); break;\n    }\n    return all;\n}\n\n\n\nfunction callExpression (self, callee, args) {\n    var func;\n\n    args = args.map((arg) => {\n        return evaluate(self, arg);\n    });\n\n    if (callee.type !== code.IDENTIFIER) {\n        self = evaluate(self, callee.object);\n        callee = callee.property;\n    }\n\n    func = self[callee.name];\n    if (!func)\n        throw new EvalError(`callable \"${callee.name}\" not found in context`);\n    return func.apply(self, args);\n}\n\n\nfunction unaryExp (op, arg) {\n    if (!unaryFunctions[op])\n        unaryFunctions[op] = new Function(\"arg\", `return ${op} arg`);\n    return unaryFunctions[op](arg);\n}\n\n\nfunction binaryExp(op, a, b) {\n    if (!binaryFunctions[op])\n        binaryFunctions[op] = new Function(\"a\", \"b\", `return a ${op} b`);\n    return binaryFunctions[op](a, b);\n}\n\n\nconst unaryFunctions = {};\nconst binaryFunctions = {};\n","// tiny javascript expression parser\nimport jsep, {code} from './jsep';\nimport {evaluate, identifiers} from './eval';\nimport warn from '../utils/warn';\n\n\nconst proto = {\n\n    eval: function (model) {\n        return evaluate(model, this.parsed);\n    },\n\n    safeEval: function (model) {\n        try {\n            return evaluate(model, this.parsed);\n        } catch (msg) {\n            warn(`Could not evaluate <<${this.expr}>> expression: ${msg}`);\n        }\n    },\n\n    identifiers: function () {\n        return identifiers(this.parsed).values();\n    }\n};\n\n\nfunction Expression (expr) {\n    this.codes = code;\n    this.expr = expr;\n    this.parsed = jsep(expr);\n}\n\nExpression.prototype = proto;\n\n\nexport default function (expr) {\n    return new Expression(expr);\n}\n","let UID = 0;\nconst prefix = 'd3v';\n\n// Add a unique identifier to an object\nexport default function (o) {\n    var uid = prefix + (++UID);\n\n    if (arguments.length) {\n        Object.defineProperty(o, 'uid', {\n            get: function () {\n                return uid;\n            }\n        });\n\n        return o;\n    } else\n        return uid;\n}\n","import {select} from 'd3-selection';\n\n\nexport default function (o) {\n\n    Object.defineProperty(o, 'sel', {\n        get: function () {\n            return select(this.el);\n        }\n    });\n\n    return o;\n}\n","import assign from 'object-assign';\n\nimport viewExpression from '../parser/expression';\nimport warn from '../utils/warn';\nimport uid from '../utils/uid';\nimport sel from '../utils/sel';\n\n//\n// Directive Prototype\n//\n// Directives are special attributes with the d3- prefix.\n// Directive attribute values are expected to be binding expressions.\n// A directiveâ€™s job is to reactively apply special behavior to the DOM\n// when the value of its expression changes.\n//\n// A directive can implement one or more of the directive methods:\n//\n//  * create\n//  * mount\n//  * refresh\n//  * destroy\n//\nconst prototype = {\n    priority: 1,\n\n    // hooks\n    create (expression) {\n        return expression;\n    },\n\n    // pre mount\n    preMount () {\n\n    },\n\n    mount (model) {\n        return model;\n    },\n\n    refresh () {\n\n    },\n\n    destroy () {\n\n    },\n\n    removeAttribute () {\n        this.el.removeAttribute(this.name);\n    },\n\n    // Execute directive\n    execute (model) {\n        // No binding expression - nothing to do\n        if (!this.expression) return;\n        this.removeAttribute();\n\n        model = this.mount(model);\n        // No model returned - abort execution\n        if (!model) return;\n\n        var dir = this,\n            sel = this.sel,\n            refresh = function () {\n                try {\n                    dir.refresh(model, dir.expression.eval(model));\n                } catch (msg) {\n                    warn(`Error while refreshing \"${dir.name}\" directive: ${msg}`);\n                }\n            };\n\n        // Bind expression identifiers with model\n        this.identifiers = this.expression.identifiers().map((id) => {\n            var event = `${id}.${dir.uid}`;\n            model.$on(event, refresh);\n            return id;\n        });\n\n        sel.on(`remove.${dir.uid}`, () => {\n            this.identifiers.forEach((id) => {\n                model.$off(`${id}.${dir.uid}`);\n            });\n            dir.destroy(model);\n        });\n\n        refresh();\n    }\n};\n\n// Directive constructor\nexport default function (obj) {\n\n    function Directive (el, attr, arg) {\n        this.el = el;\n        this.name = attr.name;\n        this.arg = arg;\n        var expr = sel(uid(this)).create(attr.value);\n        if (expr) this.expression = viewExpression(expr);\n    }\n\n    Directive.prototype = assign({}, prototype, obj);\n\n    function directive (el, attr, arg) {\n        return new Directive(el, attr, arg);\n    }\n\n    directive.prototype = Directive.prototype;\n    return directive;\n}\n","import {isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\n\nexport default function (el) {\n    if (el && !isFunction(el.size)) return select(el);\n    return el;\n}\n","import {isString} from 'd3-let';\n\nexport default function (value) {\n    if (isString(value)) {\n        try {\n            return JSON.parse(value);\n        } catch (msg) {\n            return value;\n        }\n    }\n    return value;\n}\n","import {inBrowser, isString} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport warn from './warn';\n\n\n// require handlebar\nexport function compile (text) {\n    var handlebars = inBrowser ? window.handlebars : require('handlebars');\n    if (handlebars) return handlebars.compile(text);\n    warn('compile function requires handlebars');\n}\n\n\nexport function html (source, context) {\n    if (isString(source)) {\n        if (context) {\n            var s = compile(source);\n            if (!s) return source;\n        }\n        else\n            return source;\n    }\n    return source(context);\n}\n\n\nexport function htmlElement (source, context) {\n    var el = select(document.createElement('div'));\n    el.html(html(source, context));\n    var children = el.node().children;\n    if (children.length !== 1) warn(`HtmlElement function should return one root element only, got ${children.length}`);\n    return children[0];\n}\n","import assign from 'object-assign';\nimport {isFunction, isArray, isPromise, isString, pop} from 'd3-let';\nimport {select} from 'd3-selection';\nimport {map} from 'd3-collection';\nimport {dispatch} from 'd3-dispatch';\n\nimport createDirective from './directive';\nimport warn from '../utils/warn';\nimport asSelect from '../utils/select';\nimport providers from '../utils/providers';\nimport maybeJson from '../utils/maybeJson';\nimport sel from '../utils/sel';\nimport {htmlElement} from '../utils/html';\n\n\n// prototype for both views and components\nexport const protoComponent = {\n    isd3: true,\n    providers: providers,\n    htmlElement: htmlElement,\n    // same as export\n    viewElement: htmlElement,\n    createElement (tag) {\n        return select(document.createElement(tag));\n    },\n    responseError (response) {\n        var self = this;\n        response.json().then((data) => {\n            self.error(data, response);\n        });\n    },\n    error (data) {\n        data.level = 'error';\n        this.message(data);\n    },\n    message (data) {\n        var self = this;\n        this.root.events.call('message', self, data);\n    },\n\n    // Shortcut for fetch function in providers\n    fetch (url, options) {\n        var fetch = providers.fetch;\n        return arguments.length == 1 ? fetch(url) : fetch(url, options);\n    },\n\n    //\n    // render a template from a url\n    renderFromUrl (url) {\n        var cache = this.cache;\n        if (url in cache)\n            return new Promise((resolve) => resolve(htmlElement(cache[url])));\n        return this.fetch(url).then(response => response.text()).then(template => {\n            cache[url] = template;\n            return htmlElement(template);\n        });\n    },\n    //\n    // hooks\n    init () {},\n    render () {},\n    mounted () {},\n    //\n    mount: function (el, data) {\n        if (mounted(this)) warn('already mounted');\n        else {\n            var sel = select(el),\n                directives = sel.directives(),\n                dattrs = directives ? directives.attrs : attributes(el),\n                model = this.parent.model.$child(this.model);\n\n            data = assign({}, sel.datum(), data);\n\n            this.model = model;\n\n            if (isArray(this.props)) {\n                var key, value;\n                this.props.forEach((prop) => {\n                    key = data[prop] === undefined ? dattrs[prop] : data[prop];\n                    if (isString(key)) {\n                        if (model[key]) value = model[key];\n                        else value = maybeJson(key);\n                    } else\n                        value = key;\n                    if (value !== undefined) data[prop] = value;\n                });\n            }\n            //\n            // create the new element from the render function\n            var newEl = this.render(data, dattrs);\n            if (isPromise(newEl)) {\n                var self = this;\n                return newEl.then((element) => {\n                    return compile(self, el, element);\n                });\n            }\n            else\n                return compile(this, el, newEl);\n        }\n    }\n};\n\n// factory of View and Component constructors\nexport function createComponent (o, prototype, coreDirectives) {\n    if (isFunction(o)) o = {render: o};\n\n    var obj = assign({}, o),\n        classComponents = extendComponents(map(), pop(obj, 'components')),\n        classDirectives = extendDirectives(map(), pop(obj, 'directives')),\n        model = pop(obj, 'model'),\n        props = pop(obj, 'props');\n\n    function Component (options) {\n        var parent = pop(options, 'parent'),\n            components = map(parent ? parent.components : null),\n            directives = map(parent ? parent.directives : coreDirectives),\n            events = dispatch('message', 'mounted'),\n            cache = {};\n\n        classComponents.each((comp, key) => {\n            components.set(key, comp);\n        });\n        classDirectives.each((comp, key) => {\n            directives.set(key, comp);\n        });\n        extendComponents(components, pop(options, 'components'));\n        extendDirectives(directives, pop(options, 'directives'));\n\n        Object.defineProperties(this, {\n            components: {\n                get: function () {\n                    return components;\n                }\n            },\n            directives: {\n                get: function () {\n                    return directives;\n                }\n            },\n            parent: {\n                get: function () {\n                    return parent;\n                }\n            },\n            root: {\n                get: function () {\n                    return parent ? parent.root : this;\n                }\n            },\n            cache: {\n                get: function () {\n                    return parent ? parent.cache : cache;\n                }\n            },\n            props: {\n                get: function () {\n                    return props;\n                }\n            },\n            uid: {\n                get: function () {\n                    return this.model.uid;\n                }\n            },\n            events: {\n                get: function () {\n                    return events;\n                }\n            }\n        });\n        this.model = assign({}, isFunction(model) ? model() : model, pop(options, 'model'));\n        this.init(options);\n    }\n\n    Component.prototype = assign({}, prototype, obj);\n\n    function component (options) {\n        return new Component(options);\n    }\n\n    component.prototype = Component.prototype;\n\n    return component;\n}\n\n\nexport function mounted (view) {\n    var mounted = view.isMounted;\n    if (!mounted)\n        Object.defineProperty(view, 'isMounted', {\n            get: function () {\n                return true;\n            }\n        });\n    return mounted;\n}\n\n\nexport function extendComponents (container, components) {\n    map(components).each((obj, key) => {\n        container.set(key, createComponent(obj, protoComponent));\n    });\n    return container;\n}\n\nexport function extendDirectives (container, directives) {\n    map(directives).each((obj, key) => {\n        container.set(key, createDirective(obj));\n    });\n    return container;\n}\n\n// Finalise the binding between the view and the model\n// inject the model into the view element\n// call the mounted hook and can return a Promise\nexport function asView(vm, element) {\n    Object.defineProperty(sel(vm), 'el', {\n        get: function () {\n            return element;\n        }\n    });\n    // Apply model to element and mount\n    var p = select(element).view(vm).mount();\n    if (isPromise(p))\n        return p.then(() => {\n            return vm.mounted();\n        });\n    else\n        return vm.mounted();\n}\n\n\n// Compile a component model\n// This function is called once a component has rendered the component element\nfunction compile (cm, el, element) {\n    if (!element) return warn('render function must return a single HTML node. It returned nothing!');\n    element = asSelect(element);\n    if (element.size() !== 1) warn('render function must return a single HTML node');\n    element = element.node();\n    //\n    // Insert before the component element\n    el.parentNode.insertBefore(element, el);\n    // remove the component element\n    select(el).remove();\n    //\n    return asView(cm, element);\n}\n\n\nfunction attributes (element) {\n    var attrs = {};\n    let attr;\n    for (let i = 0; i < element.attributes.length; ++i) {\n        attr = element.attributes[i];\n        attrs[attr.name] = attr.value;\n    }\n    return attrs;\n}\n","import {dispatch} from 'd3-dispatch';\n\nimport debounce from '../utils/debounce';\n\n\nexport default function () {\n    var events = dispatch('change'),\n        triggered = 0;\n\n    return {\n        on (typename, callback) {\n            if (arguments.length < 2)\n                return events.on(typename);\n            events.on(typename, callback);\n            return this;\n        },\n        trigger: debounce(function () {\n            events.apply('change', this, arguments);\n            triggered +=1;\n        }),\n        triggered () {\n            return triggered;\n        }\n    };\n}\n","import {map} from 'd3-collection';\n\nimport uid from '../utils/uid';\nimport ddispatch from './dispatch';\n\n//\n// Initialise a model\nexport default function asModel (model, initials) {\n    var events = map(),\n        children = [],\n        Child = null;\n\n    // event handler for any change in the model\n    events.set('', ddispatch());\n\n    Object.defineProperties(uid(model), {\n        $events: {\n            get: function () {\n                return events;\n            }\n        },\n        $children: {\n            get: function () {\n                return children;\n            }\n        }\n    });\n    model.$child = $child;\n    model.$update(initials);\n\n    function $child (o) {\n        if (Child === null) Child = createChildConstructor(model);\n        return new Child(o);\n    }\n}\n\nfunction createChildConstructor (model) {\n\n    function Child (initials) {\n        asModel(this, initials);\n        model.$children.push(this);\n        Object.defineProperty(this, 'parent', {\n            get: function () {\n                return model;\n            }\n        });\n    }\n\n    Child.prototype = model;\n    return Child;\n}\n","//  $get method for a Model\n//\n//  attribute is a dotted string\nexport default function (attribute) {\n\n    var bits = attribute.split('.'),\n        key = bits.splice(0, 1),\n        model = getModel(this, key);\n\n    if (!(key in model)) return;\n\n    var value = model[key];\n\n    while (value && bits.length)\n        value = value[bits.splice(0, 1)];\n\n    return value;\n}\n\n\nexport function getModel (model, key) {\n\n    while (!(key in model) && model.$parent)\n        model = model.$parent;\n\n    return model;\n}\n","import {isFunction, isObject} from 'd3-let';\n\nimport warn from '../utils/warn';\nimport ddispatch from './dispatch';\n\n//  $set a reactive attribute for a Model\n//\n//  Set the value of a dotted attribute in the model or its parents\n//  If the attribute is not already reactive make it as such.\n//\nexport default function (key, value) {\n    // property not reactive - make it as such\n    if (!this.$events.get(key)) reactive(this, key, value);\n    else this[key] = value;\n}\n\n\nfunction reactive(model, key, value) {\n    var lazy;\n\n    model.$events.set(key, ddispatch());\n\n    Object.defineProperty(model, key, property());\n    // Trigger the callback once for initialization\n    model.$change(key);\n\n    function update (newValue) {\n        if (lazy) newValue = lazy.get.call(model);\n        if (newValue === value) return;\n        // trigger lazy callbacks\n        var oldValue = value;\n        value = newValue;\n        model.$change(key, oldValue);\n    }\n\n    function property () {\n        var prop = {\n                get: function () {\n                    return value;\n                }\n            };\n\n        if (isFunction(value)) value = {get: value};\n\n        // calculated attribute\n        if (isObject(value) && isFunction(value.get)) {\n            lazy = value;\n            value = lazy.get.call(model);\n\n            if (lazy.reactOn)\n                lazy.reactOn.forEach((name) => {\n                    model.$on(`${name}.${key}`, update);\n                });\n            else\n                warn(`reactive lazy property ${key} does not specify 'reactOn' list or properties`);\n\n            if (isFunction(lazy.set)) prop.set = lazy.set;\n        } else\n            prop.set = update;\n\n        return prop;\n    }\n}\n","import {isFunction} from 'd3-let';\n\nimport warn from '../utils/warn';\n\n\n// Add change callback to a model reactive attribute\nexport default function (name, callback) {\n\n    // When no name is provided, whait for changes on this model - no its parents\n    if (arguments.length === 1 && isFunction(name)) {\n        callback = name;\n        name = '';\n    }\n\n    var bits = name.split('.'),\n        key = bits[0],\n        event = getEvent(this, key);\n\n    if (!event) return warn(`Cannot bind to \"${key}\" - no such reactive property`);\n\n    // event from a parent model, add model uid to distinguish it from other child callbacks\n    if (!this.$events.get(key)) bits.push(this.uid);\n\n    bits[0] = 'change';\n    return event.on(bits.join('.'), callback);\n}\n\n\nfunction getEvent(model, name) {\n    var event = model.$events.get(name);\n    if (!event && model.parent) return getEvent(model.parent, name);\n    return event;\n}\n","import warn from '../utils/warn';\n\n// Update a model with reactive model data\nexport default function (data, replace) {\n    if (data) {\n        replace = arguments.length === 2 ? replace : true;\n        for (var key in data) {\n            if (replace || this[key] === undefined) {\n                if (key.substring(0, 1) === '$') {\n                    if (this.constructor.prototype[key]) warn(`Cannot set attribute method ${key}, it is protected`);\n                    else this[key] = data[key];\n                } else\n                    this.$set(key, data[key]);\n            }\n        }\n    }\n    return this;\n}\n","export default function setbase (key, value) {\n    if (!this.$events.has(key) && this.$parent) return setbase.call(this.$parent, key, value);\n    this.$set(key, value);\n}\n","// remove event handlers\nexport default function (attr) {\n    if (attr === undefined)\n        this.$events.each((event) => removeEvent(event));\n    else {\n        var bits = attr.split('.'),\n            type = bits.splice(0, 1)[0],\n            event = this.$events.get(type);\n        if (event) removeEvent(event, bits.join('.'));\n    }\n\n    this.$children.forEach((child) => child.$off(attr));\n}\n\n\nfunction removeEvent (event, name) {\n    if (name) event.on(`change.${name}`, null);\n    else event.on('change', null);\n}\n","import warn from '../utils/warn';\nimport slice from '../utils/slice';\n\n\n// trigger change event on a model reactive attribute\nexport default function (attribute) {\n    var event = this.$events.get(attribute),\n        args = slice(arguments, 1);\n    if (event) event.trigger.call(this, ...args);\n    else warn(`attribute '${attribute}' is not a reactive property this model`);\n    return this;\n}\n","import asModel from './as';\nimport $get from './get';\nimport $set from './set';\nimport $on from './on';\nimport $update from './update';\nimport $setbase from './setbase';\nimport $off from './off';\nimport $change from './change';\n\n//\n//  Model class\n//\n//  The model is at the core of d3-view reactive data component\nfunction Model (initials) {\n    asModel(this, initials);\n}\n\nexport default function model (initials) {\n    return new Model(initials);\n}\n\nmodel.prototype = Model.prototype;\n\n// Public API methods\nModel.prototype.$on = $on;\nModel.prototype.$change = $change;\nModel.prototype.$update = $update;\nModel.prototype.$get = $get;\nModel.prototype.$set = $set;\nModel.prototype.$new = $new;\nModel.prototype.$setbase = $setbase;\nModel.prototype.$off = $off;\n\n\n\nfunction $new (initials) {\n\n    var parent = this,\n        child = model(initials);\n\n    parent.$children.push(child);\n\n    Object.defineProperty(child, 'parent', {\n        get: function () {\n            return parent;\n        }\n    });\n\n    return child;\n}\n","import assign from 'object-assign';\nimport {isObject, isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport './selection';\nimport {createComponent, protoComponent, mounted, asView} from './component';\nimport createDirective from './directive';\nimport viewModel from '../model/main';\nimport warn from '../utils/warn';\n\n//\n// prototype for views\nexport const protoView = assign({}, protoComponent, {\n\n    use: function (plugin) {\n        if (isObject(plugin)) plugin.install(this);\n        else plugin(this);\n        return this;\n    },\n\n    addComponent: function (name, obj) {\n        if (this.isMounted) return warn('already mounted, cannot add component');\n        var component = createComponent(obj, protoComponent);\n        this.components.set(name, component);\n        return component;\n    },\n\n    addDirective: function (name, obj) {\n        if (this.isMounted) return warn('already mounted, cannot add directive');\n        var directive = createDirective(obj);\n        this.directives.set(name, directive);\n        return directive;\n    },\n\n    mount: function (el, callback) {\n        if (mounted(this)) warn('already mounted');\n        else {\n            el = element(el);\n            if (el) {\n                this.model = this.parent ? this.parent.model.$child(this.model) : viewModel(this.model);\n                var p = asView(this, el);\n                if (callback)\n                    return p ? p.then(callback) : callback();\n                return p;\n            }\n        }\n    }\n});\n\n\nexport default createComponent(null, protoView);\n\n\nfunction element (el) {\n    if (!el) return warn(`element not defined, pass an identifier or an HTMLElement object`);\n    var d3el = isFunction(el.node) ? el : select(el),\n        element = d3el.node();\n    if (!element) warn(`could not find ${el} element`);\n    else return element;\n}\n","import {select} from 'd3-selection';\nimport {isArray} from 'd3-let';\n\nimport simpleView from '../core/view';\nimport warn from '../utils/warn';\n\n//\n//  d3-for directive\n//  ======================\n//\n//  Repeat a element over an array of items and establish\n//  a one way binding between the array and the Dom\nexport default {\n\n    create (expression) {\n        var bits = [];\n        expression.trim().split(' ').forEach((v) => {\n            v ? bits.push(v) : null;\n        });\n        if (bits.length !== 3 || bits[1] != 'in')\n            return warn(`d3-for directive requires \"item in expression\" template, got \"${expression}\"`);\n        this.itemName = bits[0];\n        this.itemClass = `for${this.uid}`;\n        return bits[2];\n    },\n\n    preMount () {\n        return true;\n    },\n\n    mount (model) {\n        this.creator = this.el;\n        this.el = this.creator.parentNode;\n        // remove the creator from the DOM\n        select(this.creator).remove();\n        if (this.el) return model;\n    },\n\n    refresh (model, items) {\n        if (!isArray(items)) return;\n\n        var creator = this.creator,\n            selector = `${creator.tagName}.${this.itemClass}`,\n            itemName = this.itemName,\n            sel = this.sel,\n            entries = sel.selectAll(selector).data(items),\n            vm = sel.view();\n\n        let x;\n\n        entries.exit().remove();\n\n        entries\n            .enter()\n                .append(() => {\n                    return creator.cloneNode(true);\n                })\n                .classed(this.itemClass, true)\n                .each(function (d, index) {\n                    x = {index: index};\n                    x[itemName] = d;\n                    simpleView({\n                        model: x,\n                        parent: vm\n                    }).mount(this);\n                });\n            //.merge(entries)\n            //    .each(function () {\n            //        var vm = this.__d3_view__;\n            //        if (vm._refresh) vm.refresh();\n            //        vm._refresh = true;\n            //    });\n    }\n};\n","//\n//  d3-if\n//  =============\n//\n//  Remove an element if the condition is not satisfied\n//\nexport default {\n\n    refresh: function (model, value) {\n        if (value) this.sel.style('display', null);\n        else this.sel.style('display', 'none');\n    }\n};\n","import attr from './attr';\nimport html from './html';\nimport value from './value';\nimport show from './show';\nimport on from './on';\nimport d3For from './for';\nimport d3If from './if';\n\nexport default {\n    attr,\n    html,\n    value,\n    show,\n    on,\n    'for': d3For,\n    'if': d3If\n};\n","import {map} from 'd3-collection';\nimport directives from './directives/index';\nimport {protoView} from './core/view';\nimport {createComponent, extendDirectives} from './core/component';\n\n// Core Directives\nconst coreDirectives = extendDirectives(map(), directives);\n\n// the view constructor\nexport default createComponent(null, protoView, coreDirectives);\n","import {timeout} from 'd3-timer';\n\nimport providers from './providers';\n\n\n// Add callback to execute when the DOM is ready\nexport default function (callback) {\n    providers.readyCallbacks.push(callback);\n    if (document.readyState !== 'complete') {\n        document.addEventListener('DOMContentLoaded', _completed);\n        // A fallback to window.onload, that will always work\n        window.addEventListener('load', _completed);\n    }\n    else\n        domReady();\n}\n\n\nfunction _completed () {\n    document.removeEventListener('DOMContentLoaded', _completed);\n\twindow.removeEventListener('load', _completed);\n    domReady();\n}\n\n\nfunction domReady() {\n    let callback;\n    while (providers.readyCallbacks.length ) {\n        callback = providers.readyCallbacks.shift();\n        timeout(callback);\n    }\n}\n","import {logger} from 'd3-let';\n\nexport default {\n    logger: logger\n};\n","import providers from './providers';\n\nconst prefix = '[d3-form]';\n\n\nexport default function (msg) {\n    providers.logger.warn(`${prefix} ${msg}`);\n}\n","import {timeout} from 'd3-timer';\nimport {isArray} from 'd3-let';\n\nimport warn from './warn';\n\n\nconst modelDataKeys = ['labelSrOnly', 'layout'];\n\n\nconst componentsFromType = {\n    'text': 'input',\n    'password': 'input',\n    'number': 'input'\n};\n\n\n// return A promise which execute a callback at the next event Loop cycle\nexport function nextTick (callback) {\n    var self = this,\n        promise = new Promise((resolve) => timeout(resolve));\n    if (callback) promise.then(() => callback.call(self));\n    return promise;\n}\n\n\nexport function formComponent (child) {\n    var type = child.type || 'text';\n    return componentsFromType[type] || type;\n}\n\n\nexport function addChildren (sel) {\n    var children = this.data.children;\n    if (children) {\n        if (!isArray(children)) {\n            warn(`children should be an array of fields, for ${typeof children}`);\n            return sel;\n        }\n        sel.selectAll('.d3form')\n            .data(children)\n            .enter()\n            .append(formChild)\n            .classed('d3form', true);\n    }\n    return sel;\n}\n\nexport function modelData(data) {\n    if (!data) data = {};\n    this.data = data;\n    var model = this.model;\n    modelDataKeys.forEach((key) => {\n        if (key in data)\n            model.$set(key, data[key]);\n    });\n    return data;\n}\n\n\nfunction formChild (child) {\n    var component = formComponent(child);\n    if (!component) {\n        warn(`Could not find form component ${child.type}`);\n        component = 'input';\n        child.type = 'hidden';\n    }\n    return document.createElement(`d3${component}`);\n}\n","import {addChildren, modelData} from './utils';\n\n//\n// Fieldset element\nexport default {\n\n    render: function (data) {\n        var el = this.createElement('fieldset');\n        modelData.call(this, data);\n        return addChildren.call(this, el);\n    }\n\n};\n","import assign from 'object-assign';\nimport {select, selectAll} from 'd3-selection';\n\nimport warn from './warn';\nimport {modelData} from './utils';\n\n\nexport const formElement = {\n\n    wrap (sel) {\n        var field = this,\n            theme = getTheme(field),\n            wrappers = theme ? theme[sel.attr('type')] || theme[sel.node().tagName.toLowerCase()] : null;\n        if (!wrappers || !theme.wrappers) return sel;\n\n        var wrapped = sel,\n            wrap;\n\n        wrappers.forEach((wrapper) => {\n            wrap = theme.wrappers[wrapper];\n            if (wrap) wrapped = wrap.call(field, wrapped, sel);\n            else warn(`Could not find form field wrapper ${wrapper}`);\n        });\n\n        return wrapped;\n    },\n\n    wrapTemplate (sel, template) {\n        var div = document.createElement('div'),\n            outer = select(div).html(template),\n            slot = outer.select('slot');\n\n        if (!slot.size()) {\n            warn('template does not provide a slot element');\n            return sel;\n        }\n        var target = select(slot.node().parentNode);\n        sel.nodes().forEach(function (node) {\n            target.insert(() => {return node;}, 'slot');\n        });\n        slot.remove();\n        return selectAll(div.children);\n    },\n};\n\n// A mixin for all form field components\nexport default assign({\n\n    model: {\n        value: null,\n        error: '',\n        isDirty: null,\n        showError: {\n            reactOn: ['error', 'isDirty', 'formSubmitted'],\n            get () {\n                if (this.error) return this.isDirty || this.formSubmitted;\n                return false;\n            }\n        },\n        // default validate function does nothing, IMPORTANT!\n        $validate () {}\n    },\n\n    inputData (data) {\n        data = modelData.call(this, data);\n        if (!data.name) warn ('Input field without a name');\n        data.placeholder = data.placeholder || data.label || data.name;\n        data.id = data.id || `d3f${this.uid}`;\n        this.model.inputs[data.name] = this.model;\n        return data;\n    }\n\n}, formElement);\n\n\nfunction getTheme(component) {\n    var theme = component.formTheme;\n    if (!theme && component.parent) return getTheme(component.parent);\n    else return theme;\n}\n","import {isString, isObject} from 'd3-let';\n\n\nconst required = {\n\n    set (el, data) {\n        var value = data.required;\n        if (isString(value))\n            el.attr(`d3-required`, value);\n        else\n            el.property('required', value || null);\n    },\n\n    validate (el, value) {\n        if (el.property('required'))\n            if (!value) return 'required';\n        else if (value === '') {\n            // this is valid, no need to continue with the remaining validators\n            return true;\n        }\n    }\n};\n\n\nconst minLength = {\n\n    set (el, data) {\n        var value = data.minLength;\n        if (isString(value))\n            el.attr(`d3-attr-minlength`, value);\n        else if (value !== undefined)\n            el.attr('minlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('minlength');\n        if (l === l && l > 0 && value.length < l)\n            return `too short - ${l} characters or more expected`;\n    }\n};\n\n\nconst maxLength = {\n\n    set (el, data) {\n        var value = data.maxLength;\n        if (isString(value))\n            el.attr(`d3-attr-maxlength`, value);\n        else if (value !== undefined)\n            el.attr('maxlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('maxlength');\n        if (l === l && l > 0 && value.length > l)\n            return `too long - ${l} characters or less expected`;\n    }\n};\n\n\nconst minimum = {\n\n    set (el, data) {\n        var value = data.minimum;\n        if (isString(value))\n            el.attr(`d3-attr-min`, value);\n        else if (value !== undefined)\n            el.attr('min', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value < r[0])\n            return `must be greater or equal ${r[0]}`;\n    }\n};\n\n\nconst maximum = {\n\n    set (el, data) {\n        var value = data.maximum;\n        if (isString(value))\n            el.attr(`d3-attr-max`, value);\n        else if (value !== undefined)\n            el.attr('max', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value > r[1])\n            return `must be less or equal ${r[1]}`;\n    }\n};\n\n// validator singleton\nexport default {\n\n    // get the list of validators\n    // custom is an optional list of custom validators\n    get (custom) {\n        var validators = this.all.slice(0);\n        if (isObject(custom))\n            for (var key in custom)\n                validators.push(customValidator(key, custom[key]));\n        return validators;\n    },\n\n    // add model validators to a form-field\n    set (vm, el) {\n        var model = vm.model;\n        model._view = vm;\n        model.validators.forEach((validator) => validator.set(el, vm.data));\n        model.$on('value.validate', this.validate);\n        model.$validate = this.validate;\n    },\n\n    validate () {\n        var model = this,\n            vm = model._view,\n            validators = model.validators,\n            value = model.value,\n            el = vm.sel.attr('id') === vm.data.id ? vm.sel : vm.sel.select(`#${vm.data.id}`),\n            validator,\n            msg;\n\n        model.isDirty === null ? model.isDirty = false : model.isDirty = true;\n\n        for (var i=0; i<validators.length; ++i) {\n            validator = validators[i];\n            msg = validator.validate(el, value);\n            if (msg) {\n                if (msg === true) msg = '';\n                break;\n            }\n        }\n\n        model.error = msg || '';\n    },\n\n    all: [\n        required,\n        minLength,\n        maxLength,\n        minimum,\n        maximum\n    ]\n};\n\n\nfunction range (el) {\n    var l0 = el.attr('min'),\n        l1 = el.attr('max');\n    l0 = l0 === null ? -Infinity : +l0;\n    l1 = l1 === null ? Infinity : +l1;\n    return [l0, l1];\n}\n\n\nfunction customValidator (key, method) {\n\n    return {\n        set (el, data) {\n            var value = data[key];\n            if (!value) return;\n        },\n\n        validate (el, value) {\n            return method(el, value);\n        }\n    };\n}\n","import assign from 'object-assign';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Input element\nexport default assign({\n\n    render (data) {\n        data = this.inputData(data);\n        var el = this.createElement('input')\n                .attr('id', data.id)\n                .attr('type', data.type || 'text')\n                .attr('name', data.name)\n                .attr('d3-value', 'value')\n                .attr('placeholder', data.placeholder);\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n}, field);\n","import assign from 'object-assign';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Textarea element\nexport default assign({\n\n    render: function (data) {\n        data = this.inputData(data);\n        var el = this.createElement('textarea')\n                .attr('id', data.id)\n                .attr('name', data.name)\n                .attr('placeholder', data.placeholder)\n                .attr('d3-value', 'value')\n                .attr('d3-validate', 'validators');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n\n}, field);\n","import assign from 'object-assign';\nimport {isArray} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Select element\nexport default assign({}, field, {\n\n    model: assign({\n        options: [],\n        $optionLabel: optionLabel,\n        $optionValue: optionValue\n    }, field.model),\n\n    render: function (data) {\n        data = this.inputData(data);\n        var el = this.createElement('select')\n                .attr('id', data.id)\n                .attr('name', data.name)\n                .attr('d3-value', 'value')\n                .attr('placeholder', data.placeholder);\n\n        this.model.options = data.options;\n\n        el.append('option')\n            .attr('d3-for', 'option in options')\n            .attr('d3-html', '$optionLabel()')\n            .attr('d3-attr-value', '$optionValue()');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n\n\nfunction optionValue () {\n    if (isArray(this.option)) return this.option[0];\n    return this.option;\n}\n\n\nfunction optionLabel () {\n    if (isArray(this.option)) return this.option[1] || this.option[0];\n    return this.option;\n}\n","import assign from 'object-assign';\nimport {event} from 'd3-selection';\nimport {isString} from 'd3-let';\n\nimport {formElement} from './field';\nimport {modelData} from './utils';\n\n//\n// Submit element\nexport default assign({\n\n    render: function (data) {\n        data = modelData.call(this, data);\n        data.type = data.type || 'submit';\n        this.model.$set('error', false);\n        if (!isString(data.disabled)) {\n            this.model.$set('disabled', data.disabled || null);\n            data.disabled = 'disabled';\n        }\n        if (!data.click) data.click = '$vm.click()';\n\n        var el = this.createElement('button')\n                .attr('type', data.type)\n                .attr('name', data.name)\n                .attr('d3-attr-disabled', data.disabled)\n                .attr('d3-on-click', data.click)\n                .html(data.label || 'submit');\n\n        return this.wrap(el);\n    },\n\n    click: function () {\n        this.model.actions.submit.call(this, event);\n    }\n}, formElement);\n","// Form Responses\nexport default {\n    \"default\": defaultResponse,\n    redirect: redirect\n};\n\n\nfunction defaultResponse (response) {\n    var data = response.json();\n    this.message(data);\n}\n\n\nfunction redirect () {\n    window.location.href = this.data.redirectTo || '/';\n}\n","import {isObject} from 'd3-let';\n\nimport providers from './providers';\nimport warn from './warn';\n\n\n// Form Actions\nexport default {\n    submit: submit\n};\n\n\nfunction submit (e) {\n    var form = this && this.model ? this.model.form : null;\n\n    if (!form) {\n        warn('form not available, cannot submit');\n        return;\n    }\n\n    if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    var fetch = providers.fetch,\n        ct = (form.data.enctype || '').split(';')[0],\n        action = form.data.action,\n        url = isObject(action) ? action.url : action,\n        data = form.inputData(),\n        options = {};\n\n    if (!fetch) {\n        warn('fetch provider not available, cannot submit');\n        return;\n    }\n\n    if (!url) {\n        warn('No url, cannot submit');\n        return;\n    }\n\n    if (ct === 'application/json') {\n        options.headers = {\n            'Content-Type': form.data.enctype\n        };\n        options.body = JSON.stringify(data);\n    }\n    else {\n        options.body = new FormData();\n        for (var key in data)\n            options.body.set(key, data[key]);\n    }\n\n    // Flag the form as submitted\n    form.setSubmit();\n    options.method = form.method || 'post';\n    fetch(url, options).then(success, failure);\n\n\n    function success (response) {\n        form.setSubmitDone();\n        form.response(response);\n    }\n\n    function failure () {\n        form.setSubmitDone();\n    }\n}\n","import {isString, isArray} from 'd3-let';\n\nimport fieldset from './field-set';\nimport input from './field-input';\nimport textarea from './field-textarea';\nimport select from './field-select';\nimport submit from './field-submit';\nimport responses from './responses';\nimport warn from './warn';\nimport providers from './providers';\nimport actions from './actions';\nimport validators from './validators';\nimport {addChildren, modelData} from './utils';\n\n\n// Main form component\nexport default {\n\n    // make sure a new model is created for this component\n    props: ['schema'],\n\n    model () {\n        return {\n            formSubmitted: false,\n            formPending: false,\n            inputs: {},\n            $isValid () {\n                let inp,\n                    valid = true;\n                for (var key in this.inputs) {\n                    inp = this.inputs[key];\n                    inp.$validate();\n                    if (inp.error) valid = false;\n                }\n                return valid;\n            },\n            $setSubmit () {\n                this.formSubmitted = true;\n                this.formPending = true;\n                return this.$isValid();\n            },\n            $setSubmitDone () {\n                this.formPending = false;\n            }\n        };\n    },\n\n    components: {\n        'd3fieldset': fieldset,\n        'd3input': input,\n        'd3textarea': textarea,\n        'd3select': select,\n        'd3submit': submit\n    },\n\n    render: function (data) {\n        var model = this.model,\n            form = this.createElement('form').attr('novalidate', ''),\n            self = this;\n        //\n        model.actions = {};\n        model.form = this;\n        //\n        var schema = data['schema'];\n        if (isString(schema)) {\n            var fetch = providers.fetch;\n            return fetch(schema, {method: 'GET'}).then((response) => {\n                if (response.status === 200) return response.json().then(build);\n                else warn(`Could not load form from ${schema}: status ${response.status}`);\n            });\n        }\n        else return build(schema);\n\n        function build (schema) {\n            modelData.call(self, schema);\n            //\n            // Form validations\n            model.validators = validators.get(data.validators);\n            //\n            // Form actions\n            for (var key in actions) {\n                var action = self.data[key];\n                if (isString(action)) action = self.model.$get(action);\n                model.actions[key] = action || actions[key];\n            }\n            addChildren.call(self, form);\n            return form;\n        }\n    },\n\n    inputData: function () {\n        var inputs = this.model.inputs,\n            data = {},\n            value;\n        for (var key in inputs) {\n            value = inputs[key].value;\n            if (value !== undefined) data[key] = value;\n        }\n\n        return data;\n    },\n\n    inputError (error) {\n        var input = this.model.inputs[error.name];\n        if (!input) {\n            warn('Unknown input, cannot set input error');\n            this.error(error);\n        }\n    },\n\n    response (response) {\n        if (!response) return;\n        var handler;\n\n        if (response.status) {\n            if (response.status < 300) {\n                if (this.data.resultHandler) {\n                    handler = responses[this.data.resultHandler];\n                    if (!handler) warn(`Could not find ${this.data.resultHandler} result handler`);\n                    else handler.call(this, response);\n                } else {\n                    responses.default.call(this, response);\n                }\n            } else\n                this.responseError(response);\n        }\n        else if (response.error) {\n            this.error(response.error);\n        } else if (isArray(response.errors)) {\n            var self = this;\n            response.errors.forEach((error) => {\n                self.inputError(error);\n            });\n        }\n        else {\n            if (this.data.resultHandler) {\n                handler = responses[this.data.resultHandler];\n                if (!handler) warn(`Could not find ${this.data.resultHandler} result handler`);\n                else handler.call(this, response);\n            } else {\n                responses.default.call(this, response);\n            }\n        }\n    }\n};\n","import form from './form';\nimport actions from './actions';\nimport responses from './responses';\nimport providers from './providers';\n\n\n// Forms plugin\nexport default {\n\n    install: function (view) {\n        view.addComponent('d3form', form);\n        for (var key in view.providers)\n            providers[key] = view.providers[key];\n    },\n\n    actions: actions,\n\n    responses: responses\n};\n","export default function (el) {\n    return this.wrapTemplate(el, labelTpl(this.data));\n}\n\n\nfunction labelTpl(data) {\n    var label = data.label || data.name;\n\n    return `<label for=${data.id} class=\"control-label\" d3-class=\"[required, labelSrOnly ? 'sr-only' : null]\">${label}</label>\n<slot></slot>`;\n}\n","const groupTpl = `<div class=\"form-group\" d3-class='showError ? \"has-danger\" : null'>\n<slot></slot>\n<p d3-if=\"showError\" class=\"text-danger error-block\" d3-html=\"error\"></p>\n</div>`;\n\n\nexport default function (el, formEl) {\n    formEl.classed('form-control', true).attr('d3-class', 'showError ? \"form-control-danger\" : null');\n    return this.wrapTemplate(el, groupTpl);\n}\n","export default function (el, formEl) {\n    var ig = this.data['group'];\n    if (!ig) return el;\n    var gid = `g${formEl.attr('id')}`;\n    formEl.attr('aria-describedby', gid);\n    return this.wrapTemplate(el, groupTpl(gid, ig));\n}\n\n\nfunction groupTpl(gid, group) {\n    return `<div class=\"input-group\" :class=\"bootstrapStatus()\">\n<span class=\"input-group-addon\" id=\"${gid}\">${group}</span>\n<slot></slot>\n</div>`;\n}\n","const groupTpl = `<div class=\"form-group\">\n<slot></slot>\n</div>`;\n\n\nexport default function (el, formEl) {\n    var theme = this.data.theme || 'primary';\n    formEl.classed('btn', true).classed(`btn-${theme}`, true);\n    return this.wrapTemplate(el, groupTpl);\n}\n","import label from './label';\nimport formGroup from './form-group';\nimport inputGroup from './input-group';\nimport submit from './submit';\n\n\nconst bootstrap = {\n\n    input: ['inputGroup', 'label', 'formGroup'],\n    textarea: ['label', 'formGroup'],\n    select: ['label', 'formGroup'],\n    submit: ['submit'],\n    wrappers: {\n        label,\n        formGroup,\n        inputGroup,\n        submit\n    }\n};\n\n\n// Bootstrap theme\nexport default {\n\n    install: function (view) {\n        var d3form = view.components.get('d3form');\n        if (d3form)\n            d3form.prototype.formTheme = bootstrap;\n    }\n};\n"],"names":["ostring","Object","prototype","toString","inBrowser","window","call","logger","console","require","isObject","value","isString","isFunction","isArray","isPromise","obj","prop","index","splice","prefix","Map","_array","map","length","key","has","push","self","each","_","property","entries","v","callback","a","i","get","object","f","set","Array","n","o","fetch","msg","warn","properties","expression","arg","model","refreshClass","indexOf","sel","attr","oldValue","forEach","entry","classed","exist","html","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","toObject","val","undefined","TypeError","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","join","test3","split","letter","keys","err","module","target","source","from","to","symbols","s","arguments","delay","promise","args","Promise","resolve","reject","base","attrName","refresh","refreshFunction","el","on","createTag","proto","Tag","tag","t","defineProperty","select","dom","debounce","$set","type","tagName","toLowerCase","tags","expr","parsed","codes","IDENTIFIER","off","display","style","event","uid","eval","attributes","element","directives","dirs","Directives","bits","name","dirName","directive","add","attrs","size","all","dir","removeAttribute","preMount","pop","promises","d","execute","idx","slice","selection","mount","view","node","__d3_directives__","vm","__d3_view__","parent","parentNode","data","mountElement","component","components","getdirs","children","then","code","PERIOD_CODE","COMMA_CODE","SQUOTE_CODE","DQUOTE_CODE","OPAREN_CODE","CPAREN_CODE","OBRACK_CODE","CBRACK_CODE","QUMARK_CODE","SEMCOL_CODE","COLON_CODE","throwError","message","error","Error","description","unary_ops","binary_ops","getMaxKeyLen","max_len","len","max_unop_len","max_binop_len","literals","this_str","binaryPrecedence","op_val","createBinaryExpression","operator","left","right","LOGICAL_EXP","BINARY_EXP","isDecimalDigit","ch","isIdentifierStart","isIdentifierPart","jsep","charAtFunc","charAt","charCodeAtFunc","charCodeAt","exprI","exprICode","gobbleSpaces","gobbleExpression","test","gobbleBinaryExpression","consequent","alternate","CONDITIONAL_EXP","gobbleBinaryOp","to_check","substr","tc_len","biop","prec","stack","biop_info","gobbleToken","gobbleNumericLiteral","gobbleStringLiteral","gobbleVariable","gobbleArray","UNARY_EXP","number","chCode","LITERAL","parseFloat","str","quote","closed","gobbleIdentifier","start","identifier","THIS_EXP","gobbleArguments","termination","ch_i","COMPOUND","gobbleGroup","MEMBER_EXP","CALL_EXP","ARRAY_EXP","nodes","addUnaryOp","op_name","Math","max","addBinaryOp","precedence","addLiteral","literal_name","literal_value","removeUnaryOp","removeBinaryOp","removeLiteral","evaluate","elements","elem","binaryExp","callExpression","callee","unaryExp","argument","identifiers","func","EvalError","apply","op","unaryFunctions","Function","b","binaryFunctions","values","Expression","UID","id","$on","$off","destroy","Directive","create","viewExpression","JSON","parse","compile","text","handlebars","context","htmlElement","document","createElement","protoComponent","providers","response","json","level","root","events","url","options","cache","template","mounted","dattrs","$child","datum","props","maybeJson","newEl","render","createComponent","coreDirectives","classComponents","extendComponents","classDirectives","extendDirectives","Component","dispatch","comp","defineProperties","init","isMounted","container","createDirective","asView","p","cm","asSelect","insertBefore","remove","triggered","typename","asModel","initials","Child","ddispatch","$update","createChildConstructor","$children","attribute","getModel","$parent","$events","reactive","lazy","$change","update","newValue","reactOn","getEvent","replace","substring","constructor","setbase","removeEvent","child","trigger","Model","$get","$new","$setbase","protoView","plugin","install","viewModel","d3el","trim","itemName","itemClass","creator","items","selector","selectAll","x","exit","enter","append","cloneNode","d3For","d3If","readyCallbacks","readyState","addEventListener","_completed","domReady","removeEventListener","shift","modelDataKeys","componentsFromType","formComponent","addChildren","formChild","modelData","formElement","field","theme","getTheme","wrappers","wrapped","wrap","wrapper","div","outer","slot","insert","isDirty","formSubmitted","placeholder","label","inputs","formTheme","required","minLength","l","maxLength","minimum","r","range","maximum","custom","validators","customValidator","_view","validator","validate","$validate","l0","l1","Infinity","method","inputData","optionLabel","optionValue","option","disabled","click","actions","submit","defaultResponse","redirect","location","href","redirectTo","e","form","preventDefault","stopPropagation","ct","enctype","action","headers","body","stringify","FormData","setSubmit","success","failure","setSubmitDone","inp","valid","formPending","$isValid","fieldset","input","textarea","schema","status","build","handler","resultHandler","responses","default","responseError","errors","inputError","addComponent","wrapTemplate","labelTpl","groupTpl","formEl","ig","gid","group","bootstrap","d3form"],"mappings":"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"}
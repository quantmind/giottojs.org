{"version":3,"file":"d3-view.js","sources":["../node_modules/d3-let/src/consts.js","../node_modules/d3-let/src/logger.js","../node_modules/d3-let/src/inspect.js","../node_modules/d3-let/src/pop.js","../node_modules/d3-let/src/map.js","../src/utils/debug.js","../src/utils/providers.js","../src/utils/warn.js","../src/directives/attr.js","../src/utils/slice.js","../src/directives/html.js","../node_modules/object-assign/index.js","../src/utils/debounce.js","../src/utils/sel.js","../src/directives/types/type.js","../src/directives/types/input.js","../src/directives/types/checkbox.js","../src/directives/types/select.js","../src/directives/types/index.js","../src/directives/value.js","../src/directives/on.js","../src/parser/jsep.js","../src/parser/eval.js","../src/parser/expression.js","../src/utils/uid.js","../src/model/dispatch.js","../src/model/as.js","../src/model/string.js","../src/utils/object.js","../src/model/set.js","../src/model/on.js","../src/model/update.js","../src/model/off.js","../src/model/change.js","../src/model/main.js","../src/utils/html.js","../src/core/directive.js","../src/utils/select.js","../src/utils/maybeJson.js","../src/core/component.js","../src/core/getdirs.js","../src/core/selection.js","../src/core/view.js","../src/directives/for.js","../src/directives/if.js","../src/directives/index.js","../src/main.js","../src/mount.js","../src/utils/dom.js","../src/forms/providers.js","../src/forms/warn.js","../src/forms/field.js","../src/forms/utils.js","../src/forms/field-set.js","../src/forms/validators.js","../src/forms/field-input.js","../src/forms/field-textarea.js","../src/forms/field-select.js","../src/forms/field-submit.js","../src/forms/responses.js","../src/forms/actions.js","../src/forms/form.js","../src/forms/plugin.js","../src/forms/bootstrap/label.js","../src/forms/bootstrap/form-group.js","../src/forms/bootstrap/input-group.js","../src/forms/bootstrap/check.js","../src/forms/bootstrap/submit.js","../src/forms/bootstrap/plugin.js"],"sourcesContent":["export const ostring = Object.prototype.toString;\nexport const inBrowser = typeof window !== 'undefined' && ostring.call(window) !== '[object Object]';\n","import {inBrowser} from './consts';\n\nexport const logger = inBrowser ? window.console : require('console');\n","import {ostring} from './consts';\n\n\nexport function isObject (value) {\n    return ostring.call(value) === '[object Object]';\n}\n\n\nexport function isString (value) {\n    return ostring.call(value) === '[object String]';\n}\n\n\nexport function isFunction (value) {\n    return ostring.call(value) === '[object Function]';\n}\n\n\nexport function isArray (value) {\n    return ostring.call(value) === '[object Array]';\n}\n\n\nexport function isDate (value) {\n    return ostring.call(value) === '[object Date]';\n}\n\n\nexport function isNumber (value) {\n    return ostring.call(value) === '[object Number]';\n}\n\n\nexport function isPromise (value) {\n    return ostring.call(value) === '[object Promise]';\n}\n","import {isObject, isArray} from './inspect';\n\nexport default function (obj, prop) {\n    let value;\n    if (isObject(obj)) {\n        value = obj[prop];\n        delete obj[prop];\n        return value;\n    } else if (isArray(obj)) {\n        var index = +prop;\n        if (index === index) return obj.splice(index, 1)[0];\n        value = obj[prop];\n        delete obj[prop];\n        return value;\n    }\n}\n","const prefix = \"$\";\n\n\nfunction Map () {\n    this._array = [];\n}\n\n\nMap.prototype = map.prototype = {\n    constructor: Map,\n\n    size () {\n        return this._array.length;\n    },\n\n    get (key) {\n        return this[prefix + key];\n    },\n\n    set (key, value) {\n        if (!this.has(key))\n            this._array.push(key);\n        this[prefix + key] = value;\n        return this;\n    },\n\n    has (key) {\n        return (prefix + key) in this;\n    },\n\n    clear () {\n        var self = this;\n        this.each((_, property) => {\n            delete self[prefix + property];\n        });\n        this._array.splice(0);\n    },\n\n    keys () {\n        var entries = [];\n        this.each((_, key) => {\n            entries.push(key);\n        });\n        return entries;\n    },\n\n    values () {\n        var entries = [];\n        this.each((v) => {\n            entries.push(v);\n        });\n        return entries;\n    },\n\n    each (callback) {\n        var a = this._array,\n            key;\n        for (var i=0; i<a.length; ++i) {\n            key = a[i];\n            callback(this.get(key), key, i);\n        }\n    }\n\n};\n\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n      if (f == null) while (++i < n) map.set(i, object[i]);\n      else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import providers from './providers';\n\nconst prefix = '[d3-view-debug]';\n\nexport default function (msg) {\n    if (providers.logger.debug)\n        providers.logger.debug(msg);\n}\n\n\nexport function defaultDebug (msg) {\n    providers.logger.info(`${prefix} ${msg}`);\n}\n","import {logger, inBrowser, isFunction} from 'd3-let';\n\nimport {defaultDebug} from './debug';\n\n\nlogger.debug = null;\n\n\nexport default {\n    logger: logger,\n    fetch: fetch(),\n    readyCallbacks: [],\n    // Set/unset debug\n    setDebug (active) {\n        if (!arguments.length || active)\n            this.logger.debug = isFunction(active) ? active : defaultDebug;\n        else\n            this.logger.debug = null;\n    }\n};\n\n\nfunction fetch() {\n    if (inBrowser) return window.fetch;\n}\n","import providers from './providers';\n\nconst prefix = '[d3-view]';\n\n\nexport default function (msg) {\n    providers.logger.warn(`${prefix} ${msg}`);\n}\n","import {isArray} from 'd3-let';\n\nimport warn from '../utils/warn';\n\nconst properties = ['disabled', 'readonly', 'required'];\n\n//\n//  d3-attr-<attr> directive\n//  ==============================\n//\n//  Create a one-way binding between a model and a HTML element attribute\n//\nexport default {\n\n    create: function (expression) {\n        if (!this.arg) return warn('Cannot bind to empty attribute. Specify :<attr-name>');\n        return expression;\n    },\n\n    refresh: function (model, value) {\n        if (this.arg === 'class') return this.refreshClass(value);\n        if (isArray(value)) return warn(`Cannot apply array to attribute ${this.arg}`);\n        if (properties.indexOf(this.arg) > -1) this.sel.property(this.arg, value || false);\n        else this.sel.attr(this.arg, value || null);\n    },\n\n    refreshClass: function (value) {\n        var sel = this.sel;\n\n        if (!isArray(value)) value = [value];\n\n        if (this.oldValue)\n            this.oldValue.forEach((entry) => {\n                if (entry)\n                    sel.classed(entry, false);\n            });\n\n        this.oldValue = value.map((entry) => {\n            var exist = true;\n            if (isArray(entry)) {\n                exist = entry[1];\n                entry = entry[0];\n            }\n            if (entry)\n                sel.classed(entry, exist);\n            return entry;\n        });\n    }\n\n};\n","export default function (obj, idx=0) {\n    return Array.prototype.slice.call(obj, idx);\n}\n","import {select} from 'd3-selection';\nimport {isString, isNumber} from 'd3-let';\n\nimport slice from '../utils/slice';\n\n\n//\n//  d3-html\n//  =============\n//  attach html or text to the innerHtml property and mount components if required\n//\n//  Usage:\n//      <div id=\"foo\" d3-html=\"output\"></div>\nexport default {\n\n    refresh: function (model, html) {\n        if (isNumber(html)) html = ''+html;\n        if (isString(html)) {\n            this.sel.html(html);\n            var children = slice(this.el.children);\n            for (let i=0; i<children.length; ++i)\n                select(children[i]).mount();\n        }\n    }\n};\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","import {timeout} from 'd3-timer';\n\n//\n// Evaluate a callback (optional) with given delay (optional)\n//\n// if delay is not given or 0, the callback is evaluated at the next tick\n// of the event loop.\n// Calling this method multiple times in the dsame event loop tick produces\n// always the initial promise\nexport default function (callback, delay) {\n    var promise = null;\n\n    return function () {\n        if (promise !== null) return promise;\n        var self = this,\n            args = arguments;\n\n        promise = new Promise((resolve, reject) => {\n\n            timeout(() => {\n                promise = null;\n                try {\n                    resolve(callback ? callback.call(self, ...args) : undefined);\n                } catch (err) {\n                    reject(err);\n                }\n            }, delay);\n        });\n\n        return promise;\n    };\n}\n","import {select} from 'd3-selection';\n\n\nexport default function (o) {\n\n    Object.defineProperty(o, 'sel', {\n        get: function () {\n            return select(this.el);\n        }\n    });\n\n    return o;\n}\n","import assign from 'object-assign';\n\nimport debounce from '../../utils/debounce';\nimport sel from '../../utils/sel';\n\n\nconst base = {\n\n    on (model, attrName) {\n        var refresh = refreshFunction(this, model, attrName);\n\n        // DOM => model binding\n        this.sel\n            .on('input', refresh)\n            .on('change', refresh);\n    },\n\n    off () {\n        this.sel\n            .on('input', null)\n            .on('change', null);\n    },\n\n    value (value) {\n        if (arguments.length)\n            this.sel.property('value', value);\n        else\n            return this.sel.property('value');\n    }\n};\n\n\nexport function createValueType (proto) {\n\n    function ValueType(el) {\n        sel(this).el = el;\n    }\n\n    ValueType.prototype = assign({}, base, proto);\n\n    return ValueType;\n}\n\n\nexport function refreshFunction (vType, model, attrName) {\n\n    return debounce(() => {\n        model.$set(attrName, vType.value());\n    });\n}\n","import {createValueType} from './type';\n\nexport default createValueType();\n","import {createValueType} from './type';\n\nexport default createValueType({\n    value (value) {\n        if (arguments.length)\n            this.sel.property('checked', value);\n        else\n            return this.sel.property('checked');\n    }\n});\n","import {isArray} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {createValueType} from './type';\n\n\nexport default createValueType({\n\n    value (value) {\n        var sel = this.sel,\n            options = sel.selectAll('option'),\n            values = value,\n            opt;\n\n        if (arguments.length) {\n            if (!isArray(values)) values = [value || ''];\n            options.each(function () {\n                opt = select(this);\n                value = opt.attr('value') || '';\n                opt.property('selected', values.indexOf(value) > -1);\n            });\n        } else {\n            values = [];\n            options.each(function () {\n                opt = select(this);\n                if (opt.property('selected'))\n                    values.push(opt.attr('value') || '');\n            });\n            if (sel.property('multiple')) return values;\n            else return values[0] || '';\n        }\n    }\n});\n","import input from './input';\nimport checkbox from './checkbox';\nimport select from './select';\n\nexport default {\n    input,\n    textarea: input,\n    select,\n    checkbox\n};\n","import types from './types/index';\n\nimport warn from '../utils/warn';\n\n//\n//  d3-value directive\n//  ===================\n//\n//  Two-way data binding for HTML elements supporting the value property\nexport default {\n\n    create: function (expression) {\n        var type = this.sel.attr('type'),\n            tag = this.el.tagName.toLowerCase(),\n            ValueType = types[type] || types[tag];\n\n        if (!ValueType) return warn(`Cannot apply d3-value directive to ${tag}`);\n        this.tag = new ValueType(this.el);\n        return expression;\n    },\n\n    mount: function (model) {\n        var expr = this.expression;\n        // TODO: relax this constraint\n        if (expr.parsed.type !== expr.codes.IDENTIFIER)\n            return warn(`d3-value expression support identifiers only, got \"${expr.parsed.type}\": ${this.expression}`);\n        var attrName = this.expression.expr;\n        //\n        // Create the model reactive attribute\n        model.$set(attrName, this.tag.value());\n        // register dom event\n        this.tag.on(model, attrName);\n        return model;\n    },\n\n    refresh: function (model, value) {\n        this.tag.value(value);\n    },\n\n    destroy: function () {\n        this.tag.off();\n    }\n};\n","//\n//  d3-on directive\nexport default {\n\n    mount: function (model) {\n        var event = this.arg || 'click',\n            expr = this.expression;\n\n        // DOM event => model binding\n        this.sel.on(`${event}.${this.uid}`, () => {\n            expr.eval(model);\n        });\n    }\n};\n","// Code originally from https://github.com/soney/jsep\n// Copyright (c) 2013 Stephen Oney, http://jsep.from.so/\n// Code modified and adapted to work with d3-view\n\n// This is the full set of types that any JSEP node can be.\n// Store them here to save space when minified\nexport const code = {\n    COMPOUND: 'Compound',\n    IDENTIFIER: 'Identifier',\n    MEMBER_EXP: 'MemberExpression',\n    LITERAL: 'Literal',\n    THIS_EXP: 'ThisExpression',\n    CALL_EXP: 'CallExpression',\n    UNARY_EXP: 'UnaryExpression',\n    BINARY_EXP: 'BinaryExpression',\n    LOGICAL_EXP: 'LogicalExpression',\n    CONDITIONAL_EXP: 'ConditionalExpression',\n    ARRAY_EXP: 'ArrayExpression'\n};\n\nvar PERIOD_CODE = 46, // '.'\n    COMMA_CODE  = 44, // ','\n    SQUOTE_CODE = 39, // single quote\n    DQUOTE_CODE = 34, // double quotes\n    OPAREN_CODE = 40, // (\n    CPAREN_CODE = 41, // )\n    OBRACK_CODE = 91, // [\n    CBRACK_CODE = 93, // ]\n    QUMARK_CODE = 63, // ?\n    SEMCOL_CODE = 59, // ;\n    COLON_CODE  = 58, // :\n\n    throwError = function(message, index) {\n        var error = new Error(message + ' at character ' + index);\n        error.index = index;\n        error.description = message;\n        throw error;\n    },\n\n// Operations\n// ----------\n\n// Set `t` to `true` to save space (when minified, not gzipped)\n    t = true,\n// Use a quickly-accessible map to store all of the unary operators\n// Values are set to `true` (it really doesn't matter)\n    unary_ops = {'-': t, '!': t, '~': t, '+': t},\n// Also use a map for the binary operations but set their values to their\n// binary precedence for quick reference:\n// see [Order of operations](http://en.wikipedia.org/wiki/Order_of_operations#Programming_language)\n    binary_ops = {\n        '||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\n        '==': 6, '!=': 6, '===': 6, '!==': 6,\n        '<': 7,  '>': 7,  '<=': 7,  '>=': 7,\n        '<<':8,  '>>': 8, '>>>': 8,\n        '+': 9, '-': 9,\n        '*': 10, '/': 10, '%': 10\n    },\n// Get return the longest key length of any object\n    getMaxKeyLen = function(obj) {\n        var max_len = 0, len;\n        for(var key in obj) {\n            if((len = key.length) > max_len && obj.hasOwnProperty(key)) {\n                max_len = len;\n            }\n        }\n        return max_len;\n    },\n    max_unop_len = getMaxKeyLen(unary_ops),\n    max_binop_len = getMaxKeyLen(binary_ops),\n// Literals\n// ----------\n// Store the values to return for the various literals we may encounter\n    literals = {\n        'true': true,\n        'false': false,\n        'null': null\n    },\n// Except for `this`, which is special. This could be changed to something like `'self'` as well\n    this_str = 'this',\n// Returns the precedence of a binary operator or `0` if it isn't a binary operator\n    binaryPrecedence = function(op_val) {\n        return binary_ops[op_val] || 0;\n    },\n// Utility function (gets called from multiple places)\n// Also note that `a && b` and `a || b` are *logical* expressions, not binary expressions\n    createBinaryExpression = function (operator, left, right) {\n        var type = (operator === '||' || operator === '&&') ? code.LOGICAL_EXP : code.BINARY_EXP;\n        return {\n            type: type,\n            operator: operator,\n            left: left,\n            right: right\n        };\n    },\n    // `ch` is a character code in the next three functions\n    isDecimalDigit = function(ch) {\n        return (ch >= 48 && ch <= 57); // 0...9\n    },\n    isIdentifierStart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n    isIdentifierPart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 48 && ch <= 57) || // 0...9\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n\n    // Parsing\n    // -------\n    // `expr` is a string with the passed in expression\n    jsep = function(expr) {\n        // `index` stores the character number we are currently at while `length` is a constant\n        // All of the gobbles below will modify `index` as we move along\n        var index = 0,\n            charAtFunc = expr.charAt,\n            charCodeAtFunc = expr.charCodeAt,\n            exprI = function(i) { return charAtFunc.call(expr, i); },\n            exprICode = function(i) { return charCodeAtFunc.call(expr, i); },\n            length = expr.length,\n\n            // Push `index` up to the next non-space character\n            gobbleSpaces = function() {\n                var ch = exprICode(index);\n                // space or tab\n                while(ch === 32 || ch === 9) {\n                    ch = exprICode(++index);\n                }\n            },\n\n            // The main parsing function. Much of this code is dedicated to ternary expressions\n            gobbleExpression = function() {\n                var test = gobbleBinaryExpression(),\n                    consequent, alternate;\n                gobbleSpaces();\n                if(exprICode(index) === QUMARK_CODE) {\n                    // Ternary expression: test ? consequent : alternate\n                    index++;\n                    consequent = gobbleExpression();\n                    if(!consequent) {\n                        throwError('Expected expression', index);\n                    }\n                    gobbleSpaces();\n                    if(exprICode(index) === COLON_CODE) {\n                        index++;\n                        alternate = gobbleExpression();\n                        if(!alternate) {\n                            throwError('Expected expression', index);\n                        }\n                        return {\n                            type: code.CONDITIONAL_EXP,\n                            test: test,\n                            consequent: consequent,\n                            alternate: alternate\n                        };\n                    } else {\n                        throwError('Expected :', index);\n                    }\n                } else {\n                    return test;\n                }\n            },\n\n            // Search for the operation portion of the string (e.g. `+`, `===`)\n            // Start by taking the longest possible binary operations (3 characters: `===`, `!==`, `>>>`)\n            // and move down from 3 to 2 to 1 character until a matching binary operation is found\n            // then, return that binary operation\n            gobbleBinaryOp = function() {\n                gobbleSpaces();\n                var to_check = expr.substr(index, max_binop_len), tc_len = to_check.length;\n                while(tc_len > 0) {\n                    if(binary_ops.hasOwnProperty(to_check)) {\n                        index += tc_len;\n                        return to_check;\n                    }\n                    to_check = to_check.substr(0, --tc_len);\n                }\n                return false;\n            },\n\n            // This function is responsible for gobbling an individual expression,\n            // e.g. `1`, `1+2`, `a+(b*2)-Math.sqrt(2)`\n            gobbleBinaryExpression = function() {\n                var node, biop, prec, stack, biop_info, left, right, i;\n\n                // First, try to get the leftmost thing\n                // Then, check to see if there's a binary operator operating on that leftmost thing\n                left = gobbleToken();\n                biop = gobbleBinaryOp();\n\n                // If there wasn't a binary operator, just return the leftmost node\n                if(!biop) {\n                    return left;\n                }\n\n                // Otherwise, we need to start a stack to properly place the binary operations in their\n                // precedence structure\n                biop_info = { value: biop, prec: binaryPrecedence(biop)};\n\n                right = gobbleToken();\n                if(!right) {\n                    throwError(\"Expected expression after \" + biop, index);\n                }\n                stack = [left, biop_info, right];\n\n                // Properly deal with precedence using [recursive descent](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)\n                while((biop = gobbleBinaryOp())) {\n                    prec = binaryPrecedence(biop);\n\n                    if(prec === 0) {\n                        break;\n                    }\n                    biop_info = { value: biop, prec: prec };\n\n                    // Reduce: make a binary expression from the three topmost entries.\n                    while ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\n                        right = stack.pop();\n                        biop = stack.pop().value;\n                        left = stack.pop();\n                        node = createBinaryExpression(biop, left, right);\n                        stack.push(node);\n                    }\n\n                    node = gobbleToken();\n                    if(!node) {\n                        throwError(\"Expected expression after \" + biop, index);\n                    }\n                    stack.push(biop_info, node);\n                }\n\n                i = stack.length - 1;\n                node = stack[i];\n                while(i > 1) {\n                    node = createBinaryExpression(stack[i - 1].value, stack[i - 2], node);\n                    i -= 2;\n                }\n                return node;\n            },\n\n            // An individual part of a binary expression:\n            // e.g. `foo.bar(baz)`, `1`, `\"abc\"`, `(a % 2)` (because it's in parenthesis)\n            gobbleToken = function() {\n                var ch, to_check, tc_len;\n\n                gobbleSpaces();\n                ch = exprICode(index);\n\n                if(isDecimalDigit(ch) || ch === PERIOD_CODE) {\n                    // Char code 46 is a dot `.` which can start off a numeric literal\n                    return gobbleNumericLiteral();\n                } else if(ch === SQUOTE_CODE || ch === DQUOTE_CODE) {\n                    // Single or double quotes\n                    return gobbleStringLiteral();\n                } else if(isIdentifierStart(ch) || ch === OPAREN_CODE) { // open parenthesis\n                    // `foo`, `bar.baz`\n                    return gobbleVariable();\n                } else if (ch === OBRACK_CODE) {\n                    return gobbleArray();\n                } else {\n                    to_check = expr.substr(index, max_unop_len);\n                    tc_len = to_check.length;\n                    while(tc_len > 0) {\n                        if(unary_ops.hasOwnProperty(to_check)) {\n                            index += tc_len;\n                            return {\n                                type: code.UNARY_EXP,\n                                operator: to_check,\n                                argument: gobbleToken(),\n                                prefix: true\n                            };\n                        }\n                        to_check = to_check.substr(0, --tc_len);\n                    }\n\n                    return false;\n                }\n            },\n            // Parse simple numeric literals: `12`, `3.4`, `.5`. Do this by using a string to\n            // keep track of everything in the numeric literal and then calling `parseFloat` on that string\n            gobbleNumericLiteral = function() {\n                var number = '', ch, chCode;\n                while(isDecimalDigit(exprICode(index))) {\n                    number += exprI(index++);\n                }\n\n                if(exprICode(index) === PERIOD_CODE) { // can start with a decimal marker\n                    number += exprI(index++);\n\n                    while(isDecimalDigit(exprICode(index))) {\n                        number += exprI(index++);\n                    }\n                }\n\n                ch = exprI(index);\n                if(ch === 'e' || ch === 'E') { // exponent marker\n                    number += exprI(index++);\n                    ch = exprI(index);\n                    if(ch === '+' || ch === '-') { // exponent sign\n                        number += exprI(index++);\n                    }\n                    while(isDecimalDigit(exprICode(index))) { //exponent itself\n                        number += exprI(index++);\n                    }\n                    if(!isDecimalDigit(exprICode(index-1)) ) {\n                        throwError('Expected exponent (' + number + exprI(index) + ')', index);\n                    }\n                }\n\n\n                chCode = exprICode(index);\n                // Check to make sure this isn't a variable name that start with a number (123abc)\n                if(isIdentifierStart(chCode)) {\n                    throwError('Variable names cannot start with a number (' +\n                                number + exprI(index) + ')', index);\n                } else if(chCode === PERIOD_CODE) {\n                    throwError('Unexpected period', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: parseFloat(number),\n                    raw: number\n                };\n            },\n\n            // Parses a string literal, staring with single or double quotes with basic support for escape codes\n            // e.g. `\"hello world\"`, `'this is\\nJSEP'`\n            gobbleStringLiteral = function() {\n                var str = '', quote = exprI(index++), closed = false, ch;\n\n                while(index < length) {\n                    ch = exprI(index++);\n                    if(ch === quote) {\n                        closed = true;\n                        break;\n                    } else if(ch === '\\\\') {\n                        // Check for all of the common escape codes\n                        ch = exprI(index++);\n                        switch(ch) {\n                            case 'n': str += '\\n'; break;\n                            case 'r': str += '\\r'; break;\n                            case 't': str += '\\t'; break;\n                            case 'b': str += '\\b'; break;\n                            case 'f': str += '\\f'; break;\n                            case 'v': str += '\\x0B'; break;\n                            default : str += '\\\\' + ch;\n                        }\n                    } else {\n                        str += ch;\n                    }\n                }\n\n                if(!closed) {\n                    throwError('Unclosed quote after \"'+str+'\"', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: str,\n                    raw: quote + str + quote\n                };\n            },\n\n            // Gobbles only identifiers\n            // e.g.: `foo`, `_value`, `$x1`\n            // Also, this function checks if that identifier is a literal:\n            // (e.g. `true`, `false`, `null`) or `this`\n            gobbleIdentifier = function() {\n                var ch = exprICode(index), start = index, identifier;\n\n                if(isIdentifierStart(ch)) {\n                    index++;\n                } else {\n                    throwError('Unexpected ' + exprI(index), index);\n                }\n\n                while(index < length) {\n                    ch = exprICode(index);\n                    if(isIdentifierPart(ch)) {\n                        index++;\n                    } else {\n                        break;\n                    }\n                }\n                identifier = expr.slice(start, index);\n\n                if(literals.hasOwnProperty(identifier)) {\n                    return {\n                        type: code.LITERAL,\n                        value: literals[identifier],\n                        raw: identifier\n                    };\n                } else if(identifier === this_str) {\n                    return { type: code.THIS_EXP };\n                } else {\n                    return {\n                        type: code.IDENTIFIER,\n                        name: identifier\n                    };\n                }\n            },\n\n            // Gobbles a list of arguments within the context of a function call\n            // or array literal. This function also assumes that the opening character\n            // `(` or `[` has already been gobbled, and gobbles expressions and commas\n            // until the terminator character `)` or `]` is encountered.\n            // e.g. `foo(bar, baz)`, `my_func()`, or `[bar, baz]`\n            gobbleArguments = function(termination) {\n                var ch_i, args = [], node, closed = false;\n                while(index < length) {\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                    if(ch_i === termination) { // done parsing\n                        closed = true;\n                        index++;\n                        break;\n                    } else if (ch_i === COMMA_CODE) { // between expressions\n                        index++;\n                    } else {\n                        node = gobbleExpression();\n                        if(!node || node.type === code.COMPOUND) {\n                            throwError('Expected comma', index);\n                        }\n                        args.push(node);\n                    }\n                }\n                if (!closed) {\n                    throwError('Expected ' + String.fromCharCode(termination), index);\n                }\n                return args;\n            },\n\n            // Gobble a non-literal variable name. This variable name may include properties\n            // e.g. `foo`, `bar.baz`, `foo['bar'].baz`\n            // It also gobbles function calls:\n            // e.g. `Math.acos(obj.angle)`\n            gobbleVariable = function() {\n                var ch_i, node;\n                ch_i = exprICode(index);\n\n                if(ch_i === OPAREN_CODE) {\n                    node = gobbleGroup();\n                } else {\n                    node = gobbleIdentifier();\n                }\n                gobbleSpaces();\n                ch_i = exprICode(index);\n                while(ch_i === PERIOD_CODE || ch_i === OBRACK_CODE || ch_i === OPAREN_CODE) {\n                    index++;\n                    if(ch_i === PERIOD_CODE) {\n                        gobbleSpaces();\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: false,\n                            object: node,\n                            property: gobbleIdentifier()\n                        };\n                    } else if(ch_i === OBRACK_CODE) {\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: true,\n                            object: node,\n                            property: gobbleExpression()\n                        };\n                        gobbleSpaces();\n                        ch_i = exprICode(index);\n                        if(ch_i !== CBRACK_CODE) {\n                            throwError('Unclosed [', index);\n                        }\n                        index++;\n                    } else if(ch_i === OPAREN_CODE) {\n                        // A function call is being made; gobble all the arguments\n                        node = {\n                            type: code.CALL_EXP,\n                            'arguments': gobbleArguments(CPAREN_CODE),\n                            callee: node\n                        };\n                    }\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                }\n                return node;\n            },\n\n            // Responsible for parsing a group of things within parentheses `()`\n            // This function assumes that it needs to gobble the opening parenthesis\n            // and then tries to gobble everything within that parenthesis, assuming\n            // that the next thing it should see is the close parenthesis. If not,\n            // then the expression probably doesn't have a `)`\n            gobbleGroup = function() {\n                index++;\n                var node = gobbleExpression();\n                gobbleSpaces();\n                if(exprICode(index) === CPAREN_CODE) {\n                    index++;\n                    return node;\n                } else {\n                    throwError('Unclosed (', index);\n                }\n            },\n\n            // Responsible for parsing Array literals `[1, 2, 3]`\n            // This function assumes that it needs to gobble the opening bracket\n            // and then tries to gobble the expressions as arguments.\n            gobbleArray = function() {\n                index++;\n                return {\n                    type: code.ARRAY_EXP,\n                    elements: gobbleArguments(CBRACK_CODE)\n                };\n            },\n\n            nodes = [], ch_i, node;\n\n        while(index < length) {\n            ch_i = exprICode(index);\n\n            // Expressions can be separated by semicolons, commas, or just inferred without any\n            // separators\n            if(ch_i === SEMCOL_CODE || ch_i === COMMA_CODE) {\n                index++; // ignore separators\n            } else {\n                // Try to gobble each expression individually\n                if((node = gobbleExpression())) {\n                    nodes.push(node);\n                // If we weren't able to find a binary expression and are out of room, then\n                // the expression passed in probably has too much\n                } else if(index < length) {\n                    throwError('Unexpected \"' + exprI(index) + '\"', index);\n                }\n            }\n        }\n\n        // If there's only one expression just try returning the expression\n        if(nodes.length === 1) {\n            return nodes[0];\n        } else {\n            return {\n                type: code.COMPOUND,\n                body: nodes\n            };\n        }\n    };\n\n\n/**\n * @method jsep.addUnaryOp\n * @param {string} op_name The name of the unary op to add\n * @return jsep\n */\njsep.addUnaryOp = function(op_name) {\n    max_unop_len = Math.max(op_name.length, max_unop_len);\n    unary_ops[op_name] = t; return this;\n};\n\n/**\n * @method jsep.addBinaryOp\n * @param {string} op_name The name of the binary op to add\n * @param {number} precedence The precedence of the binary op (can be a float)\n * @return jsep\n */\njsep.addBinaryOp = function(op_name, precedence) {\n    max_binop_len = Math.max(op_name.length, max_binop_len);\n    binary_ops[op_name] = precedence;\n    return this;\n};\n\n/**\n * @method jsep.addLiteral\n * @param {string} literal_name The name of the literal to add\n * @param {*} literal_value The value of the literal\n * @return jsep\n */\njsep.addLiteral = function(literal_name, literal_value) {\n    literals[literal_name] = literal_value;\n    return this;\n};\n\n/**\n * @method jsep.removeUnaryOp\n * @param {string} op_name The name of the unary op to remove\n * @return jsep\n */\njsep.removeUnaryOp = function(op_name) {\n    delete unary_ops[op_name];\n    if(op_name.length === max_unop_len) {\n        max_unop_len = getMaxKeyLen(unary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeBinaryOp\n * @param {string} op_name The name of the binary op to remove\n * @return jsep\n */\njsep.removeBinaryOp = function(op_name) {\n    delete binary_ops[op_name];\n    if(op_name.length === max_binop_len) {\n        max_binop_len = getMaxKeyLen(binary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeLiteral\n * @param {string} literal_name The name of the literal to remove\n * @return jsep\n */\njsep.removeLiteral = function(literal_name) {\n    delete literals[literal_name];\n    return this;\n};\n\n\nexport default jsep;\n","import {set} from 'd3-collection';\n\nimport {code} from './jsep';\n\n\nexport function evaluate (self, expr) {\n\n    switch(expr.type) {\n        case code.IDENTIFIER: return self[expr.name];\n        case code.LITERAL: return expr.value;\n        case code.ARRAY_EXP: return expr.elements.map((elem) => {return evaluate(self, elem);});\n        case code.LOGICAL_EXP:\n        case code.BINARY_EXP: return binaryExp(expr.operator, evaluate(self, expr.left), evaluate(self, expr.right));\n        case code.CALL_EXP: return callExpression(self, expr.callee, expr.arguments);\n        case code.MEMBER_EXP: return evaluate(evaluate(self, expr.object), expr.property);\n        case code.CONDITIONAL_EXP: return evaluate(self, expr.test) ? evaluate(self, expr.consequent) : evaluate(self, expr.alternate);\n        case code.UNARY_EXP: return unaryExp(expr.operator, evaluate(self, expr.argument));\n    }\n}\n\n// extract identifiers\nexport function identifiers (expr, all) {\n    if (arguments.length === 1) all = set();\n    switch(expr.type) {\n        case code.IDENTIFIER:\n            all.add(expr.name); break;\n        case code.ARRAY_EXP:\n            expr.elements.forEach(elem => identifiers(elem, all));\n            break;\n        case code.BINARY_EXP:\n            identifiers(expr.left, all);\n            identifiers(expr.right, all);\n            break;\n        case code.CALL_EXP:\n            identifiers(expr.callee, all);\n            expr.arguments.forEach(elem => identifiers(elem, all));\n            break;\n        case code.MEMBER_EXP:\n            all.add(fullName(expr));\n            break;\n        case code.CONDITIONAL_EXP:\n            identifiers(expr.test, all);\n            identifiers(expr.consequent, all);\n            evaluate(expr.alternate, all);\n            break;\n        case code.UNARY_EXP:\n            identifiers(expr.argument, all);\n            break;\n    }\n    return all;\n}\n\n\n\nfunction callExpression (self, callee, args) {\n    var func;\n\n    args = args.map((arg) => {\n        return evaluate(self, arg);\n    });\n\n    if (callee.type !== code.IDENTIFIER) {\n        self = evaluate(self, callee.object);\n        callee = callee.property;\n    }\n\n    func = self[callee.name];\n    if (!func)\n        throw new EvalError(`callable \"${callee.name}\" not found in context`);\n    return func.apply(self, args);\n}\n\n\nfunction unaryExp (op, arg) {\n    if (!unaryFunctions[op])\n        unaryFunctions[op] = new Function(\"arg\", `return ${op} arg`);\n    return unaryFunctions[op](arg);\n}\n\n\nfunction binaryExp(op, a, b) {\n    if (!binaryFunctions[op])\n        binaryFunctions[op] = new Function(\"a\", \"b\", `return a ${op} b`);\n    return binaryFunctions[op](a, b);\n}\n\n\nfunction fullName (expr) {\n    if (expr.type === code.IDENTIFIER) return expr.name;\n    else return `${fullName(expr.object)}.${expr.property.name}`;\n}\n\nconst unaryFunctions = {};\nconst binaryFunctions = {};\n","// tiny javascript expression parser\nimport jsep, {code} from './jsep';\nimport {evaluate, identifiers} from './eval';\nimport warn from '../utils/warn';\n\n\nconst proto = {\n\n    eval: function (model) {\n        return evaluate(model, this.parsed);\n    },\n\n    safeEval: function (model) {\n        try {\n            return evaluate(model, this.parsed);\n        } catch (msg) {\n            warn(`Could not evaluate <<${this.expr}>> expression: ${msg}`);\n        }\n    },\n\n    // evaluate identifiers from a model\n    identifiers: function () {\n        return identifiers(this.parsed).values();\n    }\n};\n\n\nfunction Expression (expr) {\n    this.codes = code;\n    this.expr = expr;\n    this.parsed = jsep(expr);\n}\n\nExpression.prototype = proto;\n\n\nexport default function (expr) {\n    return new Expression(expr);\n}\n","let UID = 0;\nconst prefix = 'd3v';\n\n// Add a unique identifier to an object\nexport default function (o) {\n    var uid = prefix + (++UID);\n\n    if (arguments.length) {\n        Object.defineProperty(o, 'uid', {\n            get: function () {\n                return uid;\n            }\n        });\n\n        return o;\n    } else\n        return uid;\n}\n","import {dispatch} from 'd3-dispatch';\n\nimport debounce from '../utils/debounce';\n\n\nexport default function () {\n    var events = dispatch('change'),\n        triggered = 0;\n\n    return {\n        on (typename, callback) {\n            if (arguments.length < 2)\n                return events.on(typename);\n            events.on(typename, callback);\n            return this;\n        },\n        trigger: debounce(function () {\n            events.apply('change', this, arguments);\n            triggered +=1;\n        }),\n        triggered () {\n            return triggered;\n        }\n    };\n}\n","import {map} from 'd3-collection';\n\nimport uid from '../utils/uid';\nimport ddispatch from './dispatch';\n\n//\n// Initialise a model\nexport default function asModel (model, initials) {\n    var events = map(),\n        Child = null;\n\n    // event handler for any change in the model\n    events.set('', ddispatch());\n\n    Object.defineProperties(uid(model), {\n        $events: {\n            get: function () {\n                return events;\n            }\n        }\n    });\n    model.$child = $child;\n    model.$update(initials);\n\n    function $child (o) {\n        if (Child === null) Child = createChildConstructor(model);\n        return new Child(o);\n    }\n}\n\nfunction createChildConstructor (model) {\n\n    function Child (initials) {\n        asModel(this, initials);\n        Object.defineProperty(this, 'parent', {\n            get: function () {\n                return model;\n            }\n        });\n    }\n\n    Child.prototype = model;\n    return Child;\n}\n","const modelStr = \"[object d3Model]\";\n\n\nexport default function () {\n    return modelStr;\n}\n","// Check if a value is a vanilla javascript object\nexport default function (value) {\n    return value && value.constructor === Object;\n}\n","import {isFunction} from 'd3-let';\n\nimport warn from '../utils/warn';\nimport debug from '../utils/debug';\nimport isObject from '../utils/object';\nimport ddispatch from './dispatch';\n\n\n//  $set a reactive attribute for a Model\n//\n//  Set the value of an attribute in the model\n//  If the attribute is not already reactive make it as such.\n//\nexport default function (key, value) {\n    // property not reactive - make it as such\n    if (!this.$events.get(key)) reactive(this, key, value);\n    else this[key] = value;\n}\n\n\nfunction reactive (model, key, value) {\n    var lazy;\n\n    model.$events.set(key, ddispatch());\n\n    Object.defineProperty(model, key, property());\n\n    // Create a new model if value is an object\n    value = isObject(value) ? model.$new(value) : value;\n    // Trigger the callback once for initialization\n    model.$change(key);\n\n    function update (newValue) {\n        if (lazy) newValue = lazy.get.call(model);\n        if (newValue === value) return;\n        // trigger lazy callbacks\n        var oldValue = value;\n        value = isObject(newValue) ? model.$new(newValue) : newValue;\n        //\n        // Fire model events\n        var modelName = model.name || 'model';\n        debug(`updating ${modelName}.${key}`);\n        model.$change(key, oldValue);   // attribute change event\n        model.$change();                // model change event\n    }\n\n    function property () {\n        var prop = {\n                get: function () {\n                    return value;\n                }\n            };\n\n        if (isFunction(value)) value = {get: value};\n\n        // calculated attribute\n        if (isObject(value) && isFunction(value.get)) {\n            lazy = value;\n            value = lazy.get.call(model);\n\n            if (lazy.reactOn)\n                lazy.reactOn.forEach((name) => {\n                    model.$on(`${name}.${key}`, update);\n                });\n            else\n                warn(`reactive lazy property ${key} does not specify 'reactOn' list or properties`);\n\n            if (isFunction(lazy.set)) prop.set = lazy.set;\n        } else\n            prop.set = update;\n\n        return prop;\n    }\n}\n","import {isFunction} from 'd3-let';\n\nimport warn from '../utils/warn';\n\n\n// Add change callback to a model reactive attribute\nexport default function (name, callback) {\n\n    // When no name is provided, whait for changes on this model - no its parents\n    if (arguments.length === 1 && isFunction(name)) {\n        callback = name;\n        name = '';\n    }\n\n    var bits = name.split('.'),\n        key = bits[0],\n        event = getEvent(this, key);\n\n    if (!event) return warn(`Cannot bind to \"${key}\" - no such reactive property`);\n\n    // event from a parent model, add model uid to distinguish it from other child callbacks\n    if (!this.$events.get(key)) bits.push(this.uid);\n\n    bits[0] = 'change';\n    return event.on(bits.join('.'), callback);\n}\n\n\nfunction getEvent(model, name) {\n    var event = model.$events.get(name);\n    if (!event && model.parent) return getEvent(model.parent, name);\n    return event;\n}\n","import warn from '../utils/warn';\n\n// Update a model with reactive model data\nexport default function (data, replace) {\n    if (data) {\n        replace = arguments.length === 2 ? replace : true;\n        for (var key in data) {\n            if (replace || this[key] === undefined) {\n                if (key.substring(0, 1) === '$') {\n                    if (this.constructor.prototype[key]) warn(`Cannot set attribute method ${key}, it is protected`);\n                    else this[key] = data[key];\n                } else\n                    this.$set(key, data[key]);\n            }\n        }\n    }\n    return this;\n}\n","// remove event handlers\nexport default function (attr) {\n    if (attr === undefined)\n        this.$events.each((event) => removeEvent(event));\n    else {\n        var bits = attr.split('.'),\n            type = bits.splice(0, 1)[0],\n            event = this.$events.get(type);\n        if (event) removeEvent(event, bits.join('.'));\n    }\n}\n\n\nfunction removeEvent (event, name) {\n    if (name) event.on(`change.${name}`, null);\n    else event.on('change', null);\n}\n","import warn from '../utils/warn';\nimport slice from '../utils/slice';\n\n\n// trigger change event on a model reactive attribute\nexport default function (attribute) {\n    var name = arguments.length ? attribute : '',\n        event = this.$events.get(name),\n        args = slice(arguments, 1);\n    if (event) event.trigger.call(this, ...args);\n    else warn(`attribute '${name}' is not a reactive property this model`);\n    return this;\n}\n","import asModel from './as';\nimport string from './string';\nimport $set from './set';\nimport $on from './on';\nimport $update from './update';\nimport $off from './off';\nimport $change from './change';\n\n//\n//  Model class\n//\n//  The model is at the core of d3-view reactive data component\nfunction Model (initials) {\n    asModel(this, initials);\n}\n\nexport default function model (initials) {\n    return new Model(initials);\n}\n\nmodel.prototype = Model.prototype;\n\n// Public API methods\nModel.prototype.toString = string;\nModel.prototype.$on = $on;\nModel.prototype.$change = $change;\nModel.prototype.$update = $update;\nModel.prototype.$set = $set;\nModel.prototype.$new = $new;\nModel.prototype.$off = $off;\nObject.defineProperty(Model.prototype, 'root', {\n    get: function () {\n        return this.parent ? this.parent.root : this;\n    }\n});\n\n\nfunction $new (initials) {\n\n    var parent = this,\n        child = model(initials);\n\n    Object.defineProperty(child, 'parent', {\n        get: function () {\n            return parent;\n        }\n    });\n\n    return child;\n}\n","import {inBrowser, isString} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport warn from './warn';\n\n\n// require handlebar\nexport function compile (text) {\n    var handlebars = inBrowser ? window.handlebars : require('handlebars');\n    if (handlebars) return handlebars.compile(text);\n    warn('compile function requires handlebars');\n}\n\n\nexport function html (source, context) {\n    if (isString(source)) {\n        if (context) {\n            var s = compile(source);\n            if (!s) return source;\n        }\n        else\n            return source;\n    }\n    return source(context);\n}\n\n\nexport function htmlElement (source, context) {\n    var el = select(document.createElement('div'));\n    el.html(html(source, context));\n    var children = el.node().children;\n    if (children.length !== 1) warn(`HtmlElement function should return one root element only, got ${children.length}`);\n    return children[0];\n}\n","import assign from 'object-assign';\nimport {select} from 'd3-selection';\nimport {isFunction, isObject} from 'd3-let';\nimport {map, set} from 'd3-collection';\n\nimport viewExpression from '../parser/expression';\nimport viewModel from '../model/main';\nimport warn from '../utils/warn';\nimport uid from '../utils/uid';\nimport sel from '../utils/sel';\nimport {htmlElement} from '../utils/html';\n\n\nexport const base = {\n    htmlElement: htmlElement,\n    // same as export\n    viewElement: htmlElement,\n    createElement (tag) {\n        return select(document.createElement(tag));\n    }\n};\n\n//\n// Directive Prototype\n//\n// Directives are special attributes with the d3- prefix.\n// Directive attribute values are expected to be binding expressions.\n// A directives job is to reactively apply special behavior to the DOM\n// when the value of its expression changes.\n//\n// A directive can implement one or more of the directive methods:\n//\n//  * create\n//  * mount\n//  * refresh\n//  * destroy\n//\nconst prototype = assign({\n    priority: 1,\n\n    // hooks\n    create (expression) {\n        return expression;\n    },\n\n    // pre mount\n    preMount () {\n\n    },\n\n    mount (model) {\n        return model;\n    },\n\n    refresh () {\n\n    },\n\n    destroy () {\n\n    },\n\n    removeAttribute () {\n        this.el.removeAttribute(this.name);\n    },\n\n    // Execute directive\n    execute (model) {\n        if (!this.active) return;\n        this.removeAttribute();\n\n        model = this.mount(model);\n        // No model returned - abort execution\n        if (!model) return;\n\n        var dir = this,\n            sel = this.sel,\n            refresh = function () {\n                let value = dir.expression ? dir.expression.eval(model) : undefined;\n                dir.refresh(model, value);\n            };\n\n        // Bind expression identifiers with model\n        let bits, target, attr, i;\n        dir.identifiers = [];\n        if (!this.expression) {\n            dir.identifiers.push({\n                model: model,\n                attr: ''\n            });\n        } else {\n            var modelEvents = map();\n            this.expression.identifiers().forEach(identifier => {\n                bits = identifier.split('.');\n                target = model;\n                attr = null;\n\n                for (i=0; i<bits.length-1; ++i) {\n                    target = target[bits[i]];\n                    if (!isObject(target)) {\n                        attr = bits.slice(0, i+1).join('.');\n                        warn(`Property ${attr} is not an object. Directive ${dir.name} cannot bind to ${identifier}`);\n                        break;\n                    }\n                }\n\n                // process attribute\n                if (attr === null) {\n                    if (!(target instanceof viewModel))\n                        return warn(`${identifier} is not a reactive model. Directive ${dir.name} cannot bind to it`);\n                    addTarget(modelEvents, target, bits[bits.length-1]);\n                }\n            });\n\n            modelEvents.each(target => {\n                if (target.events.has(''))\n                    dir.identifiers.push({\n                        model: target.model,\n                        attr: ''\n                    });\n                else\n                    target.events.each(attr => {\n                        dir.identifiers.push({\n                            model: target.model,\n                            attr: attr\n                        });\n                    });\n            });\n        }\n\n        this.identifiers.forEach(identifier => {\n            var event = `${identifier.attr}.${dir.uid}`;\n            identifier.model.$on(event, refresh);\n        });\n\n        sel.on(`remove.${dir.uid}`, () => {\n            this.identifiers.forEach(identifier => {\n                identifier.model.$off(`${identifier.attr}.${dir.uid}`);\n            });\n            dir.destroy(model);\n        });\n\n        refresh();\n    }\n}, base);\n\n// Directive constructor\nexport default function (obj) {\n\n    function Directive (el, attr, arg) {\n        this.el = el;\n        this.name = attr.name;\n        this.arg = arg;\n        var expr = sel(uid(this)).create(attr.value);\n        if (expr) this.expression = viewExpression(expr);\n        this.active = !attr.value || this.expression;\n    }\n\n    Directive.prototype = assign({}, prototype, obj);\n\n    function directive (el, attr, arg) {\n        return new Directive(el, attr, arg);\n    }\n\n    directive.prototype = Directive.prototype;\n    return directive;\n}\n\n\nfunction addTarget (modelEvents, model, attr) {\n    var target = modelEvents.get(model.uid),\n        value = arguments.length === 3 ? model[attr] : undefined;\n\n    if (!target) {\n        target = {\n            model: model,\n            events: set()\n        };\n        modelEvents.set(model.uid, target);\n    }\n    //\n    if (isFunction(value) || arguments.length === 2)\n        target.events.add('');\n    else if (value instanceof viewModel) {\n        target.events.add('');\n        addTarget(modelEvents, value);\n    } else\n        target.events.add(attr);\n}\n","import {isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\n\nexport default function (el) {\n    if (el && !isFunction(el.size)) return select(el);\n    return el;\n}\n","import {isString} from 'd3-let';\n\nexport default function (value) {\n    if (isString(value)) {\n        try {\n            return JSON.parse(value);\n        } catch (msg) {\n            return value;\n        }\n    }\n    return value;\n}\n","import assign from 'object-assign';\nimport {isFunction, isArray, isPromise, isString, pop} from 'd3-let';\nimport {select} from 'd3-selection';\nimport {map} from 'd3-collection';\nimport {dispatch} from 'd3-dispatch';\n\nimport createDirective, {base} from './directive';\nimport warn from '../utils/warn';\nimport asSelect from '../utils/select';\nimport providers from '../utils/providers';\nimport maybeJson from '../utils/maybeJson';\nimport sel from '../utils/sel';\nimport {htmlElement} from '../utils/html';\n\n\n// prototype for both views and components\nexport const protoComponent = assign({}, base, {\n    isd3: true,\n    providers: providers,\n\n    // Shortcut for fetch function in providers\n    fetch (url, options) {\n        var fetch = providers.fetch;\n        return arguments.length == 1 ? fetch(url) : fetch(url, options);\n    },\n\n    //\n    // render a template from a url\n    renderFromUrl (url, context) {\n        var cache = this.cache;\n        if (url in cache)\n            return new Promise((resolve) => resolve(htmlElement(cache[url])));\n        return this.fetch(url).then(response => response.text()).then(template => {\n            cache[url] = template;\n            return htmlElement(template, context);\n        });\n    },\n    //\n    // hooks\n    init () {},\n    render () {},\n    mounted () {},\n    //\n    mount: function (el, data, onMounted) {\n        if (mounted(this)) warn('already mounted');\n        else {\n            var sel = select(el),\n                directives = sel.directives(),\n                dattrs = directives ? directives.attrs : attributes(el),\n                model = this.model;\n            let key, value;\n\n            data = assign({}, sel.datum(), data);\n\n            // override model keys from data object and element attributes\n            for (key in model) {\n                value = data[key] === undefined ? dattrs[key] : data[key];\n                if (value !== undefined)\n                    model[key] = maybeJson(pop(data, key));\n            }\n\n            // Create model\n            this.model = model = this.parent.model.$child(model);\n\n            if (isArray(this.props)) {\n                this.props.forEach(prop => {\n                    value = maybeJson(data[prop] === undefined ? dattrs[prop] : data[prop]);\n                    if (value !== undefined) {\n                        // data point to a model attribute\n                        if (isString(value) && model[value]) value = model[value];\n                        data[prop] = value;\n                    }\n                });\n            }\n            // give the model a name\n            if (!model.name) model.name = this.name;\n            //\n            // create the new element from the render function\n            var newEl = this.render(data, dattrs);\n            if (isPromise(newEl)) {\n                var self = this;\n                return newEl.then((element) => {\n                    return compile(self, el, element, onMounted);\n                });\n            }\n            else\n                return compile(this, el, newEl, onMounted);\n        }\n    }\n});\n\n// factory of View and Component constructors\nexport function createComponent (name, o, prototype, coreDirectives) {\n    if (isFunction(o)) o = {render: o};\n\n    var obj = assign({}, o),\n        classComponents = extendComponents(map(), pop(obj, 'components')),\n        classDirectives = extendDirectives(map(), pop(obj, 'directives')),\n        model = pop(obj, 'model'),\n        props = pop(obj, 'props');\n\n    function Component (options) {\n        var parent = pop(options, 'parent'),\n            components = map(parent ? parent.components : null),\n            directives = map(parent ? parent.directives : coreDirectives),\n            events = dispatch('message', 'mounted'),\n            cache = {};\n\n        classComponents.each((comp, key) => {\n            components.set(key, comp);\n        });\n        classDirectives.each((comp, key) => {\n            directives.set(key, comp);\n        });\n        extendComponents(components, pop(options, 'components'));\n        extendDirectives(directives, pop(options, 'directives'));\n\n        Object.defineProperties(this, {\n            name : {\n                get () {\n                    return name;\n                }\n            },\n            components: {\n                get: function () {\n                    return components;\n                }\n            },\n            directives: {\n                get: function () {\n                    return directives;\n                }\n            },\n            parent: {\n                get: function () {\n                    return parent;\n                }\n            },\n            root: {\n                get: function () {\n                    return parent ? parent.root : this;\n                }\n            },\n            cache: {\n                get: function () {\n                    return parent ? parent.cache : cache;\n                }\n            },\n            props: {\n                get: function () {\n                    return props;\n                }\n            },\n            uid: {\n                get: function () {\n                    return this.model.uid;\n                }\n            },\n            events: {\n                get: function () {\n                    return events;\n                }\n            }\n        });\n        this.model = assign({}, isFunction(model) ? model() : model, pop(options, 'model'));\n        this.init(options);\n    }\n\n    Component.prototype = assign({}, prototype, obj);\n\n    function component (options) {\n        return new Component(options);\n    }\n\n    component.prototype = Component.prototype;\n\n    return component;\n}\n\n\nexport function mounted (view) {\n    var mounted = view.isMounted;\n    if (!mounted)\n        Object.defineProperty(view, 'isMounted', {\n            get: function () {\n                return true;\n            }\n        });\n    return mounted;\n}\n\n\nexport function extendComponents (container, components) {\n    map(components).each((obj, key) => {\n        container.set(key, createComponent(key, obj, protoComponent));\n    });\n    return container;\n}\n\nexport function extendDirectives (container, directives) {\n    map(directives).each((obj, key) => {\n        container.set(key, createDirective(obj));\n    });\n    return container;\n}\n\n// Finalise the binding between the view and the model\n// inject the model into the view element\n// call the mounted hook and can return a Promise\nexport function asView(vm, element, onMounted) {\n    Object.defineProperty(sel(vm), 'el', {\n        get: function () {\n            return element;\n        }\n    });\n    // Apply model to element and mount\n    var p = select(element).view(vm).mount(null, onMounted);\n    if (isPromise(p))\n        return p.then(() => {\n            vm.mounted();\n            if (onMounted) onMounted(vm);\n        });\n    else {\n        vm.mounted();\n        if (onMounted) onMounted(vm);\n    }\n}\n\n\n// Compile a component model\n// This function is called once a component has rendered the component element\nfunction compile (cm, el, element, onMounted) {\n    if (!element) return warn('render function must return a single HTML node. It returned nothing!');\n    element = asSelect(element);\n    if (element.size() !== 1) warn('render function must return a single HTML node');\n    element = element.node();\n    //\n    // Insert before the component element\n    el.parentNode.insertBefore(element, el);\n    // remove the component element\n    select(el).remove();\n    //\n    return asView(cm, element, onMounted);\n}\n\n\nfunction attributes (element) {\n    var attrs = {};\n    let attr;\n    for (let i = 0; i < element.attributes.length; ++i) {\n        attr = element.attributes[i];\n        attrs[attr.name] = attr.value;\n    }\n    return attrs;\n}\n","import {select} from 'd3-selection';\nimport {isPromise} from 'd3-let';\n\nimport warn from '../utils/warn';\n\n// No value, it has its own directive\nconst attributes = ['name', 'class', 'disabled', 'readonly', 'required', 'href'];\n\n\nexport default function (element, directives) {\n    var sel = select(element),\n        dirs = sel.directives();\n    if (dirs) return dirs;\n    dirs = new Directives();\n\n    if (!directives) return dirs;\n\n    for (let i = 0; i < element.attributes.length; ++i) {\n        let attr = element.attributes[i],\n            bits = attr.name.split('-'),\n            arg = bits[2],\n            dirName = bits[0] === 'd3' ? bits[1] : null;\n\n        if (dirName) {\n            if (!arg && attributes.indexOf(dirName) > -1) {\n                arg = dirName;\n                dirName = 'attr';\n            }\n            var directive = directives.get(dirName);\n            if (directive) dirs.add(directive(element, attr, arg));\n            else warn(`${element.tagName} cannot find directive \"${dirName}\". Did you forget to register it?`);\n        }\n        dirs.attrs[attr.name] = attr.value;\n    }\n\n    if (dirs.size()) sel.directives(dirs);\n    return dirs;\n}\n\n\n// Directives container\nfunction Directives () {\n    this.attrs = {};\n    this.all = [];\n}\n\n\nDirectives.prototype = {\n\n    size () {\n        return this.all.length;\n    },\n\n    pop: function (dir) {\n        var index = this.all.indexOf(dir);\n        if (index > -1) {\n            dir.removeAttribute();\n            this.all.splice(index, 1);\n        }\n        return dir;\n    },\n\n    add (dir) {\n        this.all.push(dir);\n    },\n\n    forEach (callback) {\n        this.all.forEach(callback);\n    },\n\n    preMount () {\n        let dir;\n        for (let i=0; i<this.all.length; ++i) {\n            dir = this.all[i];\n            if (dir.preMount()) return this.pop(dir);\n        }\n    },\n\n    execute (model) {\n        if (!this.size()) return;\n        var promises = [];\n        let promise;\n        this.forEach((d) => {\n            promise = d.execute(model);\n            if (isPromise(promise)) promises.push(promise);\n        });\n        if (promises.length)\n            return Promise.all(promises);\n    }\n};\n","import {select, selection} from 'd3-selection';\nimport {isPromise} from 'd3-let';\n\nimport getdirs from './getdirs';\nimport slice from '../utils/slice';\nimport warn from '../utils/warn';\n\n\n// Extend selection prototype with new methods\nselection.prototype.mount = mount;\nselection.prototype.view = view;\nselection.prototype.model = model;\nselection.prototype.directives = directives;\n\n\nfunction directives (value) {\n    return arguments.length\n      ? this.property(\"__d3_directives__\", value)\n      : this.node().__d3_directives__;\n}\n\n\nfunction model () {\n    var vm = this.view();\n    return vm ? vm.model : null;\n}\n\n\nfunction view (value) {\n    if (arguments.length) {\n        return this.property(\"__d3_view__\", value);\n    } else {\n        var element = this.node(),\n            view = element.__d3_view__,\n            parent = element.parentNode;\n\n        while (parent && !view) {\n            view = parent.__d3_view__;\n            parent = parent.parentNode;\n        }\n        return view;\n    }\n}\n\n//\n// mount function on a d3 selection\n// Use this function to mount the selection\n// THis method returns nothing or a promise\nfunction mount (data, onMounted) {\n    var promises = [];\n    let promise;\n    this.each(function () {\n        var view = select(this).view();\n        if (view) {\n            promise = mountElement(this, view, data, onMounted);\n            if (isPromise(promise)) promises.push(promise);\n        } else {\n            warn('Cannot mount, no view object available to mount to');\n        }\n    });\n    return promises.length ? Promise.all(promises) : null;\n}\n\n\n// mount an element into a given model\nfunction mountElement (element, vm, data, onMounted) {\n    var component = vm.components.get(element.tagName.toLowerCase()),\n        directives = getdirs(element, vm.directives),\n        preMount = directives.preMount();\n\n    if (preMount)\n        return preMount.execute(vm.model);\n    else {\n        let promise;\n        if (component) {\n            vm = component({parent: vm});\n            promise = vm.mount(element, data, onMounted);\n        } else {\n            var promises = [],\n                children = slice(element.children);\n            for (let i=0; i<children.length; ++i) {\n                promise = mountElement(children[i], vm, data, onMounted);\n                if (isPromise(promise)) promises.push(promise);\n            }\n            if (promises.length)\n                promise = Promise.all(promises);\n        }\n\n        if (isPromise(promise))\n            return promise.then(() => {\n                return directives.execute(vm.model);\n            });\n        else\n            return directives.execute(vm.model);\n    }\n}\n","import assign from 'object-assign';\nimport {isObject, isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport './selection';\nimport {createComponent, protoComponent, mounted, asView} from './component';\nimport createDirective from './directive';\nimport viewModel from '../model/main';\nimport warn from '../utils/warn';\n\n//\n// prototype for views\nexport default assign({}, protoComponent, {\n\n    use: function (plugin) {\n        if (isObject(plugin)) plugin.install(this);\n        else plugin(this);\n        return this;\n    },\n\n    addComponent: function (name, obj) {\n        if (this.isMounted) return warn('already mounted, cannot add component');\n        var component = createComponent(name, obj, protoComponent);\n        this.components.set(name, component);\n        return component;\n    },\n\n    addDirective: function (name, obj) {\n        if (this.isMounted) return warn('already mounted, cannot add directive');\n        var directive = createDirective(obj);\n        this.directives.set(name, directive);\n        return directive;\n    },\n\n    mount: function (el, callback) {\n        if (mounted(this)) warn('already mounted');\n        else {\n            el = element(el);\n            if (el) {\n                this.model = this.parent ? this.parent.model.$child(this.model) : viewModel(this.model);\n                return asView(this, el, callback);\n            }\n        }\n    }\n});\n\n\nfunction element (el) {\n    if (!el) return warn(`element not defined, pass an identifier or an HTMLElement object`);\n    var d3el = isFunction(el.node) ? el : select(el),\n        element = d3el.node();\n    if (!element) warn(`could not find ${el} element`);\n    else return element;\n}\n","import {select} from 'd3-selection';\nimport {isArray} from 'd3-let';\n\nimport {createComponent} from '../core/component';\nimport protoView from '../core/view';\nimport warn from '../utils/warn';\n\n\nexport const forView = createComponent('forView', null, protoView);\n\n//\n//  d3-for directive\n//  ======================\n//\n//  Repeat a element over an array of items and establish\n//  a one way binding between the array and the Dom\nexport default {\n\n    create (expression) {\n        var bits = [];\n        expression.trim().split(' ').forEach((v) => {\n            v ? bits.push(v) : null;\n        });\n        if (bits.length !== 3 || bits[1] != 'in')\n            return warn(`d3-for directive requires \"item in expression\" template, got \"${expression}\"`);\n        this.itemName = bits[0];\n        this.itemClass = `for${this.uid}`;\n        return bits[2];\n    },\n\n    preMount () {\n        return true;\n    },\n\n    mount (model) {\n        this.creator = this.el;\n        this.el = this.creator.parentNode;\n        // remove the creator from the DOM\n        select(this.creator).remove();\n        if (this.el) return model;\n    },\n\n    refresh (model, items) {\n        if (!isArray(items)) return;\n\n        var creator = this.creator,\n            selector = `${creator.tagName}.${this.itemClass}`,\n            itemName = this.itemName,\n            sel = this.sel,\n            entries = sel.selectAll(selector).data(items),\n            vm = sel.view();\n\n        let x;\n\n        entries.exit().remove();\n\n        entries\n            .enter()\n                .append(() => {\n                    return creator.cloneNode(true);\n                })\n                .classed(this.itemClass, true)\n                .each(function (d, index) {\n                    x = {index: index};\n                    x[itemName] = d;\n                    forView({\n                        model: x,\n                        parent: vm\n                    }).mount(this, (vm) => {\n                        // replace the item with a property from the model\n                        // This allow for reactivity when d is an object\n                        items[index] = vm.model[itemName];\n                    });\n                });\n            //.merge(entries)\n            //    .each(function () {\n            //        var vm = this.__d3_view__;\n            //        if (vm._refresh) vm.refresh();\n            //        vm._refresh = true;\n            //    });\n    }\n};\n","//\n//  d3-if\n//  =============\n//\n//  Show or hide an element\n//\nexport default {\n\n    mount: function (model) {\n        this.display = this.sel.style('display');\n        if (!this.display || this.display === 'none') this.display = 'block';\n        return model;\n    },\n\n    refresh: function (model, value) {\n        if (value) this.sel.style('display', this.display);\n        else this.sel.style('display', 'none');\n    }\n};\n","import attr from './attr';\nimport html from './html';\nimport value from './value';\nimport on from './on';\nimport d3For from './for';\nimport d3If from './if';\n\nexport default {\n    attr,\n    html,\n    value,\n    on,\n    'for': d3For,\n    'if': d3If\n};\n","import {map} from 'd3-collection';\n\nimport directives from './directives/index';\nimport protoView from './core/view';\nimport {createComponent, extendDirectives} from './core/component';\n\n// Core Directives\nconst coreDirectives = extendDirectives(map(), directives);\n\n// the view constructor\nexport default createComponent('view', null, protoView, coreDirectives);\n","import {select} from 'd3-selection';\n\n\nexport default function (el, html, data) {\n    var p = select(el).html(html).mount(data);\n    if (!p) p = new Promise(function (resolve) {resolve();});\n    return p;\n}\n","import {timeout} from 'd3-timer';\n\nimport providers from './providers';\n\n\n// Add callback to execute when the DOM is ready\nexport default function (callback) {\n    providers.readyCallbacks.push(callback);\n    if (document.readyState !== 'complete') {\n        document.addEventListener('DOMContentLoaded', _completed);\n        // A fallback to window.onload, that will always work\n        window.addEventListener('load', _completed);\n    }\n    else\n        domReady();\n}\n\n\nfunction _completed () {\n    document.removeEventListener('DOMContentLoaded', _completed);\n\twindow.removeEventListener('load', _completed);\n    domReady();\n}\n\n\nfunction domReady() {\n    let callback;\n    while (providers.readyCallbacks.length ) {\n        callback = providers.readyCallbacks.shift();\n        timeout(callback);\n    }\n}\n","import {logger} from 'd3-let';\n\nexport default {\n    logger: logger\n};\n","import providers from './providers';\n\nconst prefix = '[d3-form]';\n\n\nexport default function (msg) {\n    providers.logger.warn(`${prefix} ${msg}`);\n}\n","import assign from 'object-assign';\nimport {isString} from 'd3-let';\nimport {select, selectAll} from 'd3-selection';\n\nimport warn from './warn';\n\n//\n// Mixin for all form elements\nexport const formElement = {\n\n    inputData (el, data) {\n        var model = this.model;\n        if (!data) data = {};\n        data.id = data.id || model.uid;\n        model.data = data;\n        el.attr('id', data.id);\n        if (data.classes) el.classed(data.classes, true);\n\n        if (data.disabled) {\n            if (isString(data.disabled))\n                el.attr('d3-attr-disabled', data.disabled);\n            else\n                el.property('disabled', true);\n        }\n        return data;\n    },\n\n    // wrap the form element with extensions\n    wrap (fieldEl) {\n        var field = this,\n            wrappedEl = fieldEl;\n\n        field.model.$formExtensions.forEach(extension => {\n            wrappedEl = extension(field, wrappedEl, fieldEl) || wrappedEl;\n        });\n\n        return wrappedEl;\n    },\n\n    wrapTemplate (sel, template) {\n        var div = document.createElement('div'),\n            outer = select(div).html(template),\n            slot = outer.select('slot');\n\n        if (!slot.size()) {\n            warn('template does not provide a slot element');\n            return sel;\n        }\n        var target = select(slot.node().parentNode);\n        sel.nodes().forEach(function (node) {\n            target.insert(() => {return node;}, 'slot');\n        });\n        slot.remove();\n        return selectAll(div.children);\n    },\n};\n\n// A mixin for all form field components\nexport default assign({}, formElement, {\n\n    model: {\n        value: null,\n        error: '',\n        isDirty: null,\n        srOnly: false,\n        placeholder: '',\n        showError: {\n            reactOn: ['error', 'isDirty'],\n            get () {\n                if (this.error) return this.isDirty;\n                return false;\n            }\n        },\n        // default validate function does nothing, IMPORTANT!\n        $validate () {}\n    },\n\n    inputData (el, data) {\n        data = formElement.inputData.call(this, el, data);\n        if (!data.name)\n            return warn ('Input field without a name');\n\n        el.attr('name', name);\n        data.placeholder = data.placeholder || data.label || data.name;\n        var model = this.model;\n        //\n        // add this model to the form inputs object\n        model.form.inputs[data.name] = model;\n        // give name to model (for debugging info messages)\n        model.name = data.name;\n        model.$on('value', () => {\n            // set isDirty to false if first time here, otherwise true\n            model.isDirty === null ? model.isDirty = false : model.isDirty = true;\n            // trigger a change event in the form\n            // required for form method such as $isValid\n            model.form.$change();\n        });\n        return data;\n    }\n\n});\n","import {timeout} from 'd3-timer';\nimport {isArray} from 'd3-let';\n\nimport warn from './warn';\n\n\nconst componentsFromType = {\n    text: 'input',\n    email: \"input\",\n    password: 'input',\n    checkbox: 'input',\n    number: 'input',\n    date: 'input',\n    url: 'input',\n    'datetime-local': 'input'\n};\n\n\n// return A promise which execute a callback at the next event Loop cycle\nexport function nextTick (callback) {\n    var self = this,\n        promise = new Promise((resolve) => timeout(resolve));\n    if (callback) promise.then(() => callback.call(self));\n    return promise;\n}\n\n\nexport function formComponent (child) {\n    var type = child.type || 'text';\n    return componentsFromType[type] || type;\n}\n\n\nexport function addChildren (sel) {\n    var children = this.model.data.children;\n    if (children) {\n        if (!isArray(children)) {\n            warn(`children should be an array of fields, for ${typeof children}`);\n            return sel;\n        }\n        sel.selectAll('.d3form')\n            .data(children)\n            .enter()\n            .append(formChild)\n            .classed('d3form', true);\n    }\n    return sel;\n}\n\n\nfunction formChild (child) {\n    var component = formComponent(child);\n    if (!component) {\n        warn(`Could not find form component ${child.type}`);\n        component = 'input';\n        child.type = 'hidden';\n    }\n    return document.createElement(`d3-form-${component}`);\n}\n","import assign from 'object-assign';\n\nimport {formElement} from './field';\nimport {addChildren} from './utils';\n\n//\n// Fieldset element\nexport default assign({}, formElement, {\n\n    render (data) {\n        var tag = data ? data.tag || 'fieldset' : 'fieldset',\n            el = this.createElement(tag);\n        data = this.inputData(el, data);\n        return addChildren.call(this, el);\n    }\n\n});\n","import {isString, isObject} from 'd3-let';\n\n\nconst required = {\n\n    set (el, data) {\n        var value = data.required;\n        if (isString(value))\n            el.attr(`d3-required`, value);\n        else\n            el.property('required', value || null);\n    },\n\n    validate (el, value) {\n        if (el.property('required'))\n            if (!value) return 'required';\n        else if (value === '') {\n            // this is valid, no need to continue with the remaining validators\n            return true;\n        }\n    }\n};\n\n\nconst minLength = {\n\n    set (el, data) {\n        var value = data.minLength;\n        if (isString(value))\n            el.attr(`d3-attr-minlength`, value);\n        else if (value !== undefined)\n            el.attr('minlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('minlength');\n        if (l === l && l > 0 && value.length < l)\n            return `too short - ${l} characters or more expected`;\n    }\n};\n\n\nconst maxLength = {\n\n    set (el, data) {\n        var value = data.maxLength;\n        if (isString(value))\n            el.attr(`d3-attr-maxlength`, value);\n        else if (value !== undefined)\n            el.attr('maxlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('maxlength');\n        if (l === l && l > 0 && value && value.length > l)\n            return `too long - ${l} characters or less expected`;\n    }\n};\n\n\nconst minimum = {\n\n    set (el, data) {\n        var value = data.minimum;\n        if (isString(value))\n            el.attr(`d3-attr-min`, value);\n        else if (value !== undefined)\n            el.attr('min', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value < r[0])\n            return `must be greater or equal ${r[0]}`;\n    }\n};\n\n\nconst maximum = {\n\n    set (el, data) {\n        var value = data.maximum;\n        if (isString(value))\n            el.attr(`d3-attr-max`, value);\n        else if (value !== undefined)\n            el.attr('max', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value > r[1])\n            return `must be less or equal ${r[1]}`;\n    }\n};\n\n// validator singleton\nexport default {\n\n    // get the list of validators\n    // custom is an optional list of custom validators\n    get (custom) {\n        var validators = this.all.slice(0);\n        if (isObject(custom))\n            for (var key in custom)\n                validators.push(customValidator(key, custom[key]));\n        return validators;\n    },\n\n    // add model validators to a form-field\n    set (vm, el) {\n        var model = vm.model;\n        model._view = vm;\n        model.validators.forEach((validator) => validator.set(el, model.data));\n        model.$on('value.validate', this.validate);\n        model.$validate = this.validate;\n    },\n\n    validate () {\n        var model = this,\n            vm = model._view,\n            validators = model.validators,\n            value = model.value,\n            el = vm.sel.attr('id') === model.data.id ? vm.sel : vm.sel.select(`#${model.data.id}`),\n            validator,\n            msg;\n\n        for (var i=0; i<validators.length; ++i) {\n            validator = validators[i];\n            msg = validator.validate(el, value);\n            if (msg) {\n                if (msg === true) msg = '';\n                break;\n            }\n        }\n\n        model.error = msg || '';\n    },\n\n    all: [\n        required,\n        minLength,\n        maxLength,\n        minimum,\n        maximum\n    ]\n};\n\n\nfunction range (el) {\n    var l0 = el.attr('min'),\n        l1 = el.attr('max');\n    l0 = l0 === null ? -Infinity : +l0;\n    l1 = l1 === null ? Infinity : +l1;\n    return [l0, l1];\n}\n\n\nfunction customValidator (key, method) {\n\n    return {\n        set (el, data) {\n            var value = data[key];\n            if (!value) return;\n        },\n\n        validate (el, value) {\n            return method(el, value);\n        }\n    };\n}\n","import assign from 'object-assign';\n\nimport field from './field';\nimport validators from './validators';\n\n\nconst checks = ['checkbox', 'radio'];\n\n//\n// Input element\nexport default assign({}, field, {\n\n    render (data) {\n        var el = this.createElement('input');\n        data = this.inputData(el, data);\n        \n        el.attr('type', data.type || 'text')\n            .attr('d3-value', 'value');\n\n        if (checks.indexOf(el.attr('type')) === -1)\n            el.attr('placeholder', data.placeholder);\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n","import assign from 'object-assign';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Textarea element\nexport default assign({}, field, {\n\n    render: function (data) {\n        var el = this.createElement('textarea');\n        data = this.inputData(el, data);\n        el.attr('placeholder', data.placeholder)\n            .attr('d3-value', 'value');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n\n});\n","import assign from 'object-assign';\nimport {isArray} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Select element\nexport default assign({}, field, {\n\n    model: assign({\n        options: [],\n        $optionLabel: optionLabel,\n        $optionValue: optionValue\n    }, field.model),\n\n    render (data) {\n        var el = this.createElement('select');\n        data = this.inputData(el, data);\n        el.attr('d3-value', 'value')\n            .attr('placeholder', data.placeholder)\n            .append('option')\n                .attr('d3-for', 'option in options')\n                .attr('d3-html', '$optionLabel()')\n                .attr('d3-attr-value', '$optionValue()');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n\n\nfunction optionValue () {\n    if (isArray(this.option)) return this.option[0];\n    return this.option;\n}\n\n\nfunction optionLabel () {\n    if (isArray(this.option)) return this.option[1] || this.option[0];\n    return this.option;\n}\n","import assign from 'object-assign';\nimport {event} from 'd3-selection';\nimport {isString} from 'd3-let';\n\nimport {formElement} from './field';\n\n//\n// Submit element\nexport default assign({}, formElement, {\n\n    render: function (data) {\n        var tag = data ? data.tag || 'button' : 'button',\n            el = this.createElement(tag);\n\n        data = this.inputData(el, data);\n        var model = this.model;\n        //\n        // model non-reactive attributes\n        model.type = data.type || 'submit';\n        if (data.endpoint) model.endpoint = data.endpoint;\n        //\n        // default submit function\n        model.$submit = () => {\n            model.actions.submit.call(model, event);\n        };\n\n        if (!isString(data.disabled)) {\n            this.model.$set('disabled', data.disabled || null);\n            data.disabled = 'disabled';\n        }\n        if (!data.submit) data.submit = '$submit()';\n\n        el.attr('type', model.type)\n            .attr('name', model.name)\n            .attr('d3-attr-disabled', data.disabled)\n            .attr('d3-on-click', data.submit)\n            .html(data.label || 'submit');\n\n        return this.wrap(el);\n    }\n});\n","// Form Responses\nexport default {\n    \"default\": defaultResponse,\n    redirect: redirect\n};\n\n\nfunction defaultResponse (data) {\n    this.message(data);\n}\n\n\nfunction redirect () {\n    window.location.href = this.data.redirectTo || '/';\n}\n","import assign from 'object-assign';\n\nimport providers from './providers';\nimport warn from './warn';\n\n\n//\n// Form Actions\nexport default {\n    submit: submit\n};\n\n\nconst endpointDefauls = {\n    contentType: 'application/json',\n    method: 'post'\n};\n\n//\n// Submit action\nfunction submit (e) {\n    var submit = this,\n        form = submit.form,\n        endpoint = assign({}, endpointDefauls, submit.endpoint);\n\n    if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    var fetch = providers.fetch,\n        data = form.$inputData(),\n        options = {};\n\n    if (!fetch) {\n        warn('fetch provider not available, cannot submit');\n        return;\n    }\n\n    if (!endpoint.url) {\n        warn('No url, cannot submit');\n        return;\n    }\n\n    if (endpoint.contentType === 'application/json') {\n        options.headers = {\n            'Content-Type': endpoint.contentType\n        };\n        options.body = JSON.stringify(data);\n    }\n    else {\n        options.body = new FormData();\n        for (var key in data)\n            options.body.set(key, data[key]);\n    }\n\n    // Flag the form as submitted\n    if (!form.$setSubmit()) {\n        // form not valid, don't bother with request\n        form.$setSubmitDone();\n    } else {\n        options.method = endpoint.method;\n        fetch(endpoint.url, options).then(success, failure);\n    }\n\n\n    function success (response) {\n        form.$setSubmitDone();\n        var ct = (response.headers.get('content-type') || '').split(';')[0];\n        if (ct === 'application/json')\n            response.json().then(data => {\n                form.$response(data, response.status, response.headers);\n            });\n        else {\n            warn(`Cannot load content type '${ct}'`);\n        }\n    }\n\n    function failure () {\n        form.$setSubmitDone();\n    }\n}\n","import {isString} from 'd3-let';\n\nimport {formElement} from './field';\nimport fieldset from './field-set';\nimport input from './field-input';\nimport textarea from './field-textarea';\nimport select from './field-select';\nimport submit from './field-submit';\nimport responses from './responses';\nimport warn from './warn';\nimport providers from './providers';\nimport actions from './actions';\nimport validators from './validators';\nimport {addChildren} from './utils';\n\n\n// Main form component\nexport default {\n\n    // make sure a new model is created for this component\n    props: ['schema'],\n\n    components: {\n        'd3-form-fieldset': fieldset,\n        'd3-form-input': input,\n        'd3-form-textarea': textarea,\n        'd3-form-select': select,\n        'd3-form-submit': submit\n    },\n\n    model: {\n        formSubmitted: false,\n        formPending: false,\n        $isValid (submitting) {\n            let inp,\n                valid = true;\n            for (var key in this.inputs) {\n                inp = this.inputs[key];\n                if (submitting) inp.isDirty = true;\n                inp.$validate();\n                if (inp.error) valid = false;\n            }\n            return valid;\n        },\n        $setSubmit () {\n            this.formSubmitted = true;\n            this.formPending = true;\n            return this.$isValid(true);\n        },\n        $setSubmitDone () {\n            this.formPending = false;\n        },\n        $inputData () {\n            var inputs = this.inputs,\n                data = {},\n                value;\n            for (var key in inputs) {\n                value = inputs[key].value;\n                if (value !== undefined) data[key] = value;\n            }\n            return data;\n        },\n        //\n        // response from a server submit\n        $response (data, status, headers) {\n            if (status < 300) {\n                if (this.data.resultHandler) {\n                    var handler = responses[this.data.resultHandler];\n                    if (!handler) warn(`Could not find ${this.data.resultHandler} result handler`);\n                    else handler.call(this, data, status, headers);\n                } else {\n                    responses.default.call(this, data, status, headers);\n                }\n            } else\n                this.$responseError(data, status, headers);\n        },\n        //\n        //  bad response from server submit\n        $responseError (data) {\n            data.level = 'error';\n            this.$message(data);\n        }\n    },\n\n    render: function (data) {\n        var model = this.model,\n            form = this.createElement('form').attr('novalidate', ''),\n            self = this;\n        //\n        model.$formExtensions = this.root.$formExtensions || [];\n        model.inputs = {};\n        model.actions = {};\n        model.form = model; // inject self for children models\n        //\n        var schema = data['schema'];\n        if (isString(schema)) {\n            var fetch = providers.fetch;\n            return fetch(schema, {method: 'GET'}).then((response) => {\n                if (response.status === 200) return response.json().then(build);\n                else warn(`Could not load form from ${schema}: status ${response.status}`);\n            });\n        }\n        else return build(schema);\n\n        function build (schema) {\n            schema = formElement.inputData.call(self, form, schema);\n            //\n            // Form validations\n            model.validators = validators.get(schema.validators);\n            //\n            // Form actions\n            for (var key in actions) {\n                var action = schema[key];\n                if (isString(action)) action = self.model.$get(action);\n                model.actions[key] = action || actions[key];\n            }\n            addChildren.call(self, form);\n            return form;\n        }\n    }\n};\n","import form from './form';\nimport actions from './actions';\nimport responses from './responses';\nimport providers from './providers';\n\n\n// Forms plugin\nexport default {\n    install (vm) {\n        vm.addComponent('d3form', form);\n        // list of form Extensions\n        vm.$formExtensions = [];\n        for (var key in vm.providers)\n            providers[key] = vm.providers[key];\n    },\n    actions,\n    responses\n};\n","export default function (field, wrappedEl) {\n    var data = field.model.data;\n    return field.wrapTemplate(wrappedEl, labelTpl(data));\n}\n\n\nfunction labelTpl(data) {\n    var label = data.label || data.name;\n\n    return `<label for=${data.id} class=\"control-label\" d3-class=\"[srOnly ? 'sr-only' : null]\">${label}</label>\n<slot></slot>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data;\n    fieldEl.classed('form-control', true).attr('d3-class',\n        `[${data.required || false} ? \"form-control-required\" : null, showError ? \"form-control-danger\" : null]`\n    );\n    return field.wrapTemplate(wrappedEl, groupTpl(data));\n}\n\n\nfunction groupTpl () {\n    return `<div class=\"form-group\" d3-class='showError ? \"has-danger\" : null'>\n<slot></slot>\n<p d3-if=\"showError\" class=\"text-danger error-block\" d3-html=\"error\"></p>\n</div>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        ig = data['group'];\n    if (!ig) return wrappedEl;\n    var gid = `g${fieldEl.attr('id')}`;\n    fieldEl.attr('aria-describedby', gid);\n    return field.wrapTemplate(wrappedEl, groupTpl(gid, ig));\n}\n\n\nfunction groupTpl(gid, group) {\n    return `<div class=\"input-group\" :class=\"bootstrapStatus()\">\n<span class=\"input-group-addon\" id=\"${gid}\">${group}</span>\n<slot></slot>\n</div>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data;\n    fieldEl.classed('form-check-input', true);\n    return field.wrapTemplate(wrappedEl, groupTpl(data.label));\n}\n\nfunction groupTpl(label) {\n    return `<div class=\"form-check\">\n<label class=\"form-check-label\">\n<slot></slot>\n${label}\n</label>\n</div>`;\n}\n","const groupTpl = `<div class=\"form-group\">\n<slot></slot>\n</div>`;\n\n\nexport default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        theme = data.theme || 'primary';\n    fieldEl.classed('btn', true).classed(`btn-${theme}`, true);\n    return field.wrapTemplate(wrappedEl, groupTpl);\n}\n","import label from './label';\nimport formGroup from './form-group';\nimport inputGroup from './input-group';\nimport formCheck from './check';\nimport submit from './submit';\nimport warn from '../warn';\n\n\nconst bootstrap = {\n\n    input: ['inputGroup', 'label', 'formGroup'],\n    checkbox: ['formCheck'],\n    textarea: ['label', 'formGroup'],\n    select: ['label', 'formGroup'],\n    submit: ['submit'],\n    wrappers: {\n        label,\n        formGroup,\n        inputGroup,\n        formCheck,\n        submit\n    }\n};\n\n\n//\n//  Bootstrap plugin\n//  ===================\n//\n//  Simply add a new form extension to wrap form fields\n//\nexport default {\n\n    install (vm) {\n        if (!vm.$formExtensions)\n            return warn('form bootstrap requires the form plugin installed first!');\n        vm.$formExtensions.push(wrapBootstrap);\n    }\n};\n\n\nfunction wrapBootstrap(field, wrappedEl, fieldEl) {\n    var wrappers = bootstrap[fieldEl.attr('type')] || bootstrap[fieldEl.node().tagName.toLowerCase()];\n    if (!wrappers) return wrappedEl;\n    let wrap;\n\n    wrappers.forEach(wrapper => {\n        wrap = bootstrap.wrappers[wrapper];\n        if (wrap) wrappedEl = wrap(field, wrappedEl, fieldEl);\n        else warn(`Could not find form field wrapper ${wrapper}`);\n    });\n\n    return wrappedEl;\n}\n"],"names":["ostring","Object","prototype","toString","inBrowser","window","call","logger","console","require","isObject","value","isString","isFunction","isArray","isNumber","isPromise","obj","prop","index","splice","prefix","Map","_array","map","length","key","has","push","self","each","_","property","entries","v","callback","a","i","get","object","f","set","Array","n","o","msg","providers","debug","defaultDebug","info","fetch","active","arguments","warn","properties","expression","arg","model","refreshClass","indexOf","sel","attr","oldValue","forEach","entry","classed","exist","idx","slice","html","children","el","mount","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","toObject","val","undefined","TypeError","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","join","test3","split","letter","keys","err","module","target","source","from","to","symbols","s","delay","promise","args","Promise","resolve","reject","defineProperty","select","base","attrName","refresh","refreshFunction","on","createValueType","proto","ValueType","vType","debounce","$set","options","selectAll","values","opt","input","type","tag","tagName","toLowerCase","types","expr","parsed","codes","IDENTIFIER","off","event","uid","eval","code","PERIOD_CODE","COMMA_CODE","SQUOTE_CODE","DQUOTE_CODE","OPAREN_CODE","CPAREN_CODE","OBRACK_CODE","CBRACK_CODE","QUMARK_CODE","SEMCOL_CODE","COLON_CODE","throwError","message","error","Error","description","t","unary_ops","binary_ops","getMaxKeyLen","max_len","len","max_unop_len","max_binop_len","literals","this_str","binaryPrecedence","op_val","createBinaryExpression","operator","left","right","LOGICAL_EXP","BINARY_EXP","isDecimalDigit","ch","isIdentifierStart","isIdentifierPart","jsep","charAtFunc","charAt","charCodeAtFunc","charCodeAt","exprI","exprICode","gobbleSpaces","gobbleExpression","test","gobbleBinaryExpression","consequent","alternate","CONDITIONAL_EXP","gobbleBinaryOp","to_check","substr","tc_len","node","biop","prec","stack","biop_info","gobbleToken","pop","gobbleNumericLiteral","gobbleStringLiteral","gobbleVariable","gobbleArray","UNARY_EXP","number","chCode","LITERAL","parseFloat","str","quote","closed","gobbleIdentifier","start","identifier","THIS_EXP","gobbleArguments","termination","ch_i","COMPOUND","gobbleGroup","MEMBER_EXP","CALL_EXP","ARRAY_EXP","nodes","addUnaryOp","op_name","Math","max","addBinaryOp","precedence","addLiteral","literal_name","literal_value","removeUnaryOp","removeBinaryOp","removeLiteral","evaluate","name","elements","elem","binaryExp","callExpression","callee","unaryExp","argument","identifiers","all","add","fullName","func","EvalError","apply","op","unaryFunctions","Function","b","binaryFunctions","Expression","UID","events","dispatch","triggered","typename","asModel","initials","Child","ddispatch","defineProperties","$child","$update","createChildConstructor","modelStr","constructor","$events","reactive","lazy","$new","$change","update","newValue","modelName","reactOn","$on","bits","getEvent","parent","data","replace","substring","removeEvent","attribute","trigger","Model","string","$off","root","child","compile","text","handlebars","context","htmlElement","document","createElement","removeAttribute","dir","modelEvents","viewModel","destroy","Directive","create","viewExpression","directive","addTarget","size","JSON","parse","protoComponent","url","cache","then","response","template","onMounted","mounted","directives","dattrs","attrs","attributes","datum","maybeJson","props","newEl","render","element","createComponent","coreDirectives","classComponents","extendComponents","classDirectives","extendDirectives","Component","components","comp","init","component","view","isMounted","container","createDirective","asView","vm","p","cm","asSelect","parentNode","insertBefore","remove","dirs","Directives","dirName","preMount","promises","d","execute","selection","__d3_directives__","__d3_view__","mountElement","getdirs","plugin","install","d3el","forView","protoView","trim","itemName","itemClass","creator","items","selector","x","exit","enter","append","cloneNode","display","style","d3For","d3If","readyCallbacks","readyState","addEventListener","_completed","domReady","removeEventListener","shift","formElement","id","classes","disabled","fieldEl","field","wrappedEl","$formExtensions","extension","div","outer","slot","insert","isDirty","inputData","placeholder","label","form","inputs","componentsFromType","formComponent","addChildren","formChild","required","minLength","l","maxLength","minimum","r","range","maximum","custom","validators","customValidator","_view","validator","validate","$validate","l0","l1","Infinity","method","checks","wrap","optionLabel","optionValue","option","endpoint","$submit","actions","submit","defaultResponse","redirect","location","href","redirectTo","endpointDefauls","e","preventDefault","stopPropagation","$inputData","contentType","headers","body","stringify","FormData","$setSubmit","$setSubmitDone","success","failure","ct","json","$response","status","fieldset","textarea","submitting","inp","valid","formSubmitted","formPending","$isValid","resultHandler","handler","responses","default","$responseError","level","$message","schema","build","action","$get","addComponent","wrapTemplate","labelTpl","groupTpl","ig","gid","group","theme","bootstrap","wrapBootstrap","wrappers","wrapper"],"mappings":"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"}
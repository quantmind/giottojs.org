{"version":3,"file":"d3-view.js","sources":["../src/utils/debug.js","../src/utils/providers.js","../src/utils/warn.js","../src/directives/attr.js","../src/directives/html.js","../src/utils/debounce.js","../src/utils/sel.js","../src/directives/types/type.js","../src/directives/types/input.js","../src/directives/types/checkbox.js","../src/directives/types/select.js","../src/directives/types/index.js","../src/directives/value.js","../src/directives/on.js","../src/utils/html.js","../src/utils/errors.js","../src/utils/select.js","../src/core/base.js","../src/core/transition.js","../src/parser/jsep.js","../src/parser/eval.js","../src/parser/expression.js","../src/utils/uid.js","../src/model/dispatch.js","../src/model/as.js","../src/model/string.js","../src/utils/object.js","../src/model/set.js","../src/model/on.js","../src/model/update.js","../src/model/off.js","../src/utils/slice.js","../src/model/change.js","../src/model/isreactive.js","../src/model/owner.js","../src/model/array.js","../src/model/main.js","../src/core/directive.js","../src/utils/maybeJson.js","../src/utils/data.js","../src/core/events.js","../src/core/component.js","../src/core/getdirs.js","../src/core/selection.js","../src/core/view.js","../src/directives/for.js","../src/directives/if.js","../src/directives/index.js","../src/core/clean.js","../src/main.js","../src/mount.js","../src/utils/dom.js","../src/forms/providers.js","../src/forms/warn.js","../src/forms/field.js","../src/forms/utils.js","../src/forms/field-set.js","../src/forms/validators.js","../src/forms/field-input.js","../src/forms/field-textarea.js","../src/forms/field-select.js","../src/forms/field-submit.js","../src/forms/responses.js","../src/forms/actions.js","../src/forms/form.js","../src/forms/plugin.js","../src/forms/bootstrap/label.js","../src/forms/bootstrap/form-group.js","../src/forms/bootstrap/input-group.js","../src/forms/bootstrap/check.js","../src/forms/bootstrap/submit.js","../src/forms/bootstrap/plugin.js"],"sourcesContent":["import providers from './providers';\n\nconst prefix = '[d3-view-debug]';\n\nexport default function (msg) {\n    if (providers.logger.debug)\n        providers.logger.debug(msg);\n}\n\n\nexport function defaultDebug (msg) {\n    providers.logger.info(`${prefix} ${msg}`);\n}\n","import {logger, inBrowser, isFunction} from 'd3-let';\nimport {defaultDebug} from './debug';\n\n\nlogger.debug = null;\n\n\nexport default {\n    // log messages\n    logger: logger,\n    // fetch remote resources\n    fetch: fetch(),\n    // callbacks when page is loaded in browser\n    readyCallbacks: [],\n    // Set/unset debug\n    setDebug (active) {\n        if (!arguments.length || active)\n            this.logger.debug = isFunction(active) ? active : defaultDebug;\n        else\n            this.logger.debug = null;\n    },\n    require: d3Require()\n};\n\n\nfunction fetch() {\n    if (inBrowser) return window.fetch;\n}\n\n\nfunction d3Require () {\n    var require = null;\n    if (inBrowser) {\n        if (window.d3) require =window.d3.require;\n    }\n    return require || unsupportedRequire;\n}\n\n\nfunction unsupportedRequire () {\n    return Promise.reject(new Error('Cannot requires libraries, d3-require is not available'));\n}\n","import providers from './providers';\n\nconst prefix = '[d3-view]';\n\n\nexport default function (msg) {\n    providers.logger.warn(`${prefix} ${msg}`);\n}\n","import {isArray} from 'd3-let';\nimport {map} from 'd3-collection';\n\nimport warn from '../utils/warn';\n\nconst properties = map({\n    disabled: 'disabled',\n    readonly: 'readOnly',\n    required: 'required'\n});\n\n//\n//  d3-attr-<attr> directive\n//  ==============================\n//\n//  Create a one-way binding between a model and a HTML element attribute\n//\nexport default {\n\n    create (expression) {\n        if (!this.arg) return warn('Cannot bind to empty attribute. Specify :<attr-name>');\n        return expression;\n    },\n\n    refresh (model, value) {\n        if (this.arg === 'class') return this.refreshClass(value);\n        if (isArray(value)) return warn(`Cannot apply array to attribute ${this.arg}`);\n        var prop = properties.get(this.arg);\n        if (prop) this.sel.property(prop, value || false);\n        else this.sel.attr(this.arg, value || null);\n    },\n\n    refreshClass (value) {\n        var sel = this.sel;\n\n        if (!isArray(value)) value = [value];\n\n        if (this.oldValue)\n            this.oldValue.forEach((entry) => {\n                if (entry)\n                    sel.classed(entry, false);\n            });\n\n        this.oldValue = value.map((entry) => {\n            var exist = true;\n            if (isArray(entry)) {\n                exist = entry[1];\n                entry = entry[0];\n            }\n            if (entry)\n                sel.classed(entry, exist);\n            return entry;\n        });\n    }\n\n};\n","import {isString, isNumber} from 'd3-let';\n//\n//  d3-html\n//  =============\n//  attach html or text to the innerHtml property and mount components if required\n//\n//  Usage:\n//      <div id=\"foo\" d3-html=\"output\"></div>\nexport default {\n\n    refresh (model, html) {\n        if (isNumber(html)) html = ''+html;\n        if (isString(html)) {\n            var dir = this,\n                sel = this.sel,\n                transition = this.passes ? this.transition(sel) : null;\n            if (transition) {\n                transition.style('opacity', 0).on('end', () => {\n                    sel.html(html);\n                    dir.selectChildren().mount();\n                    dir.transition(sel).style('opacity', 1);\n                });\n            } else {\n                sel.html(html);\n                this.selectChildren().mount();\n            }\n        }\n    }\n};\n","import {timeout} from 'd3-timer';\n\n//\n// Evaluate a callback (optional) with given delay (optional)\n//\n// if delay is not given or 0, the callback is evaluated at the next tick\n// of the event loop.\n// Calling this method multiple times in the dsame event loop tick produces\n// always the initial promise\nexport default function (callback, delay) {\n    var promise = null;\n\n    function debounce () {\n        if (promise !== null) return promise;\n        var self = this,\n            args = arguments;\n\n        promise = new Promise((resolve, reject) => {\n\n            timeout(() => {\n                promise = null;\n                try {\n                    resolve(callback ? callback.apply(self, args) : undefined);\n                } catch (err) {\n                    reject(err);\n                }\n            }, delay);\n        });\n\n        return promise;\n    }\n\n    debounce.promise = function () {\n        return promise;\n    };\n\n    return debounce;\n}\n","import {select} from 'd3-selection';\n\n\nexport default function (o) {\n\n    Object.defineProperty(o, 'sel', {\n        get () {\n            return select(this.el);\n        }\n    });\n\n    return o;\n}\n","import {assign} from 'd3-let';\n\nimport debounce from '../../utils/debounce';\nimport sel from '../../utils/sel';\n\n\nconst base = {\n\n    on (model, attrName) {\n        var refresh = refreshFunction(this, model, attrName);\n\n        // DOM => model binding\n        this.sel\n            .on('input', refresh)\n            .on('change', refresh);\n    },\n\n    off () {\n        this.sel\n            .on('input', null)\n            .on('change', null);\n    },\n\n    value (value) {\n        if (arguments.length)\n            this.sel.property('value', value);\n        else\n            return this.sel.property('value');\n    }\n};\n\n\nexport function createValueType (proto) {\n\n    function ValueType(el) {\n        sel(this).el = el;\n    }\n\n    ValueType.prototype = assign({}, base, proto);\n\n    return ValueType;\n}\n\n\nexport function refreshFunction (vType, model, attrName) {\n\n    return debounce(() => {\n        model.$set(attrName, vType.value());\n    });\n}\n","import {createValueType} from './type';\n\nexport default createValueType();\n","import {createValueType} from './type';\n\nexport default createValueType({\n    value (value) {\n        if (arguments.length)\n            this.sel.property('checked', value);\n        else\n            return this.sel.property('checked');\n    }\n});\n","import {isArray} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {createValueType} from './type';\n\n\nexport default createValueType({\n\n    value (value) {\n        var sel = this.sel,\n            options = sel.selectAll('option'),\n            values = value,\n            opt;\n\n        if (arguments.length) {\n            if (!isArray(values)) values = [value || ''];\n            options.each(function () {\n                opt = select(this);\n                value = opt.attr('value') || '';\n                opt.property('selected', values.indexOf(value) > -1);\n            });\n        } else {\n            values = [];\n            options.each(function () {\n                opt = select(this);\n                if (opt.property('selected'))\n                    values.push(opt.attr('value') || '');\n            });\n            if (sel.property('multiple')) return values;\n            else return values[0] || '';\n        }\n    }\n});\n","import input from './input';\nimport checkbox from './checkbox';\nimport select from './select';\n\nexport default {\n    input,\n    textarea: input,\n    select,\n    checkbox\n};\n","import types from './types/index';\n\nimport warn from '../utils/warn';\n\n//\n//  d3-value directive\n//  ===================\n//\n//  Two-way data binding for HTML elements supporting the value property\nexport default {\n\n    create (expression) {\n        var type = this.sel.attr('type'),\n            tag = this.el.tagName.toLowerCase(),\n            ValueType = types[type] || types[tag];\n\n        if (!ValueType) return warn(`Cannot apply d3-value directive to ${tag}`);\n        this.tag = new ValueType(this.el);\n        return expression;\n    },\n\n    mount (model) {\n        var expr = this.expression;\n        // TODO: relax this constraint\n        if (expr.parsed.type !== expr.codes.IDENTIFIER)\n            return warn(`d3-value expression support identifiers only, got \"${expr.parsed.type}\": ${this.expression}`);\n        var attrName = this.expression.expr;\n        //\n        // Create the model reactive attribute\n        model.$set(attrName, this.tag.value());\n        // register dom event\n        this.tag.on(model, attrName);\n        return model;\n    },\n\n    refresh (model, value) {\n        this.tag.value(value);\n    },\n\n    destroy () {\n        this.tag.off();\n    }\n};\n","//\n//  d3-on directive\n//\n//  A one-way data binding from dom events to model properties/methods\n//  Event listeners are on the DOM, not on the model\nexport default {\n\n    mount (model) {\n        var eventName = this.arg || 'click',\n            expr = this.expression;\n\n        // DOM event => model binding\n        this.on(this.sel, `${eventName}.${this.uid}`, (event) => {\n            var md = model.$child();\n            md.$event = event;\n            expr.eval(md);\n        });\n\n        this.bindDestroy(model);\n        // Does not return the model so that model data binding is not performed\n    },\n\n    destroy () {\n        var eventName = this.arg || 'click';\n        this.on(this.sel, `${eventName}.${this.uid}`, null);\n    }\n};\n","import {inBrowser, isString} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport warn from './warn';\nimport providers from './providers';\n\n\n// require handlebar\nexport function compile (text) {\n    var handlebars = providers.handlebars;\n    if (!handlebars) handlebars = inBrowser ? window.handlebars : require('handlebars');\n    if (handlebars) return handlebars.compile(text);\n    warn('compile function requires handlebars');\n}\n\n\nexport function html (source, context) {\n    if (isString(source)) {\n        if (context) {\n            var s = compile(source);\n            if (!s) return source;\n            source = s;\n        }\n        else\n            return source;\n    }\n    return source(context);\n}\n\n\nexport function htmlElement (source, context) {\n    var el = select(document.createElement('div'));\n    el.html(html(source, context));\n    var children = el.node().children;\n    if (children.length !== 1) warn(`HtmlElement function should return one root element only, got ${children.length}`);\n    return children[0];\n}\n","\n\nexport function HttpError (response) {\n    this.response = response;\n    this.description = response.statusText;\n}\n\n\nHttpError.prototype = Error.prototype;\n","import {isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\n\nexport default function (el) {\n    if (el && !isFunction(el.size)) return select(el);\n    return el;\n}\n","import {select, selectAll, event} from 'd3-selection';\n\nimport providers from '../utils/providers';\nimport {htmlElement, html} from '../utils/html';\nimport {HttpError} from '../utils/errors';\nimport asSelect from '../utils/select';\n//\n//  Base d3-view Object\n//  =====================\n//\nexport default {\n    // d3-view object\n    isd3: true,\n    //\n    providers: providers,\n    //\n    // Create a view element, same as createElement but compile it\n    viewElement: htmlElement,\n    //\n    select (el) {\n        return select(el);\n    },\n    //\n    selectAll (el) {\n        return selectAll(el);\n    },\n    //\n    createElement (tag) {\n        return select(document.createElement(tag));\n    },\n    // Shortcut for fetch function in providers\n    fetch (url, options) {\n        var fetch = providers.fetch;\n        return arguments.length == 1 ? fetch(url) : fetch(url, options);\n    },\n    //\n    fetchText (url, ...x) {\n        return this.fetch(url, ...x).then(response => response.text());\n    },\n    //\n    json (url, ...x) {\n        return this.fetch(url, ...x).then(jsonResponse);\n    },\n    //\n    // render a template from a url\n    renderFromUrl (url, context, asElement=true) {\n        var cache = this.cache;\n        if (url in cache)\n            return Promise.resolve(render(cache[url], context, asElement));\n        return this.fetchText(url).then(template => {\n            cache[url] = template;\n            return render(template, context, asElement);\n        });\n    },\n    //\n    on (el, name, callback) {\n        el = asSelect(el);\n        if (callback === null) return el.on(name, null);\n        else el.on(name, () => callback(event));\n    },\n    //\n    selectChildren (el) {\n        if (!arguments.length) el = this.el;\n        return this.selectAll(Array.prototype.slice.call(el.children));\n    },\n    //\n    domEvent () {\n        return event;\n    }\n};\n\n\nexport function jsonResponse (response) {\n    if (response.status >= 300) throw new HttpError(response);\n    var ct = (response.headers.get('content-type') || '').split(';')[0];\n    if (ct === 'application/json')\n        return response.json();\n    else\n        throw new Error(`Expected JSON content type, got ${ct}`);\n}\n\n\nfunction render (template, context, asElement) {\n    return asElement ? htmlElement(template, context) : html(template, context);\n}\n","import {assign, isFunction} from 'd3-let';\n\nimport providers from '../utils/providers';\nimport base from './base';\n\n\nproviders.transition = {\n    duration: 0\n};\n\n\nexport default assign(base, {\n    //\n    // return a transition object if possible\n    transition (sel) {\n        if (!arguments.length) sel = this.sel;\n        var duration = this.transitionDuration(sel);\n        if (duration > 0) return sel.transition(this.uid).duration(duration);\n    },\n\n    transitionDuration (sel) {\n        if (!arguments.length) sel = this.sel;\n        if (sel && isFunction(sel.transition) && sel.size()) {\n            var duration = sel.attr('data-transition-duration');\n            return +(duration === null ? providers.transition.duration : duration);\n        }\n        return 0;\n    }\n});\n","// Code originally from https://github.com/soney/jsep\n// Copyright (c) 2013 Stephen Oney, http://jsep.from.so/\n// Code modified and adapted to work with d3-view\n\n// This is the full set of types that any JSEP node can be.\n// Store them here to save space when minified\nexport const code = {\n    COMPOUND: 'Compound',\n    IDENTIFIER: 'Identifier',\n    MEMBER_EXP: 'MemberExpression',\n    LITERAL: 'Literal',\n    THIS_EXP: 'ThisExpression',\n    CALL_EXP: 'CallExpression',\n    UNARY_EXP: 'UnaryExpression',\n    BINARY_EXP: 'BinaryExpression',\n    LOGICAL_EXP: 'LogicalExpression',\n    CONDITIONAL_EXP: 'ConditionalExpression',\n    ARRAY_EXP: 'ArrayExpression'\n};\n\nvar PERIOD_CODE = 46, // '.'\n    COMMA_CODE  = 44, // ','\n    SQUOTE_CODE = 39, // single quote\n    DQUOTE_CODE = 34, // double quotes\n    OPAREN_CODE = 40, // (\n    CPAREN_CODE = 41, // )\n    OBRACK_CODE = 91, // [\n    CBRACK_CODE = 93, // ]\n    QUMARK_CODE = 63, // ?\n    SEMCOL_CODE = 59, // ;\n    COLON_CODE  = 58, // :\n\n    throwError = function(message, index) {\n        var error = new Error(message + ' at character ' + index);\n        error.index = index;\n        error.description = message;\n        throw error;\n    },\n\n// Operations\n// ----------\n\n// Set `t` to `true` to save space (when minified, not gzipped)\n    t = true,\n// Use a quickly-accessible map to store all of the unary operators\n// Values are set to `true` (it really doesn't matter)\n    unary_ops = {'-': t, '!': t, '~': t, '+': t},\n// Also use a map for the binary operations but set their values to their\n// binary precedence for quick reference:\n// see [Order of operations](http://en.wikipedia.org/wiki/Order_of_operations#Programming_language)\n    binary_ops = {\n        '||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\n        '==': 6, '!=': 6, '===': 6, '!==': 6,\n        '<': 7,  '>': 7,  '<=': 7,  '>=': 7,\n        '<<':8,  '>>': 8, '>>>': 8,\n        '+': 9, '-': 9,\n        '*': 10, '/': 10, '%': 10\n    },\n// Get return the longest key length of any object\n    getMaxKeyLen = function(obj) {\n        var max_len = 0, len;\n        for(var key in obj) {\n            if((len = key.length) > max_len && obj.hasOwnProperty(key)) {\n                max_len = len;\n            }\n        }\n        return max_len;\n    },\n    max_unop_len = getMaxKeyLen(unary_ops),\n    max_binop_len = getMaxKeyLen(binary_ops),\n// Literals\n// ----------\n// Store the values to return for the various literals we may encounter\n    literals = {\n        'true': true,\n        'false': false,\n        'null': null\n    },\n// Except for `this`, which is special. This could be changed to something like `'self'` as well\n    this_str = 'this',\n// Returns the precedence of a binary operator or `0` if it isn't a binary operator\n    binaryPrecedence = function(op_val) {\n        return binary_ops[op_val] || 0;\n    },\n// Utility function (gets called from multiple places)\n// Also note that `a && b` and `a || b` are *logical* expressions, not binary expressions\n    createBinaryExpression = function (operator, left, right) {\n        var type = (operator === '||' || operator === '&&') ? code.LOGICAL_EXP : code.BINARY_EXP;\n        return {\n            type: type,\n            operator: operator,\n            left: left,\n            right: right\n        };\n    },\n    // `ch` is a character code in the next three functions\n    isDecimalDigit = function(ch) {\n        return (ch >= 48 && ch <= 57); // 0...9\n    },\n    isIdentifierStart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n    isIdentifierPart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 48 && ch <= 57) || // 0...9\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n\n    // Parsing\n    // -------\n    // `expr` is a string with the passed in expression\n    jsep = function(expr) {\n        // `index` stores the character number we are currently at while `length` is a constant\n        // All of the gobbles below will modify `index` as we move along\n        var index = 0,\n            charAtFunc = expr.charAt,\n            charCodeAtFunc = expr.charCodeAt,\n            exprI = function(i) { return charAtFunc.call(expr, i); },\n            exprICode = function(i) { return charCodeAtFunc.call(expr, i); },\n            length = expr.length,\n\n            // Push `index` up to the next non-space character\n            gobbleSpaces = function() {\n                var ch = exprICode(index);\n                // space or tab\n                while(ch === 32 || ch === 9) {\n                    ch = exprICode(++index);\n                }\n            },\n\n            // The main parsing function. Much of this code is dedicated to ternary expressions\n            gobbleExpression = function() {\n                var test = gobbleBinaryExpression(),\n                    consequent, alternate;\n                gobbleSpaces();\n                if(exprICode(index) === QUMARK_CODE) {\n                    // Ternary expression: test ? consequent : alternate\n                    index++;\n                    consequent = gobbleExpression();\n                    if(!consequent) {\n                        throwError('Expected expression', index);\n                    }\n                    gobbleSpaces();\n                    if(exprICode(index) === COLON_CODE) {\n                        index++;\n                        alternate = gobbleExpression();\n                        if(!alternate) {\n                            throwError('Expected expression', index);\n                        }\n                        return {\n                            type: code.CONDITIONAL_EXP,\n                            test: test,\n                            consequent: consequent,\n                            alternate: alternate\n                        };\n                    } else {\n                        throwError('Expected :', index);\n                    }\n                } else {\n                    return test;\n                }\n            },\n\n            // Search for the operation portion of the string (e.g. `+`, `===`)\n            // Start by taking the longest possible binary operations (3 characters: `===`, `!==`, `>>>`)\n            // and move down from 3 to 2 to 1 character until a matching binary operation is found\n            // then, return that binary operation\n            gobbleBinaryOp = function() {\n                gobbleSpaces();\n                var to_check = expr.substr(index, max_binop_len), tc_len = to_check.length;\n                while(tc_len > 0) {\n                    if(binary_ops.hasOwnProperty(to_check)) {\n                        index += tc_len;\n                        return to_check;\n                    }\n                    to_check = to_check.substr(0, --tc_len);\n                }\n                return false;\n            },\n\n            // This function is responsible for gobbling an individual expression,\n            // e.g. `1`, `1+2`, `a+(b*2)-Math.sqrt(2)`\n            gobbleBinaryExpression = function() {\n                var node, biop, prec, stack, biop_info, left, right, i;\n\n                // First, try to get the leftmost thing\n                // Then, check to see if there's a binary operator operating on that leftmost thing\n                left = gobbleToken();\n                biop = gobbleBinaryOp();\n\n                // If there wasn't a binary operator, just return the leftmost node\n                if(!biop) {\n                    return left;\n                }\n\n                // Otherwise, we need to start a stack to properly place the binary operations in their\n                // precedence structure\n                biop_info = { value: biop, prec: binaryPrecedence(biop)};\n\n                right = gobbleToken();\n                if(!right) {\n                    throwError(\"Expected expression after \" + biop, index);\n                }\n                stack = [left, biop_info, right];\n\n                // Properly deal with precedence using [recursive descent](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)\n                while((biop = gobbleBinaryOp())) {\n                    prec = binaryPrecedence(biop);\n\n                    if(prec === 0) {\n                        break;\n                    }\n                    biop_info = { value: biop, prec: prec };\n\n                    // Reduce: make a binary expression from the three topmost entries.\n                    while ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\n                        right = stack.pop();\n                        biop = stack.pop().value;\n                        left = stack.pop();\n                        node = createBinaryExpression(biop, left, right);\n                        stack.push(node);\n                    }\n\n                    node = gobbleToken();\n                    if(!node) {\n                        throwError(\"Expected expression after \" + biop, index);\n                    }\n                    stack.push(biop_info, node);\n                }\n\n                i = stack.length - 1;\n                node = stack[i];\n                while(i > 1) {\n                    node = createBinaryExpression(stack[i - 1].value, stack[i - 2], node);\n                    i -= 2;\n                }\n                return node;\n            },\n\n            // An individual part of a binary expression:\n            // e.g. `foo.bar(baz)`, `1`, `\"abc\"`, `(a % 2)` (because it's in parenthesis)\n            gobbleToken = function() {\n                var ch, to_check, tc_len;\n\n                gobbleSpaces();\n                ch = exprICode(index);\n\n                if(isDecimalDigit(ch) || ch === PERIOD_CODE) {\n                    // Char code 46 is a dot `.` which can start off a numeric literal\n                    return gobbleNumericLiteral();\n                } else if(ch === SQUOTE_CODE || ch === DQUOTE_CODE) {\n                    // Single or double quotes\n                    return gobbleStringLiteral();\n                } else if(isIdentifierStart(ch) || ch === OPAREN_CODE) { // open parenthesis\n                    // `foo`, `bar.baz`\n                    return gobbleVariable();\n                } else if (ch === OBRACK_CODE) {\n                    return gobbleArray();\n                } else {\n                    to_check = expr.substr(index, max_unop_len);\n                    tc_len = to_check.length;\n                    while(tc_len > 0) {\n                        if(unary_ops.hasOwnProperty(to_check)) {\n                            index += tc_len;\n                            return {\n                                type: code.UNARY_EXP,\n                                operator: to_check,\n                                argument: gobbleToken(),\n                                prefix: true\n                            };\n                        }\n                        to_check = to_check.substr(0, --tc_len);\n                    }\n\n                    return false;\n                }\n            },\n            // Parse simple numeric literals: `12`, `3.4`, `.5`. Do this by using a string to\n            // keep track of everything in the numeric literal and then calling `parseFloat` on that string\n            gobbleNumericLiteral = function() {\n                var number = '', ch, chCode;\n                while(isDecimalDigit(exprICode(index))) {\n                    number += exprI(index++);\n                }\n\n                if(exprICode(index) === PERIOD_CODE) { // can start with a decimal marker\n                    number += exprI(index++);\n\n                    while(isDecimalDigit(exprICode(index))) {\n                        number += exprI(index++);\n                    }\n                }\n\n                ch = exprI(index);\n                if(ch === 'e' || ch === 'E') { // exponent marker\n                    number += exprI(index++);\n                    ch = exprI(index);\n                    if(ch === '+' || ch === '-') { // exponent sign\n                        number += exprI(index++);\n                    }\n                    while(isDecimalDigit(exprICode(index))) { //exponent itself\n                        number += exprI(index++);\n                    }\n                    if(!isDecimalDigit(exprICode(index-1)) ) {\n                        throwError('Expected exponent (' + number + exprI(index) + ')', index);\n                    }\n                }\n\n\n                chCode = exprICode(index);\n                // Check to make sure this isn't a variable name that start with a number (123abc)\n                if(isIdentifierStart(chCode)) {\n                    throwError('Variable names cannot start with a number (' +\n                                number + exprI(index) + ')', index);\n                } else if(chCode === PERIOD_CODE) {\n                    throwError('Unexpected period', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: parseFloat(number),\n                    raw: number\n                };\n            },\n\n            // Parses a string literal, staring with single or double quotes with basic support for escape codes\n            // e.g. `\"hello world\"`, `'this is\\nJSEP'`\n            gobbleStringLiteral = function() {\n                var str = '', quote = exprI(index++), closed = false, ch;\n\n                while(index < length) {\n                    ch = exprI(index++);\n                    if(ch === quote) {\n                        closed = true;\n                        break;\n                    } else if(ch === '\\\\') {\n                        // Check for all of the common escape codes\n                        ch = exprI(index++);\n                        switch(ch) {\n                            case 'n': str += '\\n'; break;\n                            case 'r': str += '\\r'; break;\n                            case 't': str += '\\t'; break;\n                            case 'b': str += '\\b'; break;\n                            case 'f': str += '\\f'; break;\n                            case 'v': str += '\\x0B'; break;\n                            default : str += '\\\\' + ch;\n                        }\n                    } else {\n                        str += ch;\n                    }\n                }\n\n                if(!closed) {\n                    throwError('Unclosed quote after \"'+str+'\"', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: str,\n                    raw: quote + str + quote\n                };\n            },\n\n            // Gobbles only identifiers\n            // e.g.: `foo`, `_value`, `$x1`\n            // Also, this function checks if that identifier is a literal:\n            // (e.g. `true`, `false`, `null`) or `this`\n            gobbleIdentifier = function() {\n                var ch = exprICode(index), start = index, identifier;\n\n                if(isIdentifierStart(ch)) {\n                    index++;\n                } else {\n                    throwError('Unexpected ' + exprI(index), index);\n                }\n\n                while(index < length) {\n                    ch = exprICode(index);\n                    if(isIdentifierPart(ch)) {\n                        index++;\n                    } else {\n                        break;\n                    }\n                }\n                identifier = expr.slice(start, index);\n\n                if(literals.hasOwnProperty(identifier)) {\n                    return {\n                        type: code.LITERAL,\n                        value: literals[identifier],\n                        raw: identifier\n                    };\n                } else if(identifier === this_str) {\n                    return { type: code.THIS_EXP };\n                } else {\n                    return {\n                        type: code.IDENTIFIER,\n                        name: identifier\n                    };\n                }\n            },\n\n            // Gobbles a list of arguments within the context of a function call\n            // or array literal. This function also assumes that the opening character\n            // `(` or `[` has already been gobbled, and gobbles expressions and commas\n            // until the terminator character `)` or `]` is encountered.\n            // e.g. `foo(bar, baz)`, `my_func()`, or `[bar, baz]`\n            gobbleArguments = function(termination) {\n                var ch_i, args = [], node, closed = false;\n                while(index < length) {\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                    if(ch_i === termination) { // done parsing\n                        closed = true;\n                        index++;\n                        break;\n                    } else if (ch_i === COMMA_CODE) { // between expressions\n                        index++;\n                    } else {\n                        node = gobbleExpression();\n                        if(!node || node.type === code.COMPOUND) {\n                            throwError('Expected comma', index);\n                        }\n                        args.push(node);\n                    }\n                }\n                if (!closed) {\n                    throwError('Expected ' + String.fromCharCode(termination), index);\n                }\n                return args;\n            },\n\n            // Gobble a non-literal variable name. This variable name may include properties\n            // e.g. `foo`, `bar.baz`, `foo['bar'].baz`\n            // It also gobbles function calls:\n            // e.g. `Math.acos(obj.angle)`\n            gobbleVariable = function() {\n                var ch_i, node;\n                ch_i = exprICode(index);\n\n                if(ch_i === OPAREN_CODE) {\n                    node = gobbleGroup();\n                } else {\n                    node = gobbleIdentifier();\n                }\n                gobbleSpaces();\n                ch_i = exprICode(index);\n                while(ch_i === PERIOD_CODE || ch_i === OBRACK_CODE || ch_i === OPAREN_CODE) {\n                    index++;\n                    if(ch_i === PERIOD_CODE) {\n                        gobbleSpaces();\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: false,\n                            object: node,\n                            property: gobbleIdentifier()\n                        };\n                    } else if(ch_i === OBRACK_CODE) {\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: true,\n                            object: node,\n                            property: gobbleExpression()\n                        };\n                        gobbleSpaces();\n                        ch_i = exprICode(index);\n                        if(ch_i !== CBRACK_CODE) {\n                            throwError('Unclosed [', index);\n                        }\n                        index++;\n                    } else if(ch_i === OPAREN_CODE) {\n                        // A function call is being made; gobble all the arguments\n                        node = {\n                            type: code.CALL_EXP,\n                            'arguments': gobbleArguments(CPAREN_CODE),\n                            callee: node\n                        };\n                    }\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                }\n                return node;\n            },\n\n            // Responsible for parsing a group of things within parentheses `()`\n            // This function assumes that it needs to gobble the opening parenthesis\n            // and then tries to gobble everything within that parenthesis, assuming\n            // that the next thing it should see is the close parenthesis. If not,\n            // then the expression probably doesn't have a `)`\n            gobbleGroup = function() {\n                index++;\n                var node = gobbleExpression();\n                gobbleSpaces();\n                if(exprICode(index) === CPAREN_CODE) {\n                    index++;\n                    return node;\n                } else {\n                    throwError('Unclosed (', index);\n                }\n            },\n\n            // Responsible for parsing Array literals `[1, 2, 3]`\n            // This function assumes that it needs to gobble the opening bracket\n            // and then tries to gobble the expressions as arguments.\n            gobbleArray = function() {\n                index++;\n                return {\n                    type: code.ARRAY_EXP,\n                    elements: gobbleArguments(CBRACK_CODE)\n                };\n            },\n\n            nodes = [], ch_i, node;\n\n        while(index < length) {\n            ch_i = exprICode(index);\n\n            // Expressions can be separated by semicolons, commas, or just inferred without any\n            // separators\n            if(ch_i === SEMCOL_CODE || ch_i === COMMA_CODE) {\n                index++; // ignore separators\n            } else {\n                // Try to gobble each expression individually\n                if((node = gobbleExpression())) {\n                    nodes.push(node);\n                // If we weren't able to find a binary expression and are out of room, then\n                // the expression passed in probably has too much\n                } else if(index < length) {\n                    throwError('Unexpected \"' + exprI(index) + '\"', index);\n                }\n            }\n        }\n\n        // If there's only one expression just try returning the expression\n        if(nodes.length === 1) {\n            return nodes[0];\n        } else {\n            return {\n                type: code.COMPOUND,\n                body: nodes\n            };\n        }\n    };\n\n\n/**\n * @method jsep.addUnaryOp\n * @param {string} op_name The name of the unary op to add\n * @return jsep\n */\njsep.addUnaryOp = function(op_name) {\n    max_unop_len = Math.max(op_name.length, max_unop_len);\n    unary_ops[op_name] = t; return this;\n};\n\n/**\n * @method jsep.addBinaryOp\n * @param {string} op_name The name of the binary op to add\n * @param {number} precedence The precedence of the binary op (can be a float)\n * @return jsep\n */\njsep.addBinaryOp = function(op_name, precedence) {\n    max_binop_len = Math.max(op_name.length, max_binop_len);\n    binary_ops[op_name] = precedence;\n    return this;\n};\n\n/**\n * @method jsep.addLiteral\n * @param {string} literal_name The name of the literal to add\n * @param {*} literal_value The value of the literal\n * @return jsep\n */\njsep.addLiteral = function(literal_name, literal_value) {\n    literals[literal_name] = literal_value;\n    return this;\n};\n\n/**\n * @method jsep.removeUnaryOp\n * @param {string} op_name The name of the unary op to remove\n * @return jsep\n */\njsep.removeUnaryOp = function(op_name) {\n    delete unary_ops[op_name];\n    if(op_name.length === max_unop_len) {\n        max_unop_len = getMaxKeyLen(unary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeBinaryOp\n * @param {string} op_name The name of the binary op to remove\n * @return jsep\n */\njsep.removeBinaryOp = function(op_name) {\n    delete binary_ops[op_name];\n    if(op_name.length === max_binop_len) {\n        max_binop_len = getMaxKeyLen(binary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeLiteral\n * @param {string} literal_name The name of the literal to remove\n * @return jsep\n */\njsep.removeLiteral = function(literal_name) {\n    delete literals[literal_name];\n    return this;\n};\n\n\nexport default jsep;\n","import {set} from 'd3-collection';\n\nimport {code} from './jsep';\n\n\nexport function evaluate (self, expr, nested) {\n    switch(expr.type) {\n        case code.IDENTIFIER: return self[expr.name];\n        case code.LITERAL: return nested ? self[expr.value] : expr.value;\n        case code.ARRAY_EXP: return expr.elements.map((elem) => {return evaluate(self, elem);});\n        case code.LOGICAL_EXP:\n        case code.BINARY_EXP: return binaryExp(expr.operator, evaluate(self, expr.left), evaluate(self, expr.right));\n        case code.CALL_EXP: return callExpression(self, expr.callee, expr.arguments);\n        case code.MEMBER_EXP: return evaluate(evaluate(self, expr.object), expr.property, true);\n        case code.CONDITIONAL_EXP: return evaluate(self, expr.test) ? evaluate(self, expr.consequent) : evaluate(self, expr.alternate);\n        case code.UNARY_EXP: return unaryExp(expr.operator, evaluate(self, expr.argument));\n    }\n}\n\n// extract identifiers\nexport function identifiers (expr, all) {\n    if (arguments.length === 1) all = set();\n    switch(expr.type) {\n        case code.IDENTIFIER:\n            all.add(expr.name); break;\n        case code.ARRAY_EXP:\n            expr.elements.forEach(elem => identifiers(elem, all));\n            break;\n        case code.LOGICAL_EXP:\n        case code.BINARY_EXP:\n            identifiers(expr.left, all);\n            identifiers(expr.right, all);\n            break;\n        case code.CALL_EXP:\n            identifiers(expr.callee, all);\n            expr.arguments.forEach(elem => identifiers(elem, all));\n            break;\n        case code.MEMBER_EXP:\n            all.add(fullName(expr));\n            break;\n        case code.CONDITIONAL_EXP:\n            identifiers(expr.test, all);\n            identifiers(expr.consequent, all);\n            evaluate(expr.alternate, all);\n            break;\n        case code.UNARY_EXP:\n            identifiers(expr.argument, all);\n            break;\n    }\n    return all;\n}\n\n\n\nfunction callExpression (self, callee, args) {\n    var func;\n\n    args = args.map((arg) => {\n        return evaluate(self, arg);\n    });\n\n    if (callee.type !== code.IDENTIFIER) {\n        self = evaluate(self, callee.object);\n        callee = callee.property;\n    }\n\n    func = self[callee.name];\n    if (!func)\n        throw new EvalError(`callable \"${callee.name}\" not found in context`);\n    return func.apply(self, args);\n}\n\n\nfunction unaryExp (op, arg) {\n    if (!unaryFunctions[op])\n        unaryFunctions[op] = new Function(\"arg\", `return ${op} arg`);\n    return unaryFunctions[op](arg);\n}\n\n\nfunction binaryExp(op, a, b) {\n    if (!binaryFunctions[op])\n        binaryFunctions[op] = new Function(\"a\", \"b\", `return a ${op} b`);\n    return binaryFunctions[op](a, b);\n}\n\n\nfunction fullName (expr) {\n    if (expr.type === code.IDENTIFIER) return expr.name;\n    else return `${fullName(expr.object)}.${expr.property.name}`;\n}\n\nconst unaryFunctions = {};\nconst binaryFunctions = {};\n","// tiny javascript expression parser\nimport jsep, {code} from './jsep';\nimport {evaluate, identifiers} from './eval';\nimport warn from '../utils/warn';\n\n\nconst proto = {\n\n    eval: function (model) {\n        return evaluate(model, this.parsed);\n    },\n\n    safeEval: function (model) {\n        try {\n            return evaluate(model, this.parsed);\n        } catch (msg) {\n            warn(`Could not evaluate <<${this.expr}>> expression: ${msg}`);\n        }\n    },\n\n    // evaluate identifiers from a model\n    identifiers: function () {\n        return identifiers(this.parsed).values();\n    }\n};\n\n\nfunction Expression (expr) {\n    this.codes = code;\n    this.expr = expr;\n    this.parsed = jsep(expr);\n}\n\nExpression.prototype = proto;\n\n\nexport default function (expr) {\n    return new Expression(expr);\n}\n","let UID = 0;\nconst prefix = 'd3v';\n\n// Add a unique identifier to an object\nexport default function (o) {\n    var uid = prefix + (++UID);\n\n    if (arguments.length) {\n        Object.defineProperty(o, 'uid', {\n            get: function () {\n                return uid;\n            }\n        });\n\n        return o;\n    } else\n        return uid;\n}\n","import {dispatch} from 'd3-dispatch';\n\nimport debounce from '../utils/debounce';\n\n\nexport default function () {\n    var events = dispatch('change'),\n        triggered = 0;\n\n    return {\n        on (typename, callback) {\n            if (arguments.length < 2)\n                return events.on(typename);\n            events.on(typename, callback);\n            return this;\n        },\n        trigger: debounce(function () {\n            events.apply('change', this, arguments);\n            triggered +=1;\n        }),\n        triggered () {\n            return triggered;\n        }\n    };\n}\n","import {map} from 'd3-collection';\n\nimport uid from '../utils/uid';\nimport ddispatch from './dispatch';\n\n//\n// Initialise a model\nexport default function asModel (model, initials, parent, isolated) {\n    var events = map(),\n        Child = null;\n\n    // event handler for any change in the model\n    events.set('', ddispatch());\n\n    Object.defineProperties(uid(model), {\n        $events: {\n            get () {\n                return events;\n            }\n        },\n        parent: {\n            get () {\n                return parent;\n            }\n        },\n        isolated: {\n            get () {\n                return isolated;\n            }\n        }\n    });\n    model.$child = $child;\n    model.$update(initials);\n\n    function $child (o) {\n        if (Child === null) Child = createChildConstructor(model);\n        return new Child(o);\n    }\n}\n\nfunction createChildConstructor (model) {\n\n    function Child (initials) {\n        asModel(this, initials, model, false);\n    }\n\n    Child.prototype = model;\n    return Child;\n}\n","const modelStr = \"[object d3Model]\";\n\n\nexport default function () {\n    return modelStr;\n}\n","// Check if a value is a vanilla javascript object\nexport default function (value) {\n    return value && value.constructor === Object;\n}\n","import {isFunction, isArray, isObject} from 'd3-let';\n\nimport warn from '../utils/warn';\nimport debug from '../utils/debug';\nimport isVanillaObject from '../utils/object';\nimport ddispatch from './dispatch';\n\n\n//  $set a reactive attribute for a Model\n//\n//  Set the value of an attribute in the model\n//  If the attribute is not already reactive make it as such.\n//\nexport default function (key, value) {\n    // property not reactive - make it as such\n    if (!this.$events.get(key)) reactive(this, key, value);\n    else this[key] = value;\n}\n\n\nfunction isModel (value) {\n    return isObject(value) && value.toString() === '[object d3Model]';\n}\n\n\nfunction reactive (model, key, value) {\n    var lazy;\n\n    model.$events.set(key, ddispatch());\n\n    Object.defineProperty(model, key, property());\n\n    // Create a new model if value is an object\n    value = typeValue(value);\n    // Trigger the callback once for initialization\n    model.$change(key);\n\n    function update (newValue) {\n        if (lazy) newValue = lazy.get.call(model);\n        if (newValue === value) return;\n        // trigger lazy callbacks\n        //\n        // Fire model events\n        var modelName = model.$$name || 'model';\n        debug(`updating ${modelName}.${key}`);\n        model.$change(key, value).$change();\n        value = typeValue (newValue, value);\n    }\n\n    function property () {\n        var prop = {\n                get: function () {\n                    return value;\n                }\n            };\n\n        if (isFunction(value)) value = {get: value};\n\n        // calculated attribute\n        if (isVanillaObject(value) && isFunction(value.get)) {\n            lazy = value;\n            value = lazy.get.call(model);\n\n            if (lazy.reactOn)\n                lazy.reactOn.forEach((name) => {\n                    model.$on(`${name}.${key}`, update);\n                });\n            else\n                warn(`reactive lazy property ${key} does not specify 'reactOn' list or properties`);\n\n            if (isFunction(lazy.set)) prop.set = lazy.set;\n        } else\n            prop.set = update;\n\n        return prop;\n    }\n\n    function typeValue (newValue, oldValue) {\n        if (newValue === oldValue)\n            return oldValue;\n        else if (isArray(newValue))\n            return arrayValue(newValue, oldValue);\n        else if (isModel(oldValue))\n            return modelValue(newValue, oldValue);\n        else\n            return isVanillaObject(newValue) ? model.$new(newValue) : newValue;\n    }\n\n    function arrayValue (newValue, oldValue) {\n        if (isModel(oldValue)) oldValue.$off();\n        if (!isArray(oldValue)) oldValue = [];\n        for (let i=0; i<newValue.length; ++i)\n            newValue[i] = typeValue(newValue[i], oldValue[i]);\n        return newValue;\n    }\n\n    function modelValue (newValue, oldValue) {\n        if (isVanillaObject(newValue)) {\n            oldValue.$update(newValue);\n            return oldValue;\n        } else {\n            oldValue.$off();\n            return typeValue(newValue);\n        }\n    }\n}\n","import {isFunction} from 'd3-let';\n\nimport warn from '../utils/warn';\n\n\n// Add change callback to a model reactive attribute\nexport default function (name, callback) {\n\n    // When no name is provided, whait for changes on this model - no its parents\n    if (arguments.length === 1 && isFunction(name)) {\n        callback = name;\n        name = '';\n    }\n\n    var bits = name.split('.'),\n        key = bits[0],\n        event = getEvent(this, key);\n\n    if (!event) return warn(`Cannot bind to \"${key}\" - no such reactive property`);\n\n    // event from a parent model, add model uid to distinguish it from other child callbacks\n    if (!this.$events.get(key)) bits.push(this.uid);\n\n    bits[0] = 'change';\n    return event.on(bits.join('.'), callback);\n}\n\n\nfunction getEvent(model, name) {\n    var event = model.$events.get(name);\n    if (!event && model.parent) return getEvent(model.parent, name);\n    return event;\n}\n","import warn from '../utils/warn';\n\n// Update a model with reactive model data\nexport default function (data, replace) {\n    if (data) {\n        replace = arguments.length === 2 ? replace : true;\n        for (var key in data) {\n            if (replace || this[key] === undefined) {\n                if (key.substring(0, 1) === '$') {\n                    if (this.constructor.prototype[key]) warn(`Cannot set attribute method ${key}, it is protected`);\n                    else this[key] = data[key];\n                } else\n                    this.$set(key, data[key]);\n            }\n        }\n    }\n    return this;\n}\n","// remove event handlers\nexport default function (attr) {\n    if (attr === undefined)\n        this.$events.each((event) => removeEvent(event));\n    else {\n        var bits = attr.split('.'),\n            type = bits.splice(0, 1)[0],\n            event = this.$events.get(type);\n        if (event) removeEvent(event, bits.join('.'));\n    }\n}\n\n\nfunction removeEvent (event, name) {\n    if (name) event.on(`change.${name}`, null);\n    else event.on('change', null);\n}\n","export default function (obj, idx=0) {\n    return Array.prototype.slice.call(obj, idx);\n}\n","import warn from '../utils/warn';\nimport slice from '../utils/slice';\n\n\n// trigger change event on a model reactive attribute\nexport default function (attribute) {\n    var name = arguments.length ? attribute : '',\n        event = this.$events.get(name),\n        args = slice(arguments, 1);\n    if (event) event.trigger.apply(this, args);\n    else if (!this.isolated) this.parent.$change(name);\n    else warn(`attribute '${name}' is not a reactive property this model`);\n    return this;\n}\n","//\n//check if an attribute is a reactive attribute for the model (or its prototypical parent)\nexport default function (attr) {\n    if (!this.$events.has(attr)) {\n        if (!this.parent || this.isolated) return false;\n        return this.parent.$isReactive(attr);\n    }\n    return true;\n}\n","//\n//  Return the model owning the reactive attribute attr\nexport default function (attr) {\n    if (!this.$events.has(attr)) {\n        if (!this.parent || this.isolated) return;\n        return this.parent.$owner(attr);\n    }\n    return this;\n}\n","export function $push (attr, value) {\n    var array = this[attr].slice();\n    array.push(value);\n    this[attr] = array;\n    return this;\n}\n\nexport function $splice (attr, idx, count) {\n    var array = this[attr].slice();\n    if (arguments.length == 2) array.splice(idx);\n    else if (arguments.length == 3) array.splice(idx, count);\n    this[attr] = array;\n    return this;\n}\n","import asModel from './as';\nimport toString from './string';\nimport $set from './set';\nimport $on from './on';\nimport $update from './update';\nimport $off from './off';\nimport $change from './change';\nimport $isReactive from './isreactive';\nimport $owner from './owner';\nimport {$push, $splice} from './array';\n\n//\n//  Model class\n//\n//  The model is at the core of d3-view reactive data component\nfunction Model (initials, parent) {\n    asModel(this, initials, parent, true);\n}\n\nexport default function model (initials) {\n    return new Model(initials);\n}\n\nmodel.prototype = Model.prototype = {\n    constructor: Model,\n    // Public API methods\n    toString,\n    $on,\n    $change,\n    $update,\n    $set,\n    $new,\n    $off,\n    $isReactive,\n    $owner,\n    $push,\n    $splice\n};\n\nObject.defineProperty(Model.prototype, 'root', {\n    get: function () {\n        return this.parent ? this.parent.root : this;\n    }\n});\n\n\nfunction $new (initials) {\n    return new Model(initials, this);\n}\n","import {isFunction, isObject, assign} from 'd3-let';\nimport {map, set} from 'd3-collection';\n\nimport viewExpression from '../parser/expression';\nimport viewModel from '../model/main';\nimport warn from '../utils/warn';\nimport uid from '../utils/uid';\nimport sel from '../utils/sel';\nimport base from './transition';\n\n//\n// Directive Prototype\n//\n// Directives are special attributes with the d3- prefix.\n// Directive attribute values are expected to be binding expressions.\n// A directives job is to reactively apply special behavior to the DOM\n// when the value of its expression changes.\n//\n// A directive can implement one or more of the directive methods:\n//\n//  * create\n//  * mount\n//  * refresh\n//  * destroy\n//\nconst prototype = {\n\n    // hooks\n    create (expression) {\n        return expression;\n    },\n\n    // pre mount\n    preMount () {\n\n    },\n\n    mount (model) {\n        return model;\n    },\n\n    refresh () {\n\n    },\n\n    destroy () {\n\n    },\n\n    removeAttribute () {\n        this.el.removeAttribute(this.name);\n    },\n\n    // Execute directive\n    execute (model) {\n        if (!this.active) return;\n        this.removeAttribute();\n        this.identifiers = [];\n        model = this.mount(model);\n        // If model returned, bind the element to its properties\n        if (model) this.bindModel(model);\n    },\n\n    bindModel (model) {\n        var dir = this,\n            refresh = function () {\n                let value = dir.expression ? dir.expression.eval(model) : undefined;\n                dir.refresh(model, value);\n                dir.passes++;\n            };\n\n        // Bind expression identifiers with model\n        let bits, target, attr, i;\n        if (!this.expression) {\n            dir.identifiers.push({\n                model: model,\n                attr: ''\n            });\n        } else {\n            var modelEvents = map();\n            this.expression.identifiers().forEach(identifier => {\n                bits = identifier.split('.');\n                target = model;\n                attr = null;\n\n                for (i=0; i<bits.length-1; ++i) {\n                    target = target[bits[i]];\n                    if (!isObject(target)) {\n                        attr = bits.slice(0, i+1).join('.');\n                        warn(`Property ${attr} is not an object. Directive ${dir.name} cannot bind to ${identifier}`);\n                        break;\n                    }\n                }\n\n                // process attribute\n                if (attr === null) {\n                    if (!(target instanceof viewModel))\n                        return warn(`${identifier} is not a reactive model. Directive ${dir.name} cannot bind to it`);\n                    addTarget(modelEvents, target, bits[bits.length-1]);\n                }\n            });\n\n            // register with model reactive properties\n            modelEvents.each(target => {\n                // if we are listening to all event simply bind to the model changes\n                if (target.events.has(''))\n                    dir.identifiers.push({\n                        model: target.model,\n                        attr: ''\n                    });\n                else\n                    target.events.each(attr => {\n                        dir.identifiers.push({\n                            model: target.model,\n                            attr: attr\n                        });\n                    });\n            });\n        }\n\n        this.identifiers.forEach(identifier => {\n            var event = `${identifier.attr}.${dir.uid}`;\n            identifier.model.$on(event, refresh);\n        });\n\n        this.bindDestroy(model);\n\n        refresh();\n    },\n\n    bindDestroy (model) {\n        var dir = this,\n            destroy = this.destroy;\n        // bind destroy to the model\n        dir.destroy = () => destroy.call(dir, model);\n\n        this.sel.on(`remove.${dir.uid}`, () => {\n            this.identifiers.forEach(identifier => {\n                identifier.model.$off(`${identifier.attr}.${dir.uid}`);\n            });\n            dir.destroy();\n        });\n    }\n};\n\n// Directive constructor\nexport default function (obj) {\n\n    function Directive (el, attr, arg) {\n        this.el = el;\n        this.name = attr.name;\n        this.arg = arg;\n        this.passes = 0;\n        var expr = sel(uid(this)).create(attr.value);\n        if (expr) this.expression = viewExpression(expr);\n        if (!this.active)\n            this.active = !attr.value || this.expression;\n    }\n\n    Directive.prototype = assign({}, base, prototype, obj);\n\n    function directive (el, attr, arg) {\n        return new Directive(el, attr, arg);\n    }\n\n    directive.prototype = Directive.prototype;\n    return directive;\n}\n\n\nfunction addTarget (modelEvents, model, attr) {\n    var value = arguments.length === 3 ? model[attr] : undefined;\n    //\n    // a method of the model, event is at model level\n    if (isFunction(value) || arguments.length === 2)\n        getTarget(modelEvents, model).events.add('');\n    // value is another model, events at both target model level and value model level\n    else if (value instanceof viewModel) {\n        addTarget(modelEvents, value);\n        model = model.$owner(attr);\n        if (model) getTarget(modelEvents, model).events.add('');\n    } else {\n        // make sure attr is a reactive property of model\n        model = model.$owner(attr) || model;\n        if (!model.$isReactive(attr)) model.$set(attr, value);\n        getTarget(modelEvents, model).events.add(attr);\n    }\n}\n\nfunction getTarget(modelEvents, model) {\n    var target = modelEvents.get(model.uid);\n    if (!target) {\n        target = {\n            model: model,\n            events: set()\n        };\n        modelEvents.set(model.uid, target);\n    }\n    return target;\n}\n","import {isString} from 'd3-let';\n\nexport default function (value) {\n    if (isString(value)) {\n        try {\n            return JSON.parse(value);\n        } catch (msg) {\n            return value;\n        }\n    }\n    return value;\n}\n","import {pop} from 'd3-let';\n\nconst DATAPREFIX = 'data-';\n\n\nexport default function (attrs) {\n    var keys = Object.keys(attrs);\n    let p;\n    return keys.reduce((o, key) => {\n        if (key.substring(0, 5) === DATAPREFIX) {\n            p = key.split('-').splice(1).reduce((s, key, idx) => {\n                s += idx ? key.substring(0, 1).toUpperCase() + key.substring(1) : key;\n                return s;\n            }, '');\n            o[p] = pop(attrs, key);\n        }\n        return o;\n    }, {});\n}\n","import {dispatch} from 'd3-dispatch';\n\n\nexport default dispatch(\n    'message',\n    'component-created',\n    'component-mount',\n    'component-mounted'\n);\n","import {isFunction, isArray, isObject, isString, pop, assign} from 'd3-let';\nimport {map} from 'd3-collection';\nimport {dispatch} from 'd3-dispatch';\n\nimport base from './transition';\nimport createDirective from './directive';\nimport warn from '../utils/warn';\nimport asSelect from '../utils/select';\nimport maybeJson from '../utils/maybeJson';\nimport sel from '../utils/sel';\nimport dataAttributes from '../utils/data';\nimport viewEvents from './events';\n\n\n// prototype for both views and components\nconst protoComponent = {\n    //\n    // hooks\n    render () {},\n    childrenMounted () {},\n    mounted () {},\n    destroy () {},\n    //\n    // Mount the component into an element\n    // If this component is already mounted, or it is mounting, it does nothing\n    mount (el, data, onMounted) {\n        if (mounted(this)) warn('already mounted');\n        else {\n            viewEvents.call('component-mount', undefined, this, el, data);\n            var sel = this.select(el),\n                directives = sel.directives(),\n                dattrs = directives ? directives.attrs : attributes(el),\n                parentModel = this.parent.model,\n                datum = sel.datum();\n\n            let props = this.props,\n                model = this.model,\n                modelData = assign(dataAttributes(dattrs), datum, data),\n                key, value;\n\n            data = assign({}, datum, data);\n\n            // override model keys from data object and element attributes\n            for (key in model) {\n                value = pop(modelData, key);\n                if (value !== undefined) {\n                    if (isString(value)) {\n                        if (parentModel.$isReactive(value)) {\n                            if (value !== key) model[key] = reactiveParentProperty(value);\n                            else delete model[key];\n                        } else model[key] = maybeJson(value);\n                    } else model[key] = value;\n                }\n            }\n\n            // Create model\n            this.model = model = parentModel.$child(model);\n            model.$$view = this;\n            model.$$name = this.name;\n            if (isArray(props)) props = props.reduce((o, key) => {\n                o[key] = undefined;\n                return o;\n            }, {});\n\n            if (isObject(props)) {\n                Object.keys(props).forEach(key => {\n                    value = maybeJson(modelData[key] === undefined ? (data[key] === undefined ? dattrs[key] : data[key]) : modelData[key]);\n                    if (value !== undefined) {\n                        // data point to a model attribute\n                        if (isString(value) && model[value]) value = model[value];\n                        data[key] = value;\n                    } else if (props[key] !== undefined) {\n                        data[key] = props[key];\n                    }\n                });\n            }\n            //\n            // create the new element from the render function\n            var newEl = this.render(data, dattrs, el);\n            if (!newEl.then) newEl = Promise.resolve(newEl);\n            return newEl.then(element => compile(this, el, element, onMounted));\n        }\n    }\n};\n\n// factory of View and Component constructors\nexport function createComponent (name, o, coreDirectives) {\n    if (isFunction(o)) o = {render: o};\n\n    var obj = assign({}, o),\n        classComponents = extendComponents(map(), pop(obj, 'components')),\n        classDirectives = extendDirectives(map(), pop(obj, 'directives')),\n        model = pop(obj, 'model'),\n        props = pop(obj, 'props');\n\n    function Component (options) {\n        var parent = pop(options, 'parent'),\n            components = map(parent ? parent.components : null),\n            directives = map(parent ? parent.directives : coreDirectives),\n            events = dispatch('message', 'mounted'),\n            cache = {};\n\n        classComponents.each((comp, key) => {\n            components.set(key, comp);\n        });\n        classDirectives.each((comp, key) => {\n            directives.set(key, comp);\n        });\n        extendComponents(components, pop(options, 'components'));\n        extendDirectives(directives, pop(options, 'directives'));\n\n        Object.defineProperties(this, {\n            name : {\n                get () {\n                    return name;\n                }\n            },\n            components: {\n                get: function () {\n                    return components;\n                }\n            },\n            directives: {\n                get: function () {\n                    return directives;\n                }\n            },\n            parent: {\n                get: function () {\n                    return parent;\n                }\n            },\n            root: {\n                get: function () {\n                    return parent ? parent.root : this;\n                }\n            },\n            cache: {\n                get: function () {\n                    return parent ? parent.cache : cache;\n                }\n            },\n            props: {\n                get: function () {\n                    return props;\n                }\n            },\n            uid: {\n                get: function () {\n                    return this.model.uid;\n                }\n            },\n            events: {\n                get: function () {\n                    return events;\n                }\n            }\n        });\n        this.model = assign({}, isFunction(model) ? model() : model, pop(options, 'model'));\n        viewEvents.call('component-created', undefined, this);\n    }\n\n    Component.prototype = assign({}, base, protoComponent, obj);\n\n    function component (options) {\n        return new Component(options);\n    }\n\n    component.prototype = Component.prototype;\n\n    return component;\n}\n\n\n// Used by both Component and view\n\nexport function extendComponents (container, components) {\n    map(components).each((obj, key) => {\n        container.set(key, createComponent(key, obj, protoComponent));\n    });\n    return container;\n}\n\nexport function extendDirectives (container, directives) {\n    map(directives).each((obj, key) => {\n        container.set(key, createDirective(obj));\n    });\n    return container;\n}\n\n// Finalise the binding between the view and the model\n// inject the model into the view element\n// call the mounted hook and can return a Promise\nexport function asView(vm, element, onMounted) {\n    Object.defineProperty(sel(vm), 'el', {\n        get: function () {\n            return element;\n        }\n    });\n    // Apply model to element and mount\n    return vm.select(element).view(vm).mount(null, onMounted).then(() => vmMounted(vm, onMounted));\n}\n\nexport function mounted (vm, onMounted) {\n    if (vm.isMounted === undefined) {\n        vm.isMounted = false;\n        return false;\n    }\n    else if (vm.isMounted) {\n        warn(`view ${vm.name} already mounted`);\n    }\n    else {\n        vm.isMounted = true;\n        // invoke mounted component hook\n        vm.mounted();\n        // invoke onMounted callback if available\n        if (onMounted) onMounted(vm);\n        // last invoke the view mounted events\n        vm.events.call('mounted', undefined, vm, onMounted);\n        // remove mounted events\n        vm.events.on('mounted', null);\n        // fire global event\n        viewEvents.call('component-mounted', undefined, vm);\n    }\n    return true;\n}\n\n// Internals\n\n//\n//  Component/View mounted\n//  =========================\n//\n//  This function is called when a component/view has all its children added\nfunction vmMounted(vm, onMounted) {\n    var parent = vm.parent;\n    vm.childrenMounted();\n    if (parent && !parent.isMounted) {\n        parent.events.on(`mounted.${vm.uid}`, () => {\n            mounted(vm, onMounted);\n        });\n    }\n    else {\n        mounted(vm, onMounted);\n    }\n}\n\n// Compile a component model\n// This function is called once a component has rendered the component element\nfunction compile (cm, el, element, onMounted) {\n    if (!element) return warn('render function must return a single HTML node. It returned nothing!');\n    element = asSelect(element);\n    if (element.size() !== 1) warn('render function must return a single HTML node');\n    element = element.node();\n    //\n    // Insert before the component element\n    el.parentNode.insertBefore(element, el);\n    // remove the component element\n    cm.select(el).remove();\n    //\n    return asView(cm, element, onMounted);\n}\n\n\nfunction attributes (element) {\n    var attrs = {};\n    let attr;\n    for (let i = 0; i < element.attributes.length; ++i) {\n        attr = element.attributes[i];\n        attrs[attr.name] = attr.value;\n    }\n    return attrs;\n}\n\n\nfunction reactiveParentProperty (value) {\n    return {\n        reactOn: [value],\n        get () {\n            return this[value];\n        }\n    };\n}\n","import {select} from 'd3-selection';\n\nimport warn from '../utils/warn';\n\n// No value, it has its own directive\nconst attributes = ['name', 'class', 'disabled', 'readonly', 'required', 'href'];\n\n\nexport default function (element, directives) {\n    var sel = select(element),\n        dirs = sel.directives();\n    if (dirs) return dirs;\n    dirs = new Directives();\n\n    if (!directives) return dirs;\n\n    for (let i = 0; i < element.attributes.length; ++i) {\n        let attr = element.attributes[i],\n            bits = attr.name.split('-'),\n            dirName = bits[0] === 'd3' ? bits[1] : null,\n            arg;\n\n        if (dirName) {\n            arg = bits.slice(2).join('-');\n            if (!arg && attributes.indexOf(dirName) > -1) {\n                arg = dirName;\n                dirName = 'attr';\n            }\n            var directive = directives.get(dirName);\n            if (directive) dirs.add(directive(element, attr, arg));\n            else warn(`${element.tagName} cannot find directive \"${dirName}\". Did you forget to register it?`);\n        }\n        dirs.attrs[attr.name] = attr.value;\n    }\n\n    if (dirs.size()) sel.directives(dirs);\n    return dirs;\n}\n\n\n// Directives container\nfunction Directives () {\n    this.attrs = {};\n    this.all = [];\n}\n\n\nDirectives.prototype = {\n\n    size () {\n        return this.all.length;\n    },\n\n    pop: function (dir) {\n        var index = this.all.indexOf(dir);\n        if (index > -1) {\n            dir.removeAttribute();\n            this.all.splice(index, 1);\n        }\n        return dir;\n    },\n\n    add (dir) {\n        this.all.push(dir);\n    },\n\n    forEach (callback) {\n        this.all.forEach(callback);\n    },\n\n    preMount () {\n        let dir;\n        for (let i=0; i<this.all.length; ++i) {\n            dir = this.all[i];\n            if (dir.preMount()) return this.pop(dir);\n        }\n    },\n\n    execute (model) {\n        if (!this.size()) return;\n        return Promise.all(this.all.map(d => d.execute(model)));\n    }\n};\n","import {select, selection} from 'd3-selection';\n\nimport getdirs from './getdirs';\nimport slice from '../utils/slice';\nimport warn from '../utils/warn';\n\n\n// Extend selection prototype with new methods\nselection.prototype.mount = mount;\nselection.prototype.view = view;\nselection.prototype.model = model;\nselection.prototype.directives = directives;\n\n\nfunction directives (value) {\n    return arguments.length\n      ? this.property(\"__d3_directives__\", value)\n      : this.node().__d3_directives__;\n}\n\n\nfunction model () {\n    var vm = this.view();\n    return vm ? vm.model : null;\n}\n\n\nfunction view (value) {\n    if (arguments.length) {\n        return this.property(\"__d3_view__\", value);\n    } else {\n        var element = this.node(),\n            view = element ? element.__d3_view__ : null,\n            parent = element ? element.parentNode : null;\n\n        while (parent && !view) {\n            view = parent.__d3_view__;\n            parent = parent.parentNode;\n        }\n        return view;\n    }\n}\n\n//\n// mount function on a d3 selection\n// Use this function to mount the selection\n// THis method returns nothing or a promise\nfunction mount (data, onMounted) {\n    var promises = [];\n    this.each(function () {\n        var view = select(this).view();\n        if (view) promises.push(mountElement(this, view, data, onMounted));\n        else warn('Cannot mount, no view object available to mount to');\n    });\n    return Promise.all(promises);\n}\n\n\n// mount an element into a given model\nfunction mountElement (element, vm, data, onMounted) {\n    if (!element || !element.tagName) return;\n\n    var component = vm.components.get(element.tagName.toLowerCase()),\n        directives = getdirs(element, vm.directives),\n        preMount = directives.preMount();\n\n    if (preMount)\n        return preMount.execute(vm.model);\n    else {\n        let promises;\n        if (component)\n            promises = [component({parent: vm}).mount(element, data, onMounted)];\n        else\n            promises = slice(element.children).map(c => mountElement(c, vm, data, onMounted));\n\n        return Promise.all(promises).then(() => {\n            return directives.execute(vm.model);\n        });\n    }\n}\n","import {isObject, isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport './selection';\nimport {createComponent, mounted, asView} from './component';\nimport viewEvents from './events';\nimport createDirective from './directive';\nimport viewModel from '../model/main';\nimport warn from '../utils/warn';\n\n//\n// prototype for views\nexport default {\n\n    use: function (plugin) {\n        if (isObject(plugin)) plugin.install(this);\n        else plugin(this);\n        return this;\n    },\n\n    addComponent: function (name, obj) {\n        var component = createComponent(name, obj);\n        this.components.set(name, component);\n        return component;\n    },\n\n    addDirective: function (name, obj) {\n        var directive = createDirective(obj);\n        this.directives.set(name, directive);\n        return directive;\n    },\n\n    mount: function (el, callback) {\n        if (mounted(this)) warn('already mounted');\n        else {\n            viewEvents.call('component-mount', undefined, this, el);\n            el = element(el);\n            if (el) {\n                this.model = this.parent ? this.parent.model.$child(this.model) : viewModel(this.model);\n                return asView(this, el, callback);\n            }\n        }\n    }\n};\n\n\nfunction element (el) {\n    if (!el) return warn(`element not defined, pass an identifier or an HTMLElement object`);\n    var d3el = isFunction(el.node) ? el : select(el),\n        element = d3el.node();\n    if (!element) warn(`could not find ${el} element`);\n    else return element;\n}\n","import {select} from 'd3-selection';\nimport {isArray} from 'd3-let';\n\nimport {createComponent} from '../core/component';\nimport protoView from '../core/view';\nimport warn from '../utils/warn';\n\n//\n//  d3-for directive\n//  ======================\n//\n//  Repeat a element over an array of items and establish\n//  a one way binding between the array and the Dom\nexport default {\n\n    create (expression) {\n        var bits = [];\n        expression.trim().split(' ').forEach((v) => {\n            v ? bits.push(v) : null;\n        });\n        if (bits.length !== 3 || bits[1] != 'in')\n            return warn(`d3-for directive requires \"item in expression\" template, got \"${expression}\"`);\n        this.itemName = bits[0];\n        this.itemClass = `for${this.uid}`;\n        return bits[2];\n    },\n\n    preMount () {\n        return true;\n    },\n\n    mount (model) {\n        this.creator = this.el;\n        this.el = this.creator.parentNode;\n        // remove the creator from the DOM\n        select(this.creator).remove();\n        if (this.el) return model;\n    },\n\n    refresh (model, items) {\n        if (!isArray(items)) return;\n        let d;\n\n        var creator = this.creator,\n            selector = `${creator.tagName}.${this.itemClass}`,\n            itemName = this.itemName,\n            sel = this.sel,\n            allItems = sel.selectAll(selector),\n            entries = allItems.filter(function () {\n                d = this.__d3_view__.model[itemName];\n                return items.indexOf(d) > -1;\n            }).data(items),\n            exits = allItems.filter(function () {\n                d = this.__d3_view__.model[itemName];\n                return items.indexOf(d) === -1;\n            }),\n            forView = createComponent('forView', protoView),\n            vm = sel.view();\n\n        let x, el, fel, tr;\n\n        (this.transition(exits) || exits).style('opacity', 0).remove();\n\n        entries\n            .enter()\n                .append(() => {\n                    el = creator.cloneNode(true);\n                    fel = vm.select(el);\n                    if (vm.transitionDuration(fel) > 0) fel.style('opacity', 0);\n                    return el;\n                })\n                .classed(this.itemClass, true)\n                .each(function (d, index) {\n                    x = {index: index};\n                    x[itemName] = d;\n                    forView({\n                        model: x,\n                        parent: vm\n                    }).mount(this, (fv) => {\n                        // replace the item with a property from the model\n                        // This allow for reactivity when d is an object\n                        items[index] = fv.model[itemName];\n                        tr = fv.transition();\n                        if (tr) tr.style('opacity', 1);\n                    });\n                })\n            .merge(entries)\n                .each(function (d) {\n                    // update model itemName property\n                    this.__d3_view__.model[itemName] = d;\n                });\n    }\n};\n","//\n//  d3-if\n//  =============\n//\n//  Show or hide an element\n//\nexport default {\n\n    mount (model) {\n        var sel = this.sel;\n        this.display = sel.style('display');\n        if (!this.display || this.display === 'none') this.display = 'block';\n        return model;\n    },\n\n    refresh (model, value) {\n        var sel = this.sel,\n            transition = this.passes ? this.transition(sel) : null;\n\n        if (value) sel.style('display', this.display);\n        else if (!transition) sel.style('display', 'none');\n\n        if (transition) {\n            if (value)\n                transition.style('opacity', 1);\n            else\n                transition\n                    .style('opacity', 0)\n                    .on('end', () => sel.style('display', 'none'));\n        }\n    }\n};\n","import attr from './attr';\nimport html from './html';\nimport value from './value';\nimport on from './on';\nimport d3For from './for';\nimport d3If from './if';\n\nexport default {\n    attr,\n    html,\n    value,\n    on,\n    'for': d3For,\n    'if': d3If\n};\n","import {select} from 'd3-selection';\nimport {inBrowser} from 'd3-let';\n\n\nif (inBrowser) {\n    // DOM observer\n    // Check for changes in the DOM that leads to visual actions\n    const observer = new MutationObserver(visualManager);\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\n\n//\n//  Clears visualisation going out of scope\nfunction visualManager (records) {\n    records.forEach(record => {\n        var nodes = record.removedNodes;\n        let sel;\n        if (!nodes || !nodes.length) return;\n        for (let i=0; i<nodes.length; ++i) {\n            sel = select(nodes[i]);\n            if (sel.view()) {\n                sel.selectAll('*').each(destroy);\n                destroy.call(nodes[i]);\n            }\n        }\n    });\n}\n\n\nfunction destroy () {\n    var dirs = this.__d3_directives__,\n        view = this.__d3_view__;\n    if (dirs) {\n        dirs.all.forEach(d => d.destroy());\n        delete this.__d3_directives__;\n    }\n    if (view) {\n        view.destroy();\n        delete this.__d3_view__;\n    }\n}\n","import {map} from 'd3-collection';\n\nimport directives from './directives/index';\nimport protoView from './core/view';\nimport {createComponent, extendDirectives} from './core/component';\nimport './core/clean';\n\n// Core Directives\nconst coreDirectives = extendDirectives(map(), directives);\n\n// the view constructor\nexport default function (config) {\n    const viewClass = createComponent('view', protoView, coreDirectives);\n    return viewClass(config);\n}\n","import {select} from 'd3-selection';\n\n//\n//  viewMount\n//  =============\n//\n//  Mount an existing dom element el with compiled html\n//\n//  * data: optional object for the first component\n//  * onMount : optional onMount callback\n//\n//  Return a Promise\nexport default function (el, html, data, onMount) {\n    var p = select(el).html(html).mount(data, onMount);\n    if (!p) p = new Promise(function (resolve) {resolve();});\n    return p;\n}\n","import {timeout} from 'd3-timer';\n\nimport providers from './providers';\n\n\n// Add callback to execute when the DOM is ready\nexport default function (callback) {\n    providers.readyCallbacks.push(callback);\n    if (document.readyState !== 'complete') {\n        document.addEventListener('DOMContentLoaded', _completed);\n        // A fallback to window.onload, that will always work\n        window.addEventListener('load', _completed);\n    }\n    else\n        domReady();\n}\n\n\nfunction _completed () {\n    document.removeEventListener('DOMContentLoaded', _completed);\n\twindow.removeEventListener('load', _completed);\n    domReady();\n}\n\n\nfunction domReady() {\n    let callback;\n    while (providers.readyCallbacks.length ) {\n        callback = providers.readyCallbacks.shift();\n        timeout(callback);\n    }\n}\n","import {logger} from 'd3-let';\n\nexport default {\n    logger: logger\n};\n","import providers from './providers';\n\nconst prefix = '[d3-form]';\n\n\nexport default function (msg) {\n    providers.logger.warn(`${prefix} ${msg}`);\n}\n","import {isString, isObject, assign} from 'd3-let';\nimport {select, selectAll} from 'd3-selection';\nimport {map} from 'd3-collection';\n\nimport warn from './warn';\n\nconst properties = map({\n    disabled: 'disabled',\n    readonly: 'readOnly',\n    required: 'required'\n});\n\n//\n// Mixin for all form elements\nexport const formElement = {\n\n    inputData (el, data) {\n        var model = this.model;\n        if (!data) data = {};\n        data.id = data.id || model.uid;\n        model.data = data;\n        el.attr('id', data.id);\n        if (data.classes) el.classed(data.classes, true);\n        addAttributes(el, model, data.attributes);\n        properties.each((prop, key) => {\n            var value = data[key];\n            if (value) {\n                if (isString(value))\n                    el.attr(`d3-attr-${key}`, value);\n                else\n                    el.property(prop, true);\n            }\n        });\n        return data;\n    },\n\n    // wrap the form element with extensions\n    wrap (fieldEl) {\n        var field = this,\n            wrappedEl = fieldEl;\n\n        field.model.$formExtensions.forEach(extension => {\n            wrappedEl = extension(field, wrappedEl, fieldEl) || wrappedEl;\n        });\n\n        return wrappedEl;\n    },\n\n    wrapTemplate (sel, template) {\n        var div = document.createElement('div'),\n            outer = select(div).html(template),\n            slot = outer.select('slot');\n\n        if (!slot.size()) {\n            warn('template does not provide a slot element');\n            return sel;\n        }\n        var target = select(slot.node().parentNode);\n        sel.nodes().forEach(function (node) {\n            target.insert(() => {return node;}, 'slot');\n        });\n        slot.remove();\n        return selectAll(div.children);\n    },\n};\n\n// A mixin for all form field components\nexport default assign({}, formElement, {\n\n    model: {\n        value: null,\n        error: '',\n        isDirty: null,\n        changed: false,\n        srOnly: false,\n        placeholder: '',\n        showError: {\n            reactOn: ['error', 'isDirty'],\n            get () {\n                if (this.error) return this.isDirty;\n                return false;\n            }\n        },\n        // default validate function does nothing, IMPORTANT!\n        $validate () {}\n    },\n\n    inputData (el, data) {\n        // call parent method\n        data = formElement.inputData.call(this, el, data);\n        if (!data.name)\n            return warn ('Input field without a name');\n\n        el.attr('name', data.name);\n        data.placeholder = data.placeholder || data.label || data.name;\n        var model = this.model;\n        //\n        // add this model to the form inputs object\n        model.form.inputs[data.name] = model;\n        // give name to model (for debugging info messages)\n        model.name = data.name;\n        model.$on('value', () => {\n            // set isDirty to false if first time here, otherwise true\n            if (model.isDirty === null) {\n                model.isDirty = false;\n            } else {\n                model.isDirty = true;\n                model.changed = true;\n            }\n            // trigger a change event in the form\n            // required for form method such as $isValid\n            model.form.$change();\n        });\n        return data;\n    }\n\n});\n\n\nfunction addAttributes(el, model, attributes) {\n    var expr, attr, t;\n\n    if (!isObject(attributes)) return;\n\n    for (attr in attributes) {\n        expr = attributes[attr];\n        if (isObject(expr)) {\n            if (attr.substring(0, 3) === 'd3-') {\n                t = attr.replace('-', '_');\n                model.$set(t, expr);\n                expr = t;\n            } else {\n                expr = JSON.stringify(expr);\n            }\n        }\n        el.attr(attr, expr || '');\n    }\n}\n","import {timeout} from 'd3-timer';\nimport {isArray} from 'd3-let';\n\nimport warn from './warn';\n\n\nconst componentsFromType = {\n    text: 'input',\n    email: \"input\",\n    password: 'input',\n    checkbox: 'input',\n    number: 'input',\n    date: 'input',\n    url: 'input',\n    'datetime-local': 'input'\n};\n\n\n// return A promise which execute a callback at the next event Loop cycle\nexport function nextTick (callback) {\n    var self = this,\n        promise = new Promise((resolve) => timeout(resolve));\n    if (callback) promise.then(() => callback.call(self));\n    return promise;\n}\n\n\nexport function formComponent (child) {\n    var type = child.type || 'text';\n    return componentsFromType[type] || type;\n}\n\n\nexport function addChildren (sel) {\n    var children = this.model.data.children;\n    if (children) {\n        if (!isArray(children)) {\n            warn(`children should be an array of fields, for ${typeof children}`);\n            return sel;\n        }\n        sel.selectAll('.d3form')\n            .data(children)\n            .enter()\n            .append(formChild)\n            .classed('d3form', true);\n    }\n    return sel;\n}\n\n\nfunction formChild (child) {\n    var component = formComponent(child);\n    if (!component) {\n        warn(`Could not find form component ${child.type}`);\n        component = 'input';\n        child.type = 'hidden';\n    }\n    return document.createElement(`d3-form-${component}`);\n}\n","import {assign} from 'd3-let';\n\nimport {formElement} from './field';\nimport {addChildren} from './utils';\n\n//\n// Fieldset element\nexport default assign({}, formElement, {\n\n    render (data) {\n        var tag = data ? data.tag || 'fieldset' : 'fieldset',\n            el = this.createElement(tag);\n        data = this.inputData(el, data);\n        return addChildren.call(this, el);\n    }\n\n});\n","import {isString, isObject} from 'd3-let';\n\n\nconst required = {\n\n    set (el, data) {\n        var value = data.required;\n        if (isString(value))\n            el.attr(`d3-required`, value);\n        else\n            el.property('required', value || false);\n    },\n\n    validate (el, value) {\n        if (el.property('required'))\n            if (!value) return 'required';\n        else if (value === '') {\n            // this is valid, no need to continue with the remaining validators\n            return true;\n        }\n    }\n};\n\n\nconst minLength = {\n\n    set (el, data) {\n        var value = data.minLength;\n        if (isString(value))\n            el.attr(`d3-attr-minlength`, value);\n        else if (value !== undefined)\n            el.attr('minlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('minlength');\n        if (l === l && l > 0 && value.length < l)\n            return `too short - ${l} characters or more expected`;\n    }\n};\n\n\nconst maxLength = {\n\n    set (el, data) {\n        var value = data.maxLength;\n        if (isString(value))\n            el.attr(`d3-attr-maxlength`, value);\n        else if (value !== undefined)\n            el.attr('maxlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('maxlength');\n        if (l === l && l > 0 && value && value.length > l)\n            return `too long - ${l} characters or less expected`;\n    }\n};\n\n\nconst minimum = {\n\n    set (el, data) {\n        var value = data.minimum;\n        if (isString(value))\n            el.attr(`d3-attr-min`, value);\n        else if (value !== undefined)\n            el.attr('min', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value < r[0])\n            return `must be greater or equal ${r[0]}`;\n    }\n};\n\n\nconst maximum = {\n\n    set (el, data) {\n        var value = data.maximum;\n        if (isString(value))\n            el.attr(`d3-attr-max`, value);\n        else if (value !== undefined)\n            el.attr('max', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value > r[1])\n            return `must be less or equal ${r[1]}`;\n    }\n};\n\n// validator singleton\nexport default {\n\n    // get the list of validators\n    // custom is an optional list of custom validators\n    get (custom) {\n        var validators = this.all.slice(0);\n        if (isObject(custom))\n            for (var key in custom)\n                validators.push(customValidator(key, custom[key]));\n        return validators;\n    },\n\n    // add model validators to a form-field\n    set (vm, el) {\n        var model = vm.model;\n        model._view = vm;\n        model.validators.forEach((validator) => validator.set(el, model.data));\n        model.$on('value.validate', this.validate);\n        model.$validate = this.validate;\n    },\n\n    validate () {\n        var model = this,\n            vm = model._view,\n            validators = model.validators,\n            value = model.value,\n            el = vm.sel.attr('id') === model.data.id ? vm.sel : vm.sel.select(`#${model.data.id}`),\n            validator,\n            msg;\n\n        for (var i=0; i<validators.length; ++i) {\n            validator = validators[i];\n            msg = validator.validate(el, value);\n            if (msg) {\n                if (msg === true) msg = '';\n                break;\n            }\n        }\n\n        model.error = msg || '';\n    },\n\n    all: [\n        required,\n        minLength,\n        maxLength,\n        minimum,\n        maximum\n    ]\n};\n\n\nfunction range (el) {\n    var l0 = el.attr('min'),\n        l1 = el.attr('max');\n    l0 = l0 === null ? -Infinity : +l0;\n    l1 = l1 === null ? Infinity : +l1;\n    return [l0, l1];\n}\n\n\nfunction customValidator (key, method) {\n\n    return {\n        set (el, data) {\n            var value = data[key];\n            if (!value) return;\n        },\n\n        validate (el, value) {\n            return method(el, value);\n        }\n    };\n}\n","import {assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n\nconst checks = ['checkbox', 'radio'];\n\n//\n// Input element\nexport default assign({}, field, {\n\n    render (data) {\n        var el = this.createElement('input');\n        data = this.inputData(el, data);\n\n        el.attr('type', data.type || 'text')\n            .attr('d3-value', 'value');\n\n        if (checks.indexOf(el.attr('type')) === -1)\n            el.attr('placeholder', data.placeholder);\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n","import {assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Textarea element\nexport default assign({}, field, {\n\n    render (data) {\n        var el = this.createElement('textarea');\n        data = this.inputData(el, data);\n        el.attr('placeholder', data.placeholder)\n            .attr('d3-value', 'value');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n\n});\n","import {isArray, assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Select element\nexport default assign({}, field, {\n\n    model: assign({\n        options: [],\n        $optionLabel: optionLabel,\n        $optionValue: optionValue\n    }, field.model),\n\n    render (data) {\n        var el = this.createElement('select');\n        data = this.inputData(el, data);\n        el.attr('d3-value', 'value')\n            .attr('placeholder', data.placeholder)\n            .append('option')\n                .attr('d3-for', 'option in options')\n                .attr('d3-html', '$optionLabel()')\n                .attr('d3-attr-value', '$optionValue()');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n\n\nfunction optionValue () {\n    if (isArray(this.option)) return this.option[0];\n    return this.option;\n}\n\n\nfunction optionLabel () {\n    if (isArray(this.option)) return this.option[1] || this.option[0];\n    return this.option;\n}\n","import {event} from 'd3-selection';\nimport {assign} from 'd3-let';\n\nimport {formElement} from './field';\n\n//\n// Submit element\nexport default assign({}, formElement, {\n\n    render (data) {\n        var tag = data ? data.tag || 'button' : 'button',\n            el = this.createElement(tag);\n\n        data = this.inputData(el, data);\n        var model = this.model;\n        //\n        // model non-reactive attributes\n        model.type = data.type || 'submit';\n        if (data.endpoint) model.endpoint = data.endpoint;\n        //\n        // default submit function\n        model.$submit = () => {\n            model.actions.submit.call(model, event);\n        };\n        if (!data.submit) data.submit = '$submit()';\n\n        el.attr('type', model.type)\n            .attr('name', model.name)\n            .attr('d3-on-click', data.submit)\n            .html(data.label || 'submit');\n\n        return this.wrap(el);\n    }\n});\n","//\n//  Form Responses\n//  ====================\n//\n//  To add/override responses:\n//\n//  import viewForms from 'd3-view'\n//\n//  viewForms.responses.myresponse = function (data, status, headers) {\n//      ...\n//  }\nexport default {\n    \"default\": defaultResponse,\n    redirect: redirect\n};\n\n\nfunction defaultResponse (data) {\n    this.message(data);\n}\n\n\nfunction redirect (data) {\n    window.location.href = data.redirectTo || '/';\n}\n","import {assign} from 'd3-let';\n\nimport providers from './providers';\nimport warn from './warn';\n\n\n//\n// Form Actions\nexport default {\n    submit: submit\n};\n\n\nconst endpointDefauls = {\n    contentType: 'application/json',\n    method: 'post'\n};\n\n//\n// Submit action\nfunction submit (e) {\n    var submit = this,\n        form = submit.form,\n        endpoint = assign({}, endpointDefauls, submit.endpoint);\n\n    if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    var fetch = providers.fetch,\n        data = form.$inputData(),\n        options = {};\n\n    if (!fetch) {\n        warn('fetch provider not available, cannot submit');\n        return;\n    }\n\n    if (!endpoint.url) {\n        warn('No url, cannot submit');\n        return;\n    }\n\n    if (endpoint.contentType === 'application/json') {\n        options.headers = {\n            'Content-Type': endpoint.contentType\n        };\n        options.body = JSON.stringify(data);\n    }\n    else {\n        options.body = new FormData();\n        for (var key in data)\n            options.body.set(key, data[key]);\n    }\n\n    // Flag the form as submitted\n    if (!form.$setSubmit()) {\n        // form not valid, don't bother with request\n        form.$setSubmitDone();\n    } else {\n        options.method = endpoint.method;\n        fetch(endpoint.url, options).then(success, failure);\n    }\n\n\n    function success (response) {\n        form.$setSubmitDone();\n        var ct = (response.headers.get('content-type') || '').split(';')[0];\n        if (ct === 'application/json')\n            response.json().then(data => {\n                form.$response(data, response.status, response.headers);\n            });\n        else {\n            warn(`Cannot load content type '${ct}'`);\n        }\n    }\n\n    function failure () {\n        form.$setSubmitDone();\n    }\n}\n","import {isString} from 'd3-let';\n\nimport {formElement} from './field';\nimport fieldset from './field-set';\nimport input from './field-input';\nimport textarea from './field-textarea';\nimport select from './field-select';\nimport submit from './field-submit';\nimport responses from './responses';\nimport warn from './warn';\nimport providers from './providers';\nimport actions from './actions';\nimport validators from './validators';\nimport {addChildren} from './utils';\n\n\n// Main form component\nexport default {\n\n    // Allow to specify form schema and initial values\n    props: ['schema', 'values'],\n\n    components: {\n        'd3-form-fieldset': fieldset,\n        'd3-form-input': input,\n        'd3-form-textarea': textarea,\n        'd3-form-select': select,\n        'd3-form-submit': submit\n    },\n\n    model: {\n        formSubmitted: false,\n        formPending: false,\n        $isValid (submitting) {\n            let inp,\n                valid = true;\n            for (var key in this.inputs) {\n                inp = this.inputs[key];\n                if (submitting) inp.isDirty = true;\n                inp.$validate();\n                if (inp.error) valid = false;\n            }\n            return valid;\n        },\n        $setSubmit () {\n            this.formSubmitted = true;\n            this.formPending = true;\n            return this.$isValid(true);\n        },\n        $setSubmitDone () {\n            this.formPending = false;\n        },\n        $inputData () {\n            var inputs = this.inputs,\n                data = {},\n                value;\n            for (var key in inputs) {\n                value = inputs[key].value;\n                if (value || input.changed) data[key] = value;\n            }\n            return data;\n        },\n        //\n        // response from a server submit\n        $response (data, status, headers) {\n            if (status < 300) {\n                if (this.data.resultHandler) {\n                    var handler = responses[this.data.resultHandler];\n                    if (!handler) warn(`Could not find ${this.data.resultHandler} result handler`);\n                    else handler.call(this, data, status, headers);\n                } else {\n                    responses.default.call(this, data, status, headers);\n                }\n            } else\n                this.$responseError(data, status, headers);\n        },\n        //\n        //  bad response from server submit\n        $responseError (data) {\n            data.level = 'error';\n            this.$message(data);\n        }\n    },\n\n    render (data) {\n        var model = this.model,\n            form = this.createElement('form').attr('novalidate', ''),\n            self = this;\n        //\n        model.$formExtensions = this.root.$formExtensions || [];\n        model.inputs = {};\n        model.actions = {};\n        model.form = model; // inject self for children models\n        //\n        var schema = data.schema;\n        if (data.values) schema.values = data.values;\n        if (isString(schema)) {\n            var fetch = providers.fetch;\n            return fetch(schema, {method: 'GET'}).then((response) => {\n                if (response.status === 200) return response.json().then(build);\n                else warn(`Could not load form from ${schema}: status ${response.status}`);\n            });\n        }\n        else return build(schema);\n\n        function build (schema) {\n            schema = formElement.inputData.call(self, form, schema);\n            //\n            // Form validations\n            model.validators = validators.get(schema.validators);\n            //\n            // Form actions\n            for (var key in actions) {\n                var action = schema[key];\n                if (isString(action)) action = self.model.$get(action);\n                model.actions[key] = action || actions[key];\n            }\n            addChildren.call(self, form);\n            return form;\n        }\n    },\n\n    childrenMounted () {\n        var model = this.model,\n            values = model.data.values;\n\n        if (values) Object.keys(values).forEach(key => {\n            var inp = model.inputs[key];\n            if (inp) inp.value = values[key];\n        });\n    }\n};\n","import form from './form';\nimport actions from './actions';\nimport responses from './responses';\nimport providers from './providers';\n\n\n// Forms plugin\nexport default {\n    install (vm) {\n        vm.addComponent('d3form', form);\n        // list of form Extensions\n        vm.$formExtensions = [];\n        for (var key in vm.providers)\n            providers[key] = vm.providers[key];\n    },\n    actions,\n    responses\n};\n","export default function (field, wrappedEl) {\n    var data = field.model.data;\n    return field.wrapTemplate(wrappedEl, labelTpl(data));\n}\n\n\nfunction labelTpl(data) {\n    var label = data.label || data.name;\n\n    return `<label for=${data.id} class=\"control-label\" d3-class=\"[srOnly ? 'sr-only' : null]\">${label}</label>\n<slot></slot>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        size = data.size !== undefined ? data.size : field.model.form.data.size,\n        fc = size ? `form-control form-control-${size}` : 'form-control';\n    fieldEl.classed(fc, true).attr('d3-class',\n        `[${data.required || false} ? \"form-control-required\" : null, showError ? \"form-control-danger\" : null]`\n    );\n    return field.wrapTemplate(wrappedEl, groupTpl(data));\n}\n\n\nfunction groupTpl () {\n    return `<div class=\"form-group\" d3-class='showError ? \"has-danger\" : null'>\n<slot></slot>\n<p d3-if=\"showError\" class=\"text-danger error-block\" d3-html=\"error\"></p>\n</div>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        ig = data['group'];\n    if (!ig) return wrappedEl;\n    var gid = `g${fieldEl.attr('id')}`;\n    fieldEl.attr('aria-describedby', gid);\n    return field.wrapTemplate(wrappedEl, groupTpl(gid, ig));\n}\n\n\nfunction groupTpl(gid, group) {\n    return `<div class=\"input-group\" :class=\"bootstrapStatus()\">\n<span class=\"input-group-addon\" id=\"${gid}\">${group}</span>\n<slot></slot>\n</div>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data;\n    fieldEl.classed('form-check-input', true);\n    return field.wrapTemplate(wrappedEl, groupTpl(data.label));\n}\n\nfunction groupTpl(label) {\n    return `<div class=\"form-check\">\n<label class=\"form-check-label\">\n<slot></slot>\n${label}\n</label>\n</div>`;\n}\n","const groupTpl = `<div class=\"form-group\">\n<slot></slot>\n</div>`;\n\n\nexport default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        theme = data.theme || 'primary';\n    fieldEl.classed('btn', true).classed(`btn-${theme}`, true);\n    return field.wrapTemplate(wrappedEl, groupTpl);\n}\n","import label from './label';\nimport formGroup from './form-group';\nimport inputGroup from './input-group';\nimport formCheck from './check';\nimport submit from './submit';\nimport warn from '../warn';\n\n\nconst bootstrap = {\n\n    input: ['inputGroup', 'label', 'formGroup'],\n    checkbox: ['formCheck'],\n    textarea: ['label', 'formGroup'],\n    select: ['label', 'formGroup'],\n    submit: ['submit'],\n    wrappers: {\n        label,\n        formGroup,\n        inputGroup,\n        formCheck,\n        submit\n    }\n};\n\n\n//\n//  Bootstrap plugin\n//  ===================\n//\n//  Simply add a new form extension to wrap form fields\n//\nexport default {\n\n    install (vm) {\n        if (!vm.$formExtensions)\n            return warn('form bootstrap requires the form plugin installed first!');\n        vm.$formExtensions.push(wrapBootstrap);\n    }\n};\n\n\nfunction wrapBootstrap(field, wrappedEl, fieldEl) {\n    var wrappers = bootstrap[fieldEl.attr('type')] || bootstrap[fieldEl.node().tagName.toLowerCase()];\n    if (!wrappers) return wrappedEl;\n    let wrap;\n\n    wrappers.forEach(wrapper => {\n        wrap = bootstrap.wrappers[wrapper];\n        if (wrap) wrappedEl = wrap(field, wrappedEl, fieldEl);\n        else warn(`Could not find form field wrapper ${wrapper}`);\n    });\n\n    return wrappedEl;\n}\n"],"names":["prefix","msg","providers","logger","debug","defaultDebug","info","fetch","active","arguments","length","isFunction","d3Require","inBrowser","window","require","d3","unsupportedRequire","Promise","reject","Error","warn","properties","map","expression","arg","model","value","refreshClass","isArray","prop","get","sel","property","attr","oldValue","forEach","entry","classed","exist","html","isNumber","isString","dir","transition","passes","style","on","selectChildren","mount","callback","delay","promise","debounce","self","args","resolve","apply","undefined","err","o","defineProperty","select","el","base","attrName","refresh","refreshFunction","createValueType","proto","ValueType","prototype","assign","vType","$set","options","selectAll","values","opt","each","indexOf","push","input","type","tag","tagName","toLowerCase","types","expr","parsed","codes","IDENTIFIER","off","eventName","uid","event","md","$child","$event","eval","bindDestroy","compile","text","handlebars","source","context","s","htmlElement","document","createElement","children","node","HttpError","response","description","statusText","size","url","x","then","jsonResponse","asElement","cache","render","fetchText","template","name","asSelect","Array","slice","call","status","ct","headers","split","json","duration","transitionDuration","code","PERIOD_CODE","COMMA_CODE","SQUOTE_CODE","DQUOTE_CODE","OPAREN_CODE","CPAREN_CODE","OBRACK_CODE","CBRACK_CODE","QUMARK_CODE","SEMCOL_CODE","COLON_CODE","throwError","message","index","error","t","unary_ops","binary_ops","getMaxKeyLen","obj","max_len","len","key","hasOwnProperty","max_unop_len","max_binop_len","literals","this_str","binaryPrecedence","op_val","createBinaryExpression","operator","left","right","LOGICAL_EXP","BINARY_EXP","isDecimalDigit","ch","isIdentifierStart","String","fromCharCode","isIdentifierPart","jsep","charAtFunc","charAt","charCodeAtFunc","charCodeAt","exprI","i","exprICode","gobbleSpaces","gobbleExpression","test","gobbleBinaryExpression","consequent","alternate","CONDITIONAL_EXP","gobbleBinaryOp","to_check","substr","tc_len","biop","prec","stack","biop_info","gobbleToken","pop","gobbleNumericLiteral","gobbleStringLiteral","gobbleVariable","gobbleArray","UNARY_EXP","number","chCode","LITERAL","parseFloat","str","quote","closed","gobbleIdentifier","start","identifier","THIS_EXP","gobbleArguments","termination","ch_i","COMPOUND","gobbleGroup","MEMBER_EXP","CALL_EXP","ARRAY_EXP","nodes","addUnaryOp","op_name","Math","max","addBinaryOp","precedence","addLiteral","literal_name","literal_value","removeUnaryOp","removeBinaryOp","removeLiteral","evaluate","nested","elements","elem","binaryExp","callExpression","callee","object","unaryExp","argument","identifiers","all","set","add","fullName","func","EvalError","op","unaryFunctions","Function","a","b","binaryFunctions","Expression","UID","events","dispatch","triggered","typename","asModel","initials","parent","isolated","Child","ddispatch","defineProperties","$update","createChildConstructor","modelStr","constructor","Object","$events","reactive","isModel","isObject","toString","lazy","typeValue","$change","update","newValue","modelName","$$name","isVanillaObject","reactOn","$on","arrayValue","modelValue","$new","$off","bits","getEvent","join","data","replace","substring","removeEvent","splice","idx","attribute","trigger","has","$isReactive","$owner","$push","array","$splice","count","Model","root","removeAttribute","bindModel","target","modelEvents","viewModel","destroy","Directive","create","viewExpression","directive","addTarget","getTarget","JSON","parse","DATAPREFIX","attrs","keys","p","reduce","toUpperCase","protoComponent","onMounted","mounted","directives","dattrs","attributes","parentModel","datum","props","modelData","dataAttributes","reactiveParentProperty","maybeJson","$$view","newEl","element","createComponent","coreDirectives","classComponents","extendComponents","classDirectives","extendDirectives","Component","components","comp","component","container","createDirective","asView","vm","view","vmMounted","isMounted","childrenMounted","cm","parentNode","insertBefore","remove","dirs","Directives","dirName","preMount","d","execute","selection","__d3_directives__","__d3_view__","promises","mountElement","getdirs","c","plugin","install","d3el","trim","v","itemName","itemClass","creator","items","selector","allItems","entries","filter","exits","forView","protoView","fel","tr","enter","append","cloneNode","fv","merge","display","d3For","d3If","observer","MutationObserver","visualManager","observe","documentElement","records","record","removedNodes","config","viewClass","onMount","readyCallbacks","readyState","addEventListener","_completed","domReady","removeEventListener","shift","formElement","id","classes","fieldEl","field","wrappedEl","$formExtensions","extension","div","outer","slot","insert","isDirty","inputData","placeholder","label","form","inputs","changed","addAttributes","stringify","componentsFromType","formComponent","child","addChildren","formChild","required","minLength","l","maxLength","minimum","r","range","maximum","custom","validators","customValidator","_view","validator","validate","$validate","l0","l1","Infinity","method","checks","wrap","optionLabel","optionValue","option","endpoint","$submit","actions","submit","defaultResponse","redirect","location","href","redirectTo","endpointDefauls","e","preventDefault","stopPropagation","$inputData","contentType","body","FormData","$setSubmit","$setSubmitDone","success","failure","$response","fieldset","textarea","submitting","inp","valid","formSubmitted","formPending","$isValid","resultHandler","handler","responses","default","$responseError","level","$message","schema","build","action","$get","addComponent","wrapTemplate","labelTpl","fc","groupTpl","ig","gid","group","theme","bootstrap","wrapBootstrap","wrappers","wrapper"],"mappings":"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"}
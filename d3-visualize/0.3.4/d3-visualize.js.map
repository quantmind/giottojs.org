{"version":3,"file":"d3-visualize.js","sources":["../src/utils/randompath.js","../src/data/array.js","../src/data/warn.js","../src/utils/isurl.js","../src/data/remote.js","../src/utils/accessor.js","../src/data/dataframe.js","../src/data/composite.js","../src/data/expression.js","../src/transforms/base.js","../src/transforms/filter.js","../src/utils/warn.js","../src/utils/fillarray.js","../src/transforms/aggregate.js","../src/transforms/crossfilter.js","../src/transforms/timeseries.js","../src/core/options.js","../src/transforms/mapfields.js","../src/utils/minmax.js","../src/transforms/moving-average.js","../src/transforms/group-small.js","../src/transforms/diff.js","../src/transforms/index.js","../src/data/sources.js","../src/data/store.js","../src/utils/round.js","../src/utils/size.js","../src/utils/clone.js","../src/core/base.js","../src/core/visual.js","../src/utils/camelfunction.js","../src/utils/extend-object.js","../src/core/chart.js","../src/core/paper.js","../src/plugins/menu.js","../src/utils/format.js","../src/utils/format-time.js","../src/plugins/data.js","../src/plugins/font.js","../src/plugins/responsive.js","../src/plugins/title.js","../src/plugins/margin.js","../src/plugins/axis.js","../src/plugins/shapes.js","../src/plugins/color.js","../src/plugins/legend.js","../src/utils/constant.js","../src/utils/functor.js","../src/utils/identity.js","../src/plugins/mouse.js","../src/plugins/tooltip.js","../src/plugins/expand.js","../src/plugins/transition.js","../src/plugins/brush.js","../src/core/container.js","../src/components/dashboard.js","../src/components/visual.js","../src/components/index.js","../src/utils/descending.js","../src/transforms/pyramid.js","../src/utils/nicerange.js","../src/utils/slugify.js","../src/utils/contrast.js","../src/utils/text-wrapping.js","../src/transforms/groups.js","../src/charts/line.js","../src/charts/bar.js","../src/charts/box.js","../src/charts/area.js","../src/charts/pie.js","../src/transforms/funnel.js","../src/utils/polygon.js","../src/charts/pyramid.js","../src/charts/treemap.js","../src/charts/text.js","../src/charts/heatmap.js","../src/charts/geo.js","../src/charts/geo2.js","../src/charts/composite.js","../index.js"],"sourcesContent":["import {assign} from 'd3-let';\nimport {range} from 'd3-array';\nimport {randomNormal} from 'd3-random';\n\n\nconst defaults = {\n    sigma: 0.1,\n    drift: 0\n};\n\n\nexport default function (size, options) {\n    options = assign({}, defaults, options);\n    var t = range(0, +size, 1),\n        S = options.sigma,\n        drift = options.drift,\n        data = [{x: 0, y: 0}],\n        norm = randomNormal(0, 1),\n        dx;\n\n    for (var i = 1; i < t.length; i++) {\n        dx = drift + S * norm();\n        data[i] = {\n            x: i,\n            y: data[i - 1].y + dx\n        };\n    }\n\n    return data;\n}\n","import {isArray, isObject} from 'd3-let';\nimport {resolvedPromise} from 'd3-view';\n\n//\n//  Array DataSource\n//  ====================\n//\n//  Data is given in an array, pkain & simple\nexport default {\n\n    initialise (config) {\n        this._data = config.data;\n    },\n\n    getConfig (config) {\n        if (isArray(config)) return {data: config};\n        else if (isObject(config) && isArray(config.data)) return config;\n    },\n\n    getData () {\n        return resolvedPromise(this.asFrame(this._data));\n    }\n};\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-data-source]';\n\n\nexport default function (msg) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n}\n","import {isString} from 'd3-let';\n\n\nconst schemes = ['http', 'https', 'ws', 'wss'];\n\n\nexport default function (value) {\n    return isString(value) && schemes.indexOf(value.split('://')[0]) > -1;\n}\n","import {csvParse, tsvParse} from 'd3-dsv';\nimport {set} from 'd3-collection';\nimport {isObject} from 'd3-let';\nimport {viewProviders} from 'd3-view';\n\nimport warn from './warn';\nimport isUrl from '../utils/isurl';\n\nconst CSV = set(['text/plain', 'text/csv', 'application/vnd.ms-excel']);\n//\n//  Remote dataSource\n//  ===================\n//\n//  handle Json and csv data\nexport default {\n\n    getConfig (config) {\n        if (isUrl(config)) return {url: config};\n        else if (isObject(config) && config.url)\n            return config;\n    },\n\n    initialise (config) {\n        this.url = config.url;\n    },\n\n    getData () {\n        var fetch = viewProviders.fetch,\n            self = this;\n        if (!fetch) {\n            warn('fetch provider not available, cannot submit');\n            return [];\n        }\n        return fetch(this.url).then(parse).then(data => self.asFrame(data));\n    }\n};\n\n\nfunction parse (response) {\n    var ct = (response.headers.get('content-type') || '').split(';')[0];\n    if (CSV.has(ct))\n        return response.text().then(csvParse);\n    else if (ct === 'text/tab-separated-values')\n        return response.text().then(tsvParse);\n    else if (ct === 'application/json')\n        return response.json();\n    else {\n        warn(`Cannot load content type '${ct}'`);\n        return [];\n    }\n}\n","export default function (field) {\n    return function (d) {\n        return d[field];\n    };\n}\n","import {isArray} from 'd3-let';\nimport {map} from 'd3-collection';\nimport crossfilter from 'crossfilter';\n\nimport accessor from '../utils/accessor';\n\n\nexport default function DataFrame (data, serie, store) {\n    if (isArray(data)) data = {\n        store: store,\n        data: data,\n        dimensions: {},\n        series: map()\n    };\n    Object.defineProperties(this, {\n        _inner: {\n            get () {\n                return data;\n            }\n        },\n        store: {\n            get () {\n                return data.store;\n            }\n        },\n        data: {\n            get () {\n                return data.data;\n            }\n        },\n        dimensions: {\n            get () {\n                return data.dimensions;\n            }\n        },\n        series: {\n            get () {\n                return data.series;\n            }\n        },\n        type: {\n            get () {\n                return 'dataframe';\n            }\n        }\n    });\n    this.serie = serie;\n}\n\n\nDataFrame.prototype = {\n\n    dataFrame () {\n        return this;\n    },\n    \n    size () {\n        return this.data.length;\n    },\n\n    new (serie) {\n        if (isArray(serie)) return new DataFrame(serie, null, this.store);\n        else return new DataFrame(this._inner, serie);\n    },\n\n    cf () {\n        if (!this._inner.cf) this._inner.cf = crossfilter(this.data);\n        return this._inner.cf;\n    },\n\n    //  Create and return a crossfilter dimension\n    //  If value is not specified, keepExisting is by default true, and any\n    //  existing dimension name is recycled.\n    dimension (name, value, keepExisting) {\n        if (arguments.length === 1) keepExisting = true;\n        var current = this.dimensions[name];\n        if (current) {\n            if (keepExisting) return current;\n            current.dispose();\n        }\n        if (!value) value = accessor(name);\n        this.dimensions[name] = this.cf().dimension(value);\n        return this.dimensions[name];\n    },\n\n    //  Sort a dataframe by name and return the top values or all of them if\n    //  top is not defined. The name can be a function.\n    sortby (name, top) {\n        return this.new(this.dimension(name).top(top || Infinity));\n    },\n\n    // return a new dataframe by pivoting values for field name\n    pivot (dimension, key, value, total) {\n        var group = this.dimension(dimension).group();\n        if (!total) total = 'total';\n        return this.new(group.reduce(pivoter(1), pivoter(-1), Object).all().map(d => d.value));\n\n        function pivoter (m) {\n            let pk, pv;\n            return function (o, record) {\n                pk = ''+record[key];\n                pv = m*record[value];\n                o[dimension] = record[dimension];\n                if (pk in o) o[pk] += pv;\n                else o[pk] = pv;\n                if (total in o) o[total] += pv;\n                else o[total] = pv;\n                return o;\n            };\n        }\n    },\n\n    add () {\n        //this._inner.cf.add(data);\n    },\n\n    map (mapper) {\n        return this.new(this.data.map(mapper));\n    }\n};\n","import {map} from 'd3-collection';\nimport {isArray, isObject} from 'd3-let';\nimport DataFrame from './dataframe';\n//\n//  A composite dataSource\n//  ===================\n//\n//  A composite data source has the source attribute with the name of one\n//  or more data sets to use as the source for this data set.\n//  The source property is useful in combination with a transform pipeline\n//  to derive new data.\n//  If string-valued, indicates the name of the source data set.\n//  If array-valued, specifies a collection of data source names that\n//  should be merged (unioned) together.\nexport default {\n\n    initialise (config) {\n        this.source = config.source;\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.source) {\n            if (!isArray(config.source)) config.source = [config.source];\n            return config;\n        }\n    },\n\n    getData (context) {\n        var store = this.store,\n            sources = this.source,\n            self = this;\n\n        return Promise.all(sources.map(source => {\n             return store.getData(source, context);\n        })).then(frames => {\n            let fc;\n            if (frames.length === 1) fc = frames[0];\n            else if (self.config.merge) fc = self.mergeFrames(frames);\n            else {\n                fc = new FrameCollection(store);\n                frames.forEach((frame, index) => {\n                    fc.frames.set(sources[index], frame);\n                });\n            }\n            return self.asFrame(fc);\n        });\n    },\n\n    // TODO: implement frame merging\n    mergeFrames (frames) {\n        return frames[0];\n    }\n};\n\n\nfunction FrameCollection (store) {\n    this.frames = map();\n    Object.defineProperties(this, {\n        store: {\n            get () {\n                return store;\n            }\n        },\n        type: {\n            get () {\n                return 'frameCollection';\n            }\n        }\n    });\n}\n\nFrameCollection.prototype = {\n\n    new (data) {\n        return new DataFrame(data, null, this.store);\n    },\n\n    dataFrame () {\n        var frames = this.frames.values();\n        for (let i=0; i<frames.length; ++i) {\n            if (frames[i].type === 'dataframe') return frames[i];\n        }\n    }\n};\n","import {isObject, isPromise} from 'd3-let';\nimport {viewExpression} from 'd3-view';\n\n\nexport default {\n\n    initialise (config) {\n        this.expression = viewExpression(config.expression);\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.expression)\n            return config;\n    },\n\n    getData (context) {\n        var self = this,\n            model = this.store.model.$child(context),\n            result = this.expression.eval(model);\n        if (isPromise(result)) return result.then(data => self.asFrame(data));\n        else return self.asFrame(result);\n    }\n};\n","import {viewProviders} from 'd3-view';\n\n\nexport default function (options) {\n    const\n        transform = options.transform,\n        schema = options.schema || {},\n        jsonValidator = viewProviders.jsonValidator ? viewProviders.jsonValidator(options.schema) : dummyValidator;\n    if (!schema.type) schema.type = 'object';\n\n    function transformFactory (config) {\n        const valid = jsonValidator.validate(config);\n\n        if (!valid) return jsonValidator.logError();\n\n        return doTransform;\n\n        function doTransform (frame) {\n            return transform(frame, config);\n        }\n    }\n\n    transformFactory.schema = schema;\n\n    return transformFactory;\n}\n\n\nconst dummyValidator = {\n    validate () {\n        return true;\n    }\n};\n","import {viewExpression} from 'd3-view';\n\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"The filter transform removes objects from a data frame based on a provided filter expression\",\n        properties: {\n            expr: {\n                type: \"string\"\n            }\n        },\n        required: [\"expr\"]\n    },\n    transform (frame, config) {\n        var expr = viewExpression(config.expr);\n        return frame.data.reduce((data, d, index) => {\n            if (expr.safeEval({d: d, index: index, frame: frame})) data.push(d);\n            return data;\n        }, []);\n    }\n});\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-visualize]';\n\n\nexport default function (msg, err) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n    if (err) viewProviders.logger.error(err.stack);\n}\n","export default function (size, value) {\n    var a = new Array(size);\n    a.fill(value);\n    return a;\n}\n","import {map} from 'd3-collection';\nimport {isArray, isString} from 'd3-let';\nimport {max, min, sum, mean, median, variance, deviation} from 'd3-array';\n\nimport warn from '../utils/warn';\nimport fillArray from '../utils/fillarray';\n\nexport const operations = map({\n    count,\n    max,\n    min,\n    sum,\n    mean,\n    median,\n    variance,\n    deviation\n});\n\nexport const scalar_operations = map({\n    count (agg) {return agg + 1;},\n    sum (agg, v) {return agg + v;},\n    max: Math.max,\n    min: Math.min\n});\n\n\nfunction count (array, accessor) {\n    return array.reduce((v, d) => {\n        if (accessor(d) !== undefined) v += 1;\n        return v;\n    }, 0);\n}\n//\n// The aggregate transform groups and summarizes an imput data stream to\n// produce a derived output data stream. Aggregate transforms can be used\n// to compute counts, sums, averages and other descriptive statistics over\n// groups of data objects.\nexport default function (config) {\n    let fields = config.fields,\n        ops = config.ops,\n        as = config.as,\n        groupby = config.groupby;\n\n    if (!fields && !ops) return countAll;\n\n    if (!isArray(fields)) return warn('Aggregate transforms expect an array of fields');\n    if (!ops) ops = 'count';\n    if (isString(ops)) ops = fillArray(fields.length, ops);\n    if (!isArray(ops)) return warn('Aggregate transform expects an array of ops');\n    if (ops.length < fields.length) warn('Aggregate transforms expects an ops array with same length as fields');\n    if (!as) as = [];\n    if (!isArray(as)) return warn('Aggregate transform expects an array of as fields');\n    return aggregate;\n\n\n    function countAll (frame) {\n        let key;\n        return frame.data.reduce((o, d) => {\n            for (key in d) {\n                if (key in o) o[key] += 1;\n                else o[key] = 1;\n            }\n            return o;\n        }, {});\n    }\n\n    function aggregate (frame) {\n        var data = [],\n            name, op;\n\n        if (groupby) return group(frame);\n\n        fields.forEach((field, index) => {\n            name = ops[index];\n            op = count;\n            if (name) {\n                op = operations.get(name);\n                if (!op) {\n                    op = count;\n                    warn(`Operation ${ops[index]} is not supported, use count`);\n                }\n            }\n            data.push({\n                label: as[index] || field,\n                data: op(frame.data, d => d[field])\n            });\n        });\n        return data;\n    }\n\n    //\n    //  Perform aggregation with a set of data fields to group by\n    function group (frame) {\n        let v, name, op;\n        const entries = fields.map((field, index) => {\n            name = ops[index];\n            op = scalar_operations.get('count');\n            if (name) {\n                op = scalar_operations.get(name);\n                if (!op) {\n                    op = scalar_operations.get('count');\n                    warn(`Operation ${name} is not supported, use count`);\n                }\n            }\n            return {\n                field: field,\n                as: as[index] || field,\n                op: op\n            };\n        });\n\n        return frame.dimension(groupby).group().reduce((o, record) => {\n            return entries.reduce((oo, entry) => {\n                v = 0;\n                if (entry.as in oo) v = oo[entry.as];\n                oo[entry.as] = entry.op(v, record[entry.field]);\n                return oo;\n            }, o);\n        }, null, Object).all().map(d => {\n            d.value[groupby] = d.key;\n            return d.value;\n        });\n    }\n}\n","import {isArray, isString} from 'd3-let';\nimport warn from '../utils/warn';\n\n//\n// Apply a cross filter to an array of fields\nexport default function (config) {\n    let fields = config.fields,\n        query = config.query;\n\n    if (!isArray(fields)) return warn('crossfilter transform expects an array of fields');\n    if (!isArray(query)) return warn('crossfilter transform expects an array of query');\n    if (query.length != fields.length) return warn('crossfilter transform expects an query array with same length as fields');\n\n    return crossfilter;\n\n    function crossfilter (frame) {\n        let dim, q;\n        fields.forEach((field, index) => {\n            q = query[index];\n            if (isString(q)) q = frame.store.eval(q);\n            dim = frame.dimension(field).filterAll();\n            if (q) dim.filter(q);\n        });\n        if (dim) return frame.new(dim.top(Infinity));\n        return frame;\n    }\n}\n","import warn from '../utils/warn';\n\n//\n// Create a groupby transform from a config object\nexport default function (config) {\n    var sortby = config.sortby,\n        groupby = config.groupby;\n\n    if (!sortby) warn('timeseries transform requires a \"sortby\" entry');\n\n    return timeseries;\n\n    function timeseries (frame) {\n        if (sortby) {\n            if (groupby) {\n                var dim = frame.dimension(groupby),\n                    groups = dim.group().top(Infinity),\n                    newframe = frame.new([]),\n                    tmp;\n                groups.forEach(group => {\n                    tmp = frame.new(dim.filterExact(group.key).top(Infinity)).dimension(sortby).group().top(Infinity);\n                    newframe.series.set(group.key, frame.new(tmp).dimension('key').top(Infinity));\n                });\n                return newframe;\n            } else {\n                return frame.new(frame.dimension(sortby).top(Infinity));\n            }\n        }\n        return frame;\n    }\n}\n","//\n//  Global options for visuals\n//  ============================\n//\nexport default {\n    // visual data source\n    dataSource: null,\n    //\n    size: {\n        // width set by the parent element\n        width: null,\n        // height set as percentage of width\n        height: '70%'\n    }\n};\n","//\n//  Map Fields Transform\n//  ========================\n//\n//  Convert a set af fields to a different data type\n//\nimport {map} from 'd3-collection';\nimport {isString} from 'd3-let';\nimport {utcParse} from 'd3-time-format';\n\nimport transformFactory from './base';\nimport warn from '../utils/warn';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.dateFormat = '%d-%b-%y';\n\n\nconst converters = {\n    date (entry) {\n        return utcParse(entry.dateFormat || globalOptions.dateFormat);\n    },\n    number () {\n        return parseFloat;\n    }\n};\n\nexport default transformFactory({\n    shema: {\n        description: \"map a field values into another type\",\n        properties: {\n            fields: {\n                type: \"object\"\n            },\n            dateFormat: {\n                type: \"string\"\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        var fields = map(config.fields),\n            mappers = [];\n        let i, converter;\n\n        fields.each((entry, key) => {\n            if (isString(entry)) entry = {type: entry};\n            converter = converters[entry.type];\n            if (!converter) warn(`Cannot convert field ${key} to type ${entry.type}`);\n            else mappers.push([key, converter(entry)]);\n        });\n\n        if (mappers.length)\n            frame = frame.map(d => {\n                for (i=0; i<mappers.length; ++i)\n                    d[mappers[i][0]] = mappers[i][1](d[mappers[i][0]]);\n                return d;\n            });\n\n        return frame;\n    }\n});\n","export default function (value, min, max) {\n    if (max !== undefined) value = Math.min(value, max);\n    return min === undefined ? value : Math.max(value, min);\n}\n","import transformFactory from './base';\nimport minmax from '../utils/minmax';\n\nconst\n    DEFAULT_METHOD = 'ema',   // or sma simple moving average\n    DEFAULT_PERIOD = 10,\n    DEFAULT_ALPHA = 0.5,\n    MAXALPHA = 0.999999;\n\n//\n// Exponential moving average transform\n// Useful for smoothing out volatile timeseries\nexport default transformFactory({\n    shema: {\n        description: \"Create moving average series from existing one. The new series override the existing one unless the as array is provided\",\n        properties: {\n            method: {\n                type: \"string\"\n            },\n            alpha: {\n                type: \"number\"\n            },\n            period: {\n                type: \"number\"\n            },\n            fields: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            as: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        const as = config.as || [],\n            method = config.method || DEFAULT_METHOD;\n        let fieldto, y, s;\n\n        config.fields.forEach((field, index) => {\n            fieldto = as[index] || field;\n            //\n            // Simple Moving Average\n            if (method === 'sma') {\n                const period = Math.max(config.period || DEFAULT_PERIOD, 1),\n                    cumulate = [],\n                    buffer = [];\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (cumulate.length === period) y -= buffer.splice(0, 1)[0];\n                    buffer.push(y);\n                    if (index) y += cumulate[cumulate.length-1];\n                    cumulate.push(y);\n                    d[fieldto] = y/cumulate.length;\n                });\n            //\n            // Exponential moving average\n            } else {\n                const alpha = minmax(config.alpha || DEFAULT_ALPHA, 1-MAXALPHA, MAXALPHA);\n\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (!index) s = y;\n                    else s = alpha*s + (1-alpha)*y;\n                    d[fieldto] = s;\n                });\n            }\n        });\n    }\n});\n","import {sum} from 'd3-array';\n\nimport accessor from '../utils/accessor';\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"Group entries which are below a given aggregate cutoff\",\n        properties: {\n            field: {\n                type: \"string\"\n            },\n            cutoff: {\n                type: \"number\"\n            }\n        },\n        required: [\"field\", \"cutoff\"]\n    },\n    transform (frame, config) {\n        var get = accessor(config.field),\n            total = sum(frame.data, get);\n        let children = [],\n            aggregate = 0;\n        return frame.dimension(config.field).bottom(Infinity).reduce((data, d) => {\n            aggregate += get(d);\n            if (aggregate/total < config.cutoff) children.push(d);\n            else if (children) {\n                children.push(d);\n                d = {\n                    label: 'other',\n                    children: children\n                };\n                d[config.field] = aggregate;\n                children = null;\n                data.push(d);\n            } else\n                data.push(d);\n            return data;\n        }, []);\n    }\n});\n","import {assign} from 'd3-let';\n\nimport transformFactory from './base';\n\n//\n// First order difference along a dimension for a group of fields\nexport default transformFactory ({\n    schema: {\n        description: \"Perfrom a difference for a group of fields along a dimension. It is possible to perform a difference for different groups\",\n        properties: {\n            dimension: {\n                type: \"string\"\n            },\n            period: {\n                type: \"integer\",\n                minimum: 1\n            },\n            fields: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            as: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            groupby: {\n                type: \"string\"\n            }\n        },\n        required: [\"dimension\", \"fields\"]\n    },\n    transform (frame, config) {\n        var as = config.as || [],\n            period = config.period || 1,\n            data = [];\n\n        if (config.groupby) {\n            var g = frame.dimension(config.groupby),\n                groups = g.group().all();\n            groups.forEach(d => difference(frame.new(g.filterAll().filter(d.key).top(Infinity))));\n        } else {\n            difference(frame.new());\n        }\n\n        return data;\n\n        function difference (df) {\n            var dim = df.dimension(config.dimension),\n                zeros = config.fields.reduce((z, field) => {z[field] = 0; return z;}, {}),\n                stack = [];\n            let dd, prev;\n\n            dim.top(Infinity).forEach((d, index) => {\n                dd = assign({}, d);\n                stack.push(d);\n                if (index > period) prev = stack.splice(0, 1)[0];\n                else prev = zeros;\n                config.fields.forEach((field, index) => {\n                    d[as[index] || field] = d[field] - prev[field];\n                });\n                data.push(dd);\n            });\n        }\n    }\n});\n","// Collection of transforms\nimport {map} from 'd3-collection';\nimport {isArray, isPromise, assign} from 'd3-let';\n\nimport transform from './base';\nimport filter from './filter';\nimport aggregate from './aggregate';\nimport crossfilter from './crossfilter';\nimport timeseries from './timeseries';\nimport mapfields from './mapfields';\nimport movingaverage from './moving-average';\nimport groupsmall from './group-small';\nimport diff from './diff';\n\n//\n//  transforms Store\nexport default assign(map({\n    filter,\n    aggregate,\n    mapfields,\n    timeseries,\n    crossfilter,\n    movingaverage,\n    groupsmall,\n    diff\n}), {\n    add (name, o) {\n        this.set(name, transform(o));\n    }\n});\n\n\n//  Apply data transforms to a series\n//  Allow for asynchronous transforms\nexport function applyTransforms (frame, transforms) {\n    if (!transforms) return frame;\n    return applyt(frame, transforms.slice());\n}\n\nfunction applyt (frame, transforms, res) {\n    if (isArray(res)) frame = frame.new(res);\n    else if (res) frame = res;\n    if (transforms.length) {\n        var transform = transforms.splice(0, 1)[0],\n            ts = transform ? transform(frame) : null;\n        if (isPromise(ts)) return ts.then(res => applyt(frame, transforms, res));\n        else return applyt(frame, transforms, ts);\n    }\n    return frame;\n}\n","import {map} from 'd3-collection';\nimport {dispatch} from 'd3-dispatch';\nimport {pop, isArray, assign} from 'd3-let';\n\nimport DataFrame from './dataframe';\nimport transformStore, {applyTransforms} from '../transforms/index';\nimport warn from '../utils/warn';\n\nconst dataEvents = dispatch('init', 'data');\n\n\n//\n//  DataSource prototype\n//  ======================\nconst dataSourcePrototype = {\n\n    // get the config\n    // This method is used by the prototype\n    // to check if the config object is a valid one\n    getConfig () {},\n\n    // initialise the data source with a config object\n    initialise () {},\n\n    getData () {},\n\n    //\n    addTransforms (transforms) {\n        var self = this;\n        let t;\n        if (!transforms) return;\n        if (!isArray(transforms)) transforms = [transforms];\n        transforms.forEach(transform => {\n            t = transformStore.get(transform.type);\n            if (!t) warn(`Transform type \"${transform.type}\" not known`);\n            else self.transforms.push(t(transform));\n        });\n    },\n    //\n    // given a data object returns a Cross filter object\n    asFrame (data) {\n        if (isArray(data)) {\n            data = data.map(entry => {\n                if (entry.constructor !== Object) entry = {data: entry};\n                return entry;\n            });\n            data = new DataFrame(data, null, this.store);\n        }\n        return applyTransforms(data, this.transforms);\n    }\n};\n\n\n// DataSource container\nexport default assign(map(), {\n    events: dataEvents,\n\n    add (type, source) {\n\n        // DataSource constructor\n        function DataSource (config, store) {\n            initDataSource(this, type, config, store);\n        }\n\n        DataSource.prototype = assign({}, dataSourcePrototype, source);\n\n        this.set(type, DataSource);\n        return DataSource;\n    },\n\n    // Create a new DataSource\n    create (config, store) {\n        var sources = this.values(),\n            cfg;\n        for (var i=0; i<sources.length; ++i) {\n            cfg = sources[i].prototype.getConfig(config);\n            if (cfg) return new sources[i](cfg, store);\n        }\n    }\n});\n\n\nfunction initDataSource(dataSource, type, config, store) {\n\n    var name = store.dataName(pop(config, 'name')),\n        transforms = [];\n\n    // store.natural = cf.dimension(d => d._id);\n\n    Object.defineProperties(dataSource, {\n        name: {\n            get () {\n                return name;\n            }\n        },\n        store: {\n            get () {\n                return store;\n            }\n        },\n        type: {\n            get () {\n                return type;\n            }\n        },\n        // transforms to apply to data\n        transforms: {\n            get () {\n                return transforms;\n            }\n        },\n        config: {\n            get () {\n                return config;\n            }\n        }\n    });\n\n    dataSource.initialise(config);\n    dataSource.addTransforms(pop(config, 'transforms'));\n    store.sources.set(name, dataSource);\n    dataEvents.call('init', undefined, dataSource);\n}\n","import {map} from 'd3-collection';\nimport {isArray, isString, isPromise, isFunction, assign} from 'd3-let';\nimport {viewExpression, resolvedPromise, viewModel} from 'd3-view';\n\nimport array from './array';\nimport remote from './remote';\nimport composite from './composite';\nimport expression from './expression';\nimport dataSources from './sources';\nimport transformStore from '../transforms/index';\n\n\ndataSources.add('array', array);\ndataSources.add('remote', remote);\ndataSources.add('composite', composite);\ndataSources.add('expression', expression);\n\n//\n//  DataStore\n//  ==============\n//\n//  Map names to datasets\n//  Individual data sets are assumed to contain a collection of records\n//  (or “rows”), which may contain any number of named data\n//  attributes (fields, or “columns”).\n//  Records are modeled using standard JavaScript objects.\nexport default function DataStore(model) {\n    var sources = map();\n\n    Object.defineProperties(this, {\n        sources: {\n            get () {\n                return sources;\n            }\n        }\n    });\n\n    // transforms function\n    this.transforms = assign({}, transformStore);\n    this.dataCount = 0;\n    this.model = (model && isFunction(model.$child)) ? model : viewModel(model);\n}\n\n\nDataStore.prototype = {\n    size () {\n        return this.sources.size();\n    },\n\n    // Add a new serie from a data source\n    addSources (config) {\n        //\n        // data is a string, it must be already registered with store\n        if (isString(config)) config = {source: config};\n\n        if (isArray(config)) {\n            var self = this;\n            return config.map(cfg => {\n                return dataSources.create(cfg, self);\n            });\n        } else if (config) {\n            return dataSources.create(config, this);\n        }\n    },\n\n    addTransforms (transforms) {\n        assign(this.transforms, transforms);\n    },\n\n    // set, get or remove a data source\n    source (name, source) {\n        if (arguments.length === 1) return this.sources.get(name);\n        if (source === null) {\n            var p = this.sources.get(name);\n            this.sources.remove(name);\n            return p;\n        }\n        this.sources.set(name, source);\n        return this;\n    },\n\n    clearCache () {\n        this.sources.each(ds => {\n            delete ds.cachedFrame;\n        });\n    },\n\n    // get data from a source\n    getData (source, context) {\n        var ds = this.sources.get(source);\n        if (!ds) throw new Error(`Data source ${source} not available`);\n        if (ds.cachedFrame) return resolvedPromise(ds.cachedFrame);\n        var data = ds.getData(context);\n        if (!isPromise(data)) data = resolvedPromise(data);\n        return data.then(frame => {\n            if (ds.config.cache) ds.cachedFrame = frame;\n            return frame;\n        });\n    },\n\n    eval (expr, context) {\n        let ctx = this.model.$child(context);\n        ctx.dataStore = this;\n        return viewExpression(expr).safeEval(ctx);\n    },\n\n    dataName (name) {\n        this.dataCount++;\n        if (name) return '' + name;\n        var def = this.source('default');\n        if (!def) return 'default';\n        return `source${this.dataCount}`;\n    }\n};\n","export default function (x, n) {\n    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);\n}\n","import {select} from 'd3-selection';\n\nimport round from './round';\nimport minmax from './minmax';\n\n\nconst WIDTH = 400;\nconst HEIGHT = '75%';\n\n\nexport function sizeValue (value, size) {\n    if (typeof(value) === \"string\" && value.indexOf('%') === value.length-1)\n        return round(0.01*parseFloat(value)*size);\n    return +value;\n}\n\n// Internal function for evaluating paper dom size\nexport function getSize (element, options) {\n    var size = {\n        width: options.width,\n        height: options.height\n    };\n\n    if (!size.width) {\n        size.width = getWidth(element);\n        if (size.width)\n            size.widthElement = getWidthElement(element);\n        else\n            size.width = WIDTH;\n    }\n\n    if (!size.height) {\n        size.height = getHeight(element);\n        if (size.height)\n            size.heightElement = getHeightElement(element);\n        else\n            size.height = HEIGHT;\n    }\n\n    // Allow to specify height as a percentage of width\n    size.height = minmax(sizeValue(size.height, size.width), undefined, windowHeight());\n    return size;\n}\n\n\nexport function getWidth (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementWidth(el);\n}\n\n\nexport function getHeight (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementHeight(el);\n}\n\n\nexport function getWidthElement (element) {\n    return getParentElementRect(element, 'width');\n}\n\n\nexport function getHeightElement (element) {\n    return getParentElementRect(element, 'height');\n}\n\n\nfunction windowHeight () {\n    return window.innerHeight;\n}\n\n\nfunction elementWidth (el) {\n    var w = el.getBoundingClientRect()['width'],\n        s = select(el),\n        left = padding(s.style('padding-left')),\n        right = padding(s.style('padding-right'));\n    return w - left - right;\n}\n\n\nfunction elementHeight (el) {\n    var w = el.getBoundingClientRect()['height'],\n        s = select(el),\n        top = padding(s.style('padding-top')),\n        bottom = padding(s.style('padding-bottom'));\n    return w - top - bottom;\n}\n\n\nfunction getParentElementRect (element, key) {\n    let parent = element.node ? element.node() : element,\n        v;\n    while (parent && parent.tagName !== 'BODY') {\n        v = parent.getBoundingClientRect()[key];\n        if (v)\n            return parent;\n        parent = parent.parentNode;\n    }\n}\n\n\nfunction padding (value) {\n    if (value && value.substring(value.length-2) == 'px')\n        return +value.substring(0, value.length-2);\n    return 0;\n}\n","import {isArray, isObject} from 'd3-let';\n\n\nexport default function clone (o) {\n    if (isArray(o)) return o.map(clone);\n    else if (isObject(o)) {\n        var v = {};\n        for (let key in o) {\n            v[key] = clone(o[key]);\n        }\n        return v;\n    } else return o;\n}\n","import {pop, isString, isObject, assign} from 'd3-let';\nimport {dispatch} from 'd3-dispatch';\nimport {select, event} from 'd3-selection';\nimport {viewBase, viewModel} from 'd3-view';\nimport 'd3-transition';\n\nimport globalOptions from './options';\nimport {sizeValue} from '../utils/size';\nimport minmax from '../utils/minmax';\nimport clone from '../utils/clone';\n\n\nconst CONTAINERS = ['visual', 'container'];\n\n//\n//  Gloval visuals object\n//  ==========================\n//\n//  Container of\n//  * live visuals\n//  * visual types\n//  * paper types\n//  * visual events\nexport const visuals = {\n    live: [],\n    types: {},\n    papers: {},\n    options: globalOptions,\n    events: dispatch(\n        'before-init',\n        'after-init',\n        'resize',\n        'before-draw',\n        'after-draw'\n    )\n};\n\n//\n//  Visual Interface\n//  ====================\n//\n//  Base prototype object for visuals\n//\nexport const visualPrototype = assign({}, {\n\n    // initialise the visual with options\n    initialise () {\n\n    },\n\n    // draw this visual\n    draw () {},\n\n    // redraw the visual\n    // this is the method that should be invoked by applications\n    redraw (fetchData) {\n        if (this.drawing) {\n            var self = this,\n                event = `after-draw.${this.toString()}`;\n            visuals.events.on(event, () => {\n                // remove callback\n                visuals.events.on(event, null);\n                self.redraw(fetchData);\n            });\n        } else\n            this.drawing = this.draw(fetchData);\n        return this.drawing;\n    },\n\n    select (el) {\n        return select(el);\n    },\n\n    event () {\n        return event;\n    },\n\n    // destroy the visual\n    destroy () {},\n\n    toString () {\n        return `${this.visualType}-${this.model.uid}`;\n    },\n\n    // get a reactive model for type\n    getModel (type) {\n        if (!type) type = this.visualType;\n        var model = this.model[type];\n        if (!model && type in globalOptions) {\n            var options = pop(this.options, type),\n                self = this;\n            if (this.visualParent)\n                model = this.visualParent.getModel(type).$child(options);\n            else {\n                model = this.model.$new(globalOptions[type]);\n                model.$update(options);\n            }\n            this.model[type] = model;\n            //\n            // Trigger redraw when model change\n            // Do not fecth data\n            model.$on(() => self.redraw(false));\n        }\n        return model;\n    },\n\n    // apply the visualmodel uid to a name\n    idname (name) {\n        if (!name) name = this.visualType;\n        return `${name}-${this.model.uid}`;\n    },\n\n    modelProperty (name, model) {\n        var me = this.getModel(),\n            value = me[name];\n        return value === undefined ? model[name] : value;\n    },\n\n    dim (size, refSize, minSize, maxSize) {\n        return minmax(sizeValue(size, refSize), minSize, maxSize);\n    },\n    // pop this visual from a container\n    pop (container) {\n        if (container) {\n            var idx = container.live.indexOf(this);\n            if (idx > -1) container.live.splice(idx, 1);\n        }\n    },\n\n    getVisualSchema (name) {\n        var schema = this.options.visuals ? this.options.visuals[name] : null,\n            parent = this.visualParent;\n        if (parent && isString(schema)) {\n            name = schema;\n            schema = parent.getVisualSchema(name);\n        } else if (parent && !schema)\n            schema = parent.getVisualSchema(name);\n        if (isObject(schema))\n            return clone(schema);\n    }\n}, viewBase);\n\n//\n//  Create a new Visual Constructor\nexport default function (type, proto) {\n    const opts = pop(proto, 'options');\n    if (opts)\n        globalOptions[type] = opts;\n\n    function Visual(element, options, parent, model) {\n        Object.defineProperties(this, {\n            visualType: {\n                get () {\n                    return type;\n                }\n            },\n            isViz: {\n                get () {\n                    return CONTAINERS.indexOf(type) === -1;\n                }\n            },\n            visualRoot: {\n                get () {\n                    if (this.visualParent) return this.visualParent.visualRoot;\n                    return this;\n                }\n            }\n        });\n        this.visualParent = parent;\n        this.model = parent ? parent.model.$new() : (model || viewModel());\n        this.options = options || {};\n        this.drawing = false;\n        visuals.events.call('before-init', undefined, this);\n        this.initialise(element);\n        visuals.events.call('after-init', undefined, this);\n    }\n\n    Visual.prototype = assign({}, visualPrototype, proto);\n    Visual.prototype.constructor = Visual;\n    visuals.types[type] = Visual;\n    return Visual;\n}\n","import {pop, inBrowser} from 'd3-let';\nimport {select} from 'd3-selection';\nimport {viewDebug} from 'd3-view';\n\nimport createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\nimport {getSize} from '../utils/size';\n\n//\n//  Visual\n//  =============\n//\n//  A Visual is a a container of visual layers and it is\n//  associated with an HTML element\n//\n//  Usually a Visual contains one layer only, however it is possible to\n//  have more than one by combining several layers together. Importantly,\n//  layers in one visual generate HTMLElements which are children of the visual\n//  element and inherit both the width and height.\n//\n//  A visual register itself with the visuals.live array\n//\nexport default createVisual('visual', {\n\n    options: {\n        render: 'svg',\n        // width set by the parent element\n        width: null,\n        // height set as percentage of width\n        height: '70%',\n        // heightElement - selector for an element from wich to obtain height\n        heightElement: null\n    },\n\n    initialise (element) {\n        if (!element) throw new Error('HTMLElement required by visual group');\n        if (this.visualParent && this.visualParent.visualType !== 'container')\n            throw new Error('Visual parent can be a container only');\n        if (!this.select(element).select('.paper').node())\n            this.select(element).append('div').classed('paper', true);\n\n        Object.defineProperties(this, {\n            element : {\n                get () {\n                    return element;\n                }\n            },\n            paperElement : {\n                get () {\n                    return this.sel.select('.paper');\n                }\n            },\n            sel: {\n                get () {\n                    return select(element);\n                }\n            },\n            size: {\n                get () {\n                    return [this.width, this.height];\n                }\n            }\n        });\n\n        this.sel.classed('d3-visual', true);\n        // list of layers which define the visual\n        this.layers = [];\n        this.drawCount = 0;\n        visuals.live.push(this);\n        element.__visual__ = this;\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    activate () {\n        this.layers.forEach(layer => layer.activate());\n    },\n\n    deactivate () {\n        this.layers.forEach(layer => layer.deactivate());\n    },\n\n    getVisual () {\n        return this;\n    },\n\n    // Draw the visual\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        else if (!this.drawCount) {\n            this.drawCount = 1;\n            this.fit();\n        } else {\n            this.drawCount++;\n            this.clear();\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, this);\n        return Promise.all(this.layers.map(visual => {\n            return visual.redraw(fetchData);\n        })).then(() => {\n            delete self.drawing;\n            visuals.events.call('after-draw', undefined, self);\n        }, err => {\n            delete self.drawing;\n            warn(`Could not draw ${self.toString()}: ${err}`, err);\n        });\n    },\n\n    clear () {},\n\n    // Add a new visual to this group\n    addVisual (options) {\n        var type = pop(options, 'type');\n        var VisualClass = visuals.types[type];\n        if (!VisualClass)\n            warn(`Cannot add visual \"${type}\", not available`);\n        else\n            return new VisualClass(this.element, options, this);\n    },\n    //\n    // Fit the root element to the size of the parent element\n    fit () {\n        this.resize(null, true);\n        return this;\n    },\n\n    // resize the chart\n    resize (size, fit) {\n        if (!size) size = getSize(this.element.parentNode || this.element, this.getModel());\n        var currentSize = this.size;\n\n        if (fit || (currentSize[0] !== size.width || currentSize[1] !== size.height)) {\n            if (!fit) viewDebug(`Resizing \"${this.toString()}\"`);\n            this.width = size.width;\n            this.height = size.height;\n            // this.paper.style('width', this.width + 'px').style('height', this.height + 'px');\n            this.paperElement.style('height', this.height + 'px');\n            visuals.events.call('resize', undefined, this);\n            // if we are not just fitting draw the visual without fetching data!!\n            if (!fit) this.draw(false);\n        }\n        return this;\n    },\n\n    paper () {\n        var paper = this.__paper,\n            render = this.getModel().render;\n        if (paper && paper.paperType === render) return paper;\n        var PaperType = visuals.papers[render];\n        if (!PaperType) throw new Error(`Unknown paper ${render}`);\n        paper = new PaperType(this);\n        this.__paper = paper;\n        return paper;\n    },\n\n    getPaperGroup (gname) {\n        return this.paper().group(gname);\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n        this.pop(visuals);\n    }\n});\n\n\nif (inBrowser) {\n    // DOM observer\n    // Check for changes in the DOM that leads to visual actions\n    const observer = new MutationObserver(visualManager);\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\n\n//\n//  Clears visualisation going out of scope\nfunction visualManager (records) {\n    records.forEach(record => {\n        var nodes = record.removedNodes;\n        if (!nodes || !nodes.length) return;  // phantomJs hack\n        nodes.forEach(node => {\n            if (node.querySelectorAll) {\n                if (!node.__visual__)\n                    select(node).selectAll('.d3-visual').each(destroy);\n                else\n                    destroy.call(node);\n            }\n        });\n    });\n}\n\n\nfunction destroy () {\n    var viz = this.__visual__;\n    if (viz) {\n        viz.destroy();\n        viewDebug(`Removed \"${viz.toString()}\" from DOM, ${visuals.live.length} live visuals left`);\n    }\n    else warn('d3-visual without __visual__ object');\n}\n","export default function (o, prefix, name, objectOnly) {\n    if (name.substring(0, prefix.length) !== prefix)\n        name = `${prefix}${name[0].toUpperCase()}${name.substring(1)}`;\n    return objectOnly ? o[name] : o[name]();\n}\n","import {isFunction} from 'd3-let';\n\nexport default function (obj, cfg) {\n    let keys;\n    if (cfg.$events) keys = cfg.$events.keys();\n    else keys = Object.keys(cfg);\n    keys.forEach(key => {\n        if (isFunction(obj[key]))\n            obj[key](cfg[key]);\n    });\n    return obj;\n}\n","import {isFunction, isArray, isString, pop, assign} from 'd3-let';\nimport {require, viewProviders} from 'd3-view';\nimport * as d3_scale from 'd3-scale';\n\nimport createVisual, {visuals} from './base';\nimport Visual from './visual';\nimport camelFunction from '../utils/camelfunction';\nimport extendObject from '../utils/extend-object';\nimport warn from '../utils/warn';\n\n\n//\n//  crateChart\n//\n//  A chart is a drawing of series data in two dimensional\nexport default function (type) {\n    if (viewProviders.visualPlugins) {\n        extendVisualPrototype(viewProviders.visualPlugins);\n        viewProviders.visualPlugins = null;\n    }\n    var protos = [{}, vizPrototype, chartPrototype];\n    for (var i=1; i<arguments.length; ++i) protos.push(arguments[i]);\n    return createVisual(type, assign.apply(undefined, protos));\n}\n\n\nfunction extendVisualPrototype (plugins) {\n    let options, proto;\n    Object.keys(plugins).forEach(name => {\n        options = plugins[name].options;\n        proto = plugins[name].prototype;\n        if (options) visuals.options[name] = options;\n        if (proto) assign(vizPrototype, proto);\n    });\n}\n\n//  Viz Prototype\n//  =================\nexport const vizPrototype = {\n\n    initialise (element) {\n        // No visual parent, create the visual\n        var visual = this.visualParent;\n        if (this.options.active !== undefined)\n            this.active = pop(this.options, 'active');\n        else\n            this.active = true;\n        if (!visual) {\n            this.visualParent = visual = new Visual(element, this.options, null, this.model);\n            this.model = visual.model.$new();\n            this.options = {};\n        } else if (!visual.layers)\n            throw new Error(`visual parent of ${this.visualType} does not have layers`);\n        visual.layers.push(this);\n    },\n\n    //\n    // paper object for this visualisation\n    paper () {\n        return this.visualParent.paper();\n    },\n\n    activate (callback) {\n        if (!this.active) {\n            this.active = true;\n            this.group()\n                .transition(this.model.uid)\n                .on('end', () => {\n                    if(callback) callback();\n                })\n                .style('opacity', 1);\n        }\n        return this;\n    },\n\n    deactivate (callback) {\n        if (this.active) {\n            this.active = false;\n            this.group()\n                .transition(this.model.uid)\n                .on('end', () => {\n                    if(callback) callback();\n                })\n                .style('opacity', 0);\n        }\n        return this;\n    },\n\n    getVisual () {\n        return this.visualParent.getVisual();\n    },\n\n    // a group selection for a given name\n    group (name) {\n        var me = `${this.visualType}-${this.model.uid}`,\n            group = this.visualParent.getPaperGroup(me);\n        if (name && name !== this.visualType) return this.paper().childGroup(group, name);\n        else return group;\n    },\n\n    translate (x, y) {\n        if (isFunction(x)) {\n            return function (d) {\n                var xt = x(d) || 0,\n                    yt = y(d) || 0;\n                return `translate(${xt}, ${yt})`;\n            };\n        } else return `translate(${x}, ${y})`;\n    },\n\n    getScale (cfg) {\n        if (isString(cfg)) cfg = {type: cfg};\n        return extendObject(camelFunction(d3_scale, 'scale', cfg.type), cfg);\n    },\n\n    displayError () {}\n};\n\n\nexport const chartPrototype = {\n\n    //  override draw method\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this,\n            doDraw = this.doDraw;\n\n        this.paper().size(this.boundingBox(true));\n\n        if(!this.active) return;\n\n        visuals.events.call('before-draw', undefined, this);\n\n        if (fetchData === false && this._drawArgs) {\n            delete self.drawing;\n            doDraw.apply(self, this._drawArgs);\n            visuals.events.call('after-draw', undefined, self);\n        } else {\n            return Promise.all([\n                this.requires ? require.apply(undefined, this.requires) : [],\n                // this.getMetaData(),\n                this.getData()\n            ]).then(args => {\n                delete self.drawing;\n                var frame = args[1];\n                if (frame) {\n                    args = isArray(args[0]) ? args[0] : [args[0]];\n                    args.unshift(frame);\n                    this._drawArgs = args;\n                    doDraw.apply(self, args);\n                    visuals.events.call('after-draw', undefined, self);\n                }\n            }, err => {\n                delete self.drawing;\n                warn(`Could not draw ${self.toString()}: ${err}`, err);\n                this.displayError(err);\n            });\n        }\n    }\n};\n","import {assign} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {visuals} from './base';\n\n\nexport default function createPaper (type, proto) {\n\n    function Paper (viz, uid) {\n        var element = this.initialise(viz, uid);\n        Object.defineProperties(this, {\n            element: {\n                get () {\n                    return element;\n                }\n            },\n            sel: {\n                get () {\n                    return select(element);\n                }\n            },\n            paperType: {\n                get () {\n                    return type;\n                }\n            }\n        });\n    }\n\n    Paper.prototype = assign({}, paperPrototype, proto);\n\n    visuals.papers[type] = Paper;\n    return Paper;\n}\n\n\nconst paperPrototype = {\n\n    initialise () {},\n    transition () {},\n    size (box) {\n        this.sel\n            .attr('width', box.width)\n            .attr('height', box.height);\n        return this;\n    },\n\n    group (cname, transform) {\n        return this.childGroup(this.sel, cname, transform);\n    },\n\n    childGroup (g, cname, transform) {\n        if (!cname) cname = 'main';\n        var ge = g.selectAll(`.${cname}`)\n                    .data([0])\n                    .enter()\n                    .append('g').classed(cname, true);\n        // TODO, not sure we need this anymore - we gave applyTransform\n        if (transform)\n            ge.attr('transform', transform)\n                .merge()\n                .attr('transform', transform);\n        return g.select(`.${cname}`);\n    },\n\n    dim (value) {\n        return value;\n    }\n};\n\n\nexport const Svg = createPaper('svg', {\n\n    initialise (visual, uid) {\n        if (!uid) visual.model.uid;\n        var svg = visual.paperElement.select(`svg#${uid}`);\n        if (!svg.size())\n            svg = visual.paperElement.append('svg')\n                .attr('id', uid)\n                .classed(visual.visualType, true)\n                .style('position', 'absolute');\n        return svg.node();\n    }\n});\n\n\nexport const Div = createPaper('div', {\n\n    initialise (viz) {\n        var uid = viz.model.uid,\n            visual = viz.visualParent;\n        var div = visual.paperElement.select(`div#${uid}`);\n        if (!div.size())\n            div = visual.paperElement.append('div')\n                    .attr('id', uid)\n                    .classed(visual.visualType, true)\n                    .style('position', 'absolute');\n        return div.node();\n    },\n\n    size (box) {\n        this.sel\n            .style('width', `${box.width}px`)\n            .style('height', `${box.height}px`);\n        return this;\n    },\n\n    childGroup (g, cname) {\n        if (!cname) cname = 'main';\n        g.selectAll(`.${cname}`)\n            .data([0]).enter()\n            .append('div').classed(cname, true);\n        return g.select(`.${cname}`);\n    },\n});\n","//\n//  Add a menu buttom to a visual\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\n\n\nglobalOptions.menu = {\n    display: false,\n    height: '8%',\n    maxHeight: 50,\n    minHeight: 20\n};\n\n\nvisuals.events.on('after-init.menu', viz => {\n    if (viz.visualType === 'visual') {\n        var menu = viz.getModel('menu');\n        if (menu.display) {\n            viz.menu = viz.sel.insert('nav', ':first-child').classed('d3-nav navbar p-1', true);\n            viz.menu.append('h4').classed('title', true);\n        }\n    }\n});\n\nvisuals.events.on('before-draw.menu', viz => {\n    if (viz && viz.menu) {\n        refreshMenu(viz);\n    }\n});\n\n\nfunction refreshMenu(viz) {\n    var menu = viz.getModel('menu'),\n        height = viz.dim(menu.height, viz.height, menu.minHeight, menu.maxHeight);\n    viz.menu.style('height', `${height}px`);\n}\n","import {format} from 'd3-format';\nimport {map} from 'd3-collection';\n\nconst formats = map();\n\nexport default function (specifier, value) {\n    var fmt = formats.get(specifier);\n    if (!fmt) {\n        fmt = format(specifier);\n        formats.set(specifier, fmt);\n    }\n    return fmt(value);\n}\n","import {timeFormat} from 'd3-time-format';\nimport {map} from 'd3-collection';\n\nconst formats = map();\n\nexport default function (specifier, value) {\n    var fmt = formats.get(specifier);\n    if (!fmt) {\n        fmt = timeFormat(specifier);\n        formats.set(specifier, fmt);\n    }\n    return fmt(value);\n}\n","//\n//  dataStore integration with visuals\nimport {isString, pop} from 'd3-let';\nimport {resolvedPromise} from 'd3-view';\n\nimport {visuals} from '../core/base';\nimport DataStore from '../data/store';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\nimport cachedFormat from '../utils/format';\nimport cachedFormatTime from '../utils/format-time';\n\n//\n// Visual Data Context\nvisuals.options.dataContext = {\n    $format: cachedFormat,\n    $formatTime: cachedFormatTime\n};\n\n//  getData method\n//  =====================\n//\n//  Inject a method for easily retrieving data from the datastore\nvizPrototype.getData = function () {\n    var name = this.model.data;\n    if (!name) {\n        warn(`Visual ${this.visualType} without data name, cannot get data`);\n        return resolvedPromise();\n    }\n    return this.dataStore.getData(name, {$visual: this});\n};\n\n//\n// Context for expression evaluation\nvizPrototype.getContext = function (context) {\n    return this.dataStore.model.$child(context);\n};\n\n\nvisuals.events.on('before-init.data', viz => {\n    if (!viz.isViz) return;\n    // remove data from options\n    viz.data = pop(viz.options, 'data');\n});\n\n\nvisuals.events.on('after-init.data', viz => {\n    Object.defineProperties(viz, {\n        dataStore : {\n            get () {\n                return viz.model.root.dataStore;\n            }\n        },\n    });\n    if (viz.isViz) setupLayer(viz);\n    else setupVisual(viz);\n});\n\n\nfunction setupVisual (visual) {\n    var store = visual.dataStore,\n        data = pop(visual.options, 'data');\n    //\n    if (!store) {\n        // create the data store for the visual or container\n        store = new DataStore(visual.getModel('dataContext'));\n        visual.model.root.dataStore = store;\n    }\n    store.addSources(data);\n}\n\n\nfunction setupLayer (layer) {\n    var store = layer.dataStore,\n        data = pop(layer, 'data');\n    if (!data) return;\n    if (isString(data)) data = {source: data};\n    if (!data.name) data.name = layer.model.uid;\n    data = store.addSources(data);\n    if (data)\n        layer.model.$set('data', data.name);\n    else\n        warn(`Could not create data source ${data.name}`);\n}\n","import {vizPrototype} from '../core/chart';\nimport {visuals} from '../core/base';\n\n\nvisuals.options.font = {\n    size: '3%',\n    minSize: 10,\n    maxSize: 20,\n    stroke: '#333',\n    family: null\n};\n\n\nvizPrototype.font = function (box, font) {\n    font = font ? font : this.getModel('font');\n\n    var model = this.getModel(),\n        size = this.dim(font.size, box.height, font.minSize, font.maxSize);\n    if (model.fontSizeMultiplier)\n        size *= model.fontSizeMultiplier;\n    return size;\n};\n","import {inBrowser} from 'd3-let';\nimport {viewDebounce} from 'd3-view';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nif (!globalOptions.resizeDelay)\n    globalOptions.resizeDelay = 200;\n\n\nif (inBrowser) {\n    var resize = viewDebounce(() => {\n        visuals.live.forEach(p => p.resize());\n    }, globalOptions.resizeDelay);\n\n    select(window).on('resize.visuals', resize);\n}\n","// Title plot annotation\nimport {isString} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.title = {\n    text: null,\n    size: '3%',\n    minSize: 15,\n    maxSize: 25,\n    offset: ['10%', 0]\n};\n\n\nvisuals.events.on('before-init.title', viz => {\n    var title = viz.options.title;\n    if (isString(title)) viz.options.title = {text: title};\n});\n\n\nvisuals.events.on('after-draw.title', viz => {\n    var title = viz.getModel('title');\n    let visual = viz;\n    if (visual.visualType === 'visual') delete visual.__title;\n    else if (viz.isViz) visual = viz.visualParent;\n    else return;\n    if (!title.text) return;\n    if (visual.menu && !visual.__title) {\n        visual.__title = title;\n        menuTitle(visual, title);\n    } else if (viz.isViz) {\n        var box = viz.boundingBox(true),\n            font = viz.getModel('font'),\n            stroke = title.stroke || font.stroke,\n            size = viz.font(box, title),\n            text = viz.group().selectAll('text.chartitle').data([title.text]),\n            top = viz.dim(title.offset[0], box.vizHeight),\n            left = viz.dim(title.offset[1], box.vizWidth),\n            translate = viz.translate(box.margin.left+box.innerWidth/2+left, top);\n        text.enter()\n            .append('text')\n            .classed('chartitle', true)\n            .attr(\"transform\", translate)\n            .style(\"text-anchor\", \"middle\")\n            .style(\"font-size\", size)\n            .style(\"fill\", stroke)\n            .text(d => d)\n        .merge(text)\n            .transition()\n            .attr(\"transform\", translate)\n            .style(\"font-size\", size)\n            .style(\"fill\", stroke)\n            .text(d => d);\n    }\n});\n\n\nfunction menuTitle(visual, title) {\n    var height = number(visual.menu.style('height')),\n        maxSize = title.maxSize ? Math.min(height-4, title.maxSize) : height-4,\n        size = visual.dim(title.size, visual.width, title.minSize, maxSize);\n    visual.menu.select('.title')\n        .html(title.text)\n        .style('font-size', `${size}px`)\n        .style('line-height', `${height}px`);\n}\n\n\nfunction number (px) {\n    return +px.substring(0, px.length-2);\n}\n","import {isObject, isArray} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport {sizeValue} from '../utils/size';\n\n\nexport const KEYS = ['top', 'bottom', 'left', 'right'];\nconst LEFTRIGHT = ['left', 'right'];\n\n\n// margin for visual marks\nglobalOptions.margin = {\n    top: 20,\n    bottom: 20,\n    left: 20,\n    right: 20\n};\n// padding for the visual paper\nglobalOptions.padding = {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n};\n\n\n//\n//  Bounding box for a viz\n//  ==========================\nvizPrototype.boundingBox = function (clearCache) {\n    if (clearCache) clearBBCache(this);\n    if (!this.__boundingBox) {\n        var width = this.visualParent.width,\n            height = this.visualParent.height,\n            padding = calculate(this.getModel('padding'), width, height),\n            vizWidth = width - padding.left - padding.right,\n            vizHeight = height - padding.top - padding.bottom,\n            margin = calculate(this.getModel('margin'), vizWidth, vizHeight),\n            total = KEYS.reduce((o, key) => {\n                o[key] = margin[key] + padding[key];\n                return o;\n            }, {});\n        this.__boundingBox = {\n            margin: margin,\n            padding: padding,\n            total: total,\n            width: width,\n            height: height,\n            vizWidth: vizWidth,\n            vizHeight: vizHeight,\n            innerWidth: width - total.left - total.right,\n            innerHeight: height - total.top - total.bottom,\n            $nomargins: $nomargins\n        };\n    }\n    return this.__boundingBox;\n};\n\n\nvisuals.events.on('after-init.margin', viz => {\n    viz.margin = margins('margin', viz);\n    viz.padding = margins('padding', viz);\n});\n\n\nvisuals.events.on('before-draw.margin', viz => {\n    if (viz.isViz) clearBBCache(viz);\n});\n\n\nfunction margins (name, viz) {\n    var value = viz.options[name];\n    if (value !== undefined && !isObject(value))\n        viz.options[name] = marginv(value || 0);\n}\n\n\nfunction calculate (model, width, height) {\n    return KEYS.reduce((o, key) => {\n        o[key] = sizeValue(model[key], LEFTRIGHT.indexOf(key) > -1 ? width : height);\n        return o;\n    }, {});\n}\n\n\nfunction clearBBCache (viz) {\n    delete viz.__boundingBox;\n    if (isArray(viz.layers)) viz.layers.forEach(clearBBCache);\n}\n\n\nfunction $nomargins () {\n    return {\n        width: this.innerWidth,\n        height: this.innerHeight,\n        margin: marginv(0),\n        padding: marginv(0),\n        total: marginv(0),\n        innerWidth: this.innerWidth,\n        innerHeight: this.innerHeight,\n        $nomargins: this.$nomargins\n    };\n}\n\n\nfunction marginv (v) {\n    return {\n        left: v,\n        right: v,\n        top: v,\n        bottom: v\n    };\n}\n","import {map} from 'd3-collection';\nimport {format} from 'd3-format';\nimport {timeFormat} from 'd3-time-format';\nimport {axisTop, axisBottom, axisLeft, axisRight} from 'd3-axis';\nimport {isDate, assign} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\n\n\nconst axisOrientation = map({\n    top: axisTop,\n    bottom: axisBottom,\n    left: axisLeft,\n    right: axisRight\n});\n\nconst axisDefaults = {\n    ticks: 5,\n    tickSize: 6,\n    tickSizeOuter: null,\n    //\n    // tick labels\n    rotate: null,\n    ancor: 'end',\n    format: null,\n    timeFormat: '%Y-%m-%d',\n    stroke: '#333',\n    hide: null, // specify a pixel size below which tick labels are not displayed\n    //\n    // title\n    title: null,\n    titleRotate: null,\n    titleOffset: 0.7\n};\n\n\nvisuals.options.xAxis = assign({\n    location: \"bottom\"\n}, axisDefaults);\n\n\nvisuals.options.yAxis = assign({\n    location: \"left\"\n}, axisDefaults);\n\n\nvizPrototype.xAxis1 = function (location, scale, box, value) {\n    var model = this.getModel('xAxis'),\n        axis = getAxis(location, scale, model, value),\n        ga = this.group('x-axis');\n    this.applyTransform(ga, this.translateAxis(location, box));\n    formatAxis(ga.transition(this.transition('x-axis')).call(axis), model, scale);\n    if (model.title)\n        this.axisTitle(ga, location, scale, box, model);\n    return ga;\n};\n\n\nvizPrototype.yAxis1 = function (location, scale, box, value) {\n    var model = this.getModel('yAxis'),\n        axis = getAxis(location, scale, model, value),\n        ga = this.group('y-axis');\n    this.applyTransform(ga, this.translateAxis(location, box));\n    formatAxis(ga.transition(this.transition('x-axis')).call(axis), model, scale);\n    if (model.title)\n        this.axisTitle(ga, location, scale, box, model);\n    return ga;\n};\n\n\nvizPrototype.axis = function (orientation, scale) {\n    return axisOrientation.get(orientation)(scale);\n};\n\n\n//\n//  Apply Axis title\nvizPrototype.axisTitle = function (ga, location, scale, box, model) {\n    var title = ga.selectAll('text.title').data([model.title]),\n        rotate = model.titleRotate || 0,\n        x = 0,\n        y = 0;\n\n    if (!rotate && (location === 'right' || location === 'left')) rotate = -90;\n    if (location == \"left\") {\n        x =-model.titleOffset*box.margin.left;\n        y = box.innerHeight/2;\n    }\n    var translate = `translate(${x},${y}) rotate(${rotate})`,\n        font = this.font(box);\n\n    title\n        .enter()\n            .append('text')\n            .classed('title', true)\n            .attr(\"transform\", translate)\n            .style(\"text-anchor\", \"middle\")\n            .style(\"font-size\", font)\n            .style(\"fill\", model.stroke)\n            .text(d => d)\n        .merge(title)\n            .transition()\n            .attr(\"transform\", translate)\n            .style(\"font-size\", font)\n            .style(\"fill\", model.stroke)\n            .text(d => d);\n};\n\nvizPrototype.translateAxis = function (location, box) {\n    if (location === 'top' || location === 'left')\n        return this.translate(box.margin.left, box.margin.top);\n    else if (location === 'bottom')\n        return this.translate(box.margin.left, box.margin.top+box.innerHeight);\n    else\n        return this.translate(box.margin.left+box.innerWidth, box.margin.top);\n};\n\nfunction getAxis (location, scale, model, value) {\n    var axis = axisOrientation.get(location)(scale).tickSize(model.tickSize);\n    if (model.tickSizeOuter !== null) axis.tickSizeOuter(model.tickSizeOuter);\n    if (isDate(value)) axis.tickFormat(timeFormat(model.timeFormat));\n    else if (model.format !== null) axis.tickFormat(format(model.format));\n    return axis.ticks(model.ticks);\n}\n\n\nfunction formatAxis (ga, model, scale) {\n    ga.select('path.domain').attr('stroke', model.stroke);\n    var ticks = ga.selectAll('text').attr('fill', model.stroke);\n    if (model.hide) {\n        var range = scale.range(),\n            dim = Math.abs(range[0] - range[range.length-1]);\n        if (dim < model.hide) ga.style('opacity', 0);\n        else ga.style('opacity', 1);\n    }\n    if (model.rotate) {\n        ticks.attr('transform', `rotate(${model.rotate})`)\n            .style('text-anchor', model.ancor);\n    }\n}\n","import {\n    symbol, stack,\n    symbolCircle, symbolSquare, symbolStar,\n    stackOrderAscending, stackOrderDescending, stackOrderInsideOut,\n    stackOrderNone, stackOrderReverse,\n    stackOffsetExpand, stackOffsetDiverging, stackOffsetNone,\n    stackOffsetSilhouette, stackOffsetWiggle\n} from 'd3-shape';\nimport {map} from 'd3-collection';\n\nimport {vizPrototype} from '../core/chart';\n\nconst symbols = map({\n    circle: symbolCircle,\n    square: symbolSquare,\n    star: symbolStar\n});\n\nconst stackOrders = map({\n    ascending: stackOrderAscending,\n    descending: stackOrderDescending,\n    insideout: stackOrderInsideOut,\n    none: stackOrderNone,\n    reverse: stackOrderReverse\n});\n\nconst stackOffsets = map({\n    expand: stackOffsetExpand,\n    diverging: stackOffsetDiverging,\n    none: stackOffsetNone,\n    silhouette: stackOffsetSilhouette,\n    wiggle: stackOffsetWiggle\n});\n\n\nvizPrototype.getSymbol = function (name) {\n    var s = symbols.get(name);\n    return symbol().type(s);\n};\n\n\nvizPrototype.getStack = function () {\n    var model = this.getModel();\n    if (model.stack) {\n        var s = stack();\n        if (model.stackOrder) s.order(stackOrders.get(model.stackOrder));\n        if (model.stackOffset) s.offset(stackOffsets.get(model.stackOffset));\n        return s;\n    }\n    return null;\n};\n","import {map} from 'd3-collection';\nimport {range} from 'd3-array';\nimport {color} from 'd3-color';\nimport {isObject, isFunction, isArray} from 'd3-let';\nimport {\n    scaleSequential,\n    interpolateViridis, interpolateInferno, interpolateMagma,\n    interpolatePlasma, interpolateWarm, interpolateCool,\n    interpolateRainbow, interpolateCubehelixDefault\n} from 'd3-scale';\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\n\nexport const colorScales = map();\n\n\nglobalOptions.color = {\n    scale: 'cool',\n    // Minumim number of colors in a sequantial color scale\n    // This helps in keeping a consistent palette when few colors are used\n    scaleMinPoints: 6,\n    // An offset in the color scale, useful for combined visuals\n    scaleOffset: 0,\n    stroke: '#333',\n    strokeOpacity: 1,\n    fillOpacity: 1,\n};\n\ncolorScales.set('viridis', () =>  scaleSequential(interpolateViridis));\ncolorScales.set('inferno', () =>  scaleSequential(interpolateInferno));\ncolorScales.set('magma', () =>  scaleSequential(interpolateMagma));\ncolorScales.set('plasma', () =>  scaleSequential(interpolatePlasma));\ncolorScales.set('warm', () =>  scaleSequential(interpolateWarm));\ncolorScales.set('cool', () =>  scaleSequential(interpolateCool));\ncolorScales.set('rainbow', () =>  scaleSequential(interpolateRainbow));\ncolorScales.set('cubehelix', () =>  scaleSequential(interpolateCubehelixDefault));\n\n//\n//  Color scale method\n//  ==========================\nvizPrototype.colors = function (n, opacity) {\n    var model = this.getModel('color');\n    let reversed = false, scaleDef, scale;\n\n    if (isArray(model.scale)) scale = this.getScale('ordinal').range(model.scale);\n    else {\n        scaleDef = colorScales.get(model.scale);\n        if (!scaleDef) throw new Error(`Unknown scale ${model.scale}`);\n        if (!isObject(scaleDef)) scaleDef = {scale: scaleDef};\n        if (scaleDef.minPoints === undefined) scaleDef.minPoints = model.scaleMinPoints;\n        scale = scaleDef.scale();\n        reversed = scaleDef.reversed;\n    }\n\n    if (isFunction(scale.interpolator)) {\n        var offset = model.scaleOffset,\n            npoints = n + offset,\n            points = Math.max(npoints, scaleDef.minPoints),\n            domain = reversed ? [points-1, 0] : [0, points-1];\n        scale.domain(domain);\n        let c;\n        return range(offset, Math.min(npoints, points)).map(v => {\n            c = color(scale(v));\n            c.opacity = opacity;\n            return c;\n        });\n    } else {\n        var colors = scale.range().slice();\n        if (reversed) colors.reverse();\n        let b, c, m;\n        for (let i=0; i<model.scaleOffset; ++i) {\n            colors.push(colors.shift());\n        }\n        return range(n).map(() => {\n            b = colors.shift();\n            c = color(b);\n            m = color(b);\n            c.opacity = opacity;\n            colors.push(''+m.brighter(0.2));\n            return c;\n        });\n    }\n};\n\n\nvizPrototype.fill = function (data) {\n    var model = this.getModel('color'),\n        opacity = this.modelProperty('fillOpacity', model),\n        colors = this.colors(data.length, opacity);\n\n    function fill (d, idx) {\n        return colors[idx];\n    }\n\n    fill.colors = colors;\n\n    return fill;\n};\n\nvizPrototype.stroke = function (data) {\n    var model = this.getModel('color'),\n        opacity = this.modelProperty('strokeOpacity', model),\n        colors = this.colors(data.length, opacity);\n\n    function stroke (d, idx) {\n        return colors[idx];\n    }\n\n    stroke.colors = colors;\n\n    return stroke;\n};\n\n//\n//  Linear Gradient method\n//  ==========================\n//\n//  Create a monocromatic linear gradient in the visualization box,\n//  either horizontal or vertical\nvizPrototype.linearGradient = function (col, box, orientation, gid) {\n    var paper = this.paper().sel,\n        defs = paper.select('defs');\n    if (!defs.node()) defs = paper.append('defs');\n    const\n        grad = defs.selectAll(`#${gid}`).data([0]),\n        colto = color(col);\n\n    colto.opacity = 0.1;\n\n    grad.enter()\n        .append('linearGradient')\n        .attr('id', gid)\n        .attr('x1', '0%')\n        .attr('y1', '0%')\n        .attr('x2', orientation === 'vertical' ? '0%' : '100%')\n        .attr('y2', orientation === 'vertical' ? '100%' : '0%');\n\n    var stops = defs.select(`#${gid}`)\n                    .selectAll('stop')\n                    .data([{offset: '0%', color: col}, {offset: '100%', color: colto}]);\n\n    stops.enter()\n            .append('stop')\n        .merge(stops)\n            .attr('offset', d => d.offset)\n            .attr('stop-color', d => d.color);\n\n    return `url(#${gid})`;\n};\n","import {legendColor, legendSize, legendSymbol} from 'd3-svg-legend';\nimport {map} from 'd3-collection';\nimport {pop} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nglobalOptions.legend = {\n    location: \"top-right\",\n    orient: \"vertical\",\n    fontSize: '3%',\n    title: '',\n    titleWidth: \"20%\",\n    labelFormat: null,\n    titleMinWidth: 30,\n    titleMaxWidth: 60,\n    minFontSize: 10,\n    maxFontSize: 20,\n    offset: [10, 10],\n    shapeWidth: 15,\n    shapeHeight: 15,\n    hide: 300, // specify a pixel size below which tick labels are not displayed\n};\n\n\nconst legends = {\n    color: legendColor,\n    size: legendSize,\n    symbol: legendSymbol\n};\n\n\n//\n//  Legend method\n//  ==========================\nvizPrototype.legend = function (cfg, box) {\n    var vizModel = this.getModel(),\n        model = this.getModel('legend'),\n        font = this.getModel('font'),\n        name = pop(cfg, 'type') || vizModel.legendType,\n        vizSize = Math.max(box.vizHeight, box.vizWidth),\n        fontSize = this.dim(model.fontSize, vizSize, model.minFontSize, model.maxFontSize),\n        legend = legends[name];\n\n    if (!model.location) return;\n\n    if (!legend) return warn(`Could not load legend ${name}`);\n    legend = legend().orient(model.orient);\n\n    if (model.title) {\n        legend.title(model.title);\n        if (model.titleWidth) {\n            var width = this.dim(model.titleWidth, vizSize, model.titleMinWidth, model.titleMaxWidth);\n            legend.titleWidth(width);\n        }\n    }\n\n    if (model.labelFormat) legend.labelFormat(model.labelFormat);\n    legend.shapeWidth(model.shapeWidth).shapeHeight(model.shapeHeight);\n\n    // apply cfg parameters\n    for (let key in cfg) legend[key](cfg[key]);\n\n    var gl = this.group('legend')\n            .style('font-size', `${fontSize}px`)\n            .html('')\n            .call(legend),\n        bb = gl.node().getBBox(),\n        offset = locations.get(model.location).call(this, bb, box, model),\n        transform = this.translate(offset.x, offset.y);\n    gl.selectAll('text').style('fill', model.stroke || font.stroke);\n    this.applyTransform(gl, transform);\n    //\n    //\n    // if the legend needs to be hidden below a certain size\n    if (model.hide) {\n        if (vizSize < model.hide) gl.style('opacity', 0);\n        else gl.style('opacity', 1);\n    }\n};\n\n\nexport const locations = map({\n    top,\n    bottom,\n    right,\n    left,\n    'top-left': topLeft,\n    'top-right': topRight,\n    'bottom-left': bottomLeft,\n    'bottom-right': bottomRight\n});\n\n\nfunction top (bb, box, options) {\n    var offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2,\n        y: offsetY\n    };\n}\n\n\nfunction bottom (bb, box, options) {\n    var offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n\n\nfunction right (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: box.margin.top + (box.innerHeight - bb.height)/2\n    };\n}\n\n\nfunction left (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth);\n    return {\n        x: box.margin.left - offsetX,\n        y: box.margin.top + (box.innerHeight - bb.height)/2\n    };\n}\n\n\nfunction topLeft (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.margin.left + (box.innerWidth - bb.width)/2 + offsetX,\n        y: offsetY\n    };\n}\n\n\nfunction topRight (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: offsetY\n    };\n}\n\n\nfunction bottomLeft (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: bb.width + offsetX,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n\n\nfunction bottomRight (bb, box, options) {\n    var offsetX = this.dim(options.offset[0], box.vizWidth),\n        offsetY = this.dim(options.offset[1], box.vizHeight);\n    return {\n        x: box.vizWidth - bb.width - offsetX,\n        y: box.vizHeight - bb.height - offsetY\n    };\n}\n","export default function (x) {\n    return function constant() {\n        return x;\n    };\n}\n","import {isFunction} from 'd3-let';\n\nimport constant from './constant';\n\nexport default function (v) {\n    if (isFunction(v)) return v;\n    return constant(v);\n}\n","export default function (d) {\n    return d;\n}\n","//\n//\n//  Mouse events handling\n//  ==========================\n//\nimport {map} from 'd3-collection';\nimport {color} from 'd3-color';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nexport const mouseStrategies = map({\n    darker: darkerStrategy(),\n    fill: fillStrategy()\n});\n\n\nvisuals.options.mouse = {\n    over: ['darker'],\n    darkerFactor: 0.5,\n    fillColor: '#addd8e'\n};\n\n\nvizPrototype.mouseOver = function () {\n    var self = this,\n        model = this.getModel('mouse');\n\n    return function (d, i) {\n        if (!this.__mouse_over__) this.__mouse_over__ = {};\n        var sel = self.select(this);\n        let strategy;\n        model.over.forEach(name => {\n            strategy = mouseStrategies.get(name);\n            if (!strategy) warn(`Unknown mouse strategy ${name}`);\n            else strategy(self, sel, d, i);\n        });\n    };\n};\n\nvizPrototype.mouseOut = function () {\n    var self = this,\n        model = this.getModel('mouse');\n\n    return function (d, i) {\n        if (!this.__mouse_over__) this.__mouse_over__ = {};\n        var sel = self.select(this);\n        let strategy;\n        model.over.forEach(name => {\n            strategy = mouseStrategies.get(name);\n            if (!strategy) warn(`Unknown mouse strategy ${name}`);\n            else strategy.out(self, sel, d, i);\n        });\n    };\n};\n\n\nfunction darkerStrategy () {\n\n    function darker (viz, sel) {\n        var model = viz.getModel('mouse'),\n            fill = color(sel.style('fill')),\n            filldarker = fill.darker(model.darkerFactor),\n            node = sel.node();\n        node.__mouse_over__.fill = fill;\n        sel.style('fill', filldarker);\n    }\n\n    darker.out = function (viz, sel) {\n        var node = sel.node(),\n            fill = node.__mouse_over__.fill;\n        if (fill) sel.style('fill', fill);\n    };\n\n    return darker;\n}\n\n\nfunction fillStrategy () {\n\n    function fill (viz, sel) {\n        var model = viz.getModel('mouse'),\n            fill = color(sel.style('fill')),\n            node = sel.node();\n        node.__mouse_over__.fill = fill;\n        sel.transition().style('fill', model.fillColor);\n    }\n\n    fill.out = function (viz, sel) {\n        var node = sel.node(),\n            fill = node.__mouse_over__.fill;\n        if (fill) sel.transition().style('fill', fill);\n    };\n\n    return fill;\n}\n","import {map} from 'd3-collection';\nimport {inBrowser} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport functor from '../utils/functor';\nimport noop from '../utils/identity';\nimport {mouseStrategies} from './mouse';\n\n\nvisuals.options.tooltip = {\n    location: \"top\",\n    offset: [10, 10],\n    html: \"\"\n};\n\n\nif (inBrowser) vizPrototype.tooltip = tooltip();\nelse vizPrototype.tooltip = noop;\n\n\nmouseStrategies.set('tooltip', function () {\n\n    function tooltip (viz, sel, d, i) {\n        var html = viz.tooltipHtml(sel, d, i);\n        if (html) {\n            var model = viz.getModel('tooltip');\n            viz.tooltip.location(model.location).offset(model.offset).html(html).show(sel.node());\n        }\n    }\n\n    tooltip.out = function (viz) {\n        viz.tooltip.hide();\n    };\n\n    return tooltip;\n}());\n\n\nvizPrototype.tooltipHtml = function (sel, d, i) {\n    var model = this.getModel('tooltip');\n    if (model.html)\n        return this.dataStore.eval(model.html, {\n            d: d,\n            index: i,\n            model: this.getModel()\n        });\n};\n\n\nfunction tooltip () {\n\n    var location = functor('top'),\n        offset = functor([0, 0]),\n        html = functor(' '),\n        node = null,\n        point = null;\n\n    const locationCallbacks = map({\n        top,\n        bottom,\n        right,\n        left,\n        'top-left': topLeft,\n        'top-right': topRight,\n        'bottom-left': bottomLeft,\n        'bottom-right': bottomRight\n    });\n\n    const locations = locationCallbacks.keys();\n\n    function selectNode() {\n        if (node === null) {\n            node = select(document.body)\n                        .append('div')\n                        .classed('d3-tooltip', true)\n                        .style('position', 'absolute')\n                        .style('top', 0)\n                        .style('opacity', 0)\n                        .style('pointer-events', 'none')\n                        .style('box-sizing', 'border-box')\n                        .node();\n            point = select(document.body)\n                        .append('svg')\n                        .style('opacity', 0)\n                        .style('pointer-events', 'none')\n                        .node().createSVGPoint();\n        }\n        return select(node);\n    }\n\n    function tooltip () {\n    }\n\n    tooltip.show = function (target) {\n        var args = Array.prototype.slice.call(arguments),\n            snode = selectNode(),\n            content = html.apply(this, args) || '',\n            poffset = offset.apply(this, args),\n            dir = location.apply(this, args),\n            scrollTop  = document.documentElement.scrollTop || document.body.scrollTop,\n            scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft,\n            coords;\n\n        snode.html(content).style('opacity', 1).style('pointer-events', 'all');\n\n        let i = locations.length;\n        while (i--) snode.classed(locations[i], false);\n        coords = locationCallbacks.get(dir).call(this, target, poffset);\n        snode.classed(dir, true)\n            .style('top', coords.top + scrollTop + 'px')\n            .style('left', coords.left + scrollLeft + 'px');\n\n        return tooltip;\n    };\n\n    tooltip.hide = function () {\n        selectNode().style('opacity', 0).style('pointer-events', 'none');\n        return tooltip;\n    };\n\n    // Returns tip or location\n    tooltip.location = function (v) {\n        if (!arguments.length) return location;\n        location = v === null ? v : functor(v);\n        return tooltip;\n    };\n\n    tooltip.html = function(v) {\n        if (!arguments.length) return html;\n        html = v === null ? v : functor(v);\n        return tooltip;\n    };\n\n    tooltip.offset = function(v) {\n        if (!arguments.length) return offset;\n        offset = v == null ? v : functor(v);\n        return tooltip;\n    };\n\n    return tooltip;\n\n\n\n    function top (target, offset) {\n        var bbox = getScreenBBox(target);\n        return {\n            left: bbox.n.x - node.offsetWidth / 2,\n            top:  bbox.n.y - node.offsetHeight - offset[1]\n        };\n    }\n\n\n    function bottom (bb, box, options) {\n        return {\n            top: box.total.left + (box.innerWidth - bb.width)/2,\n            left: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    function right (target, offset) {\n        var bbox = getScreenBBox(target);\n        return {\n            left: bbox.e.x + offset[0],\n            top:  bbox.e.y - node.offsetHeight / 2,\n        };\n    }\n\n\n    function left (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: options.offsetY\n        };\n    }\n\n\n    function topLeft (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: options.offsetY\n        };\n    }\n\n\n    function topRight (bb, box, options) {\n        return {\n            x: box.width - bb.width - options.offsetX,\n            y: options.offsetY\n        };\n    }\n\n\n    function bottomLeft (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    function bottomRight (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    // Private - gets the screen coordinates of a shape\n    //\n    // Given a shape on the screen, will return an SVGPoint for the locations\n    // n(north), s(south), e(east), w(west), ne(northeast), se(southeast),\n    // nw(northwest), sw(southwest).\n    //\n    //    +-+-+\n    //    |   |\n    //    +   +\n    //    |   |\n    //    +-+-+\n    //\n    // Returns an Object {n, s, e, w, nw, sw, ne, se}\n    function getScreenBBox (targetel) {\n\n        while (targetel.getScreenCTM == null && targetel.parentNode == null) {\n            targetel = targetel.parentNode;\n        }\n\n        var bbox = {},\n            matrix = targetel.getScreenCTM(),\n            tbbox = targetel.getBBox(),\n            width = tbbox.width,\n            height = tbbox.height,\n            x = tbbox.x,\n            y = tbbox.y;\n\n        point.x = x;\n        point.y = y;\n        bbox.nw = point.matrixTransform(matrix);\n        point.x += width;\n        bbox.ne = point.matrixTransform(matrix);\n        point.y += height;\n        bbox.se = point.matrixTransform(matrix);\n        point.x -= width;\n        bbox.sw = point.matrixTransform(matrix);\n        point.y -= height / 2;\n        bbox.w = point.matrixTransform(matrix);\n        point.x += width;\n        bbox.e = point.matrixTransform(matrix);\n        point.x -= width / 2;\n        point.y -= height / 2;\n        bbox.n = point.matrixTransform(matrix);\n        point.y += height;\n        bbox.s = point.matrixTransform(matrix);\n\n        return bbox;\n    }\n}\n","//\n//\n//  Expand viusals layers and visuals\n//  =======================================\n//\nimport {visuals} from '../core/base';\nimport {locations} from './legend';\nimport {KEYS} from './margin';\n\nvisuals.options.expand = {\n    location: 'top-right',\n    expandText: 'expand',\n    collapseText: 'collapse',\n    height: 15,\n    width: 15,\n    radius: 3,\n    offset: [0, 0],\n    stroke: '#adadad',\n    fill: '#fff',\n    fillOver: '#e6e6e6',\n    textColor: '#111'\n};\n\n\n\nvisuals.events.on('after-draw.expand', viz => {\n    var visual = viz.visualParent;\n    if (!viz.isViz || visual.layers.length <= 1) return;\n\n    var model = viz.getModel('expand');\n    // If not expanded already check if this can be expanded\n    if (!viz.__expanded)\n        if (!model.location || !hasMargin(viz.getModel('padding'))) return;\n\n    var font = viz.getModel('font'),\n        box = viz.boundingBox(),\n        button = viz.group('expand'),\n        node = button.node(),\n        size = Math.floor(0.8*Math.min(model.width, model.height)),\n        buttonText = viz.__expanded ? model.collapseText : model.expandText,\n        firstPass = false;\n\n    if (!button.select('rect').size()) {\n        firstPass = true;\n        button.attr('cursor', 'pointer')\n                .on(\"mouseover\", mouseOver)\n                .on(\"mouseout\", mouseOut);\n\n        button.append('rect')\n            .classed('button', true)\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('rx', model.radius)\n            .attr('ry', model.radius)\n            .attr('width', model.width)\n            .attr('height', model.height)\n            .attr('stroke', model.stroke)\n            .attr('fill', model.fill)\n            .attr('cursor', 'pointer');\n\n        button\n            .append('text')\n            .attr('x', model.width/2)\n            .attr('y', model.height/2)\n            .attr('fill', model.textColor)\n            .attr('font-family', model.fontFamily || font.family)\n            .attr('text-anchor', \"middle\")\n            .attr('alignment-baseline', \"middle\")\n            .attr('font-size', size);\n\n        button.append('rect')\n            .classed('placeholder', true)\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('rx', model.radius)\n            .attr('ry', model.radius)\n            .attr('width', model.width)\n            .attr('height', model.height)\n            .attr('stroke', 'none')\n            .attr('fill', 'transparent')\n            .on(\"click\", click);\n    }\n\n    button.select('text').text(() => buttonText);\n    var bb = locations.get(model.location).call(viz, node.getBBox(), box, model);\n    if (!firstPass) button = button.transition(viz.transition('expand'));\n    button.attr('transform', viz.translate(bb.x, bb.y));\n\n    function mouseOver() {\n        viz.select(this).select('rect.button')\n            .attr('fill', model.fillOver);\n    }\n\n    function mouseOut() {\n        viz.select(this).select('rect.button')\n            .attr('fill', model.fill);\n    }\n\n    function click() {\n        var pd = viz.getModel('padding');\n        mouseOut.call(this);\n        if (!viz.__expanded) {\n            viz.__expanded = {\n                padding: KEYS.reduce((o, key) => {\n                    if(pd[key]) {\n                        o[key] = pd[key];\n                        pd[key] = 0;\n                    }\n                    return o;\n                }, {})\n            };\n            visual.deactivate();\n            viz.activate();\n        } else {\n            var padding = viz.__expanded.padding;\n            delete viz.__expanded;\n            visual.activate();\n            KEYS.forEach(key => {\n                if (padding[key]) pd[key] = padding[key];\n            });\n        }\n        visual.redraw(false);\n    }\n\n});\n\n\nfunction hasMargin(mg) {\n    return mg.left || mg.right || mg.top || mg.bottom;\n}\n","import {transition} from 'd3-transition';\n\nimport {vizPrototype} from '../core/chart';\nimport {visuals} from '../core/base';\n\n\nvisuals.options.transition = {\n    duration: 250,\n    delay: 0,\n    ease: null\n};\n\n\nvizPrototype.transition = function (name) {\n    var uname = this.idname(name),\n        model = this.getModel('transition');\n    return transition(uname).duration(model.duration);\n};\n\n\nvizPrototype.applyTransform = function (sel, transform) {\n    //var cname = sel.attr('class'),\n    ///    model = this.getModel('transition'),\n    //    tr = cname ? transition(cname).duration(model.duration) : null,\n    var t = sel.attr('transform');\n    if (!t) sel.attr('transform', transform);\n    sel.transition().attr('transform', transform);\n};\n","import {brushX, brushY, brush} from 'd3-brush';\n\n\nimport {vizPrototype} from '../core/chart';\n\n\nvizPrototype.brushX = function () {\n    return brushX();\n};\n\nvizPrototype.brushY = function () {\n    return brushY();\n};\n\nvizPrototype.brush = function () {\n    return brush();\n};\n","import createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\n\n\nexport default createVisual('container', {\n\n    initialise () {\n        this.live = [];\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, self);\n        return Promise.all(this.live.map(visual => visual.redraw(fetchData))).then(() => {\n            delete self.drawing;\n            visuals.events.call('after-draw', undefined, self);\n        });\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n    }\n});\n","import {isString, isObject, assign} from 'd3-let';\n\nimport VisualContainer from '../core/container';\nimport warn from '../utils/warn';\n\n//\n//  vizComponent base prototype\n//  =============================\n//\n//  Some common properties and methods for all visualize components\n//\nexport const vizComponent = {\n    props: [\n        'schema',\t    // Schema is a collection of fields to display in the table\n        'datasource',\t// Data source\n        'plugins',      // list of string/objects\n        'options'\n\t],\n\n    render (props, attrs, el) {\n        var self = this,\n            inner = this.select(el).html();\n        //\n        // build\n        return this.getSchema(props.schema, schema => {\n            if (!isObject(schema)) schema = {};\n            schema = assign({}, props.options, schema);\n            return self.build(schema, inner, attrs);\n        });\n    },\n\n    // get the schema from the input schema property\n    getSchema (input, build) {\n        var parent = this.model.visual;\n\n        // allow to specify the schema as an entry of\n        // visuals object in the dashboard schema\n        if (parent && parent !== this.model && isString(input)) {\n            var schema = parent.getVisualSchema(input);\n            if (schema) input = schema;\n        }\n\n        if (isString(input)) {\n            return this.json(input).then(build).catch(err => {\n                warn(`Could not reach ${input}: ${err}`, err);\n            });\n        }\n        else return build(input);\n    },\n    //\n    // build the visual component has the schema available\n    build () {}\n};\n//\n//  Dashboard Component\n//  ========================\n//\n//  A collection of visual components arranged according\n//  to a custom layout.\n//\n//  * Dashboard visuals are independent of each other but\n//    interact via the data object\n//  * The Dashboard layout is given by the inner HTML elements\n//  * The configuration is obtained via the schema property which\n//    can be either:\n//      1) an object\n//      2) a url\nexport default assign({}, vizComponent, {\n\n    build (schema, inner, attrs) {\n        var model = this.model,\n            sel = this.createElement('div'),\n            root = model.root;\n        if (attrs.class) sel.attr('class', attrs.class);\n        if (!schema.visuals) schema.visuals = {};\n        model.visual = new VisualContainer(sel.node(), schema, model.visual, model.visual ? null : model.$new());\n        if (!root.visualDashboard) root.visualDashboard = model.visual;\n        return sel.html(inner);\n    }\n});\n","import {pop, assign} from 'd3-let';\n\nimport {vizComponent} from './dashboard';\nimport Visual from '../core/visual';\n\n\n//\n//  Visual component\n//  ======================\n//\n//  An element containing a visualization\nexport default assign({}, vizComponent, {\n\n    build (schema, inner, attrs) {\n        var sel = this.createElement('div'),\n            type = schema.type || 'visual',\n            model = this.model,\n            visualDrawOnMount = pop(schema, 'visualDrawOnMount'),\n            options = {},\n            layers;\n\n        if (attrs.class) sel.attr('class', attrs.class);\n\n        if (type === 'visual') {\n            layers = pop(schema, 'layers');\n            options = schema;\n        }\n        else\n            options.visual = pop(schema, 'visual') || {};\n\n        if (visualDrawOnMount !== undefined) model.visualDrawOnMount = visualDrawOnMount;\n        model.visual = new Visual(sel.node(), options, model.visual, model.visual ? null : model.$new());\n        if (type !== 'visual') model.visual.addVisual(schema);\n        else if (layers) {\n            layers.forEach(layer => model.visual.addVisual(layer));\n        }\n        return sel;\n    },\n\n    // once the element is mounted in the dom, draw the visual\n    mounted () {\n        if (this.model.visualDrawOnMount === false) return;\n        this.model.visual.redraw();\n    }\n});\n","//\n//  d3-view components\n//  ======================\n//\n//  d3-view plugin for visualization components\n//\n//  visual plugins first\nimport '../plugins/menu';\nimport '../plugins/data';\nimport '../plugins/font';\nimport '../plugins/responsive';\nimport '../plugins/title';\nimport '../plugins/margin';\nimport '../plugins/axis';\nimport '../plugins/shapes';\nimport '../plugins/color';\nimport '../plugins/legend';\nimport '../plugins/tooltip';\nimport '../plugins/mouse';\nimport '../plugins/expand';\nimport '../plugins/transition';\nimport '../plugins/brush';\nimport dashboard from './dashboard';\nimport visual from './visual';\n\n\n// Visual components plugin\nexport default {\n\n    install (vm) {\n        vm.addComponent('dashboard', dashboard);\n        vm.addComponent('visual', visual);\n    }\n\n};\n","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","import constant from \"../utils/constant\";\nimport descending from \"../utils/descending\";\nimport identity from \"../utils/identity\";\n\n//\n//  Pyramid Shape generator\n//  ============================\nexport default function () {\n    var value = identity,\n        pad = constant(0),\n        height = 1,\n        base = 1;\n\n    function pyramid (data) {\n        let i, j, k, points, fraction,\n            hi, x, y, v0, ph, pj;\n        var n = data.length,\n            r = 0.5*base/height,\n            polygons = new Array(n),\n            index = new Array(n);\n\n        for (i=0; i<n; ++i) {\n            polygons[index[i] = i] = +value(data[i], i, data);\n        }\n\n        // Sort the polygons\n        index.sort((i, j) => {return descending(polygons[i], polygons[j]);});\n\n        // Compute the polygons! They are stored in the original data's order.\n        v0 = polygons[index[0]];\n        hi = null;\n\n        for (i=n-1; i>=0; --i) {\n            points = [];\n            if (hi === null)\n                points.push([0, 0]);\n            else {\n                y = hi + ph;\n                x = y*r;\n                points.push([x, y]);\n                points.push([-x, y]);\n            }\n            j = index[i];\n            k = n - i - 1;\n            fraction = polygons[j]/v0;\n            pj = Math.sqrt(fraction);\n            hi = height*pj;\n            ph = i ? pad(pj, k) : 0;\n            y = hi - ph;\n            x = y*r;\n            points.push([-x, y]);\n            points.push([x, y]);\n            polygons[j] = {\n                index: k,\n                value: polygons[j],\n                fraction: fraction,\n                points: points,\n                data: data[j]\n            };\n        }\n        return polygons;\n    }\n\n    pyramid.value = function(_) {\n        return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pyramid) : value;\n    };\n\n    pyramid.base = function (_) {\n        return arguments.length ? (base = _, pyramid) : base;\n    };\n\n    pyramid.height = function (_) {\n        return arguments.length ? (height = _, pyramid) : height;\n    };\n\n    pyramid.pad = function(_) {\n        return arguments.length ? (pad = typeof _ === \"function\" ? _ : constant(+_), pyramid) : pad;\n    };\n\n    return pyramid;\n}\n","export default function (range, splits) {\n    var x0 = range[0],\n        x1 = range[1],\n        dx = (x1 - x0)/splits,\n        n = Math.floor(Math.log10(dx)),\n        v = Math.pow(10, n);\n    if (dx/v > 5) v *= 10;\n    v *= 0.1;\n\n    var ndx = v*Math.ceil(dx/v),\n        nx0 = v*Math.floor(x0/v);\n    return [nx0, nx0 + splits*ndx];\n}\n","export default function (str) {\n    str = str.replace(/^\\s+|\\s+$/g, ''); // trim\n    str = str.toLowerCase();\n\n    // remove accents, swap ñ for n, etc\n    var from = 'àáäâèéëêìíïîòóöôùúüûñç·/_,:;';\n    var to = 'aaaaeeeeiiiioooouuuunc------';\n    for (var i = 0, l = from.length; i < l; i++) {\n        str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\n    }\n\n    str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\n        .replace(/\\s+/g, '-') // collapse whitespace and replace by -\n        .replace(/-+/g, '-'); // collapse dashes\n\n    return str;\n}\n","import {color} from 'd3-color';\n\n\nexport default function (c, white, black) {\n    c = color(c);\n    return (c.r*0.299 + c.g*0.587 + c.b*0.114) > 186 ? (black || '#000') : (white || '#fff');\n}\n","import {select} from 'd3-selection';\n\nimport functor from './functor';\n\n\n//Text wrapping code adapted from Mike Bostock\nexport default function (text, width, callback) {\n    width = functor(width);\n\n    text.each(function(d, i) {\n        var text = select(this),\n            dy = parseFloat(text.attr(\"dy\")) || 0,\n            wd = width(d, i),\n            lineHeight = 1.2,\n            lines = text.text().split('\\n');\n\n        let word, words, done,\n            tspan = text.text(null)\n                        .append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", dy + \"em\");\n\n        lines.forEach((t, i) => {\n            done = [];\n            words = t.split(/\\s+/).reverse();\n            if (i)\n                tspan = text.append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", lineHeight + dy + \"em\");\n\n            while (word = words.pop()) {\n                done.push(word);\n                tspan.text(done.join(' '));\n                if (tspan.node().getComputedTextLength() > wd && done.length > 1) {\n                    done.pop();\n                    tspan.text(done.join(' '));\n                    done = [word];\n                    tspan = text.append(\"tspan\")\n                                .attr(\"x\", 0)\n                                .attr(\"dy\", lineHeight + dy + \"em\")\n                                .text(word);\n                }\n            }\n        });\n\n        if (callback)\n            text.selectAll('tspan')\n                .each(callback);\n    });\n}\n","import {extent} from 'd3-array';\n\n//\n//  Create a Grouper generator\n//  ===============================\n//\n//  This is a chart transform rather than a data transform\nexport default function () {\n    var groupby = null,\n        x = 'x',\n        y = 'y',\n        sort = false,\n        stack = null,\n        normalize = false;\n\n    function grouper (frame) {\n        let stacked = false,\n            data, labels, s;\n\n        if (groupby) {\n            labels = frame.dimension(groupby).group().top(Infinity).map(g => g['key']).sort();\n            if (labels.length <= 1) labels = null;\n        }\n\n        if (labels) {\n            frame = frame.pivot(x, groupby, y);\n            if (sort) frame = frame.sortby('total');\n            data = frame.data;\n            if (stack) {\n                if (normalize)\n                    data = normalizeData(data);\n                data = stack.keys(labels)(data);\n                stacked = true;\n            }\n        } else {\n            data = frame.data;\n            labels = [y];\n        }\n\n        if (!stacked)\n            data = labels.map((key, index) => {\n                s = data.map(d => {\n                    s = [0, d[key]];\n                    s.data = d;\n                    return s;\n                });\n                s.index = index;\n                s.key = key;\n                return s;\n            });\n\n        return new GroupedData(data, x, y, stacked);\n    }\n\n    grouper.groupby = function(_) {\n        if (arguments.length) {\n            groupby = _;\n            return grouper;\n        }\n        return groupby;\n    };\n\n    grouper.x = function(_) {\n        return arguments.length ? (x = _, grouper) : x;\n    };\n\n    grouper.y = function(_) {\n        return arguments.length ? (y = _, grouper) : y;\n    };\n\n    grouper.normalize = function(_) {\n        return arguments.length ? (normalize = _, grouper) : normalize;\n    };\n\n    grouper.stack = function(_) {\n        return arguments.length ? (stack = _, grouper) : stack;\n    };\n\n    return grouper;\n}\n\n\nfunction GroupedData (data, x, y, stacked) {\n    this.data = data;\n    this.stacked = stacked;\n    this.x = x;\n    this.y = y;\n}\n\nGroupedData.prototype = {\n    rangeX () {\n        return this.range(this.x);\n    },\n    rangeY () {\n        return this.range();\n    },\n    range (key) {\n        let range, vals;\n        if (key)\n            vals = this.data.reduce((a, d) => {\n                range = extent(d, acc);\n                a.push(range[0]);\n                a.push(range[1]);\n                return a;\n            }, []);\n        else\n        vals = this.data.reduce((a, d) => {\n            range = extent(d, acc0);\n            a.push(range[0]);\n            a.push(range[1]);\n            range = extent(d, acc1);\n            a.push(range[0]);\n            a.push(range[1]);\n            return a;\n        }, []);\n        return extent(vals);\n\n        function acc0 (d) {\n            return d[0];\n        }\n\n        function acc1 (d) {\n            return d[1];\n        }\n\n        function acc (d) {\n            return d.data[key];\n        }\n    }\n};\n\n\nfunction normalizeData (data) {\n    return data;\n}\n","import {\n    line,\n    curveBasisClosed,\n    curveBasisOpen,\n    curveBasis,\n    curveBundle,\n    curveCardinalClosed,\n    curveCardinalOpen,\n    curveCardinal,\n    curveCatmullRomClosed,\n    curveCatmullRomOpen,\n    curveCatmullRom,\n    curveLinearClosed,\n    curveLinear,\n    curveMonotoneX,\n    curveMonotoneY,\n    curveNatural\n} from 'd3-shape';\n\nimport {isFunction} from 'd3-let';\nimport {extent} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport warn from '../utils/warn';\nimport camelFunction from '../utils/camelfunction';\nimport grouper from '../transforms/groups';\n\n\nexport const curves = {\n    curveBasisClosed,\n    curveBasisOpen,\n    curveBasis,\n    curveBundle,\n    curveCardinalClosed,\n    curveCardinalOpen,\n    curveCardinal,\n    curveCatmullRomClosed,\n    curveCatmullRomOpen,\n    curveCatmullRom,\n    curveLinearClosed,\n    curveLinear,\n    curveMonotoneX,\n    curveMonotoneY,\n    curveNatural\n};\n\nexport const lineDrawing = {\n\n    curve (name) {\n        var obj = camelFunction(curves, 'curve', name, true);\n        if (!obj) {\n            warn(`Could not locate curve type \"${name}\"`);\n            obj = curveNatural;\n        }\n        return obj;\n    },\n\n    range (data, x, y, agg) {\n        var range = {\n            x: extent(data, x),\n            y: extent(data, y)\n        };\n        if (agg) {\n            Array.prototype.push.apply(agg.x, range.x);\n            Array.prototype.push.apply(agg.y, range.y);\n        }\n    },\n\n    newRange () {\n        return {\n            x: [],\n            y: []\n        };\n    },\n\n    x (box, ranges) {\n        var model = this.getModel(),\n            scale = this.getScale(model.scaleX)\n                .domain(extent(ranges))\n                .range([0, box.innerWidth]);\n        return function (d) {\n            return scale(d[model.x]);\n        };\n    },\n\n    y (box, ranges, value) {\n        var model = this.getModel(),\n            scale = this.getScale(model.scaleY)\n                .domain(extent(ranges))\n                .range([box.innerHeight, 0]);\n        if (arguments.length === 2) value = d => d[model.y];\n        return function (d) {\n            return scale(value(d));\n        };\n    }\n};\n\n//\n//  Line Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('linechart', lineDrawing, {\n\n    options: {\n        lineWidth: 1,\n        curve: 'natural',\n        x: 'x',\n        y: 'y',\n        groupby: null,  // group data by a field for grouped line charts\n        scaleX: 'linear',\n        scaleY: 'linear',\n        //\n        axisX: true,\n        axisY: true\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            x = model.x,\n            y = model.y,\n            box = this.boundingBox(),\n            info = grouper()\n                        .groupby(model.groupby)\n                        .x(x)\n                        .y(y)(frame),\n            domainX = info.rangeX(),\n            domainY = info.rangeY(),\n            sx = this.getScale(model.scaleX)\n                            .domain(domainX)\n                            .rangeRound([0, box.innerWidth]),\n            sy = this.getScale(model.scaleY)\n                            .domain(domainY)\n                            .rangeRound([box.innerHeight, 0]).nice(),\n            group = this.group(),\n            chart = this.group('chart'),\n            lines = chart.selectAll('.line').data(info.data),\n            colors = this.stroke(info.data).colors,\n            sxshift = 0,\n            //merge = paper.transition('update'),\n            line_ = line()\n                .x(xl)\n                .y(yl)\n                .curve(this.curve(model.curve));\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        // TODO: generalize this hack\n        if (isFunction(sx.bandwidth)) {\n            sx.domain(info.data[0].map(d => d.data[x]));\n            sxshift = sx.bandwidth()/2;\n        }\n\n        lines\n            .enter()\n                .append('path')\n                .attr('class', 'line')\n                .attr('fill', 'none')\n                .attr('stroke', stroke)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', line_)\n            .merge(lines)\n                .transition()\n                .attr('stroke', stroke)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', line_);\n\n        lines\n            .exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, sy, box);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, sy, box);\n\n        function stroke (d, i) {\n            return colors[i];\n        }\n\n        function xl(d) {\n            return sx(d.data[x]) + sxshift;\n        }\n\n        function yl(d) {\n            return sy(d[1]);\n        }\n    }\n});\n","import {assign} from 'd3-let';\nimport {max} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport colorContrast from '../utils/contrast';\nimport textWrap from '../utils/text-wrapping';\nimport {lineDrawing} from './line';\n\n\nconst baselines = {\n    center: \"middle\",\n    top: \"hanging\",\n    bottom: \"baseline\",\n    outside: \"baseline\"\n};\nconst heightShifts = {\n    center (d, h) {\n        return h/2;\n    },\n    top (d, h, offset) {\n        return offset;\n    },\n    bottom (d, h, offset) {\n        return h - offset;\n    },\n    outside (d, h, offset) {\n        return -offset;\n    }\n};\n\n//\n//  Bar Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('barchart', lineDrawing, {\n\n    options: {\n        orientation: 'vertical',\n        // stack multiple y series?\n        sortby: null, // specify \"x\" or \"y\"\n        stack: true,\n        stackOrder: 'descending',   // stack order\n        waffle: false,      // ability to draw a waffle chart (only when stack is true)\n        normalize: false,\n        scaleX: {\n            type: 'band',\n            padding: 0.2\n        },\n        scaleY: 'linear',\n        x: 'x',\n        y: 'y',\n        //\n        // allow to place labels in bars\n        label: null,    // expression for label text\n        labelLocation: \"center\",\n        labelOffset: 10,\n        labelWidth: 0.7,\n        //\n        radius: 0,\n        groupby: null,  // group data by a field for staked or grouped bar chart\n        //\n        axisY: true,\n        axisX: true,\n        //\n        // legend & tooltip\n        valueformat: '.1f',\n        legendType: 'color',\n        legendLabel: 'label'\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            data = frame.data,\n            box = this.boundingBox(),\n            group = this.group(),\n            chart = this.group('chart'),\n            x = model.x,\n            y = model.y,\n            groupby = model.groupby,\n            barChart = model.orientation === 'vertical' ? new VerticalBarChart(this) : new HorizontalBarChart(this);\n\n        let groups, stacked = false;\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        if (groupby) {\n            groups = frame.dimension(groupby).group().top(Infinity).map(g => g['key']);\n            if (groups.length <= 1) groups = null;\n        }\n\n        if (groups) {\n            var gframe = frame.pivot(x, groupby, y);\n            if (model.sortby === 'y') gframe = gframe.sortby('total');\n            data = gframe.data;\n            barChart.sz.domain(groups).range(this.fill(groups).colors);\n            if (model.stack) {\n                if (model.normalize)\n                    data = this.normalize(gframe);\n                stacked = true;\n            }\n        } else {\n            barChart.sz.domain([y]).range(this.fill([y]).colors);\n            stacked = true;\n        }\n\n        // set domain for the labels\n        var domainX = data.map(d => d[x]);\n        barChart.sx.domain(domainX);\n        //\n        // Stacked bar chart\n        if (stacked || !groups)\n            barChart.stacked(chart, data, groups);\n        else\n            barChart.grouped(chart, data, groups);\n\n        // Axis\n        barChart.axis(domainX);\n        // Legend\n        barChart.legend(groups);\n    }\n});\n\n\nfunction VerticalBarChart (viz) {\n    this.vertical = true;\n    this.init(viz);\n    this.sx.rangeRound([0, this.box.innerWidth]);\n    this.sy.rangeRound([this.box.innerHeight, 0]);\n}\n\nfunction HorizontalBarChart (viz) {\n    this.init(viz);\n    this.sx.rangeRound([0, this.box.innerHeight]);\n    this.sy.rangeRound([0, this.box.innerWidth]);\n}\n\nconst barChartPrototype = {\n\n    init (viz) {\n        this.viz = viz;\n        this.model = viz.getModel();\n        this.box = viz.boundingBox();\n        this.sx = viz.getScale(this.model.scaleX),\n        this.sy = viz.getScale(this.model.scaleY),\n        this.sz = viz.getScale('ordinal');\n    },\n\n    legend (groups) {\n        if (this.model.legendType && groups) {\n            this.viz.legend({scale: this.sz}, this.box);\n        }\n    },\n\n    stacked (chart, data, groups) {\n        var color = this.viz.getModel('color'),\n            sx = this.sx,\n            sy = this.sy,\n            sz = this.sz,\n            x = this.model.x,\n            y = this.model.y,\n            viz = this.viz,\n            radius = this.model.radius;\n        let bars = chart.selectAll('.group'),\n            width, height, xrect, yrect, yi, rects;\n\n        if (groups) {\n            this.sy.domain([0, max(data, d => d.total)]).nice();\n        } else {\n            this.sy.domain([0, max(data, d => d[y])]).nice();\n            groups = [this.model.y];\n        }\n\n        if (this.vertical) {\n            xrect = x0;\n            yrect = y0;\n            width = sx.bandwidth;\n            height = bardim;\n            yi = 1;\n        } else {\n            xrect = y0;\n            yrect = x0;\n            width = bardim;\n            height = sx.bandwidth;\n            yi = 0;\n        }\n        data = viz.getStack().keys(groups)(data);\n        bars = bars.data(data);\n        bars.exit().transition().style('opacity', 0).remove();\n\n        rects = bars.enter()\n                        .append('g')\n                        .classed('group', true)\n                        .attr('fill', d => sz(d.key))\n                    .merge(bars)\n                        .attr('fill', d => sz(d.key))\n                        .attr('stroke', viz.modelProperty('stroke', color))\n                        .attr('stroke-opacity', viz.modelProperty('strokeOpacity', color))\n                        .selectAll('rect')\n                        .data(stackedData);\n\n        rects.enter()\n            .append('rect')\n                .attr('x', xrect)\n                .attr('y', yrect)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('rx', radius)\n                .attr('ry', radius)\n                .on(\"mouseover\", viz.mouseOver())\n                .on(\"mouseout\", viz.mouseOut())\n            .merge(rects)\n                .transition()\n                .attr('x', xrect)\n                .attr('y', yrect)\n                .attr('height', height)\n                .attr('width', width);\n\n        rects.exit().transition().style('opacity', 0).remove();\n\n        // add labels\n        if (this.model.label) {\n            var font = viz.getModel('font'),\n                label = this.model.label,\n                fontSize = `${viz.font(this.box)}px`,\n                labels = chart.selectAll('.labels').data(data),\n                baseline = this.vertical ? baselines[this.model.labelLocation] || \"baseline\" : \"middle\",\n                heightShift = heightShifts[this.model.labelLocation],\n                labelWidth = this.model.labelWidth,\n                labelOffset = this.model.labelOffset;\n\n            rects = labels.enter()\n                    .append('g')\n                    .classed('labels', true)\n                .merge(labels)\n                    .selectAll('text')\n                    .data(stackedData);\n\n            rects.enter()\n                .append('text')\n                .classed('label', true)\n                .attr(\"transform\", labelTranslate)\n                .style(\"fill\", fillLabel)\n                .style('font-size', fontSize)\n                .text(labelText)\n            .merge(rects)\n                .text(labelText)\n                .style('font-size', fontSize)\n                .call(textWrap, d => labelWidth*width(d), labelAlign)\n                .transition(viz.transition('text'))\n                .attr(\"transform\", labelTranslate)\n                .style(\"fill\", fillLabel);\n        }\n\n        function bardim (d) {\n            return sy(d[1-yi]) - sy(d[yi]);\n        }\n\n        function x0 (d) {\n            return sx(d.data[x]);\n        }\n\n        function y0 (d) {\n            return sy(d[yi]);\n        }\n\n        function stackedData (d) {\n            d.forEach(r => {\n                r.key = d.key;\n                r.value = r.data[d.key];\n            });\n            return d;\n        }\n\n        function labelTranslate (d, index) {\n            var x = xrect(d, index) + width(d, index)/2,\n                y = yrect(d, index) + heightShift(d, height(d, index), labelOffset);\n            return viz.translate(x, y);\n        }\n\n        function fillLabel (d) {\n            return colorContrast(sz(d.key), '#fff', font.stroke);\n        }\n\n        function labelText (d, index) {\n            return viz.dataStore.eval(label, {d: d, index: index});\n        }\n\n        function labelAlign () {\n            viz.select(this)\n                .attr(\"alignment-baseline\", baseline)\n                .attr(\"text-anchor\", \"middle\");\n        }\n    },\n\n    grouped (chart, data, groups) {\n        var color = this.viz.getModel('color'),\n            sx = this.sx,\n            sy = this.sy,\n            sz = this.sz,\n            x = this.model.x,\n            viz = this.viz,\n            radius = this.model.radius,\n            padding = sx.paddingInner(),\n            x1 = viz.getScale('band')\n                    .domain(groups)\n                    .paddingInner(0.5*padding),\n            bars = chart.selectAll('.group');\n        let width, height, xrect, rects;\n\n        // set the value domain\n        sy.domain([0, max(data, maxValue)]).nice();\n\n        if (this.vertical) {\n            x1.rangeRound([0, sx.bandwidth()]);\n            xrect = gx;\n            width = x1.bandwidth;\n            height = gh;\n        } else {\n            xrect = gx;\n            height = x1.bandwidth;\n            width = gh;\n        }\n\n        bars = bars.data(data);\n        bars.exit().remove();\n        //\n        // join for rectangles\n        rects = bars\n            .enter()\n                .append('g')\n                .classed('group', true)\n                .attr(\"transform\", d => viz.translate(xrect(d), 0))\n            .merge(bars)\n                .attr(\"transform\", d => viz.translate(xrect(d), 0))\n                .selectAll('rect')\n                .data(groupData);\n        //\n        rects.exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n        //\n        rects\n            .enter()\n                .append('rect')\n                .attr('x', d => x1(d.key))\n                .attr('y', gy)\n                .attr('rx', radius)\n                .attr('ry', radius)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', d => sz(d.key))\n                .on(\"mouseover\", viz.mouseOver())\n                .on(\"mouseout\", viz.mouseOut())\n            .merge(rects)\n                .transition(viz.transition('rect'))\n                .attr('x', d => x1(d.key))\n                .attr('y', gy)\n                .attr('height', height)\n                .attr('width', width)\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('fill', d => sz(d.key));\n\n        rects.exit().remove();\n\n        function gx (d) {\n            return sx(d[x]);\n        }\n\n        function gy (d) {\n            return sy(d.value);\n        }\n\n        function gh (d) {\n            return sy(0) - sy(d.value);\n        }\n\n        function groupData (d) {\n            return groups.map(key => {\n                return {key: key, value: d[key]};\n            });\n        }\n\n        function maxValue (d) {\n            return groups.reduce((v, key) => {\n                return Math.max(v, d[key]);\n            }, 0);\n        }\n    }\n};\n\n\nVerticalBarChart.prototype = assign({}, barChartPrototype, {\n    axis (domainX) {\n        if (this.model.axisX)\n            this.viz.xAxis1(this.model.axisX === true ? \"bottom\" : this.model.axisX, this.sx, this.box, domainX[0]);\n        if (this.model.axisY)\n            this.viz.yAxis1(this.model.axisY === true ? \"left\" : this.model.axisY, this.sy, this.box);\n    }\n});\n\nHorizontalBarChart.prototype = assign({}, barChartPrototype, {\n    axis (domainX) {\n        if (this.model.axisX)\n            this.viz.xAxis1(this.model.axisX === true ? \"left\" : this.model.axisX, this.sx, this.box, domainX[0]);\n        if (this.model.axisY)\n            this.viz.yAxis1(this.model.axisY === true ? \"bottom\" : this.model.axisY, this.sy, this.box);\n    }\n});\n","import {ascending, range, extent, quantile} from 'd3-array';\nimport {scaleLinear} from 'd3-scale';\n\nimport createChart from '../core/chart';\nimport accessor from '../utils/accessor';\nimport constant from '../utils/constant';\nimport {lineDrawing} from './line';\n\n//\n//  Box Chart\n//  =============\n//\n//  A box-and-whisker plot uses simple glyphs that summarize a quantitative\n//  distribution with five standard statistics: the smallest value, lower\n//  quartile, median, upper quartile, and largest value.\n//  This summary approach allows the viewer to easily recognize\n//  differences between distributions.\n//\nexport default createChart('boxchart', lineDrawing, {\n\n    options: {\n        orientation: 'vertical',\n        lineWidth: 1,\n        x: 'x',\n        y: 'y',\n        scaleX: 'linear',\n        scaleY: 'linear',\n        // area with vertical gradient to zero opacity\n        gradient: true\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            //color = this.getModel('color'),\n            info = self.getDataInfo(frame),\n            box = this.boundingBox(),\n            chart = boxplot(),\n            paper = this.paper().size(box),\n            x = accessor(model.x),\n            //y = accessor(model.y),\n            boxes = paper.group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.box')\n                .data(info.data),\n            //fill = this.fill(info.meta),\n            groups = frame.groupby(model.x),\n            sx = this.getScale(model.scaleX)\n                .domain(extent(frame.data, x)),\n            //sy = this.getScale(model.scaleY)\n            //    .domain(extent(frame.data, y)),\n            width = box.innerWidth;\n\n        if (model.orientation === 'vertical') {\n            sx.range([0, box.innerWidth]);\n        } else {\n            sx.range([0, box.innerHeight]);\n            width = this.innerHeight;\n        }\n        chart.width(this.dim(model.width, width, width/groups.length - 2));\n\n        boxes\n            .enter()\n                .append('g')\n                    .classed('box', true)\n                    .call(chart);\n    }\n});\n\n\nfunction boxplot () {\n    var width = 1,\n        height = 1,\n        duration = 0,\n        domain = null,\n        value = Number,\n        whiskers = boxWhiskers,\n        quartiles = boxQuartiles,\n        tickFormat = null;\n\n    // For each small multiple\n    function box (g) {\n        g.each((d, i) => {\n            d = d.map(value).sort(ascending);\n\n            const\n                n = d.length,\n                min = d[0],\n                max = d[n - 1],\n                // Compute quartiles. Must return exactly 3 elements.\n                quartileData = d.quartiles = quartiles(d),\n                // Compute whiskers. Must return exactly 2 elements, or null.\n                whiskerIndices = whiskers && whiskers(d),\n                whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]),\n                // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n                // We compute the outliers as indices, so that we can join across transitions!\n                outlierIndices = whiskerIndices\n                    ? range(0, whiskerIndices[0]).concat(range(whiskerIndices[1] + 1, n))\n                    : range(n),\n                // Compute the new x-scale.\n                x1 = scaleLinear()\n                    .domain(domain && domain.call(this, d, i) || [min, max])\n                    .range([height, 0]),\n                // Retrieve the old x-scale, if this is an update.\n                x0 = this.__chart__ || scaleLinear()\n                  .domain([0, Infinity])\n                  .range(x1.range());\n\n            // Stash the new scale.\n            this.__chart__ = x1;\n            // Note: the box, median, and box tick elements are fixed in number,\n            // so we only have to handle enter and update. In contrast, the outliers\n            // and other elements are variable, so we need to exit them! Variable\n            // elements also fade in and out.\n\n            // Update center line: the vertical line spanning the whiskers.\n            var center = g.selectAll(\"line.center\")\n              .data(whiskerData ? [whiskerData] : []);\n\n            center.enter().insert(\"line\", \"rect\")\n              .attr(\"class\", \"center\")\n              .attr(\"x1\", width / 2)\n              .attr(\"y1\", function(d) { return x0(d[0]); })\n              .attr(\"x2\", width / 2)\n              .attr(\"y2\", function(d) { return x0(d[1]); })\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .style(\"opacity\", 1)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); });\n\n            center.transition()\n              .duration(duration)\n              .style(\"opacity\", 1)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); });\n\n            center.exit().transition()\n              .duration(duration)\n              .style(\"opacity\", 1e-6)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); })\n              .remove();\n\n            // Update innerquartile box.\n            var box = g.selectAll(\"rect.box\")\n              .data([quartileData]);\n\n            box.enter().append(\"rect\")\n              .attr(\"class\", \"box\")\n              .attr(\"x\", 0)\n              .attr(\"y\", function(d) { return x0(d[2]); })\n              .attr(\"width\", width)\n              .attr(\"height\", function(d) { return x0(d[0]) - x0(d[2]); })\n            .transition()\n              .duration(duration)\n              .attr(\"y\", function(d) { return x1(d[2]); })\n              .attr(\"height\", function(d) { return x1(d[0]) - x1(d[2]); });\n\n            box.transition()\n              .duration(duration)\n              .attr(\"y\", function(d) { return x1(d[2]); })\n              .attr(\"height\", function(d) { return x1(d[0]) - x1(d[2]); });\n\n            // Update median line.\n            var medianLine = g.selectAll(\"line.median\")\n              .data([quartileData[1]]);\n\n            medianLine.enter().append(\"line\")\n              .attr(\"class\", \"median\")\n              .attr(\"x1\", 0)\n              .attr(\"y1\", x0)\n              .attr(\"x2\", width)\n              .attr(\"y2\", x0)\n            .transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1);\n\n            medianLine.transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1);\n\n            // Update whiskers.\n            var whisker = g.selectAll(\"line.whisker\")\n              .data(whiskerData || []);\n\n            whisker.enter().insert(\"line\", \"circle, text\")\n              .attr(\"class\", \"whisker\")\n              .attr(\"x1\", 0)\n              .attr(\"y1\", x0)\n              .attr(\"x2\", width)\n              .attr(\"y2\", x0)\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1);\n\n            whisker.transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1);\n\n            whisker.exit().transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1e-6)\n              .remove();\n\n            // Update outliers.\n            var outlier = g.selectAll(\"circle.outlier\")\n              .data(outlierIndices, Number);\n\n            outlier.enter().insert(\"circle\", \"text\")\n              .attr(\"class\", \"outlier\")\n              .attr(\"r\", 5)\n              .attr(\"cx\", width / 2)\n              .attr(\"cy\", function(i) { return x0(d[i]); })\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1);\n\n            outlier.transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1);\n\n            outlier.exit().transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1e-6)\n              .remove();\n\n            // Compute the tick format.\n            var format = tickFormat || x1.tickFormat(8);\n\n            // Update box ticks.\n            var boxTick = g.selectAll(\"text.box\")\n              .data(quartileData);\n\n            boxTick.enter().append(\"text\")\n              .attr(\"class\", \"box\")\n              .attr(\"dy\", \".3em\")\n              .attr(\"dx\", (d, i) => i & 1 ? 6 : -6)\n              .attr(\"x\", (d, i) => i & 1 ? width : 0)\n              .attr(\"y\", x0)\n              .attr(\"text-anchor\", function(d, i) { return i & 1 ? \"start\" : \"end\"; })\n              .text(format)\n            .transition()\n              .duration(duration)\n              .attr(\"y\", x1);\n\n            boxTick.transition()\n              .duration(duration)\n              .text(format)\n              .attr(\"y\", x1);\n\n            // Update whisker ticks. These are handled separately from the box\n            // ticks because they may or may not exist, and we want don't want\n            // to join box ticks pre-transition with whisker ticks post-.\n            var whiskerTick = g.selectAll(\"text.whisker\")\n              .data(whiskerData || []);\n\n            whiskerTick.enter().append(\"text\")\n              .attr(\"class\", \"whisker\")\n              .attr(\"dy\", \".3em\")\n              .attr(\"dx\", 6)\n              .attr(\"x\", width)\n              .attr(\"y\", x0)\n              .text(format)\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"y\", x1)\n              .style(\"opacity\", 1);\n\n            whiskerTick.transition()\n              .duration(duration)\n              .text(format)\n              .attr(\"y\", x1)\n              .style(\"opacity\", 1);\n\n            whiskerTick\n                .exit()\n                .transition()\n                .duration(duration)\n                .attr(\"y\", x1)\n                .style(\"opacity\", 1e-6)\n                .remove();\n        });\n    }\n\n    box.width = function(x) {\n        if (!arguments.length) return width;\n        width = x;\n        return box;\n    };\n\n    box.height = function(x) {\n        if (!arguments.length) return height;\n        height = x;\n        return box;\n    };\n\n    box.tickFormat = function(x) {\n        if (!arguments.length) return tickFormat;\n        tickFormat = x;\n        return box;\n    };\n\n    box.duration = function(x) {\n        if (!arguments.length) return duration;\n        duration = x;\n        return box;\n    };\n\n    box.domain = function(x) {\n        if (!arguments.length) return domain;\n        domain = x === null ? x : constant(x);\n        return box;\n    };\n\n    box.value = function(x) {\n        if (!arguments.length) return value;\n        value = x;\n        return box;\n    };\n\n    box.whiskers = function(x) {\n        if (!arguments.length) return whiskers;\n        whiskers = x;\n        return box;\n    };\n\n    box.quartiles = function(x) {\n        if (!arguments.length) return quartiles;\n        quartiles = x;\n        return box;\n    };\n\n    return box;\n}\n\n\nfunction boxWhiskers (d) {\n    return [0, d.length - 1];\n}\n\n\nfunction boxQuartiles (d) {\n    return [\n        quantile(d, 0.25),\n        quantile(d, 0.5),\n        quantile(d, 0.75)\n    ];\n}\n","import {area, line} from 'd3-shape';\nimport {color} from 'd3-color';\n\nimport createChart from '../core/chart';\nimport grouper from '../transforms/groups';\nimport {lineDrawing} from './line';\n\n//\n//  Area Chart\n//  =============\nexport default createChart('areachart', lineDrawing, {\n\n    options: {\n        lineWidth: 1,\n        curve: 'natural',\n        x: 'x',\n        y: 'y',\n        groupby: null,  // group data by a field for staked or grouped area chart\n        scaleX: 'linear',\n        scaleY: 'linear',\n        // area with vertical gradient to zero opacity\n        gradient: true,\n        lineDarken: 0.2,\n        //\n        stack: true,\n        stackOrder: 'none',   // stack order\n        //\n        axisX: true,\n        axisY: true\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            x = model.x,\n            y = model.y,\n            col = this.getModel('color'),\n            box = this.boundingBox(),\n            info = grouper()\n                        .groupby(model.groupby)\n                        .stack(this.getStack())\n                        .x(x)\n                        .y(y)(frame),\n            domainX = info.rangeX(),\n            domainY = info.rangeY(),\n            scaleX = this.getScale(model.scaleX)\n                            .domain(domainX)\n                            .rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale(model.scaleY)\n                            .domain(domainY)\n                            .rangeRound([box.innerHeight, 0]).nice(),\n            group = this.group(),\n            chart = this.group('chart'),\n            areas = chart.selectAll('.areagroup').data(info.data),\n            colors = this.colors(info.data.length),\n            fill = model.gradient ? colors.map((c, i) => self.linearGradient(c, box, 'vertical', `fill${self.model.uid}-${i}`)) : colors,\n            curve = this.curve(model.curve);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top));\n\n        areas.exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        var areagroup = areas\n            .enter()\n                .append('g')\n                .classed('areagroup', true)\n            .merge(areas)\n                .selectAll('path')\n                .data(arealine);\n\n        areagroup\n            .enter()\n                .append('path')\n                .attr('class', d => d.type)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('d', d => d.draw)\n            .merge(areagroup)\n                .transition(this.transition('area'))\n                .attr('d', d => d.draw)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('fill-opacity', col.fillOpacity)\n                .attr('stroke-width', model.lineWidth)\n                .attr('stroke-opacity', col.strokeOpacity);\n\n        areagroup\n            .exit()\n            .transition()\n            .style('opacity', 0)\n            .remove();\n\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, scaleX, box, domainX[0]);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, scaleY, box, domainY[0]);\n\n        if (info.data.length > 1)\n            this.legend({\n                type: 'color',\n                scale: this.getScale('ordinal').range(colors).domain(info.data.map(d => d.key))\n            }, box);\n\n        function xx(d) {\n            return scaleX(d.data[x]);\n        }\n\n        function y0(d) {\n            return scaleY(d[0]);\n        }\n\n        function y1(d) {\n            return scaleY(d[1]);\n        }\n\n        function arealine (d) {\n            var area_ = area()\n                            .curve(curve)\n                            .x(xx)\n                            .y1(y1)\n                            .y0(y0),\n                line_ = line()\n                            .curve(curve)\n                            .x(xx)\n                            .y(y1),\n                c = color(colors[d.index]);\n\n            return [\n                {\n                    type: 'area',\n                    data: d,\n                    draw: area_(d),\n                    stroke: 'none',\n                    fill: fill[d.index]\n                },\n                {\n                    type: 'line',\n                    data: d,\n                    draw: line_(d),\n                    fill: 'none',\n                    stroke: c.darker(model.lineDarken)\n                }\n            ];\n        }\n    },\n\n    ticks (size, spacing) {\n        return Math.max(Math.floor(size/spacing), 1);\n    }\n});\n","import {pie, arc} from 'd3-shape';\nimport {scaleOrdinal} from 'd3-scale';\nimport {map} from 'd3-collection';\nimport {viewExpression} from 'd3-view';\nimport {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport {sizeValue} from '../utils/size';\nimport textWrap from '../utils/text-wrapping';\n\n\nconst pi = Math.PI;\nconst rad = pi/180;\n\n\nexport const proportional = {\n\n    proportionalData (frame, field) {\n        return frame.dimension(field).top(Infinity);\n    },\n\n    total (field) {\n        var total = 0;\n\n        function value (d) {\n            total += d[field];\n            return d[field];\n        }\n\n        value.total = () => total;\n        return value;\n    }\n};\n\n//\n//  Pie Chart\n//  =============\n//\nexport default createChart('piechart', proportional, {\n\n    options: {\n        // The data values from this field will be encoded as angular spans.\n        // If omitted, all pie slices will have equal spans\n        field: 'data',\n        label: 'label',\n        startAngle: 0,\n        endAngle: 360,\n        sort: false,\n        innerRadius: 0,\n        padAngle: 0,\n        cornerRadius: 0,\n        lineWidth: 1,\n        //\n        fractionFormat: '.1%',\n        legendType: 'color',\n        legendLabel: \"label + ' - ' + format(fraction)\",\n        //\n        // display information in the center of the pie chart\n        // Should be used with innerRadius greater than 0\n        center: null,\n        centerOpacity: 1,\n        centerFontSize: '7%'\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            field = model.field,\n            box = this.boundingBox(),\n            outerRadius = Math.min(box.innerWidth, box.innerHeight)/2,\n            innerRadius = sizeValue(model.innerRadius, outerRadius),\n            total = this.total(field),\n            angles = pie()\n                .padAngle(rad*model.padAngle)\n                .startAngle(rad*model.startAngle)\n                .endAngle(rad*model.endAngle)\n                .value(total),\n            arcs = arc()\n                .innerRadius(innerRadius)\n                .outerRadius(outerRadius)\n                .cornerRadius(model.cornerRadius),\n            group = this.group(),\n            chart = this.group('chart'),\n            data = angles(this.proportionalData(frame, field)),\n            fill = this.fill(data),\n            slices = chart.selectAll('.slice').data(data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left+box.innerWidth/2, box.margin.top+box.innerHeight/2));\n\n        slices\n            .enter()\n                .append('path')\n                .attr('class', 'slice')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(slices)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', arcs)\n                .attr('fill', fill);\n\n        slices.exit().transition().remove();\n\n        if (model.center) {\n            var d = map(data.reduce((o, d) => {o[d.data.label] = d; return o;})),\n                text = this.dataStore.eval(model.center, {total: total.total(), d: d});\n            if (text) {\n                var font = this.getModel('font'),\n                    size = this.dim(model.centerFontSize, box.innerWidth),\n                    center = chart.selectAll('.info').data([text]);\n                    \n                center\n                    .enter()\n                        .append('text')\n                        .attr('class', 'info')\n                        .attr(\"text-anchor\", \"middle\")\n                        .attr(\"alignment-baseline\", \"middle\")\n                        .style(\"font-size\", `${size}px`)\n                        .style('fill-opacity', 0)\n                    .merge(center)\n                        .text(text)\n                        .style('fill-opacity', model.centerOpacity)\n                        .style('fill', font.stroke)\n                        .call(textWrap, 1.5*(innerRadius || outerRadius));\n\n            }\n        }\n        if (!model.legendType) return;\n        total = total.total();\n        var expr = viewExpression(model.legendLabel),\n            fmt = format(model.fractionFormat),\n            labels = data.map((d, idx) => {\n                return expr.eval({\n                    d: d,\n                    value: d.value,\n                    format: fmt,\n                    total: total,\n                    fraction: d.value/total,\n                    label: d.data[model.label] || idx\n                });\n            });\n        this.legend({\n            scale: scaleOrdinal().domain(labels).range(fill.colors)\n        }, box);\n    }\n});\n","import constant from \"../utils/constant\";\nimport descending from \"../utils/descending\";\nimport identity from \"../utils/identity\";\n\n\nexport default function () {\n    var value = identity,\n        pad = constant(0),\n        height = 1,\n        base = 1;\n\n    function funnel (data) {\n        let i, j, points, fr,\n            v0, bi, pim, pi=0, h=0;\n\n        var n = data.length,\n            polygons = new Array(n),\n            index = new Array(n),\n            hi = height/n;\n\n        // evaluate the value for each data point\n        for (i=0; i<n; ++i) {\n            polygons[index[i] = i] = +value(data[i], i, data);\n        }\n\n        // Sort the polygons\n        index.sort((i, j) => {return descending(polygons[i], polygons[j]);});\n\n        // Compute the polygons! They are stored in the original data's order.\n        v0 = polygons[index[0]];\n\n        for (i=0; i<n; ++i) {\n            j = index[i];\n            fr = polygons[j]/v0;\n            bi = base*fr;\n            pim = pi;\n            pi = height*(i === n-1 ? 0 : 0.5*pad(fr, i));\n            points = [\n                [bi/2, h+pim],\n                [-bi/2, h+pim],\n                [-bi/2, h+hi-pi],\n                [bi/2, h+hi-pi]\n            ];\n            h += hi;\n            polygons[j] = {\n                index: i,\n                value: polygons[j],\n                fraction: fr,\n                points: points,\n                data: data[j]\n            };\n        }\n        return polygons;\n    }\n\n    funnel.value = function(_) {\n        return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), funnel) : value;\n    };\n\n    funnel.base = function (_) {\n        return arguments.length ? (base = _, funnel) : base;\n    };\n\n    funnel.height = function (_) {\n        return arguments.length ? (height = _, funnel) : height;\n    };\n\n    funnel.pad = function(_) {\n        return arguments.length ? (pad = typeof _ === \"function\" ? _ : constant(+_), funnel) : pad;\n    };\n\n    return funnel;\n}\n","//\n//  Custom Symbol type\n//  =====================\n//\n//  Draw a polygon given an array of points\n//  This can be used as type in a d3-shape symbol\nexport default function (points) {\n\n    return {\n        draw (context) {\n            points.forEach((point, idx) => {\n                if (!idx) context.moveTo(point[0], point[1]);\n                else context.lineTo(point[0], point[1]);\n            });\n            context.closePath();\n        }\n    };\n}\n","import {symbol} from 'd3-shape';\nimport {viewExpression} from 'd3-view';\n\nimport createChart from '../core/chart';\nimport pyramid from '../transforms/pyramid';\nimport funnel from '../transforms/funnel';\nimport polygon from '../utils/polygon';\nimport {proportional} from './pie';\n\n\nexport default createChart('pyramidchart', proportional, {\n\n    options: {\n        field: 'data',\n        label: 'label',\n        pad: 0.005,\n        lineWidth: 1,\n        inverted: false,\n        funnel: false,\n        legendType: 'color',\n        invereted: false,\n        legendLabel: \"label + ' - ' + format('.1%', fraction)\"\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            field = model.field,\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            polygons = (model.funnel ? funnel () : pyramid())\n                .pad(model.pad)\n                .value(d => d[field]),\n            scaleX = this.getScale('linear').rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale('linear').rangeRound(model.inverted ? [box.innerHeight, 0] : [0, box.innerHeight]),\n            data = frame.new(polygons(this.proportionalData(frame, field))).dimension('fraction').bottom(Infinity),\n            marks = symbol().type(d => polygon(d.points.map(xy => [scaleX(xy[0]), scaleY(xy[1])]))).size(1),\n            fill = this.fill(data),\n            group = this.group(),\n            chart = this.group('chart'),\n            segments = chart\n                .style(\"shape-rendering\", \"crispEdges\")\n                .selectAll('.segment').data(data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left+box.innerWidth/2, box.margin.top));\n\n        segments\n            .enter()\n                .append('path')\n                .attr('class', 'segment')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', marks)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(segments)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', marks)\n                .attr('fill', fill);\n\n        segments.exit().remove();\n\n        if (!model.legendType) return;\n        var expr = viewExpression(model.legendLabel),\n            self = this,\n            labels = data.map((d, idx) => {\n                return expr.eval(self.getContext({\n                    d: d,\n                    value: d.value,\n                    fraction: d.fraction,\n                    label: d.data[model.label] || idx\n                }));\n            });\n        this.legend({\n            scale: this.getScale('ordinal').domain(labels).range(fill.colors)\n        }, box);\n    }\n\n});\n","import {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport camelFunction from '../utils/camelfunction';\nimport accessor from '../utils/accessor';\nimport colorContrast from '../utils/contrast';\n\n//\n//  Treemap\n//  =============\n//\nexport default createChart('treemap', {\n    requires: ['d3-hierarchy'],\n\n    options: {\n        label: 'label',\n        field: 'data',\n        padding: 2,\n        tile: 'resquarify',\n        format: ','\n    },\n\n    doDraw (frame, d3) {\n        var model = this.getModel(),\n            font = this.getModel('font'),\n            box = this.boundingBox(),\n            labelAccessor = accessor(model.label),\n            valueAccessor = accessor(model.field),\n            valueFormat = format(model.format),\n            root = d3.hierarchy(rootData(frame.data))\n                    .sum(valueAccessor)\n                    .sort((a, b) => b.value - a.value)\n                    .eachBefore(dataColor),\n            treemap = d3.treemap()\n                        .tile(camelFunction(d3, 'treemap', model.tile, true))\n                        .size([box.innerWidth, box.innerHeight])\n                        .round(true)\n                        .padding(model.padding),\n            colors = this.fill(root.children).colors,\n            group = this.group()\n                        .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                        .style(\"shape-rendering\", \"crispEdges\"),\n            leaves = treemap(root).leaves(),\n            cell = group.selectAll('g').data(leaves),\n            self = this;\n\n        this.paper().size(box);\n        cell.exit().remove();\n\n        cell = cell\n            .enter()\n                .append('g')\n                .attr(\"transform\", d => this.translate(d.x0, d.y0))\n            .merge(cell)\n                .attr(\"transform\", d => this.translate(d.x0, d.y0));\n\n        var rects = cell.selectAll('rect').data(singleData);\n\n        rects.enter()\n                .append('rect')\n                .attr(\"width\", d => d.x1 - d.x0)\n                .attr(\"height\", d => d.y1 - d.y0)\n                .attr(\"fill\", d => colors[d.data._counter])\n                .attr('stroke', 'none')\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(rects)\n                .transition()\n                .attr(\"width\", d => d.x1 - d.x0)\n                .attr(\"height\", d => d.y1 - d.y0)\n                .attr(\"fill\", d => colors[d.data._counter]);\n\n        rects = cell.selectAll('text').data(singleData);\n        rects.enter()\n            .append(\"text\")\n            .style('fill', d => colorContrast(colors[d.data._counter], '#fff', font.stroke))\n            .selectAll(\"tspan\")\n                .data(textData)\n                .enter()\n                    .append(\"tspan\")\n                    .style('font-size', d => d.size)\n                    .attr(\"x\", 4)\n                    .attr(\"y\", (d, i) => 1.5*d.size + i * 1.2 * d.size)\n                    .text(d => d.text);\n\n\n        function dataColor (d) {\n            if (!d.parent) d.data._counter = 0;\n            else {\n                d.data._counter = d.parent.data._counter;\n                d.parent.data._counter++;\n            }\n        }\n\n        function rootData (data) {\n            data = {children: hideChildren(data)};\n            data[model.label] = 'root';\n            return data;\n        }\n\n        function textData (d) {\n            var size = self.font({height: Math.min(d.x1 - d.x0, d.y1 - d.y0)}),\n                text = labelAccessor(d.data).split(/(?=[A-Z][^A-Z])/g);\n            text.push(valueFormat(d.value));\n            return text.map(t => {return {size:size, text:t};});\n        }\n\n        function singleData (d) {\n            return [d];\n        }\n\n        function hideChildren (data) {\n            let children;\n            return data.map(d => {\n                children = d.children;\n                if (children) {\n                    d._children = hideChildren(children);\n                    delete d.children;\n                }\n                return d;\n            });\n        }\n    }\n});\n","import createChart from '../core/chart';\nimport textWrap from '../utils/text-wrapping';\n\n\nexport default createChart('text', {\n\n    options: {\n        label: 'label',\n        data: 'data',\n        text: 'label + \" \" + data',\n        sizeReduction: 0.7\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            font = this.getModel('font'),\n            box = this.boundingBox(),\n            size = this.font(box),\n            group = this.group(),\n            chart = this.group('chart'),\n            words = chart.selectAll('text').data(frame.data),\n            width = box.innerWidth/frame.data.length,\n            widthWrap = 0.4*width,\n            store = this.dataStore,\n            stroke = this.modelProperty('stroke', font);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left, box.margin.top + box.innerHeight/2));\n\n        words\n            .enter()\n                .append('text')\n                .attr(\"transform\", shift)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"alignment-baseline\", \"middle\")\n                .style('fill', stroke)\n            .merge(words)\n                .attr(\"transform\", shift)\n                .text(d => store.eval(model.text, d))\n                .style('fill', stroke)\n                .call(textWrap, widthWrap, sizing);\n\n        group.exit().remove();\n\n\n        function shift (d, i) {\n            return self.translate((i+0.5)*width, 0);\n        }\n\n        function sizing (d, i) {\n            var s = size;\n            if (i) s = model.sizeReduction*size;\n            self.select(this).attr('font-size', `${s}px`);\n        }\n    }\n});\n","import {extent, range} from 'd3-array';\nimport {map} from 'd3-collection';\n\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport createChart from '../core/chart';\nimport colorContrast from '../utils/contrast';\nimport textWrap from '../utils/text-wrapping';\nimport {lineDrawing} from './line';\n//\n//  Heatmap\n//  =============\n//\n//  A heatmap is a graphical representation of data where the individual\n//  values contained in a matrix are represented as colors.\n//  This chart type allow to specify to types of layout:\n//  * heatmap - classical heatmap\n//  * punchcard - the z dimension is converted into different sizes of the shape elements\n//  * contour - similar to heatmap but continous rather than descrete\nexport default createChart('heatmap', lineDrawing, {\n\n    options: {\n        shape: 'square',\n        layout: 'heatmap',\n        buckets: 10,\n        pad: 0.005,     // padding for heatmap & punchcard\n        x: 'x',\n        y: 'y',\n        z: 'data',\n        //\n        label: null,    // expression for label text\n        //\n        axisX: true,\n        axisY: true,\n        reverseColors: true,\n        tableColors: null\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            font = this.getModel('font'),\n            layout = model.layout,\n            box = this.boundingBox(),\n            zrange = extent(frame.data, accessor(model.z));\n\n        if (zrange[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        var heat = this.heatmap(layout, frame, box, zrange),\n            dx = (box.innerWidth - heat.width)/2,\n            dy = (box.innerHeight - heat.height)/2,\n            shape = this.getSymbol(model.shape).size(d => d.size*d.size),\n            group = this.group(),\n            chart = this.group('chart'),\n            shapes = chart.selectAll('.shape').data(heat.data);\n\n        this.applyTransform(group, this.translate(box.padding.left, box.padding.top));\n        this.applyTransform(chart, this.translate(box.margin.left + dx, box.margin.top + dy));\n\n        if (range[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        shapes\n            .enter()\n                .append('path')\n                .classed('shape', true)\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill\", d => d.color)\n                .attr(\"fill-opacity\", 0)\n                .attr(\"stroke-opacity\", 0)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(shapes)\n                .transition(this.transition())\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill-opacity\", color.fillOpacity)\n                .attr(\"fill\", d => d.color)\n                .attr(\"stroke-opacity\", color.strokeOpacity)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape);\n\n        // add labels\n        if (model.label && layout === 'heatmap') {\n            var fontSize = `${this.font(box)}px`,\n                labels = chart.selectAll('.labels').data(heat.data);\n            labels\n                .enter()\n                    .append('text')\n                    .classed('labels', true)\n                    .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                    .style(\"text-anchor\", \"middle\")\n                    .style(\"alignment-baseline\", \"middle\")\n                    .style(\"fill\", fillLabel)\n                    .style('font-size', fontSize)\n                    .text(heatLabel)\n                .merge(labels)\n                    .text(heatLabel)\n                    .style('font-size', fontSize)\n                    .call(textWrap, Math.ceil(0.8*heat.size))\n                    .transition(this.transition('text'))\n                    .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                    .style(\"fill\", fillLabel);\n        }\n\n        var bb = {\n            innerWidth: heat.width,\n            innerHeight: heat.height,\n            margin: {\n                top: box.margin.top + dy,\n                left: box.margin.left + dx\n            }\n        };\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, heat.scaleX, bb);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, heat.scaleY, bb);\n\n        if (layout === 'heatmap')\n            this.legend({\n                type: 'color',\n                shape: model.shape,\n                scale: heat.colors\n            }, box);\n        else if (layout === 'punchcard')\n            this.legend({\n                type: 'size',\n                shape: model.shape,\n                scale: heat.sizes\n            }, box);\n\n        function heatLabel (d) {\n            return d.data[model.label];\n        }\n\n        function fillLabel (d) {\n            return colorContrast(d.color, '#fff', font.stroke);\n        }\n    },\n\n    heatmap (layout, frame, box, zrange) {\n        var model = this.getModel(),\n            pad = model.pad,\n            x = model.x,\n            y = model.y,\n            z = model.z,\n            gx = frame.dimension(model.x).group().size(),\n            gy = frame.dimension(model.y).group().size(),\n            buckets = Math.min(model.buckets, gx*gy),\n            dx = (1 - pad*(gx + 1))*box.innerWidth/gx,\n            dy = (1 - pad*(gy + 1))*box.innerHeight/gy,\n            data = [],\n            labelsX = [],\n            labelsY = [],\n            xp = map(), yp = map();\n\n        let xv, yv, zv, i, j, colors, sizes, dd, width, height;\n\n        if (dx < dy) {\n            dd = dx;\n            width = box.innerWidth;\n            pad = width*pad;\n            height = gy*(dd + pad) + pad;\n        } else {\n            dd = dy;\n            height = box.innerHeight;\n            pad = height*pad;\n            width = gx*(dd + pad) + pad;\n        }\n\n        zrange = niceRange(zrange, buckets);\n\n        if (layout === 'heatmap') {\n            var cols = this.fill(range(buckets)).colors;\n            if (model.reverseColors) cols = cols.reverse();\n            colors = this.getScale('quantile').range(cols).domain(zrange);\n            sizes = () => 1;\n        } else {\n            var color = this.colors(1)[0];\n            colors = () => color;\n            sizes = this.getScale('quantile').range(range(buckets).map(s => (s+1)/buckets)).domain(zrange);\n        }\n        frame.data.forEach(d => {\n            xv = d[x];\n            yv = d[y];\n            zv = d[z];\n            if (!xp.has(xv)) {\n                xp.set(xv, labelsX.length);\n                labelsX.push(xv);\n            }\n            if (!yp.has(yv)) {\n                yp.set(yv, labelsY.length);\n                labelsY.push(yv);\n            }\n            i = xp.get(xv);\n            j = yp.get(yv);\n            data.push({\n                i: i,\n                j: j,\n                x: pad + dd/2 + i*(dd + pad),\n                y: pad + dd/2 + j*(dd + pad),\n                color: colors(zv),\n                size: dd*sizes(zv),\n                data: d\n            });\n        });\n        return {\n            data: data,\n            size: dd,\n            width: width,\n            height: height,\n            scaleX: this.getScale('band').domain(labelsX).range([0, width]),\n            scaleY: this.getScale('band').domain(labelsY).range([0, height]),\n            colors: colors,\n            sizes: sizes\n        };\n    }\n});\n","import {extent} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport camelFunction from '../utils/camelfunction';\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport warn from '../utils/warn';\n\n//\n//  GeoChart\n//  =============\n//\n//  A chart displaying a geographical map\nexport default createChart('geochart', {\n    // load these libraries - add 'leaflet'?\n    requires: ['d3-geo', 'topojson', 'd3-geo-projection'],\n\n    options: {\n        // Geometry data to display in this chart - must be in the topojson source\n        geometry: 'countries',\n        //\n        // for choropleth maps\n        // geoKey and dataKey are used to match geometry with data\n        geoKey: 'id',\n        dataKey: 'id',\n        dataLabelKey : 'label',\n        dataValueKey: 'value',\n        // how many color buckets to visualise\n        buckets: 10,\n        choroplethScale: 'quantile',\n        //\n        // specify one of the topojson geometry object for calculating\n        // the projected bounding box\n        boundGeometry: null,\n        // how much to zoom out, 1 = no zoom out, 0.95 to 0.8 are sensible values\n        boundScaleFactor: 0.9,\n        //\n        projection: null,\n        graticule: false,\n        leaflet: false,\n        scale: 200,\n        //\n        // mouseover strategy\n        mouseover: ['darken', 'tooltip']\n    },\n\n    doDraw (frame, geo) {\n        var info = this.getGeoData(frame);\n        if (!info) return warn ('Topojson data not available - cannot draw topology');\n        if (!this._geoPath) this.createGeoPath(geo, info);\n        this.update(geo, info);\n    },\n\n    update (geo, info) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            group = this.group(),\n            geogroup = this.group('geo'),\n            path = this._geoPath,\n            geometryObject = info.topology.objects[model.geometry],\n            geometryData = geometryObject ? geo.feature(info.topology, geometryObject).features : null,\n            paths = geometryData ? geogroup.selectAll('.geometry').data(geometryData) : null,\n            fill = 'none';\n\n        if (!paths) {\n            var objects = Object.keys(info.topology.objects).map(key => `\"${key}\"`).join(', ');\n            return warn(`Could not find *geometry* \"${model.geometry}\" in [${objects}] - cannot draw geochart`);\n        }\n\n        group\n            .transition(this.transition('group0'))\n            .attr(\"transform\", this.translate(box.padding.left, box.padding.top));\n        geogroup\n            .transition(this.transition('group1'))\n            .attr(\"transform\", this.translate(box.margin.left, box.margin.top));\n\n        this.center(geo, info);\n        if (info.data) fill = this.choropleth(info.data, box);\n\n        paths\n            .enter()\n                .append(\"path\")\n                .attr(\"class\", \"geometry\")\n                .attr(\"d\", path)\n                .style('fill', 'none')\n                .style(\"stroke\", color.stroke)\n                .style(\"stroke-opacity\", 0)\n                .style(\"fill-opacity\", 0)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(paths)\n                .transition(this.transition('geometry'))\n                .attr(\"d\", path)\n                .style(\"stroke\", color.stroke)\n                .style(\"stroke-opacity\", color.strokeOpacity)\n                .style(\"fill\", fill)\n                .style(\"fill-opacity\", color.fillOpacity);\n\n        paths\n            .exit()\n            .remove();\n    },\n\n    createGeoPath (geo, info) {\n        var model = this.getModel(),\n            projection = camelFunction(geo, 'geo', info.projection).scale(model.scale),\n            path = geo.geoPath().projection(projection),\n            self = this,\n            lefletMap;\n\n        this._geoPath = path;\n        this.center(geo, info);\n\n        if (model.leaflet) {\n            var leafletId = `leaflet-${model.uid}`,\n                paper = this.paper();\n            this.visualParent.paper\n                    .append('div')\n                    .attr('id', leafletId);\n            lefletMap = new geo.Map(leafletId, {center: [37.8, -96.9], zoom: 4})\n                            .addLayer(new geo.TileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\")),\n            lefletMap.getPanes().overlayPane.appendChild(paper.element);\n            projection = geo.transform({point: projectPoint});\n            lefletMap.on(\"viewreset\", () => self.update(geo, info));\n        }\n\n        return path;\n\n        function projectPoint(x, y) {\n            var point = lefletMap.latLngToLayerPoint(new geo.LatLng(y, x));\n            this.stream.point(point.x, point.y);\n        }\n    },\n\n    getGeoData (frame) {\n        var info = {};\n        if (frame.type === 'frameCollection')\n            frame.frames.each(frame => {\n                if (frame.type === 'Topology') info.topology = frame;\n                else if (frame.type === 'dataframe') info.data = frame;\n            });\n        else if (frame.type === 'Topology')\n            info.topology = frame;\n        if (info.topology) {\n            var model = this.getModel();\n            if (model.projection) info.projection = model.proection;\n            else {\n                info.projection = 'kavrayskiy7';\n            }\n            return info;\n        }\n    },\n\n    center (geo, info) {\n        var model = this.getModel();\n        if (!model.boundGeometry) return;\n\n        var path = this._geoPath,\n            projection = path.projection(),\n            box = this.boundingBox(),\n            boundObject = info.topology.objects[model.boundGeometry],\n            boundGeometry = boundObject ? geo.feature(info.topology, boundObject).features : null;\n\n        if (!boundGeometry) return warn(`Could not find *boundGeometry* \"${model.boundGeometry}\" for centering - skip centering geochart`);\n\n        projection.scale(1).translate([0, 0]);\n\n        var b = path.bounds(boundGeometry[0]),\n            topLeft = b[0],\n            bottomRight = b[1],\n            scaleX = (bottomRight[0] - topLeft[0]) / box.innerWidth,\n            scaleY = (bottomRight[1] - topLeft[1]) / box.innerHeight,\n            scale = Math.round(model.boundScaleFactor / Math.max(scaleX, scaleY)),\n            translate = [\n                (box.innerWidth - scale * (bottomRight[0] + topLeft[0])) / 2,\n                (box.innerHeight - scale * (bottomRight[1] + topLeft[1])) / 2\n            ];\n\n        projection.scale(scale).translate(translate);\n    },\n\n    // choropleth map based on data\n    choropleth (frame, box) {\n        var model = this.getModel(),\n            buckets = Math.min(model.buckets, frame.data.length),\n            dataKey = model.dataKey,\n            dataLabelKey = model.dataLabelKey,\n            dataValueKey = model.dataValueKey,\n            geoKey = model.geoKey,\n            valueRange = niceRange(extent(frame.data, accessor(dataValueKey)), buckets),\n            colors = this.getScale(model.choroplethScale).range(this.colors(buckets).reverse()).domain(valueRange),\n            values = frame.data.reduce((o, d) => {o[d[dataKey]] = d; return o;}, {});\n        let key, value;\n\n        this.legend({\n            type: 'color',\n            scale: colors\n        }, box);\n\n        return d => {\n            key = d.properties[geoKey] || d[geoKey];\n            value = values[key];\n            d.choropleth = {\n                label: value[dataLabelKey] || key,\n                value: value[dataValueKey],\n                color: colors(value[dataValueKey])\n            };\n            return d.choropleth.color;\n        };\n    }\n\n});\n","import {extent, max} from 'd3-array';\nimport {assign} from 'd3-let';\n\nimport createChart from '../core/chart';\nimport camelFunction from '../utils/camelfunction';\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport warn from '../utils/warn';\n\n//\n//  GeoChart\n//  =============\n//\n//  A chart displaying a geographical map\nexport default createChart('geochart2', {\n    // load these libraries - add 'leaflet'?\n    requires: ['d3-geo', 'topojson', 'd3-geo-projection'],\n\n    options: {\n        // Geometry data to display in this chart - must be in the topojson source\n        geometry: 'countries',\n        //\n        // for choropleth maps\n        // geoKey and dataKey are used to match geometry with data\n        geoKey: 'id',\n        dataKey: 'id',\n        dataLabelKey : 'label',\n        dataValueKey: 'value',\n        neighbors: false,\n        // how many color buckets to visualise\n        buckets: 10,\n        choroplethScale: 'quantile',\n        //\n        // specify one of the topojson geometry object for calculating\n        // the projected bounding box\n        boundGeometry: null,\n        // how much to zoom out, 1 = no zoom out, 0.95 to 0.8 are sensible values\n        boundScaleFactor: 0.9,\n        //\n        projection: 'kavrayskiy7',\n        graticule: false,\n        leaflet: false,\n        scale: 200,\n        //\n        // mouseover strategy\n        mouseover: ['darken', 'tooltip']\n    },\n\n    doDraw (frame, geo) {\n        var info = dataInfo(frame);\n        if (!info.topology) return warn ('Topojson data not available - cannot draw topology');\n        if (!this._geoPath) this.createGeoPath(geo, info);\n        this.update(geo, info);\n    },\n\n    update (geo, info) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            group = this.group(),\n            geogroup = this.group('geo'),\n            path = this._geoPath,\n            data = geodata(geo, info, model);\n\n        if (!data) {\n            var objects = Object.keys(info.topology.objects).map(key => `\"${key}\"`).join(', ');\n            return warn(`Could not find *geometry* \"${model.geometry}\" in [${objects}] - cannot draw geochart`);\n        }\n\n        group\n            .transition(this.transition('group0'))\n            .attr(\"transform\", this.translate(box.padding.left, box.padding.top));\n        geogroup\n            .transition(this.transition('group1'))\n            .attr(\"transform\", this.translate(box.margin.left, box.margin.top));\n\n        var paths = geogroup.selectAll('.geometry').data(data),\n            fill = this.choropleth(data, box);\n\n        this.center(geo, info);\n\n        paths\n            .enter()\n                .append(\"path\")\n                .attr(\"class\", \"geometry\")\n                .attr(\"d\", path)\n                .style('fill', 'none')\n                .style(\"stroke\", this.modelProperty('stroke', color))\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(paths)\n                .transition(this.transition('geometry'))\n                .attr(\"d\", path)\n                .style(\"stroke\", this.modelProperty('stroke', color))\n                .style(\"fill\", fill)\n                .style(\"fill-opacity\", color.fillOpacity);\n\n        paths\n            .exit()\n            .remove();\n    },\n\n    createGeoPath (geo, info) {\n        var model = this.getModel(),\n            projection = camelFunction(geo, 'geo', model.projection).scale(model.scale),\n            path = geo.geoPath().projection(projection),\n            self = this,\n            lefletMap;\n\n        this._geoPath = path;\n        this.center(geo, info);\n\n        if (model.leaflet) {\n            var leafletId = `leaflet-${model.uid}`,\n                paper = this.paper();\n            this.visualParent.paper\n                    .append('div')\n                    .attr('id', leafletId);\n            lefletMap = new geo.Map(leafletId, {center: [37.8, -96.9], zoom: 4})\n                            .addLayer(new geo.TileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\")),\n            lefletMap.getPanes().overlayPane.appendChild(paper.element);\n            projection = geo.transform({point: projectPoint});\n            lefletMap.on(\"viewreset\", () => self.update(geo, info));\n        }\n\n        return path;\n\n        function projectPoint(x, y) {\n            var point = lefletMap.latLngToLayerPoint(new geo.LatLng(y, x));\n            this.stream.point(point.x, point.y);\n        }\n    },\n\n    center (geo, info) {\n        var model = this.getModel();\n        if (!model.boundGeometry) return;\n\n        var path = this._geoPath,\n            projection = path.projection(),\n            box = this.boundingBox(),\n            boundObject = info.topology.objects[model.boundGeometry],\n            boundGeometry = boundObject ? geo.feature(info.topology, boundObject).features : null;\n\n        if (!boundGeometry) return warn(`Could not find *boundGeometry* \"${model.boundGeometry}\" for centering - skip centering geochart`);\n\n        projection.scale(1).translate([0, 0]);\n\n        var b = path.bounds(boundGeometry[0]),\n            topLeft = b[0],\n            bottomRight = b[1],\n            scaleX = (bottomRight[0] - topLeft[0]) / box.innerWidth,\n            scaleY = (bottomRight[1] - topLeft[1]) / box.innerHeight,\n            scale = Math.round(model.boundScaleFactor / Math.max(scaleX, scaleY)),\n            translate = [\n                (box.innerWidth - scale * (bottomRight[0] + topLeft[0])) / 2,\n                (box.innerHeight - scale * (bottomRight[1] + topLeft[1])) / 2\n            ];\n\n        projection.scale(scale).translate(translate);\n    },\n\n    // choropleth map based on data\n    choropleth (data, box) {\n        var model = this.getModel(),\n            dataLabelKey = model.dataLabelKey,\n            dataValueKey = model.dataValueKey;\n        let dataValue, valueRange, colors, buckets;\n\n        if (model.neighbors) {\n            dataValue = accessor('rank');\n            valueRange = extent(data, dataValue);\n            buckets = valueRange[1] + 1;\n        } else {\n            dataValue = (d) => d.data[dataValueKey];\n            buckets = Math.min(model.buckets, data.length);\n            valueRange = niceRange(extent(data, dataValue), buckets);\n        }\n\n        colors = this.getScale(model.choroplethScale).range(this.colors(buckets).reverse()).domain(valueRange);\n\n        this.legend({\n            type: 'color',\n            scale: colors\n        }, box);\n\n        return d => {\n            d.label = d.data[dataLabelKey] || d.id;\n            d.value = dataValue(d);\n            d.color = colors(d.value);\n            return d.color;\n        };\n    }\n\n});\n\n\nexport function dataInfo (frame) {\n    var info = {};\n    if (frame.type === 'frameCollection')\n        frame.frames.each(df => {\n            if (df.type === 'Topology') info.topology = df;\n            else if (df.type === 'dataframe') info.data = df.data;\n        });\n    else if (frame.type === 'Topology')\n        info.topology = frame;\n    return info;\n}\n\n\n//\n//  Create a geo data frame\n//  ===========================\n//\n//  * geo - d3-geo & topojson object\n//  * info - object with topology and data frame (optional)\nexport function geodata (geo, info, config) {\n    var geoKey = config.geoKey,\n        dataKey = config.dataKey;\n    let data = {}, features, key, props;\n\n    if (!info.topology) return warn('No topology object available');\n    var geometry = info.topology.objects[config.geometry];\n    if (!geometry) return warn(`Topology object ${config.geometry} is not available`);\n\n\n    var neighbors = config.neighbors ? geo.neighbors(geometry.geometries) : null;\n\n    features = geo.feature(info.topology, geometry).features;\n    if (info.data) data = info.data.reduce((o, d) => {o[d[dataKey]] = d; return o;}, {});\n\n    features = features.map(d => {\n        props = d.properties;\n        key = d[geoKey] || props[geoKey];\n        return {\n            id: key,\n            type: d.type,\n            geometry: d.geometry,\n            data: assign({}, props, data[key])\n        };\n    });\n\n    if (neighbors) features.forEach((d, i) => {\n        d.neighbors = neighbors[i];\n        d.rank = max(d.neighbors, j => features[j].rank) + 1 | 0;\n    });\n\n    return features;\n}\n","import {isArray, pop, assign} from 'd3-let';\nimport {set} from 'd3-collection';\n\nimport createVisual, {visuals} from '../core/base';\nimport {vizPrototype, chartPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nexport default function (type) {\n    var protos = [{}, vizPrototype, chartPrototype, compositePrototype];\n    for (var i=1; i<arguments.length; ++i) protos.push(arguments[i]);\n    return createVisual(type, assign.apply(undefined, protos));\n}\n\n\nconst compositePrototype = {\n\n    initialise (element) {\n        vizPrototype.initialise.call(this, element);\n        let options = this.getLayers();\n        if (!isArray(options) || !options.length) {\n            warn('a composite chart requires layers');\n            options = [];\n        }\n\n        // visual-alike API\n        Object.defineProperties(this, {\n            element : {\n                get () {\n                    return this.visualParent.element;\n                }\n            },\n            paperElement : {\n                get () {\n                    return this.visualParent.paperElement;\n                }\n            },\n            sel: {\n                get () {\n                    return this.visualParent.sel;\n                }\n            },\n            width: {\n                get () {\n                    return this.boundingBox().innerWidth;\n                }\n            },\n            height: {\n                get () {\n                    return this.boundingBox().innerHeight;\n                }\n            }\n        });\n\n\n        var self = this,\n            requires = set();\n        let viz, type, VisualClass;\n\n        this.layers = [];\n        options.forEach(layer => {\n            layer = assign({}, layer);\n            type = pop(layer, 'type');\n            VisualClass = visuals.types[type];\n            if (!VisualClass)\n                warn(`Cannot add visual type \"${type}\", not available`);\n            else {\n                layer[type] = assign({}, layer[type], self.options[type]);\n                viz = new VisualClass(self.element, layer, self);\n                if (viz.requires) viz.requires.forEach(r => requires.add(r));\n            }\n        });\n        this.requires = requires.values();\n        if (!this.requires.length) delete this.requires;\n    },\n\n    getLayers () {\n\n    },\n\n    layerOptions (layer) {\n        return assign(layer, this.options);\n    },\n\n    getPaperGroup (cname) {\n        var box = this.boundingBox(),\n            layers = this.group('layers');\n        this.applyTransform(layers, this.translate(box.margin.left, box.margin.top));\n        return this.paper().childGroup(layers, cname);\n    },\n\n    doDraw (frame, mod) {\n        var box = this.boundingBox();\n        this.applyTransform(this.group(), this.translate(box.padding.left, box.padding.top));\n        this.layers.forEach(viz => viz.doDraw(frame, mod));\n    }\n};\n","//\nexport {version as visualizeVersion} from './package.json';\n//\nexport {default as randomPath} from './src/utils/randompath';\n//\n// Data layer\nexport {default as DataStore} from './src/data/store';\nexport {default as dataSources} from './src/data/sources';\n//export {default as dataLocale} from './src/data/locale';\n\n//\n//  Core API\nexport {visuals} from './src/core/base';\nexport {default as createChart} from './src/core/chart';\nexport {default as createPaper, Svg, Div} from './src/core/paper';\nexport {default as visualTransform} from './src/transforms/base';\nexport {default as visualTransforms} from './src/transforms/index';\n//\n//  Components\nexport {default as visualComponents} from './src/components/index';\n\n// utilities\nexport {colorScales} from './src/plugins/color';\nexport {default as pyramid} from './src/transforms/pyramid';\nexport {default as niceRange} from './src/utils/nicerange';\nexport {default as slugify} from './src/utils/slugify';\n//\n//  Charts\n//  =========\n//\n//  Last import, important!\nexport {default as Visual} from './src/core/visual';\nexport {default as BarChart} from './src/charts/bar';\nexport {default as BoxChart} from './src/charts/box';\nexport {default as LineChart} from './src/charts/line';\nexport {default as AreaChart} from './src/charts/area';\nexport {default as PieChart} from './src/charts/pie';\nexport {default as PyramidChart} from './src/charts/pyramid';\nexport {default as Treemap} from './src/charts/treemap';\nexport {default as TextChart} from './src/charts/text';\nexport {default as Heatmap} from './src/charts/heatmap';\nexport {default as GeoChart} from './src/charts/geo';\nexport {default as GeoChart2} from './src/charts/geo2';\nexport {default as createCompositeChart} from './src/charts/composite';\n"],"names":["defaults","size","options","assign","t","range","S","sigma","drift","data","x","y","norm","randomNormal","dx","i","length","config","_data","isArray","isObject","resolvedPromise","asFrame","prefix","msg","logger","warn","schemes","value","isString","indexOf","split","CSV","set","isUrl","url","fetch","viewProviders","self","then","parse","response","ct","headers","get","has","text","csvParse","tsvParse","json","field","d","DataFrame","serie","store","map","defineProperties","dimensions","series","prototype","_inner","cf","crossfilter","name","keepExisting","arguments","current","dispose","accessor","dimension","top","new","Infinity","key","total","group","reduce","pivoter","Object","all","m","pk","pv","o","record","mapper","source","context","sources","Promise","getData","fc","frames","merge","mergeFrames","FrameCollection","forEach","frame","index","values","type","expression","viewExpression","model","$child","result","eval","isPromise","transform","schema","jsonValidator","dummyValidator","transformFactory","valid","validate","logError","doTransform","expr","safeEval","push","err","error","stack","a","Array","fill","operations","scalar_operations","agg","v","Math","max","min","count","array","undefined","fields","ops","as","groupby","countAll","fillArray","aggregate","op","entries","oo","entry","query","dim","q","filterAll","filter","sortby","timeseries","groups","newframe","tmp","filterExact","globalOptions","dateFormat","converters","utcParse","parseFloat","mappers","converter","each","DEFAULT_METHOD","DEFAULT_PERIOD","DEFAULT_ALPHA","MAXALPHA","method","fieldto","s","period","cumulate","buffer","splice","alpha","minmax","sum","children","bottom","cutoff","g","difference","df","zeros","z","dd","prev","applyTransforms","transforms","applyt","slice","res","ts","dataEvents","dispatch","dataSourcePrototype","transformStore","constructor","DataSource","cfg","getConfig","initDataSource","dataSource","dataName","pop","initialise","addTransforms","call","dataSources","add","remote","composite","DataStore","dataCount","isFunction","viewModel","create","p","remove","ds","cachedFrame","Error","cache","ctx","dataStore","def","n","round","pow","WIDTH","HEIGHT","sizeValue","getSize","element","width","height","getWidth","widthElement","getWidthElement","getHeight","heightElement","getHeightElement","windowHeight","el","getParentElementRect","elementWidth","elementHeight","window","innerHeight","w","getBoundingClientRect","select","left","padding","style","right","parent","node","tagName","parentNode","substring","clone","CONTAINERS","visuals","visualPrototype","fetchData","drawing","event","toString","events","on","redraw","draw","visualType","uid","visualParent","getModel","$new","$update","$on","me","refSize","minSize","maxSize","container","idx","live","getVisualSchema","viewBase","proto","opts","Visual","visualRoot","types","createVisual","append","classed","sel","layers","drawCount","__visual__","layer","activate","deactivate","fit","clear","visual","VisualClass","resize","currentSize","viewDebug","paperElement","paper","__paper","render","paperType","PaperType","papers","gname","inBrowser","observer","MutationObserver","visualManager","observe","document","documentElement","records","nodes","removedNodes","querySelectorAll","selectAll","destroy","viz","objectOnly","toUpperCase","obj","keys","$events","visualPlugins","protos","vizPrototype","chartPrototype","apply","extendVisualPrototype","plugins","active","callback","transition","getVisual","getPaperGroup","childGroup","xt","yt","extendObject","camelFunction","d3_scale","doDraw","boundingBox","_drawArgs","requires","require","args","unshift","displayError","createPaper","Paper","paperPrototype","box","attr","cname","ge","enter","Svg","svg","Div","div","menu","display","insert","refreshMenu","minHeight","maxHeight","formats","specifier","fmt","format","timeFormat","dataContext","cachedFormat","cachedFormatTime","$visual","getContext","isViz","root","setupLayer","setupVisual","addSources","$set","font","fontSizeMultiplier","resizeDelay","viewDebounce","title","__title","stroke","offset","vizHeight","vizWidth","translate","margin","innerWidth","menuTitle","number","html","px","KEYS","LEFTRIGHT","clearCache","clearBBCache","__boundingBox","calculate","$nomargins","margins","marginv","axisOrientation","axisTop","axisBottom","axisLeft","axisRight","axisDefaults","xAxis","yAxis","xAxis1","location","scale","axis","getAxis","ga","applyTransform","translateAxis","axisTitle","yAxis1","orientation","rotate","titleRotate","titleOffset","tickSize","tickSizeOuter","isDate","tickFormat","ticks","formatAxis","hide","abs","ancor","symbols","symbolCircle","symbolSquare","symbolStar","stackOrders","stackOrderAscending","stackOrderDescending","stackOrderInsideOut","stackOrderNone","stackOrderReverse","stackOffsets","stackOffsetExpand","stackOffsetDiverging","stackOffsetNone","stackOffsetSilhouette","stackOffsetWiggle","getSymbol","symbol","getStack","stackOrder","order","stackOffset","colorScales","color","scaleSequential","interpolateViridis","interpolateInferno","interpolateMagma","interpolatePlasma","interpolateWarm","interpolateCool","interpolateRainbow","interpolateCubehelixDefault","colors","opacity","reversed","scaleDef","getScale","minPoints","scaleMinPoints","interpolator","scaleOffset","npoints","points","domain","c","reverse","b","shift","brighter","modelProperty","linearGradient","col","gid","defs","grad","colto","stops","legend","legends","legendColor","legendSize","legendSymbol","vizModel","legendType","vizSize","fontSize","minFontSize","maxFontSize","orient","titleWidth","titleMinWidth","titleMaxWidth","labelFormat","shapeWidth","shapeHeight","gl","bb","getBBox","locations","topLeft","topRight","bottomLeft","bottomRight","offsetY","offsetX","constant","mouseStrategies","darkerStrategy","fillStrategy","mouse","mouseOver","__mouse_over__","strategy","over","mouseOut","out","darker","filldarker","darkerFactor","fillColor","tooltip","noop","tooltipHtml","show","functor","point","locationCallbacks","selectNode","body","createSVGPoint","target","snode","content","poffset","dir","scrollTop","scrollLeft","coords","bbox","getScreenBBox","offsetWidth","offsetHeight","e","targetel","getScreenCTM","matrix","tbbox","nw","matrixTransform","ne","se","sw","expand","__expanded","hasMargin","button","floor","buttonText","collapseText","expandText","firstPass","radius","textColor","fontFamily","family","click","fillOver","pd","mg","uname","idname","duration","brushX","brushY","brush","vizComponent","props","attrs","inner","getSchema","build","input","catch","createElement","class","VisualContainer","visualDashboard","visualDrawOnMount","addVisual","vm","addComponent","dashboard","NaN","identity","pad","base","pyramid","j","k","fraction","hi","v0","ph","pj","r","polygons","sort","descending","sqrt","_","splits","x0","x1","log10","ndx","ceil","nx0","str","replace","toLowerCase","from","to","l","RegExp","charAt","white","black","dy","wd","lineHeight","lines","word","words","done","tspan","join","getComputedTextLength","normalize","grouper","stacked","labels","pivot","normalizeData","GroupedData","vals","extent","acc","acc0","acc1","curves","lineDrawing","curveNatural","ranges","scaleX","scaleY","createChart","info","domainX","rangeX","domainY","rangeY","sx","rangeRound","sy","nice","chart","sxshift","line","xl","yl","curve","bandwidth","lineWidth","line_","exit","axisX","axisY","baselines","heightShifts","h","barChart","VerticalBarChart","HorizontalBarChart","gframe","sz","grouped","vertical","init","barChartPrototype","bars","xrect","yrect","yi","rects","y0","bardim","stackedData","label","baseline","labelLocation","heightShift","labelWidth","labelOffset","labelTranslate","fillLabel","labelText","textWrap","labelAlign","colorContrast","paddingInner","maxValue","gx","gh","groupData","gy","strokeOpacity","getDataInfo","boxplot","Number","whiskers","boxWhiskers","quartiles","boxQuartiles","ascending","whiskerData","whiskerIndices","concat","scaleLinear","__chart__","center","quartileData","medianLine","whisker","outlier","outlierIndices","boxTick","whiskerTick","quantile","areas","gradient","areagroup","arealine","fillOpacity","xx","y1","area_","area","lineDarken","spacing","pi","PI","rad","proportional","outerRadius","innerRadius","angles","pie","padAngle","startAngle","endAngle","arcs","arc","cornerRadius","proportionalData","slices","centerFontSize","centerOpacity","legendLabel","fractionFormat","scaleOrdinal","funnel","fr","bi","pim","moveTo","lineTo","closePath","inverted","marks","polygon","xy","segments","d3","labelAccessor","valueAccessor","valueFormat","hierarchy","rootData","eachBefore","dataColor","treemap","tile","leaves","cell","singleData","_counter","textData","hideChildren","_children","widthWrap","sizing","sizeReduction","layout","zrange","heat","heatmap","shape","shapes","heatLabel","sizes","buckets","labelsX","labelsY","xp","yp","xv","yv","zv","niceRange","cols","reverseColors","geo","getGeoData","_geoPath","createGeoPath","update","geogroup","path","geometryObject","topology","objects","geometry","geometryData","feature","features","paths","choropleth","projection","geoPath","lefletMap","leaflet","leafletId","Map","zoom","addLayer","TileLayer","getPanes","overlayPane","appendChild","projectPoint","latLngToLayerPoint","LatLng","stream","proection","boundGeometry","boundObject","bounds","boundScaleFactor","dataKey","dataLabelKey","dataValueKey","geoKey","valueRange","choroplethScale","properties","dataInfo","geodata","dataValue","neighbors","id","geometries","rank","compositePrototype","getLayers","mod"],"mappings":"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"}
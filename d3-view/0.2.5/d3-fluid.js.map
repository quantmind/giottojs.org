{"version":3,"file":"d3-fluid.js","sources":["../app/components/view.js","../app/components/sidenav.js","../app/components/metadata.js","../app/components/card.js","../app/components/live.js","../app/components/topnav.js","../app/components/dev.js","../app/start.js"],"sourcesContent":["import {viewForms, viewBootstrapForms} from 'd3-view';\nimport {viewMarked, viewRouter, viewAlert, viewModal, viewIcons} from 'd3-view-components';\n\n\nexport default function (vm) {\n    vm.use(viewForms)\n        .use(viewBootstrapForms)\n        .use(viewModal)\n        .use(viewRouter)\n        .use(viewIcons);\n\n    vm.addComponent('markdown', viewMarked);\n    vm.addComponent('alerts', viewAlert);\n}\n","import {viewSidebar, viewActive, viewCollapse} from 'd3-view-components';\n\nfunction template (ctx) {\n    return (`\n        <sidebar id=\"main\"\n            data-brand=\"title\"\n            data-brand-url=\"/\"\n            data-sidebar-toggle='sidebarToggle'\n            data-primary-items='primaryItems'\n            data-navbar-items='[]'\n            data-navbar-title=\"title\"\n            data-navbar-title-Url=\"currentUrl\">\n            <markdown>${ctx.content}</markdown>\n            ${ctx.footer}\n        </sidebar>\n    `);\n}\n\n\nexport default {\n    components: {\n        sidebar: viewSidebar\n    },\n\n    directives: {\n        collapse: viewCollapse,\n        active: viewActive\n    },\n\n    render (props, attrs, el) {\n        const\n            content = this.select(el).html(),\n            sidenav = this.model[this.name] || this.model.$new(),\n            footer = '';\n        if (!sidenav.primaryItems)\n            return this.json('nav.json').then(response => {\n                sidenav.$set('primaryItems', response.data);\n                return template({content, footer});\n            });\n        else\n            return template({content, footer});\n    }\n};\n","import {assign} from 'd3-let';\n\n\nexport default {\n\n    install (vm, metadata) {\n        var head = vm.select('head');\n        metadata = assign(metadata || {}, head.attr('data-meta'));\n        if (!metadata.title) {\n            var t = head.select('title');\n            metadata.title = t.size() === 1 ? t.text() : '';\n        }\n        vm.model.metadata = metadata;\n        vm.events.on('mounted.metadata', bindMeta);\n    }\n};\n\n\nfunction bindMeta (vm) {\n    var head = vm.select('head');\n\n    vm.model.metadata.$on(() => {\n        let meta;\n        var data = vm.model.metadata.$data();\n        Object.keys(data).forEach(key => {\n            meta = metaHandlers[key] || metaHandlers.content;\n            meta(head, key, data[key]);\n        });\n    });\n}\n\n\nconst metaHandlers = {\n    title (head, key, value) {\n\n        var el = head.select(key);\n        if (!el.node) el = head.insert(key, \":first-child\");\n        el.text(value);\n    },\n\n    content (head, key, value) {\n        var el = head.select(`meta name=\"${key}\"`);\n        if (!el.node()) el.head.append('meta').attr('name', key);\n        el.attr('content', value);\n    }\n};\n","export default {\n    props: {\n        title: '',\n        titleTag: 'h5',\n        image: null,\n        imageHeight: null\n    },\n\n    render (props, attrs, el) {\n        var sel = this.select(el),\n            body = sel.text(),\n            card = this.createElement('div').classed('card', true);\n\n        if (body) body = `<p>${body}</p>`;\n        else body = sel.html();\n\n        if (props.image) {\n            const img = card.append('img')\n                .classed(\"card-img-top\", true)\n                .attr(\"src\", props.image)\n                .attr(\"alt\", props.imageAlt || props.title);\n            if (props.imageHeight) img.attr(\"height\", props.imageHeight);\n        }\n        const main = card.append('div').classed(\"card-body\", true);\n        if (props.title) main.append(props.titleTag).classed(\"card-title\", true).text(props.title);\n        main.append('div').html(body);\n        return card;\n    }\n};\n","//\n// Live code\n// idea from https://github.com/FormidableLabs/react-live\nexport default {\n\n    render (props, attrs, el) {\n        this._code = this.select(el).text();\n        this._mountPoint = `live-${this.uid}`;\n        el = this.createElement('div').classed('row', true);\n\n        el.append('div').classed('col-md-6', true);\n        el.append('div').classed('col-md-6', true).attr('id', this._mountPoint);\n\n        return el;\n    },\n\n    mounted () {\n        const scope = {\n            mountPoint: `#${this._mountPoint}`\n        };\n        evalCode(this._code, scope);\n    }\n};\n\n\nfunction evalCode (code, scope) {\n    const scopeKeys = Object.keys(scope);\n    const scopeValues = scopeKeys.map(key => scope[key]);\n    //const res = new Function('_poly', 'React', ...scopeKeys, code);\n    //return res(_poly, React, ...scopeValues);\n    return scopeValues;\n}\n","import {assign} from 'd3-let';\n\n\nfunction template (ctx) {\n    return (`\n        <div class=\"d3-fluid\">\n            <nav class=\"navbar navbar-expand-${ctx.collapse}\">\n                <a class=\"navbar-brand\" href=\"/\" d3-html=\"navbarBrand\"></a>\n                <ul class=\"navbar-nav ml-auto\">\n                    <li d3-for=\"item in navigationRight\" class=\"nav-item\">\n                        <a class=\"nav-link\" d3-attr-href=\"item.href\" d3-html=\"item.name\"></a>\n                    </li>\n                </ul>\n            </nav>\n            <markdown>${ctx.content}</markdown>\n            ${ctx.footer}\n        </div>\n    `);\n}\n\n\nexport default {\n    props: {\n        collapse: 'sm'\n    },\n\n    render (props, attrs, el) {\n        const\n            content = this.select(el).html(),\n            footer = '',\n            ctx = assign({content, footer}, props);\n        return template(ctx);\n    }\n};\n","export default vm => {\n    // Enable LiveReload\n    vm.select('head')\n        .append('script')\n        .attr('src', `http://${(location.host || 'localhost').split(':')[0]}:35729/livereload.js?snipver=1`);\n};\n","import {view} from 'd3-view';\nimport {pop} from 'd3-let';\n\nimport viewComponents from './components/view';\nimport sidenav from './components/sidenav';\nimport metadata from './components/metadata';\nimport card from './components/card';\nimport viewLive from './components/live';\nimport topnav from './components/topnav';\nimport dev from './components/dev';\n\nconst components = {\n    'view-live': viewLive,\n    card,\n    sidenav,\n    topnav\n};\n\n//  Create View\n//\nexport default function (root) {\n    if (!root) root = window;\n    const model = root.config ? JSON.parse(root.config) : {},\n        props = pop(model, 'meta') || {};\n\n    // Build the model-view pair\n    var vm = view({props, model, components}).use(viewComponents).use(metadata);\n\n    root.fluid = vm;\n    //\n    var el = root.document.getElementById('root');\n    vm.mount(el).then(() => {\n        if (vm.props.env === 'dev') dev(vm);\n        vm.sel.transition(150).style('opacity', 1);\n    });\n}\n"],"names":["viewForms","viewBootstrapForms","viewModal","viewRouter","viewIcons","viewMarked","viewAlert","viewSidebar","viewCollapse","viewActive","assign","template","pop","view"],"mappings":"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"}
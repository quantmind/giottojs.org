!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-collection"),require("d3-let"),require("d3-timer"),require("d3-selection"),require("d3-dispatch")):"function"==typeof define&&define.amd?define(["exports","d3-collection","d3-let","d3-timer","d3-selection","d3-dispatch"],e):e(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,e,n,r,i,o){"use strict";var a={isolated:{props:{tag:"div"},render:function(t,e,n){return this.createElement(t.tag).attr("id",e.id).attr("class",e.class).html(n.innerHTML)},createModel:function(t){var e=this.parent.model.$new(t);return e.$$view=this,e.$$name=this.name,e}}},s=new Map,u=[],l=u.map,c=u.some,d=u.hasOwnProperty;function f(t){for(var e,n,r={},i=-1,o=t.length;++i<o;)for(n in e=t[i])d.call(e,n)&&(null==e[n]?Object.defineProperty(r,n,{get:h(e,n)}):r[n]=e[n]);return r}function h(t,e){return function(){return t[e]}}function p(t){return t+""=="exports"}function v(t,e,n){arguments.length<3&&(n=e,e=t),arguments.length<2&&(n=e,e=[]),u.push(c.call(e,p)?function(t){var r={};return Promise.all(l.call(e,function(e){return p(e+="")?r:t(e)})).then(function(t){return n.apply(null,t),r})}:function(t){return Promise.all(l.call(e,t)).then(function(t){return"function"==typeof n?n.apply(null,t):n})})}v.amd={};var m=new RegExp("^([a-z]+://|//)"),g=new RegExp("^[.]{0,2}/"),y=new Map,b=new Map,w="undefined"!=typeof window&&window.document,E=function(){var t=void 0;w?(e=$,n=function t(n){return function(r){var i=e(r+"",n),o=s.get(i);return o||s.set(i,o=new Promise(function(e,n){var r=document.createElement("script");r.onload=function(){try{e(u.pop()(t(i.replace(/\/[^/]*$/,"/"))))}catch(t){n(new Error("invalid module"))}r.remove()},r.onerror=function(){n(new Error("unable to load module")),r.remove()},r.async=!0,r.src=i,window.define=v,document.head.appendChild(r)})),o}}(null),t=function(t){return arguments.length>1?Promise.all(l.call(arguments,n)).then(f):n(t)}):t=x;var e,n;return t.libs=y,t}();function $(t,e){var n=y.get(t),r=t,i=null,o=location;if(e&&("string"==typeof e.base&&(o=e.base),i=function(t){"string"==typeof t&&"/"===t.substring(0,1)&&(t=t.substring(1));return t}(e.path)),n?(i=i||n.main,r=function(t){"string"==typeof t&&"/"===t.substring(t.length-1)&&(t=t.substring(0,t.substring));return t}(n.origin||r),n.version&&(r=t+"@"+n.version),i&&(r=r+"/"+i)):i&&(m.test(r)?r=new URL(r,o).origin:g.test(r)&&(r=""),r=r+"/"+i),m.test(r))return r;if(g.test(r))return new URL(r,o).href;if(!r.length||/^[\s._]/.test(r)||/\s$/.test(r))throw new Error("illegal name");return"https://unpkg.com/"+r}function x(){for(var t=void 0,e=[],n=0;n<arguments.length;++n)(t=b.get[arguments[n]])||(t=require(arguments[n]),b.set(arguments[n],t)),e.push(t);return Promise.resolve(e.length>1?function(t){var e,n,r={},i=-1,o=t.length;for(;++i<o;)for(n in e=t[i])hasOwnProperty.call(e,n)&&(null==e[n]?Object.defineProperty(r,n,{get:_(e,n)}):r[n]=e[n]);return r}(e):e[0])}function _(t,e){return function(){return t[e]}}n.logger.debug=null;var O=n.assign({require:E,resolve:$,logger:n.logger,readyCallbacks:[],setDebug:function(t){!arguments.length||t?this.logger.debug=n.isFunction(t)?t:P:this.logger.debug=null}},function(){if(n.inBrowser)return n.assign({fetch:window.fetch,location:window.location},window.d3)}());function P(t){this.info(t)}var A="[d3-view]";function C(t){O.logger.warn(A+" "+t)}var L=e.map({disabled:"disabled",readonly:"readOnly",required:"required"}),D={create:function(t){return this.arg?t:C("Cannot bind to empty attribute. Specify :<attr-name>")},refresh:function(t,e){if("class"===this.arg)return this.refreshClass(e);if(n.isArray(e))return C("Cannot apply array to attribute "+this.arg);var r=L.get(this.arg);r?this.sel.property(r,e||!1):this.sel.attr(this.arg,e||null)},refreshClass:function(t){var e=this.sel;n.isArray(t)||(t=[t]),this.oldValue&&this.oldValue.forEach(function(t){t&&e.classed(t,!1)}),this.oldValue=t.map(function(t){var r=!0;return n.isArray(t)&&(r=t[1],t=t[0]),t&&e.classed(t,r),t})}},M={refresh:function(t,e){if(n.isNumber(e)&&(e=""+e),n.isString(e)){var r=this,i=this.sel,o=this.passes?this.transition(i):null;o?o.style("opacity",0).on("end",function(){i.html(e),r.selectChildren().mount(),r.transition(i).style("opacity",1)}):(i.html(e),this.selectChildren().mount())}}};function R(t,e){var n=null,i=void 0,o=void 0;function a(){return i=this,o=arguments,null!==n?n:n=new Promise(function(a,s){r.timeout(function(){n=null;try{a(t?t.apply(i,o):void 0)}catch(t){s(t)}},e)})}return a.promise=function(){return n},a}function j(t){return Object.defineProperty(t,"sel",{get:function(){return i.select(this.el)}}),t}var I={on:function(t,e){var n,r,i,o=(n=this,r=t,i=e,R(function(){r.$set(i,n.value())})),a=t.uid;this.sel.on("input."+a,o).on("change."+a,o)},off:function(t){var e=t.uid;this.sel.on("input."+e,null).on("change."+e,null)},value:function(t){if(!arguments.length)return this.sel.property("value");this.sel.property("value",t)}};function N(t){function e(t){j(this).el=t}return e.prototype=n.assign({},I,t),e}var k=N(),T=N({value:function(t){if(!arguments.length)return this.sel.property("checked");this.sel.property("checked",t)}}),S={input:k,textarea:k,select:N({value:function(t){var e,r=this.sel,o=r.selectAll("option"),a=t;if(!arguments.length)return a=[],o.each(function(){(e=i.select(this)).property("selected")&&a.push(e.attr("value")||"")}),r.property("multiple")?a:a[0]||"";n.isArray(a)||(a=[t||""]),o.each(function(){e=i.select(this),t=e.attr("value")||"",e.property("selected",a.indexOf(t)>-1)})}}),checkbox:T},X={create:function(t){var e=this.sel.attr("type"),n=this.el.tagName.toLowerCase(),r=S[e]||S[n];if(r)return this.tag=new r(this.el),t;this.logWarn("Cannot apply d3-value directive to "+n)},mount:function(t){var e=this.expression;if(e.parsed.type===e.codes.IDENTIFIER){var n=this.expression.expr;return t.$set(n,this.tag.value()),this.tag.on(t,n),t}this.logWarn('support identifiers only, got "'+e.parsed.type+'": '+this.expression)},refresh:function(t,e){this.tag.value(e)},destroy:function(t){this.tag.off(t)}};function q(t,e){if(n.isString(t)){if(!e)return t;var r=function(t){var e=O.compileTemplate;if(e)return e(t);C("No compileTemplate function available in viewProviders, cannot render template")}(t);if(!r)return t;t=r}return t(e)}function F(t,e,n){n=n||document;var r=i.select(n.createElement("div"));r.html(q(t,e));var o=r.node().children;return 1!==o.length&&C("viewElement function should return one root element only, got "+o.length),o[0]}function U(t,e){this.response=t,this.data=e,this.status=t.status,this.headers=t.headers,this.description=t.statusText}function B(t,e,n){this.response=t,this.data=e,this.status=t.status,this.headers=t.headers,this.description=n||t.statusText}function z(t){var e=(t.headers.get("content-type")||"").split(";")[0];if("application/json"===e)return t.json().then(function(e){return new U(t,e)});var n=t.status<300?'Expected "application/json" content type, got "'+e+'"':null;throw new B(t,null,n)}function H(t){if(t.status<300)return t.text().then(function(e){return new U(t,e)});throw new B(t)}function Y(t){return t&&!n.isFunction(t.size)?i.select(t):t}B.prototype=Error.prototype;var W={isd3:!0,providers:O,viewElement:function(t,e,n){return n||(n=this.el?this.el.ownerDocument:null),F(t,e,n)},select:function(t){return i.select(t)},selectAll:function(t){return i.selectAll(t)},createElement:function(t){return i.select(document.createElement(t))},fetch:function(t,e){var n=O.fetch;return 1==arguments.length?n(t):n(t,e)},fetchText:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.fetch.apply(this,[t].concat(n)).then(H)},json:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.fetch.apply(this,[t].concat(n)).then(z)},renderFromUrl:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.cache;return r.has(t)?Promise.resolve(G(r.get(t),e,n)):this.fetchText(t).then(function(i){return r.set(t,i.data),G(i.data,e,n)})},renderFromDist:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=O.resolve;return this.renderFromUrl(i(t,{path:e}),n,r)},on:function(t,e,n){if(t=Y(t),null===n)return t.on(e,null);t.on(e,function(){return n(i.event)})},selectChildren:function(t){return arguments.length||(t=this.el),this.selectAll(Array.prototype.slice.call(t.children))},domEvent:function(){return i.event},logError:function(t){return t.stack?O.logger.error(t):O.logger.error("["+this.name+"] "+t),this},logWarn:function(t){return O.logger.warn("["+this.name+"] "+t),this},logInfo:function(t){return O.logger.info("["+this.name+"] "+t),this},logDebug:function(t){return O.logger.debug&&O.logger.debug("["+this.name+"] "+t),this}};function G(t,e,n){return n?F(t,e):q(t,e)}O.transition={duration:0};var V=n.assign(W,{transition:function(t){arguments.length||(t=this.sel);var e=this.transitionDuration(t);if(e>0)return t.transition(this.uid).duration(e)},transitionDuration:function(t){if(arguments.length||(t=this.sel),t&&n.isFunction(t.transition)&&t.size()){var e=t.attr("data-transition-duration");return+(null===e?O.transition.duration:e)}return 0}}),J={COMPOUND:"Compound",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",LOGICAL_EXP:"LogicalExpression",CONDITIONAL_EXP:"ConditionalExpression",ARRAY_EXP:"ArrayExpression"},K=function(t,e){var n=new Error(t+" at character "+e);throw n.index=e,n.description=t,n},Q={"-":!0,"!":!0,"~":!0,"+":!0},Z={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},tt=function(t){var e,n=0;for(var r in t)(e=r.length)>n&&t.hasOwnProperty(r)&&(n=e);return n},et=tt(Q),nt=tt(Z),rt={true:!0,false:!1,null:null},it=function(t){return Z[t]||0},ot=function(t,e,n){return{type:"||"===t||"&&"===t?J.LOGICAL_EXP:J.BINARY_EXP,operator:t,left:e,right:n}},at=function(t){return t>=48&&t<=57},st=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=128&&!Z[String.fromCharCode(t)]},ut=function(t){for(var e,n,r=0,i=t.charAt,o=t.charCodeAt,a=function(e){return i.call(t,e)},s=function(e){return o.call(t,e)},u=t.length,l=function(){for(var t=s(r);32===t||9===t;)t=s(++r)},c=function t(){var e,n,i=f();return l(),63!==s(r)?i:(r++,(e=t())||K("Expected expression",r),l(),58===s(r)?(r++,(n=t())||K("Expected expression",r),{type:J.CONDITIONAL_EXP,test:i,consequent:e,alternate:n}):void K("Expected :",r))},d=function(){l();for(var e=t.substr(r,nt),n=e.length;n>0;){if(Z.hasOwnProperty(e))return r+=n,e;e=e.substr(0,--n)}return!1},f=function(){var t,e,n,i,o,a,s,u;if(a=h(),!(e=d()))return a;for(o={value:e,prec:it(e)},(s=h())||K("Expected expression after "+e,r),i=[a,o,s];(e=d())&&0!==(n=it(e));){for(o={value:e,prec:n};i.length>2&&n<=i[i.length-2].prec;)s=i.pop(),e=i.pop().value,a=i.pop(),t=ot(e,a,s),i.push(t);(t=h())||K("Expected expression after "+e,r),i.push(o,t)}for(t=i[u=i.length-1];u>1;)t=ot(i[u-1].value,i[u-2],t),u-=2;return t},h=function e(){var n,i,o;if(l(),n=s(r),at(n)||46===n)return p();if(39===n||34===n)return v();if(st(n)||40===n)return y();if(91===n)return w();for(o=(i=t.substr(r,et)).length;o>0;){if(Q.hasOwnProperty(i))return r+=o,{type:J.UNARY_EXP,operator:i,argument:e(),prefix:!0};i=i.substr(0,--o)}return!1},p=function(){for(var t,e,n="";at(s(r));)n+=a(r++);if(46===s(r))for(n+=a(r++);at(s(r));)n+=a(r++);if("e"===(t=a(r))||"E"===t){for(n+=a(r++),"+"!==(t=a(r))&&"-"!==t||(n+=a(r++));at(s(r));)n+=a(r++);at(s(r-1))||K("Expected exponent ("+n+a(r)+")",r)}return e=s(r),st(e)?K("Variable names cannot start with a number ("+n+a(r)+")",r):46===e&&K("Unexpected period",r),{type:J.LITERAL,value:parseFloat(n),raw:n}},v=function(){for(var t,e="",n=a(r++),i=!1;r<u;){if((t=a(r++))===n){i=!0;break}if("\\"===t)switch(t=a(r++)){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+="\\"+t}else e+=t}return i||K('Unclosed quote after "'+e+'"',r),{type:J.LITERAL,value:e,raw:n+e+n}},m=function(){var e,n,i=s(r),o=r;for(st(i)?r++:K("Unexpected "+a(r),r);r<u&&(i=s(r),36===(n=i)||95===n||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n>=128&&!Z[String.fromCharCode(n)]);)r++;return e=t.slice(o,r),rt.hasOwnProperty(e)?{type:J.LITERAL,value:rt[e],raw:e}:"this"===e?{type:J.THIS_EXP}:{type:J.IDENTIFIER,name:e}},g=function(t){for(var e,n,i=[],o=!1;r<u;){if(l(),(e=s(r))===t){o=!0,r++;break}44===e?r++:((n=c())&&n.type!==J.COMPOUND||K("Expected comma",r),i.push(n))}return o||K("Expected "+String.fromCharCode(t),r),i},y=function(){var t,e;for(e=40===(t=s(r))?b():m(),l(),t=s(r);46===t||91===t||40===t;)r++,46===t?(l(),e={type:J.MEMBER_EXP,computed:!1,object:e,property:m()}):91===t?(e={type:J.MEMBER_EXP,computed:!0,object:e,property:c()},l(),93!==(t=s(r))&&K("Unclosed [",r),r++):40===t&&(e={type:J.CALL_EXP,arguments:g(41),callee:e}),l(),t=s(r);return e},b=function(){r++;var t=c();if(l(),41===s(r))return r++,t;K("Unclosed (",r)},w=function(){return r++,{type:J.ARRAY_EXP,elements:g(93)}},E=[];r<u;)59===(e=s(r))||44===e?r++:(n=c())?E.push(n):r<u&&K('Unexpected "'+a(r)+'"',r);return 1===E.length?E[0]:{type:J.COMPOUND,body:E}};function lt(t,e,n){switch(e.type){case J.IDENTIFIER:return t[e.name];case J.LITERAL:return n?t[e.value]:e.value;case J.ARRAY_EXP:return e.elements.map(function(e){return lt(t,e)});case J.LOGICAL_EXP:case J.BINARY_EXP:return function(t,e,n){ft[t]||(ft[t]=new Function("a","b","return a "+t+" b"));return ft[t](e,n)}(e.operator,lt(t,e.left),lt(t,e.right));case J.CALL_EXP:return function(t,e,n){var r;n=n.map(function(e){return lt(t,e)}),e.type!==J.IDENTIFIER&&(t=lt(t,e.object),e=e.property);if(!(r=t[e.name]))throw new EvalError('callable "'+e.name+'" not found in context');return r.apply(t,n)}(t,e.callee,e.arguments);case J.MEMBER_EXP:return lt(lt(t,e.object),e.property,!0);case J.CONDITIONAL_EXP:return lt(t,e.test)?lt(t,e.consequent):lt(t,e.alternate);case J.UNARY_EXP:return function(t,e){dt[t]||(dt[t]=new Function("arg","return "+t+" arg"));return dt[t](e)}(e.operator,lt(t,e.argument))}}function ct(t,n){switch(1===arguments.length&&(n=e.set()),t.type){case J.IDENTIFIER:n.add(t.name);break;case J.ARRAY_EXP:t.elements.forEach(function(t){return ct(t,n)});break;case J.LOGICAL_EXP:case J.BINARY_EXP:ct(t.left,n),ct(t.right,n);break;case J.CALL_EXP:ct(t.callee,n),t.arguments.forEach(function(t){return ct(t,n)});break;case J.MEMBER_EXP:n.add(function t(e){return e.type===J.IDENTIFIER?e.name:t(e.object)+"."+e.property.name}(t));break;case J.CONDITIONAL_EXP:ct(t.test,n),ct(t.consequent,n),lt(t.alternate,n);break;case J.UNARY_EXP:ct(t.argument,n)}return n}ut.addUnaryOp=function(t){return et=Math.max(t.length,et),Q[t]=!0,this},ut.addBinaryOp=function(t,e){return nt=Math.max(t.length,nt),Z[t]=e,this},ut.addLiteral=function(t,e){return rt[t]=e,this},ut.removeUnaryOp=function(t){return delete Q[t],t.length===et&&(et=tt(Q)),this},ut.removeBinaryOp=function(t){return delete Z[t],t.length===nt&&(nt=tt(Z)),this},ut.removeLiteral=function(t){return delete rt[t],this};var dt={},ft={},ht={eval:function(t){return lt(t,this.parsed)},safeEval:function(t){try{return lt(t,this.parsed)}catch(t){C("Could not evaluate <<"+this.expr+">> expression: "+t)}},identifiers:function(){return ct(this.parsed).values()}};function pt(t){this.codes=J,this.expr=t,this.parsed=ut(t)}function vt(t){return new pt(t)}pt.prototype=ht;var mt=0,gt="d3v";function yt(t){var e=gt+ ++mt;return arguments.length?(Object.defineProperty(t,"uid",{get:function(){return e}}),t):e}function bt(){var t=o.dispatch("change"),e=0;return{on:function(e,n){return arguments.length<2?t.on(e):(t.on(e,n),this)},trigger:R(function(){t.apply("change",this,arguments),e+=1}),triggered:function(){return e}}}function wt(t,n,r,i){var o=e.map(),a=null;o.set("",bt()),Object.defineProperties(yt(t),{$events:{get:function(){return o}},parent:{get:function(){return r}},isolated:{get:function(){return i}}}),t.$child=function(e){null===a&&(a=function(t){function e(e){wt(this,e,t,!1)}return e.prototype=t,e}(t));return new a(e)},t.$update(n)}var Et="[object d3Model]";function $t(t){return t&&t.constructor===Object}function xt(t){return n.isObject(t)&&"[object d3Model]"===t.toString()}function _t(t,e){e?t.on("change."+e,null):t.on("change",null)}function Ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.prototype.slice.call(t,e)}function Pt(t,e){wt(this,t,e,!0)}function At(t){return new Pt(t)}At.prototype=Pt.prototype={constructor:Pt,toString:function(){return Et},$on:function(t,e){1===arguments.length&&n.isFunction(t)&&(e=t,t="");var r=t.split("."),i=r[0],o=function t(e,n){var r=e.$events.get(n);return!r&&e.parent?t(e.parent,n):r}(this,i);return o?(this.$events.get(i)||r.push(this.uid),r[0]="change",o.on(r.join("."),e)):C('Cannot bind to "'+i+'" - no such reactive property')},$change:function(t){var e=arguments.length?t:"",n=this.$events.get(e),r=Ot(arguments,1);return n?n.trigger.apply(this,r):this.isolated?C("attribute '"+e+"' is not a reactive property this model"):this.parent.$change(e),this},$emit:function(t,e){return function t(e,r,i,o){e&&(e.hasOwnProperty(r)&&n.isFunction(e[r])&&!1===e[r](i,o)||t(e.parent,r,i,o))}(this,"$"+t,e,this),this},$update:function(t,e){if(t){e=2!==arguments.length||e;for(var n in t)(e||void 0===this[n])&&("$"===n.substring(0,1)?this.constructor.prototype[n]?C("Cannot set attribute method "+n+", it is protected"):this[n]=t[n]:this.$set(n,t[n]))}return this},$set:function(t,e){this.$events.get(t)?this[t]=e:function(t,e,r){var i;function o(n){if(i&&(n=i.get.call(t)),n!==r){if(O.logger.debug){var o=t.$$name||"model";O.logger.debug("[d3-model] updating "+o+"."+e)}t.$change(e,r).$change(),r=a(n,r)}}function a(e,r){return e===r?r:n.isArray(e)?function(t,e){xt(e)&&e.$off(),n.isArray(e)||(e=[]);for(var r=0;r<t.length;++r)t[r]=a(t[r],e[r]);return t}(e,r):xt(r)?(o=r,$t(i=e)?(o.$update(i),o):(o.$off(),a(i))):$t(e)?t.$new(e):e;var i,o}t.$events.set(e,bt()),Object.defineProperty(t,e,function(){var a={get:function(){return r}};return n.isFunction(r)&&(r={get:r}),$t(r)&&n.isFunction(r.get)?(r=(i=r).get.call(t),i.reactOn?i.reactOn.forEach(function(n){t.$on(n+"."+e,o)}):C("reactive lazy property "+e+" does not specify 'reactOn' list or properties"),n.isFunction(i.set)&&(a.set=i.set)):a.set=o,a}()),r=a(r),t.$change(e)}(this,t,e)},$new:function(t){return new Pt(t,this)},$off:function(t){if(void 0===t)this.$events.each(function(t){return _t(t)});else{var e=t.split("."),n=e.splice(0,1)[0],r=this.$events.get(n);r&&_t(r,e.join("."))}},$isReactive:function(t){return!!this.$events.has(t)||!(!this.parent||this.isolated)&&this.parent.$isReactive(t)},$owner:function(t){if(!this.$events.has(t)){if(!this.parent||this.isolated)return;return this.parent.$owner(t)}return this},$data:function(){var t,e=this,n={};return this.$events.keys().concat(Object.keys(this)).forEach(function(r){r&&void 0!==(t=function(t){if("function"!=typeof t)return t&&"function"==typeof t.$data?t.$data():t}(e[r]))&&(n[r]=t)}),n},$push:function(t,e){var n=this[t].slice();return n.push(e),this[t]=n,this},$splice:function(t,e,n){var r=this[t].slice();return 2==arguments.length?r.splice(e):3==arguments.length&&r.splice(e,n),this[t]=r,this}},Object.defineProperties(Pt.prototype,{root:{get:function(){return this.parent?this.parent.root:this}},isolatedRoot:{get:function(){return!this.isolated&&this.parent?this.parent.isolatedRoot:this}}});var Ct=o.dispatch("message","component-created","component-mount","component-mounted","directive-refresh"),Lt={create:function(t){return t},preMount:function(){},mount:function(t){return t},refresh:function(){},destroy:function(){},removeAttribute:function(){this.el.removeAttribute(this.name)},execute:function(t){this.active&&(this.removeAttribute(),this.identifiers=[],(t=this.mount(t))&&this.bindModel(t))},bindModel:function(t){var r=this,i=!1,o=function(){var e=r.expression?r.expression.eval(t):r.data;r.refresh(t,e),r.passes++,Ct.call("directive-refresh",void 0,r,t,e)};r.cache=t.$$view.cache;var a=void 0,s=void 0,u=void 0,l=void 0;if(r.data)r.data=t.$new(r.data),r.identifiers.push({model:r.data,attr:""});else if(this.expression){var c=e.map();this.expression.identifiers().forEach(function(e){for(a=e.split("."),s=t,u=null,l=0;l<a.length-1;++l)if(s=s[a[l]],!n.isObject(s)){u=a.slice(0,l+1).join("."),r.logError('"'+u+'" is not an object, cannot bind to "'+e+'" identifier'),i=!0;break}null===u&&(s instanceof At?function t(e,r,i){var o=3===arguments.length?r[i]:void 0;n.isFunction(o)||2===arguments.length?Mt(e,r).events.add(""):o instanceof At?(t(e,o),(r=r.$owner(i))&&Mt(e,r).events.add("")):((r=r.$owner(i)||r).$isReactive(i)||r.$set(i,o),Mt(e,r).events.add(i))}(c,s,a[a.length-1]):(r.logError(e+" is not a reactive model. Cannot bind to it"),i=!0))}),c.each(function(t){t.events.has("")?r.identifiers.push({model:t.model,attr:""}):t.events.each(function(e){r.identifiers.push({model:t.model,attr:e})})})}else r.identifiers.push({model:t,attr:""});i||(this.identifiers.forEach(function(t){var e=t.attr+"."+r.uid;t.model.$on(e,o)}),this.bindDestroy(t),o())},bindDestroy:function(t){var e=this,n=this.destroy;e.destroy=function(){e.identifiers.forEach(function(t){t.model.$off(t.attr+"."+e.uid)}),e.data&&e.data.$off();try{n.call(e,t)}finally{t.$emit("destroyDirective",e)}}}};function Dt(t){function e(t,e,n){this.el=t,this.name=e.name,this.arg=n,this.passes=0;var r=j(yt(this)).create(e.value);if(r)try{this.expression=vt(r)}catch(t){try{this.data=JSON.parse(r)}catch(e){this.logError(t)}}this.active||(this.active=Boolean(!e.value||this.expression||this.data))}function r(t,n,r){return new e(t,n,r)}return e.prototype=n.assign({},V,Lt,t),r.prototype=e.prototype,r}function Mt(t,n){var r=t.get(n.uid);return r||(r={model:n,events:e.set()},t.set(n.uid,r)),r}function Rt(t){if(n.isString(t))try{return JSON.parse(t)}catch(e){return t}return t}var jt="data-";function It(){this.active=!0,this.data=new Map}It.prototype={constructor:It,set:function(t,e){this.active&&this.data.set(t,e)},get:function(t){if(this.active)return this.data.get(t)},has:function(t){return!!this.active&&this.data.has(t)},clear:function(){return this.data.clear()},delete:function(t){return this.data.delete(t)}};var Nt={render:function(){},childrenMounted:function(){},mounted:function(){},destroy:function(){},mount:function(t,e,r){var i=this;if(!qt(this)){this.events.call("mount",void 0,this,t,e),this.events.on("mount",null),Ct.call("component-mount",void 0,this,t,e);var o,a=this.select(t),s=a.directives(),u=s?s.attrs:function(t){for(var e={},n=void 0,r=0;r<t.attributes.length;++r)n=t.attributes[r],e[n.name]=n.value;return e}(t),l=this.parent.model,c=a.datum(),d=this.props,f=this.model,h=n.assign((o=u,Object.keys(o).reduce(function(t,e){return e.substring(0,5)===jt&&(t[e.split("-").splice(1).reduce(function(t,e,n){return t+=n?e.substring(0,1).toUpperCase()+e.substring(1):e},"")]=n.pop(o,e)),t},{})),c,e),p=void 0,v=void 0;e=n.assign({},c,e);for(p in f)void 0!==(v=n.pop(h,p))&&(n.isString(v)?l.$isReactive(v)?v!==p?f[p]=Ft(p,v):delete f[p]:f[p]=Rt(v):f[p]=v);this.model=f=this.createModel(f),n.isArray(d)&&(d=d.reduce(function(t,e){return t[e]=void 0,t},{})),n.isObject(d)&&Object.keys(d).forEach(function(t){void 0!==(v=Rt(void 0===h[t]?void 0===e[t]?u[t]:e[t]:h[t]))?(n.isString(v)&&f[v]&&(v=f[v]),e[t]=v):void 0!==d[t]&&(e[t]=d[t])}),this.props=e;var m=this.render(e,u,t);return m.then||(m=Promise.resolve(m)),m.then(function(e){return function(t,e,r,i){if(n.isString(r)){var o=Object.keys(t.props).length?t.props:null;r=t.viewElement(r,o,e.ownerDocument)}if(!r)return t.logWarn("render function must return a single HTML node. It returned nothing!");1!==(r=Y(r)).size()&&t.logWarn("render function must return a single HTML node");return r=r.node(),e.parentNode.insertBefore(r,e),t.select(e).remove(),Xt(t,r,i)}(i,t,e,r)})}},createModel:function(t){var e=this.parent?this.parent.model.$child(t):At(t);return e.$$view=this,e.$$name=this.name,e}};function kt(t,r,i,a){n.isFunction(r)&&(r={render:r});var s=n.assign({},r),u=Tt(e.map(),n.pop(s,"components")),l=St(e.map(),n.pop(s,"directives")),c=n.pop(s,"model");function d(r){var s=n.pop(r,"parent"),d=e.map(s?s.components:a),f=e.map(s?s.directives:i),h=o.dispatch("message","mount","mounted"),p=s?null:new It;u.each(function(t,e){d.set(e,t)}),l.each(function(t,e){f.set(e,t)}),Tt(d,n.pop(r,"components")),St(f,n.pop(r,"directives")),Object.defineProperties(this,{name:{get:function(){return t}},components:{get:function(){return d}},directives:{get:function(){return f}},parent:{get:function(){return s}},root:{get:function(){return s?s.root:this}},cache:{get:function(){return s?s.cache:p}},uid:{get:function(){return this.model.uid}},events:{get:function(){return h}}}),this.model=n.assign({},n.isFunction(c)?c():c,n.pop(r,"model")),Ct.call("component-created",void 0,this)}function f(t){return new d(t)}return d.prototype=n.assign({},V,Nt,s),f.prototype=d.prototype,f}function Tt(t,n){return e.map(n).each(function(e,n){t.set(n,kt(n,e,Nt))}),t}function St(t,n){return e.map(n).each(function(e,n){t.set(n,Dt(e))}),t}function Xt(t,e,n){return Object.defineProperty(j(t),"el",{get:function(){return e}}),t.select(e).view(t).mount(null,n).then(function(){return function(t,e){var n=t.parent;t.childrenMounted(),n&&!n.isMounted?n.events.on("mounted."+t.uid,function(){qt(t,e)}):qt(t,e);return t}(t,n)})}function qt(t,e){return void 0===t.isMounted?(t.isMounted=!1,!1):(t.isMounted?t.logWarn("component already mounted"):(t.isMounted=!0,t.mounted(),e&&e(t),t.events.call("mounted",void 0,t),t.events.on("mounted",null),Ct.call("component-mounted",void 0,t)),!0)}function Ft(t,e){return{reactOn:[e],get:function(){return this[e]},set:function(){this.$$view.logError('Cannot set "'+t+'" value because it is owned by a parent model')}}}var Ut=["name","class","disabled","readonly","required","href"];function Bt(){this.attrs={},this.all=[]}Bt.prototype={size:function(){return this.all.length},pop:function(t){var e=this.all.indexOf(t);return e>-1&&(t.removeAttribute(),this.all.splice(e,1)),t},add:function(t){this.all.push(t)},forEach:function(t){this.all.forEach(t)},preMount:function(){for(var t=void 0,e=0;e<this.all.length;++e)if((t=this.all[e]).preMount())return this.pop(t)},execute:function(t){if(this.size())return Promise.all(this.all.map(function(e){return e.execute(t)}))}},i.selection.prototype.mount=function(t,e){var n=[];return this.each(function(){var r=i.select(this).view();r?n.push(function t(e,n,r,o){if(e&&e.tagName){var a=n.components.get(e.tagName.toLowerCase()),s=function(t,e){var n=i.select(t),r=n.directives();if(r)return r;if(r=new Bt,!e)return r;for(var o=0;o<t.attributes.length;++o){var a=t.attributes[o],s=a.name.split("-"),u="d3"===s[0]?s[1]:null,l=void 0;if(u){!(l=s.slice(2).join("-"))&&Ut.indexOf(u)>-1&&(l=u,u="attr");var c=e.get(u);c?r.add(c(t,a,l)):C(t.tagName+' cannot find directive "'+u+'". Did you forget to register it?')}r.attrs[a.name]=a.value}return r.size()&&n.directives(r),r}(e,n.directives),u=s.preMount();if(u)return u.execute(n.model);var l=void 0;return l=a?[a({parent:n}).mount(e,r,o)]:Ot(e.children).map(function(e){return t(e,n,r,o)}),Promise.all(l).then(function(){return s.execute(n.model)})}}(this,r,t,e)):C("Cannot mount, no view object available to mount to")}),Promise.all(n)},i.selection.prototype.view=function(t){{if(arguments.length)return this.property("__d3_view__",t);for(var e=this.node(),n=e?e.__d3_view__:null,r=e?e.parentNode:null;r&&!n;)n=r.__d3_view__,r=r.parentNode;return n}},i.selection.prototype.model=function(){var t=this.view();return t?t.model:null},i.selection.prototype.directives=function(t){return arguments.length?this.property("__d3_directives__",t):this.node().__d3_directives__};var zt={use:function(t){return n.isObject(t)?t.install(this):t(this),this},addComponent:function(t,e){var n=kt(t,e);return this.components.set(t,n),n},addDirective:function(t,e){var n=Dt(e);return this.directives.set(t,n),n},mount:function(t,e){if(!qt(this))return t&&(t=Y(t).node())?(Ct.call("component-mount",void 0,this,t),this.model=this.createModel(this.model),Xt(this,t,e)):this.logWarn("element not defined, pass an identifier or an HTMLElement object")}},Ht={attr:D,html:M,value:X,on:{mount:function(t){var e=this.arg||"click",n=this.expression;this.on(this.sel,e+"."+this.uid,function(e){var r=t.$child();r.$event=e,n.eval(r)}),this.bindDestroy(t)},destroy:function(){var t=this.arg||"click";this.on(this.sel,t+"."+this.uid,null)}},for:{create:function(t){var e=[];return t.trim().split(" ").forEach(function(t){t&&e.push(t)}),3!==e.length||"in"!=e[1]?C('d3-for directive requires "item in expression" template, got "'+t+'"'):(this.itemName=e[0],this.itemClass="for"+this.uid,e[2])},preMount:function(){return!0},mount:function(t){if(this.creator=this.el,this.el=this.creator.parentNode,i.select(this.creator).remove(),this.el)return t},refresh:function(t,e){if(n.isArray(e)){var r=void 0,i=this.creator,o=i.tagName+"."+this.itemClass,a=this.itemName,s=this.sel,u=s.selectAll(o),l=u.filter(function(){return r=this.__d3_view__.model[a],e.indexOf(r)>-1}).data(e),c=u.filter(function(){return r=this.__d3_view__.model[a],-1===e.indexOf(r)}),d=kt("forView",zt),f=s.view(),h=void 0,p=void 0,v=void 0,m=void 0;(this.transition(c)||c).style("opacity",0).remove(),l.enter().append(function(){return p=i.cloneNode(!0),v=f.select(p),f.transitionDuration(v)>0&&v.style("opacity",0),p}).classed(this.itemClass,!0).each(function(t,n){(h={index:n})[a]=t,d({model:h,parent:f}).mount(this,function(t){e[n]=t.model[a],(m=t.transition())&&m.style("opacity",1)})}).merge(l).each(function(t){this.__d3_view__.model[a]=t})}}},if:{mount:function(t){var e=this.sel;return this.display=e.style("display"),this.display&&"none"!==this.display||(this.display="block"),t},refresh:function(t,e){var n=this.sel,r=this.passes?this.transition(n):null;e?n.style("display",this.display):r||n.style("display","none"),r&&(e?r.style("opacity",1):r.style("opacity",0).on("end",function(){return n.style("display","none")}))}}};n.inBrowser&&window.MutationObserver&&new window.MutationObserver(function(t){var e=void 0,n=void 0,r=void 0,o=void 0;t.forEach(function(t){if((n=t.removedNodes)&&n.length){o=t.target?i.select(t.target).view():null;for(var a=0;a<n.length;++a)(r=n[a]).querySelectorAll&&(e=i.select(r),(o||e.view())&&(e.selectAll("*").each(Yt),Yt.call(n[a])))}})}).observe(document.documentElement,{childList:!0,subtree:!0});function Yt(){var t=this.__d3_directives__,e=this.__d3_view__;t&&(t.all.forEach(function(t){return t.destroy()}),delete this.__d3_directives__),e&&(e.destroy(),delete this.__d3_view__)}var Wt=St(e.map(),Ht),Gt=Tt(e.map(),a);function Vt(){document.removeEventListener("DOMContentLoaded",Vt),window.removeEventListener("load",Vt),Jt()}function Jt(){for(var t=void 0;O.readyCallbacks.length;)t=O.readyCallbacks.shift(),r.timeout(t)}var Kt=e.map({disabled:"disabled",readonly:"readOnly",required:"required"}),Qt={inputData:function(t,e){var r=this.model;return e||(e={}),e.id=e.id||r.uid,r.data=e,t.attr("id",e.id),e.classes&&t.classed(e.classes,!0),function(t,e,r){var i,o;if(!n.isObject(r))return;for(o in r)i=r[o],n.isObject(i)&&(i=JSON.stringify(i)),t.attr(o,i||"")}(t,0,e.attributes),Kt.each(function(r,i){var o=e[i];o&&(n.isString(o)?t.attr("d3-attr-"+i,o):t.property(r,!0))}),e},wrap:function(t){var e=this,n=t;return e.model.$formExtensions.forEach(function(r){n=r(e,n,t)||n}),n},wrapTemplate:function(t,e){var n=document.createElement("div"),r=i.select(n).html(e).select("slot");if(!r.size())return this.logWarn("template does not provide a slot element"),t;var o=i.select(r.node().parentNode);return t.nodes().forEach(function(t){o.insert(function(){return t},"slot")}),r.remove(),i.selectAll(n.children)}},Zt=n.assign({},Qt,{model:{value:null,error:"",isDirty:null,changed:!1,srOnly:!1,placeholder:"",showError:{reactOn:["error","isDirty"],get:function(){return!!this.error&&this.isDirty}},$validate:function(){}},inputData:function(t,e){if(!(e=Qt.inputData.call(this,t,e)).name)return this.logError("Input field without a name");t.attr("name",e.name),e.placeholder=e.placeholder||e.label||e.name;var n=this.model;return n.form.inputs[e.name]=n,n.name=e.name,n.$on("value",function(){null===n.isDirty?n.isDirty=!1:(n.isDirty=!0,n.changed=!0),n.form.$change(),n.$emit("formFieldChange",n)}),e}});var te={text:"input",email:"input",password:"input",checkbox:"input",number:"input",date:"input",url:"input","datetime-local":"input"};function ee(t){var e=this.model.data.children;if(e){if(!n.isArray(e))return this.logError("children should be an array of fields, got "+(void 0===e?"undefined":babelHelpers.typeof(e))),t;t.selectAll(".d3form").data(e).enter().append(ne).classed("d3form",!0)}return t}function ne(t){var e,n=(e=t.type||"text",te[e]||e);return document.createElement("d3-form-"+n)}var re=n.assign({},Qt,{render:function(t){var e=t&&t.tag||"fieldset",n=this.createElement(e);return t=this.inputData(n,t),ee.call(this,n)}}),ie={get:function(t){var e=this.all.slice(0);if(n.isObject(t))for(var r in t)e.push(ae(r,t[r]));return e},set:function(t,e){var n=t.model;n.validators.forEach(function(t){return t.set(e,n.data)}),n.$on("value.validate",this.validate),n.$validate=this.validate},validate:function(){for(var t,e=this,n=e.$$view,r=e.validators,i=e.value,o=n.sel.attr("id")===e.data.id?n.sel:n.sel.select("#"+e.data.id),a=0;a<r.length;++a)if(t=r[a].validate(o,i)){!0===t&&(t="");break}e.error=t||""},all:[{set:function(t,e){var r=e.required;n.isString(r)?t.attr("d3-required",r):t.property("required",r||!1)},validate:function(t,e){if(t.property("required")){if(!e)return"required";if(""===e)return!0}}},{set:function(t,e){var r=e.minLength;n.isString(r)?t.attr("d3-attr-minlength",r):void 0!==r&&t.attr("minlength",r)},validate:function(t,e){var n=+t.attr("minlength");if(n==n&&n>0&&e.length<n)return"too short - "+n+" characters or more expected"}},{set:function(t,e){var r=e.maxLength;n.isString(r)?t.attr("d3-attr-maxlength",r):void 0!==r&&t.attr("maxlength",r)},validate:function(t,e){var n=+t.attr("maxlength");if(n==n&&n>0&&e&&e.length>n)return"too long - "+n+" characters or less expected"}},{set:function(t,e){var r=e.minimum;n.isString(r)?t.attr("d3-attr-min",r):void 0!==r&&t.attr("min",r)},validate:function(t,e){var n=oe(t);if(n&&+e<n[0])return"must be greater or equal "+n[0]}},{set:function(t,e){var r=e.maximum;n.isString(r)?t.attr("d3-attr-max",r):void 0!==r&&t.attr("max",r)},validate:function(t,e){var n=oe(t);if(n&&+e>n[1])return"must be less or equal "+n[1]}}]};function oe(t){var e=t.attr("min"),n=t.attr("max");return[e=null===e?-1/0:+e,n=null===n?1/0:+n]}function ae(t,e){return{set:function(e,n){n[t]},validate:function(t,n){return e(t,n)}}}var se=["checkbox","radio"],ue=n.assign({},Zt,{render:function(t){var e=this.createElement("input");return t=this.inputData(e,t),e.attr("type",t.type||"text").attr("d3-value","value"),-1===se.indexOf(e.attr("type"))&&e.attr("placeholder",t.placeholder),ie.set(this,e),this.wrap(e)}}),le=n.assign({},Zt,{render:function(t){var e=this.createElement("textarea");return t=this.inputData(e,t),e.attr("placeholder",t.placeholder).attr("d3-value","value"),ie.set(this,e),this.wrap(e)}}),ce=n.assign({},Zt,{model:n.assign({options:[],$optionLabel:function(){return n.isArray(this.option)?this.option[1]||this.option[0]:this.option},$optionValue:function(){return n.isArray(this.option)?this.option[0]:this.option}},Zt.model),render:function(t){var e=this.createElement("select");return t=this.inputData(e,t),e.attr("d3-value","value").attr("placeholder",t.placeholder).append("option").attr("d3-for","option in options").attr("d3-html","$optionLabel()").attr("d3-attr-value","$optionValue()"),ie.set(this,e),this.wrap(e)}});var de=n.assign({},Qt,{render:function(t){var e=t&&t.tag||"button",n=this.createElement(e);t=this.inputData(n,t);var r=this.model;return r.type=t.type||"submit",t.endpoint&&(r.endpoint=t.endpoint),r.$submit=function(){i.event&&i.event.defaultPrevented||r.actions.submit.call(r,i.event)},t.submit||(t.submit="$submit()"),n.attr("type",r.type).attr("name",r.name).attr("d3-on-click",t.submit).html(t.label||"submit"),this.wrap(n)}}),fe={default:function(t){var e=t.status<300?"info":t.status<500?"warning":"error";this.$emit("formMessage",{level:e,data:t.data,response:t})},redirect:function(t){this.$$view.providers.location.href=t.data.redirectTo||"/"}};var he={submit:function(t){var e=this.form,r=this.$$view,i=n.assign({},ve,this.endpoint);t&&(t.preventDefault(),t.stopPropagation());var o=e.$inputData(),a={};if(!i.url)return void r.logError("No url, cannot submit form");if("application/json"===i.contentType)a.headers={"Content-Type":i.contentType},a.body=JSON.stringify(o);else{a.body=new FormData;for(var s in o)a.body.append(s,o[s])}e.$setSubmit()?(a.method=i.method,r.json(i.url,a).then(u,u)):e.$setSubmitDone();function u(t){e.$setSubmitDone(),t.status&&t.headers?e.$response(t):e.$emit("formMessage",{level:"error",message:pe[t.message]||pe.default})}}},pe={default:"<strong>Error!</strong> Could not submit form"},ve={contentType:"application/json",method:"POST"};var me={props:["schema","values"],components:{"d3-form-fieldset":re,"d3-form-input":ue,"d3-form-textarea":le,"d3-form-select":ce,"d3-form-submit":de},model:{formSubmitted:!1,formPending:!1,$isValid:function(t){var e=void 0,n=!0;for(var r in this.inputs)e=this.inputs[r],t&&(e.isDirty=!0),e.$validate(),e.error&&(n=!1);return n},$setSubmit:function(){return this.formSubmitted=!0,this.formPending=!0,this.$isValid(!0)},$setSubmitDone:function(){this.formPending=!1},$inputData:function(){var t,e=this.inputs,n={};for(var r in e)((t=e[r].value)||ue.changed)&&(n[r]=t);return n},$response:function(t){if(t.data)if(this.data.resultHandler){var e=fe[this.data.resultHandler];e?e.call(this,t):this.$$view.logError("Could not find "+this.data.resultHandler+" result handler")}else fe.default.call(this,t);else this.$responseError(t)},$responseError:function(t){this.$emit("formMessage",{level:"error",data:t.data,response:t})}},render:function(t){var e=this.model,r=this.createElement("form").attr("novalidate",""),i=this;e.$formExtensions=this.root.$formExtensions||[],e.inputs={},e.actions={},e.form=e;var o=t.schema;return t.values&&(o.values=t.values),n.isString(o)?this.json(o).then(function(t){return a(t.data)}):a(o);function a(t){t=Qt.inputData.call(i,r,t),e.validators=ie.get(t.validators);for(var o in he){var a=t[o];n.isString(a)&&(a=i.model.$get(a)),e.actions[o]=a||he[o]}return ee.call(i,r),r}},childrenMounted:function(){var t=this.model,e=t.data.values;e&&Object.keys(e).forEach(function(n){var r=t.inputs[n];r&&(r.value=e[n])})}},ge={install:function(t){t.addComponent("d3form",me),t.$formExtensions=[]},actions:he,responses:fe};var ye='<div class="form-group">\n<slot></slot>\n</div>';var be={input:["inputGroup","label","formGroup"],checkbox:["formCheck"],textarea:["label","formGroup"],select:["label","formGroup"],submit:["submit"],wrappers:{label:function(t,e){var n,r,i=t.model.data;return t.wrapTemplate(e,(r=(n=i).label||n.name,"<label for="+n.id+' class="control-label" d3-class="[srOnly ? \'sr-only\' : null]">'+r+"</label>\n<slot></slot>"))},formGroup:function(t,e,n){var r=t.model.data,i=void 0!==r.size?r.size:t.model.form.data.size,o=i?"form-control form-control-"+i:"form-control";return n.classed(o,!0).attr("d3-class","["+(r.required||!1)+' ? "form-control-required" : null, showError ? "form-control-danger" : null]'),t.wrapTemplate(e,'<div class="form-group" d3-class=\'showError ? "has-danger" : null\'>\n<slot></slot>\n<p d3-if="showError" class="text-danger error-block" d3-html="error"></p>\n</div>')},inputGroup:function(t,e,n){var r=t.model.data.group;if(!r)return e;var i="g"+n.attr("id");return n.attr("aria-describedby",i),t.wrapTemplate(e,'<div class="input-group" :class="bootstrapStatus()">\n<span class="input-group-addon" id="'+i+'">'+r+"</span>\n<slot></slot>\n</div>")},formCheck:function(t,e,n){var r=t.model.data;return n.classed("form-check-input",!0),t.wrapTemplate(e,'<div class="form-check">\n<label class="form-check-label">\n<slot></slot>\n'+r.label+"\n</label>\n</div>")},submit:function(t,e,n){var r=t.model.data.theme||"primary";return n.classed("btn",!0).classed("btn-"+r,!0),t.wrapTemplate(e,ye)}}},we={install:function(t){if(!t.$formExtensions)return t.logWarn("form bootstrap requires the form plugin installed first!");t.$formExtensions.push(Ee)}};function Ee(t,e,n){var r=be[n.attr("type")]||be[n.node().tagName.toLowerCase()];if(!r)return e;var i=void 0;return r.forEach(function(r){(i=be.wrappers[r])?e=i(t,e,n):t.logWarn("Could not find form field wrapper "+r)}),e}t.view=function(t){return kt("view",zt,Wt,Gt)(t)},t.viewBase=V,t.viewEvents=Ct,t.viewModel=At,t.viewExpression=vt,t.viewReady=function(t){O.readyCallbacks.push(t),"complete"!==document.readyState?(document.addEventListener("DOMContentLoaded",Vt),window.addEventListener("load",Vt)):Jt()},t.viewProviders=O,t.viewWarn=C,t.viewForms=ge,t.viewBootstrapForms=we,t.viewSelect=Y,t.viewUid=yt,t.viewDebounce=R,t.viewSlugify=function(t){t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var e="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",n=0,r=e.length;n<r;n++)t=t.replace(new RegExp(e.charAt(n),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(n));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},t.jsep=ut,t.viewVersion="1.2.3",t.viewElement=F,t.viewTemplate=q,t.isAbsoluteUrl=function(t){return m.test(t)},t.viewRequire=E,t.viewResolve=$,t.jsonResponse=z,t.HttpResponse=U,t.HttpError=B,Object.defineProperty(t,"__esModule",{value:!0})});
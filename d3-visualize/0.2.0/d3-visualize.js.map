{"version":3,"file":"d3-visualize.js","sources":["../src/utils/randompath.js","../src/data/array.js","../src/data/warn.js","../src/utils/isurl.js","../src/data/remote.js","../src/data/composite.js","../src/data/expression.js","../src/utils/accessor.js","../src/data/dataframe.js","../src/transforms/base.js","../src/transforms/filter.js","../src/utils/warn.js","../src/utils/fillarray.js","../src/transforms/aggregate.js","../src/transforms/crossfilter.js","../src/transforms/timeseries.js","../src/core/options.js","../src/transforms/mapfields.js","../src/utils/minmax.js","../src/transforms/moving-average.js","../src/transforms/group-small.js","../src/transforms/index.js","../src/data/sources.js","../src/data/store.js","../src/utils/round.js","../src/utils/size.js","../src/utils/clone.js","../src/core/base.js","../src/core/visual.js","../src/utils/camelfunction.js","../src/core/chart.js","../src/core/paper.js","../src/plugins/menu.js","../src/utils/format.js","../src/plugins/data.js","../src/plugins/font.js","../src/plugins/responsive.js","../src/plugins/title.js","../src/plugins/margin.js","../src/plugins/axis.js","../src/plugins/shapes.js","../src/plugins/color.js","../src/plugins/legend.js","../src/utils/constant.js","../src/utils/functor.js","../src/utils/identity.js","../src/plugins/mouse.js","../src/plugins/tooltip.js","../src/core/container.js","../src/components/dashboard.js","../src/components/visual.js","../src/components/index.js","../src/utils/descending.js","../src/transforms/pyramid.js","../src/utils/nicerange.js","../src/charts/line.js","../src/charts/bar.js","../src/charts/box.js","../src/transforms/groups.js","../src/charts/area.js","../src/utils/text-wrapping.js","../src/charts/pie.js","../src/utils/polygon.js","../src/charts/pyramid.js","../src/utils/contrast.js","../src/charts/treemap.js","../src/charts/text.js","../src/charts/heatmap.js","../src/charts/geo.js","../index.js"],"sourcesContent":["import assign from 'object-assign';\nimport {range} from 'd3-array';\nimport {randomNormal} from 'd3-random';\n\n\nconst defaults = {\n    sigma: 0.1,\n    drift: 0\n};\n\n\nexport default function (size, options) {\n    options = assign({}, defaults, options);\n    var t = range(0, +size, 1),\n        S = options.sigma,\n        drift = options.drift,\n        data = [{x: 0, y: 0}],\n        norm = randomNormal(0, 1),\n        dx;\n\n    for (var i = 1; i < t.length; i++) {\n        dx = drift + S * norm();\n        data[i] = {\n            x: i,\n            y: data[i - 1].y + dx\n        };\n    }\n\n    return data;\n}\n","import {isArray, isObject} from 'd3-let';\nimport {resolvedPromise} from 'd3-view';\n\n//\n//  Array DataSource\n//  ====================\n//\n//  Data is given in an array, pkain & simple\nexport default {\n\n    initialise (config) {\n        this._data = config.data;\n    },\n\n    getConfig (config) {\n        if (isArray(config)) return {data: config};\n        else if (isObject(config) && isArray(config.data)) return config;\n    },\n\n    getData () {\n        return resolvedPromise(this.asFrame(this._data));\n    }\n};\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-data-source]';\n\n\nexport default function (msg) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n}\n","import {isString} from 'd3-let';\n\n\nconst schemes = ['http', 'https', 'ws', 'wss'];\n\n\nexport default function (value) {\n    return isString(value) && schemes.indexOf(value.split('://')[0]) > -1;\n}\n","import {csvParse} from 'd3-dsv';\nimport {set} from 'd3-collection';\nimport {isObject} from 'd3-let';\nimport {viewProviders} from 'd3-view';\n\nimport warn from './warn';\nimport isUrl from '../utils/isurl';\n\nconst CSV = set(['text/plain', 'text/csv', 'application/vnd.ms-excel']);\n//\n//  Remote dataSource\n//  ===================\n//\n//  handle Json and csv data\nexport default {\n\n    getConfig (config) {\n        if (isUrl(config)) return {url: config};\n        else if (isObject(config) && config.url)\n            return config;\n    },\n\n    initialise (config) {\n        this.url = config.url;\n    },\n\n    getData () {\n        var fetch = viewProviders.fetch,\n            self = this;\n        if (!fetch) {\n            warn('fetch provider not available, cannot submit');\n            return [];\n        }\n        return fetch(this.url).then(parse).then(data => self.asFrame(data));\n    }\n};\n\n\nfunction parse (response) {\n    var ct = (response.headers.get('content-type') || '').split(';')[0];\n    if (CSV.has(ct))\n        return response.text().then(csvParse);\n    else if (ct === 'application/json')\n        return response.json();\n    else {\n        warn(`Cannot load content type '${ct}'`);\n        return [];\n    }\n}\n","import {isArray, isObject} from 'd3-let';\n//\n//  A composite dataSource\n//  ===================\n//\n//  A composite data source has the source attribute with the name of one\n//  or more data sets to use as the source for this data set.\n//  The source property is useful in combination with a transform pipeline\n//  to derive new data.\n//  If string-valued, indicates the name of the source data set.\n//  If array-valued, specifies a collection of data source names that\n//  should be merged (unioned) together.\nexport default {\n\n    initialise (config) {\n        this.source = config.source;\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.source) {\n            if (!isArray(config.source)) config.source = [config.source];\n            return config;\n        }\n    },\n\n    getData () {\n        var store = this.store,\n            sources = this.source,\n            self = this;\n\n        return Promise.all(sources.map(source => {\n             return store.getData(source);\n        })).then(frames => {\n            if (frames.length === 1) return frames[0];\n            else if (self.config.merge) return self.mergeFrames(frames);\n            else return frames.reduce((o, frame, index) => {\n                o[sources[index]] = frame;\n                return o;\n            }, {type: 'frameCollection'});\n        });\n    },\n\n    // TODO: implement frame merging\n    mergeFrames (frames) {\n        return frames[0];\n    }\n};\n","import {isObject, isPromise} from 'd3-let';\nimport {viewExpression} from 'd3-view';\n\n\nexport default {\n\n    initialise (config) {\n        this.expression = viewExpression(config.expression);\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.expression)\n            return config;\n    },\n\n    getData () {\n        var self = this,\n            model = this.store.model,\n            result = this.expression.eval(model);\n        if (isPromise(result)) return result.then(data => self.asFrame(data));\n        else return self.asFrame(result);\n    }\n};\n","export default function (field) {\n    return function (d) {\n        return d[field];\n    };\n}\n","import {isArray} from 'd3-let';\nimport {map} from 'd3-collection';\nimport crossfilter from 'crossfilter';\n\nimport accessor from '../utils/accessor';\n\n\nexport default function DataFrame (data, serie, store) {\n    if (isArray(data)) data = {\n        store: store,\n        data: data,\n        dimensions: {},\n        series: map()\n    };\n    Object.defineProperties(this, {\n        _inner: {\n            get () {\n                return data;\n            }\n        },\n        store: {\n            get () {\n                return data.store;\n            }\n        },\n        data: {\n            get () {\n                return data.data;\n            }\n        },\n        dimensions: {\n            get () {\n                return data.dimensions;\n            }\n        },\n        series: {\n            get () {\n                return data.series;\n            }\n        }\n    });\n    this.serie = serie;\n}\n\n\nDataFrame.prototype = {\n\n    size () {\n        return this.data.length;\n    },\n\n    new (serie) {\n        if (isArray(serie)) return new DataFrame(serie, null, this.store);\n        else return new DataFrame(this._inner, serie);\n    },\n\n    cf () {\n        if (!this._inner.cf) this._inner.cf = crossfilter(this.data);\n        return this._inner.cf;\n    },\n\n    //  Create and return a crossfilter dimension\n    //  If value is not specified, keepExisting is by default true, and any\n    //  existing dimension name is recycled.\n    dimension (name, value, keepExisting) {\n        if (arguments.length === 1) keepExisting = true;\n        var current = this.dimensions[name];\n        if (current) {\n            if (keepExisting) return current;\n            current.dispose();\n        }\n        if (!value) value = accessor(name);\n        this.dimensions[name] = this.cf().dimension(value);\n        return this.dimensions[name];\n    },\n\n    //  Sort a dataframe by name and return the top values or all of them if\n    //  top is not defined. The name can be a function.\n    sortby (name, top) {\n        return this.new(this.dimension(name).top(top || Infinity));\n    },\n\n    // return a new dataframe by pivoting values for field name\n    pivot (dimension, key, value, total) {\n        var group = this.dimension(dimension).group();\n        if (!total) total = 'total';\n        return this.new(group.reduce(pivoter(1), pivoter(-1), Object).all().map(d => d.value));\n\n        function pivoter (m) {\n            let pk, pv;\n            return function (o, record) {\n                pk = ''+record[key];\n                pv = m*record[value];\n                o[dimension] = record[dimension];\n                if (pk in o) o[pk] += pv;\n                else o[pk] = pv;\n                if (total in o) o[total] += pv;\n                else o[total] = pv;\n                return o;\n            };\n        }\n    },\n\n    add () {\n        //this._inner.cf.add(data);\n    },\n\n    map (mapper) {\n        return this.new(this.data.map(mapper));\n    }\n};\n","import {viewProviders} from 'd3-view';\n\n\nexport default function (options) {\n    const\n        transform = options.transform,\n        schema = options.schema || {},\n        jsonValidator = viewProviders.jsonValidator ? viewProviders.jsonValidator(options.schema) : dummyValidator;\n    if (!schema.type) schema.type = 'object';\n\n    function transformFactory (config) {\n        const valid = jsonValidator.validate(config);\n\n        if (!valid) return jsonValidator.logError();\n\n        return doTransform;\n\n        function doTransform (frame) {\n            return transform(frame, config);\n        }\n    }\n\n    transformFactory.schema = schema;\n\n    return transformFactory;\n}\n\n\nconst dummyValidator = {\n    validate () {\n        return true;\n    }\n};\n","import {viewExpression} from 'd3-view';\n\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"The filter transform removes objects from a data frame based on a provided filter expression\",\n        properties: {\n            expr: {\n                type: \"string\"\n            }\n        },\n        required: [\"expr\"]\n    },\n    transform (frame, config) {\n        var expr = viewExpression(config.expr);\n        return frame.data.reduce((data, d, index) => {\n            if (expr.safeEval({d: d, index: index, frame: frame})) data.push(d);\n            return data;\n        }, []);\n    }\n});\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-visualize]';\n\n\nexport default function (msg) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n}\n","export default function (size, value) {\n    var a = new Array(size);\n    a.fill(value);\n    return a;\n}\n","import {map} from 'd3-collection';\nimport {isArray, isString} from 'd3-let';\nimport {max, min, sum, mean, median, variance, deviation} from 'd3-array';\n\nimport warn from '../utils/warn';\nimport fillArray from '../utils/fillarray';\n\nexport const operations = map({\n    count,\n    max,\n    min,\n    sum,\n    mean,\n    median,\n    variance,\n    deviation\n});\n\nexport const scalar_operations = map({\n    count (agg) {return agg + 1;},\n    sum (agg, v) {return agg + v;},\n    max: Math.max,\n    min: Math.min\n});\n\n\nfunction count (array, accessor) {\n    return array.reduce((v, d) => {\n        if (accessor(d) !== undefined) v += 1;\n        return v;\n    }, 0);\n}\n//\n// The aggregate transform groups and summarizes an imput data stream to\n// produce a derived output data stream. Aggregate transforms can be used\n// to compute counts, sums, averages and other descriptive statistics over\n// groups of data objects.\nexport default function (config) {\n    let fields = config.fields,\n        ops = config.ops,\n        as = config.as,\n        groupby = config.groupby;\n\n    if (!fields && !ops) return countAll;\n\n    if (!isArray(fields)) return warn('Aggregate transforms expect an array of fields');\n    if (!ops) ops = 'count';\n    if (isString(ops)) ops = fillArray(fields.length, ops);\n    if (!isArray(ops)) return warn('Aggregate transform expects an array of ops');\n    if (ops.length < fields.length) warn('Aggregate transforms expects an ops array with same length as fields');\n    if (!as) as = [];\n    if (!isArray(as)) return warn('Aggregate transform expects an array of as fields');\n    return aggregate;\n\n\n    function countAll (frame) {\n        let key;\n        return frame.data.reduce((o, d) => {\n            for (key in d) {\n                if (key in o) o[key] += 1;\n                else o[key] = 1;\n            }\n            return o;\n        }, {});\n    }\n\n    function aggregate (frame) {\n        var data = [],\n            name, op;\n\n        if (groupby) return group(frame);\n\n        fields.forEach((field, index) => {\n            name = ops[index];\n            op = count;\n            if (name) {\n                op = operations.get(name);\n                if (!op) {\n                    op = count;\n                    warn(`Operation ${ops[index]} is not supported, use count`);\n                }\n            }\n            data.push({\n                label: as[index] || field,\n                data: op(frame.data, d => d[field])\n            });\n        });\n        return data;\n    }\n\n    //\n    //  Perform aggregation with a set of data fields to group by\n    function group (frame) {\n        let v, name, op;\n        const entries = fields.map((field, index) => {\n            name = ops[index];\n            op = scalar_operations.get('count');\n            if (name) {\n                op = scalar_operations.get(name);\n                if (!op) {\n                    op = scalar_operations.get('count');\n                    warn(`Operation ${name} is not supported, use count`);\n                }\n            }\n            return {\n                field: field,\n                as: as[index] || field,\n                op: op\n            };\n        });\n\n        return frame.dimension(groupby).group().reduce((o, record) => {\n            return entries.reduce((oo, entry) => {\n                v = 0;\n                if (entry.as in oo) v = oo[entry.as];\n                oo[entry.as] = entry.op(v, record[entry.field]);\n                return oo;\n            }, o);\n        }, null, Object).all().map(d => {\n            d.value[groupby] = d.key;\n            return d.value;\n        });\n    }\n}\n","import {isArray, isString} from 'd3-let';\nimport warn from '../utils/warn';\n\n//\n// Apply a cross filter to an array of fields\nexport default function (config) {\n    let fields = config.fields,\n        query = config.query;\n\n    if (!isArray(fields)) return warn('crossfilter transform expects an array of fields');\n    if (!isArray(query)) return warn('crossfilter transform expects an array of query');\n    if (query.length != fields.length) return warn('crossfilter transform expects an query array with same length as fields');\n\n    return crossfilter;\n\n    function crossfilter (frame) {\n        let dim, q;\n        fields.forEach((field, index) => {\n            q = query[index];\n            if (isString(q)) q = frame.store.eval(q);\n            dim = frame.dimension(field).filterAll();\n            if (q) dim.filter(q);\n        });\n        if (dim) return frame.new(dim.top(Infinity));\n        return frame;\n    }\n}\n","import warn from '../utils/warn';\n\n//\n// Create a groupby transform from a config object\nexport default function (config) {\n    var sortby = config.sortby,\n        groupby = config.groupby;\n\n    if (!sortby) warn('timeseries transform requires a \"sortby\" entry');\n\n    return timeseries;\n\n    function timeseries (frame) {\n        if (sortby) {\n            if (groupby) {\n                var dim = frame.dimension(groupby),\n                    groups = dim.group().top(Infinity),\n                    newframe = frame.new([]),\n                    tmp;\n                groups.forEach(group => {\n                    tmp = frame.new(dim.filterExact(group.key).top(Infinity)).dimension(sortby).group().top(Infinity);\n                    newframe.series.set(group.key, frame.new(tmp).dimension('key').top(Infinity));\n                });\n                return newframe;\n            } else {\n                return frame.new(frame.dimension(sortby).top(Infinity));\n            }\n        }\n        return frame;\n    }\n}\n","//\n//  Global options for visuals\n//  ============================\n//\nexport default {\n    // visual data source\n    dataSource: null,\n    //\n    size: {\n        // width set by the parent element\n        width: null,\n        // height set as percentage of width\n        height: '70%'\n    }\n};\n","//\n//  Map Fields Transform\n//  ========================\n//\n//  Convert a set af fields to a different data type\n//\nimport {map} from 'd3-collection';\nimport {isString} from 'd3-let';\nimport {utcParse} from 'd3-time-format';\n\nimport transformFactory from './base';\nimport warn from '../utils/warn';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.dateFormat = '%d-%b-%y';\n\n\nconst converters = {\n    date (entry) {\n        return utcParse(entry.dateFormat || globalOptions.dateFormat);\n    },\n    number () {\n        return parseFloat;\n    }\n};\n\nexport default transformFactory({\n    shema: {\n        description: \"map a field values into another type\",\n        properties: {\n            fields: {\n                type: \"object\"\n            },\n            dateFormat: {\n                type: \"string\"\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        var fields = map(config.fields),\n            mappers = [];\n        let i, converter;\n\n        fields.each((entry, key) => {\n            if (isString(entry)) entry = {type: entry};\n            converter = converters[entry.type];\n            if (!converter) warn(`Cannot convert field ${key} to type ${entry.type}`);\n            else mappers.push([key, converter(entry)]);\n        });\n\n        if (mappers.length)\n            frame = frame.map(d => {\n                for (i=0; i<mappers.length; ++i)\n                    d[mappers[i][0]] = mappers[i][1](d[mappers[i][0]]);\n                return d;\n            });\n\n        return frame;\n    }\n});\n","export default function (value, min, max) {\n    return Math.max(Math.min(value, max), min);\n}\n","import transformFactory from './base';\nimport minmax from '../utils/minmax';\n\nconst\n    DEFAULT_METHOD = 'ema',   // or sma simple moving average\n    DEFAULT_PERIOD = 10,\n    DEFAULT_ALPHA = 0.5,\n    MAXALPHA = 0.999999;\n\n//\n// Exponential moving average transform\n// Useful for smoothing out volatile timeseries\nexport default transformFactory({\n    shema: {\n        description: \"Create moving average series from existing one. The new series override the existing one unless the as array is provided\",\n        properties: {\n            method: {\n                type: \"string\"\n            },\n            alpha: {\n                type: \"number\"\n            },\n            period: {\n                type: \"number\"\n            },\n            fields: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            as: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        const as = config.as || [],\n            method = config.method || DEFAULT_METHOD;\n        let fieldto, y, s;\n\n        config.fields.forEach((field, index) => {\n            fieldto = as[index] || field;\n            //\n            // Simple Moving Average\n            if (method === 'sma') {\n                const period = Math.max(config.period || DEFAULT_PERIOD, 1),\n                    cumulate = [],\n                    buffer = [];\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (cumulate.length === period) y -= buffer.splice(0, 1)[0];\n                    buffer.push(y);\n                    if (index) y += cumulate[cumulate.length-1];\n                    cumulate.push(y);\n                    d[fieldto] = y/cumulate.length;\n                });\n            //\n            // Exponential moving average\n            } else {\n                const alpha = minmax(config.alpha || DEFAULT_ALPHA, 1-MAXALPHA, MAXALPHA);\n\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (!index) s = y;\n                    else s = alpha*s + (1-alpha)*y;\n                    d[fieldto] = s;\n                });\n            }\n        });\n    }\n});\n","import {sum} from 'd3-array';\n\nimport accessor from '../utils/accessor';\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"Group entries which are below a given aggregate cutoff\",\n        properties: {\n            field: {\n                type: \"string\"\n            },\n            cutoff: {\n                type: \"number\"\n            }\n        },\n        required: [\"field\", \"cutoff\"]\n    },\n    transform (frame, config) {\n        var get = accessor(config.field),\n            total = sum(frame.data, get);\n        let children = [],\n            aggregate = 0;\n        return frame.dimension(config.field).bottom(Infinity).reduce((data, d) => {\n            aggregate += get(d);\n            if (aggregate/total < config.cutoff) children.push(d);\n            else if (children) {\n                children.push(d);\n                d = {\n                    label: 'other',\n                    children: children\n                };\n                d[config.field] = aggregate;\n                children = null;\n                data.push(d);\n            } else\n                data.push(d);\n            return data;\n        }, []);\n    }\n});\n","// Collection of transforms\nimport {map} from 'd3-collection';\nimport {isArray} from 'd3-let';\n\nimport filter from './filter';\nimport aggregate from './aggregate';\nimport crossfilter from './crossfilter';\nimport timeseries from './timeseries';\nimport mapfields from './mapfields';\nimport movingaverage from './moving-average';\nimport groupsmall from './group-small';\n\n//\n//  transforms Store\nexport default map({\n    filter,\n    aggregate,\n    mapfields,\n    timeseries,\n    crossfilter,\n    movingaverage,\n    groupsmall\n});\n\n\n// Apply data transforms to a series\nexport function applyTransforms (frame, transforms) {\n    let ts;\n    if (!transforms) return frame;\n    transforms.forEach(transform => {\n        if (transform) {\n            ts = transform(frame);\n            if (isArray(ts)) frame = frame.new(ts);\n            else if (ts) frame = ts;\n        }\n    });\n    return frame;\n}\n","import assign from 'object-assign';\nimport {map} from 'd3-collection';\nimport {dispatch} from 'd3-dispatch';\nimport {pop, isArray} from 'd3-let';\n\nimport DataFrame from './dataframe';\nimport transformStore, {applyTransforms} from '../transforms/index';\nimport warn from '../utils/warn';\n\nconst dataEvents = dispatch('init', 'data');\n\n\n//\n//  DataSource prototype\n//  ======================\nconst dataSourcePrototype = {\n\n    // get the config object-assign// This method is used by the prototype\n    // to check if the config object is a valid one\n    getConfig () {},\n\n    // initialise the data source with a config object\n    initialise () {},\n\n    getData () {},\n\n    //\n    addTransforms (transforms) {\n        var self = this;\n        let t;\n        if (!transforms) return;\n        if (!isArray(transforms)) transforms = [transforms];\n        transforms.forEach(transform => {\n            t = transformStore.get(transform.type);\n            if (!t) warn(`Transform type \"${transform.type}\" not known`);\n            else self.transforms.push(t(transform));\n        });\n    },\n    //\n    // given a data object returns a Cross filter object\n    asFrame (data) {\n        if (isArray(data)) {\n            data = data.map(entry => {\n                if (entry.constructor !== Object) entry = {data: entry};\n                return entry;\n            });\n            data = new DataFrame(data, null, this.store);\n        }\n        return applyTransforms(data, this.transforms);\n    }\n};\n\n\n// DataSource container\nexport default assign(map(), {\n    events: dataEvents,\n\n    add (type, source) {\n\n        // DataSource constructor\n        function DataSource (config, store) {\n            initDataSource(this, type, config, store);\n        }\n\n        DataSource.prototype = assign({}, dataSourcePrototype, source);\n\n        this.set(type, DataSource);\n        return DataSource;\n    },\n\n    // Create a new DataSource\n    create (config, store) {\n        var sources = this.values(),\n            cfg;\n        for (var i=0; i<sources.length; ++i) {\n            cfg = sources[i].prototype.getConfig(config);\n            if (cfg) return new sources[i](cfg, store);\n        }\n    }\n});\n\n\nfunction initDataSource(dataSource, type, config, store) {\n\n    var name = store.dataName(pop(config, 'name')),\n        transforms = [];\n\n    // store.natural = cf.dimension(d => d._id);\n\n    Object.defineProperties(dataSource, {\n        name: {\n            get () {\n                return name;\n            }\n        },\n        store: {\n            get () {\n                return store;\n            }\n        },\n        type: {\n            get () {\n                return type;\n            }\n        },\n        // transforms to apply to data\n        transforms: {\n            get () {\n                return transforms;\n            }\n        },\n        config: {\n            get () {\n                return config;\n            }\n        }\n    });\n\n    dataSource.initialise(config);\n    dataSource.addTransforms(pop(config, 'transforms'));\n    store.sources.set(name, dataSource);\n    dataEvents.call('init', undefined, dataSource);\n}\n","import assign from 'object-assign';\n\nimport {map} from 'd3-collection';\nimport {isArray, isString, isPromise} from 'd3-let';\nimport {viewExpression, resolvedPromise} from 'd3-view';\n\nimport array from './array';\nimport remote from './remote';\nimport composite from './composite';\nimport expression from './expression';\nimport dataSources from './sources';\nimport transformStore from '../transforms/index';\n\n\ndataSources.add('array', array);\ndataSources.add('remote', remote);\ndataSources.add('composite', composite);\ndataSources.add('expression', expression);\n\n//\n//  DataStore\n//  ==============\n//\n//  Map names to datasets\n//  Individual data sets are assumed to contain a collection of records\n//  (or “rows”), which may contain any number of named data\n//  attributes (fields, or “columns”).\n//  Records are modeled using standard JavaScript objects.\nexport default function DataStore(model) {\n    var sources = map();\n\n    Object.defineProperties(this, {\n        sources: {\n            get () {\n                return sources;\n            }\n        }\n    });\n\n    // transforms function\n    this.transforms = assign({}, transformStore);\n    this.dataCount = 0;\n    this.model = model;\n}\n\n\nDataStore.prototype = {\n    size () {\n        return this.sources.size();\n    },\n\n    // Add a new serie from a data source\n    addSources (config) {\n        //\n        // data is a string, it must be already registered with store\n        if (isString(config)) config = {source: config};\n\n        if (isArray(config)) {\n            var self = this;\n            return config.map(cfg => {\n                return dataSources.create(cfg, self);\n            });\n        } else if (config) {\n            return dataSources.create(config, this);\n        }\n    },\n\n    addTransforms (transforms) {\n        assign(this.transforms, transforms);\n    },\n\n    // set, get or remove a data source\n    source (name, source) {\n        if (arguments.length === 1) return this.sources.get(name);\n        if (source === null) {\n            var p = this.sources.get(name);\n            this.sources.remove(name);\n            return p;\n        }\n        this.sources.set(name, source);\n        return this;\n    },\n\n    clearCache () {\n        this.sources.each(ds => {\n            delete ds.cachedFrame;\n        });\n    },\n\n    // get data from a source\n    getData (source) {\n        var ds = this.sources.get(source);\n        if (!ds) throw new Error(`Data source ${source} not available`);\n        if (ds.cachedFrame) return resolvedPromise(ds.cachedFrame);\n        var data = ds.getData();\n        if (!isPromise(data)) data = resolvedPromise(data);\n        return data.then(frame => {\n            if (ds.config.cache) ds.cachedFrame = frame;\n            return frame;\n        });\n    },\n\n    eval (expr, context) {\n        let ctx = this.model;\n        if (context) ctx = ctx.$child(context);\n        return viewExpression(expr).safeEval(ctx);\n    },\n\n    dataName (name) {\n        this.dataCount++;\n        if (name) return '' + name;\n        var def = this.source('default');\n        if (!def) return 'default';\n        return `source${this.dataCount}`;\n    }\n};\n","export default function (x, n) {\n    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);\n}\n","import {select} from 'd3-selection';\n\nimport round from './round';\n\n\nconst WIDTH = 400;\nconst HEIGHT = '75%';\n\n\nexport function sizeValue (value, size) {\n    if (typeof(value) === \"string\" && value.indexOf('%') === value.length-1)\n        return round(0.01*parseFloat(value)*size);\n    return +value;\n}\n\n// Internal function for evaluating paper dom size\nexport function getSize (element, options) {\n    var size = {\n        width: options.width,\n        height: options.height\n    };\n\n    if (!size.width) {\n        size.width = getWidth(element);\n        if (size.width)\n            size.widthElement = getWidthElement(element);\n        else\n            size.width = WIDTH;\n    }\n\n    if (!size.height) {\n        size.height = getHeight(element);\n        if (size.height)\n            size.heightElement = getHeightElement(element);\n        else\n            size.height = HEIGHT;\n    }\n\n    // Allow to specify height as a percentage of width\n    size.height = sizeValue(size.height, size.width);\n    return size;\n}\n\n\nexport function getWidth (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementWidth(el);\n}\n\n\nexport function getHeight (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementHeight(el);\n}\n\n\nexport function getWidthElement (element) {\n    return getParentElementRect(element, 'width');\n}\n\n\nexport function getHeightElement (element) {\n    return getParentElementRect(element, 'height');\n}\n\n\nfunction elementWidth (el) {\n    var w = el.getBoundingClientRect()['width'],\n        s = select(el),\n        left = padding(s.style('padding-left')),\n        right = padding(s.style('padding-right'));\n    return w - left - right;\n}\n\n\nfunction elementHeight (el) {\n    var w = el.getBoundingClientRect()['height'],\n        s = select(el),\n        top = padding(s.style('padding-top')),\n        bottom = padding(s.style('padding-bottom'));\n    return w - top - bottom;\n}\n\n\nfunction getParentElementRect (element, key) {\n    let parent = element.node ? element.node() : element,\n        v;\n    while (parent && parent.tagName !== 'BODY') {\n        v = parent.getBoundingClientRect()[key];\n        if (v)\n            return parent;\n        parent = parent.parentNode;\n    }\n}\n\n\nfunction padding (value) {\n    if (value && value.substring(value.length-2) == 'px')\n        return +value.substring(0, value.length-2);\n    return 0;\n}\n\n\nexport function boundingBox (size) {\n    var w = size.widthElement ? getWidth(size.widthElement) : size.width,\n        h;\n    if (size.heightPercentage)\n        h = round(w*size.heightPercentage, 0);\n    else\n        h = size.heightElement ? getHeight(size.heightElement) : size.height;\n    if (size.minHeight)\n        h = Math.max(h, size.minHeight);\n    return [round(w), round(h)];\n}\n","import {isArray, isObject} from 'd3-let';\n\n\nexport default function clone (o) {\n    if (isArray(o)) return o.map(clone);\n    else if (isObject(o)) {\n        var v = {};\n        for (let key in o) {\n            v[key] = clone(o[key]);\n        }\n        return v;\n    } else return o;\n}\n","import assign from 'object-assign';\nimport {pop, isString, isObject} from 'd3-let';\nimport {dispatch} from 'd3-dispatch';\nimport {select} from 'd3-selection';\nimport {viewBase, viewModel} from 'd3-view';\nimport 'd3-transition';\n\nimport globalOptions from './options';\nimport {sizeValue} from '../utils/size';\nimport clone from '../utils/clone';\n\n\nconst CONTAINERS = ['visual', 'container'];\n\n//\n//  Gloval visuals object\n//  ==========================\n//\n//  Container of\n//  * live visuals\n//  * visual types\n//  * paper types\n//  * visual events\nexport const visuals = {\n    live: [],\n    types: {},\n    papers: {},\n    options: globalOptions,\n    events: dispatch(\n        'before-init',\n        'after-init',\n        'before-draw',\n        'after-draw'\n    )\n};\n\n//\n//  Visual Interface\n//  ====================\n//\n//  Base prototype object for visuals\n//\nexport const visualPrototype = assign({}, {\n\n    // initialise the visual with options\n    initialise () {\n\n    },\n\n    // draw this visual\n    draw () {},\n\n    // redraw the visual\n    // this is the method that should be invoked by applications\n    redraw (fetchData) {\n        if (this.drawing) {\n            var self = this,\n                event = `after-draw.${this.toString()}`;\n            visuals.events.on(event, () => {\n                // remove callback\n                visuals.events.on(event, null);\n                self.redraw(fetchData);\n            });\n        } else\n            this.drawing = this.draw(fetchData);\n        return this.drawing;\n    },\n\n    select (el) {\n        return select(el);\n    },\n\n    // destroy the visual\n    destroy () {},\n\n    toString () {\n        return `${this.visualType}-${this.model.uid}`;\n    },\n\n    // get a reactive model for type\n    getModel (type) {\n        if (!type) type = this.visualType;\n        var model = this.model[type];\n        if (!model && type in globalOptions) {\n            var options = pop(this.options, type),\n                self = this;\n            if (this.visualParent)\n                model = this.visualParent.getModel(type).$child(options);\n            else {\n                model = this.model.$new(globalOptions[type]);\n                model.$update(options);\n            }\n            this.model[type] = model;\n            //\n            // Trigger redraw when model change\n            // Do not fecth data\n            model.$on(() => self.redraw(false));\n        }\n        return model;\n    },\n\n    dim (size, refSize, minSize, maxSize) {\n        size = Math.max(sizeValue(size, refSize), minSize || 0);\n        if (maxSize) {\n            maxSize = Math.max(maxSize, minSize || 0);\n            size = Math.min(size, maxSize);\n        }\n        return size;\n    },\n    // pop this visual from a container\n    pop (container) {\n        if (container) {\n            var idx = container.live.indexOf(this);\n            if (idx > -1) container.live.splice(idx, 1);\n        }\n    },\n\n    getVisualSchema (name) {\n        var schema = this.options.visuals ? this.options.visuals[name] : null,\n            parent = this.visualParent;\n        if (parent && isString(schema)) {\n            name = schema;\n            schema = parent.getVisualSchema(name);\n        } else if (parent && !schema)\n            schema = parent.getVisualSchema(name);\n        if (isObject(schema))\n            return clone(schema);\n    }\n}, viewBase);\n\n//\n//  Create a new Visual Constructor\nexport default function (type, proto) {\n    const opts = pop(proto, 'options');\n    if (opts)\n        globalOptions[type] = opts;\n\n    function Visual(element, options, parent, model) {\n        Object.defineProperties(this, {\n            visualType: {\n                get () {\n                    return type;\n                }\n            },\n            isViz: {\n                get () {\n                    return CONTAINERS.indexOf(type) === -1;\n                }\n            },\n            visualRoot: {\n                get () {\n                    if (this.visualParent) return this.visualParent.visualRoot;\n                    return this;\n                }\n            }\n        });\n        this.visualParent = parent;\n        this.model = parent ? parent.model.$new() : (model || viewModel());\n        this.options = options || {};\n        this.drawing = false;\n        visuals.events.call('before-init', undefined, this);\n        this.initialise(element);\n        visuals.events.call('after-init', undefined, this);\n    }\n\n    Visual.prototype = assign({}, visualPrototype, proto);\n    visuals.types[type] = Visual;\n    return Visual;\n}\n","import {pop, inBrowser} from 'd3-let';\nimport {select} from 'd3-selection';\nimport {viewDebug} from 'd3-view';\n\nimport createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\nimport {getSize} from '../utils/size';\n\n//\n//  Visual\n//  =============\n//\n//  A Visual is a a container of visual layers and it is\n//  associated with an HTML element\n//\n//  Usually a Visual contains one layer only, however it is possible to\n//  have more than one by combining several layers together. Importantly,\n//  layers in one visual generate HTMLElements which are children of the visual\n//  element and inherit both the width and height.\n//\n//  A visual register itself with the visuals.live array\n//\nexport default createVisual('visual', {\n\n    options: {\n        render: 'svg',\n        // width set by the parent element\n        width: null,\n        // height set as percentage of width\n        height: '70%',\n        // heightElement - selector for an element from wich to obtain height\n        heightElement: null\n    },\n\n    initialise (element) {\n        if (!element) throw new Error('HTMLElement required by visual group');\n        if (this.visualParent && this.visualParent.visualType !== 'container')\n            throw new Error('Visual parent can be a container only');\n        if (!this.select(element).select('.paper').node())\n            this.select(element).append('div').classed('paper', true);\n\n        Object.defineProperties(this, {\n            element : {\n                get () {\n                    return element;\n                }\n            },\n            paper : {\n                get () {\n                    return this.sel.select('.paper');\n                }\n            },\n            sel: {\n                get () {\n                    return select(element);\n                }\n            },\n            size: {\n                get () {\n                    return [this.width, this.height];\n                }\n            }\n        });\n\n        this.sel.classed('d3-visual', true);\n        // list of layers which define the visual\n        this.layers = [];\n        this.drawCount = 0;\n        visuals.live.push(this);\n        element.__visual__ = this;\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    // Draw the visual\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        else if (!this.drawCount) {\n            this.drawCount = 1;\n            this.fit();\n        } else {\n            this.drawCount++;\n            this.clear();\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, this);\n        return Promise.all(this.layers.map(visual => visual.redraw(fetchData)))\n            .then(() => {\n                delete self.drawing;\n                visuals.events.call('after-draw', undefined, self);\n            }, err => {\n                delete self.drawing;\n                warn(`Could not draw ${self.toString()}: ${err}`);\n            });\n    },\n\n    clear () {},\n\n    // Add a new visual to this group\n    addVisual (options) {\n        var type = pop(options, 'type');\n        var VisualClass = visuals.types[type];\n        if (!VisualClass)\n            warn(`Cannot add visual \"${type}\", not available`);\n        else\n            return new VisualClass(this.element, options, this);\n    },\n    //\n    // Fit the root element to the size of the parent element\n    fit () {\n        this.resize(null, true);\n    },\n\n    // resize the chart\n    resize (size, fit) {\n        if (!size) size = getSize(this.element.parentNode || this.element, this.getModel());\n        var currentSize = this.size;\n\n        if (fit || (currentSize[0] !== size.width || currentSize[1] !== size.height)) {\n            if (!fit) viewDebug(`Resizing \"${this.toString()}\"`);\n            this.width = size.width;\n            this.height = size.height;\n            // this.paper.style('width', this.width + 'px').style('height', this.height + 'px');\n            this.paper.style('height', this.height + 'px');\n            // if we are not just fitting draw the visual without fetching data!!\n            if (!fit) this.draw(false);\n        }\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n        this.pop(visuals);\n    }\n});\n\n\nif (inBrowser) {\n    // DOM observer\n    // Check for changes in the DOM that leads to visual actions\n    const observer = new MutationObserver(visualManager);\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\n\n//\n//  Clears visualisation going out of scope\nfunction visualManager (records) {\n    records.forEach(record => {\n        var nodes = record.removedNodes;\n        if (!nodes || !nodes.length) return;  // phantomJs hack\n        nodes.forEach(node => {\n            if (node.nodeName !== '#text') {\n                if (!node.__visual__)\n                    select(node).selectAll('.d3-visual').each(destroy);\n                else\n                    destroy.call(node);\n            }\n        });\n    });\n}\n\n\nfunction destroy () {\n    var viz = this.__visual__;\n    if (viz) {\n        viz.destroy();\n        viewDebug(`Removed \"${viz.toString()}\" from DOM, ${visuals.live.length} live visuals left`);\n    }\n    else warn('d3-visual without __visual__ object');\n}\n","export default function (o, prefix, name, objectOnly) {\n    if (name.substring(0, prefix.length) !== prefix)\n        name = `${prefix}${name[0].toUpperCase()}${name.substring(1)}`;\n    return objectOnly ? o[name] : o[name]();\n}\n","import assign from 'object-assign';\nimport {isFunction, isArray} from 'd3-let';\nimport {require} from 'd3-view';\nimport * as d3_scale from 'd3-scale';\n\nimport createVisual, {visuals} from './base';\nimport Visual from './visual';\nimport camelFunction from '../utils/camelfunction';\nimport warn from '../utils/warn';\n\n//\n//  crateChart\n//\n//  A chart is a drawing of series data in two dimensional\nexport default function (type) {\n    var protos = [{}, vizPrototype, chartPrototype];\n    for (var i=1; i<arguments.length; ++i) protos.push(arguments[i]);\n    return createVisual(type, assign.apply(undefined, protos));\n}\n\n\n//  Viz Prototype\n//  =================\nexport const vizPrototype = {\n\n    initialise (element) {\n        // No visual parent, create the visual\n        var visual = this.visualParent;\n        if (!visual) {\n            this.visualParent = visual = new Visual(element, this.options, null, this.model);\n            this.model = visual.model.$new();\n            this.options = {};\n        } else if (visual.visualType !== 'visual')\n            throw new Error(`visual parent of ${this.visualType} can only be \"visual\"`);\n        visual.layers.push(this);\n    },\n\n    //\n    // paper object for this visualisation\n    paper () {\n        var visual = this.getModel('visual'),\n            paper = this._paper;\n        if (paper && paper.paperType === visual.render) return paper;\n        var PaperType = visuals.papers[visual.render];\n        if (!PaperType) throw new Error(`Unknown paper ${visual.render}`);\n        paper = new PaperType(this);\n        this._paper = paper;\n        return paper;\n    },\n\n    group (cname) {\n        if (!cname) cname = `${this.visualType}-${this.model.uid}`;\n        return this.paper().group(cname);\n    },\n\n    translate (x, y) {\n        if (isFunction(x)) {\n            return function (d) {\n                var xt = x(d) || 0,\n                    yt = y(d) || 0;\n                return `translate(${xt}, ${yt})`;\n            };\n        } else return `translate(${x}, ${y})`;\n    },\n\n    getScale (name) {\n        return camelFunction(d3_scale, 'scale', name);\n    },\n\n    displayError () {}\n};\n\n\nexport const chartPrototype = {\n\n    //  override draw method\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this,\n            doDraw = this.doDraw;\n\n        visuals.events.call('before-draw', undefined, this);\n\n        if (fetchData === false && this._drawArgs) {\n            delete self.drawing;\n            doDraw.apply(self, this._drawArgs);\n            visuals.events.call('after-draw', undefined, self);\n        } else {\n            return Promise.all([\n                this.requires ? require.apply(undefined, this.requires) : [],\n                // this.getMetaData(),\n                this.getData()\n            ]).then(args => {\n                delete self.drawing;\n                var frame = args[1];\n                if (frame) {\n                    args = isArray(args[0]) ? args[0] : [args[0]];\n                    args.unshift(frame);\n                    this._drawArgs = args;\n                    doDraw.apply(self, args);\n                    visuals.events.call('after-draw', undefined, self);\n                }\n            }, err => {\n                delete self.drawing;\n                warn(`Could not draw ${self.toString()}: ${err}`);\n                this.displayError(err);\n            });\n        }\n    }\n};\n","import assign from 'object-assign';\nimport {select} from 'd3-selection';\n\nimport {visuals} from './base';\n\n\nexport default function createPaper (type, proto) {\n\n    function Paper (viz) {\n        var element = this.initialise(viz);\n        Object.defineProperties(this, {\n            element: {\n                get () {\n                    return element;\n                }\n            },\n            sel: {\n                get () {\n                    return select(element);\n                }\n            },\n            paperType: {\n                get () {\n                    return type;\n                }\n            }\n        });\n    }\n\n    Paper.prototype = assign({}, paperPrototype, proto);\n\n    visuals.papers[type] = Paper;\n    return Paper;\n}\n\n\nconst paperPrototype = {\n\n    initialise () {},\n    transition () {},\n    size (box) {\n        this.sel\n            .attr('width', box.width)\n            .attr('height', box.height);\n        return this;\n    },\n\n    group (cname) {\n        if (!cname) cname = 'main';\n        var sel = this.sel;\n        sel\n            .selectAll(`.${cname}`)\n            .data([0]).enter()\n            .append('g').classed(cname, true);\n        return sel.select(`.${cname}`);\n    },\n\n    dim (value) {\n        return value;\n    }\n};\n\n\nexport const Svg = createPaper('svg', {\n\n    initialise (viz) {\n        var svg = viz.visualParent.paper.select(`svg#${viz.visualParent.model.uid}`);\n        if (!svg.size())\n            svg = viz.visualParent.paper.append('svg')\n                .attr('id', viz.visualParent.model.uid)\n                .classed(viz.visualType, true)\n                .style('position', 'absolute');\n        return svg.node();\n    }\n});\n\n\nexport const Div = createPaper('div', {\n\n    initialise (viz) {\n        var div = viz.visualParent.paper.append('div')\n            .attr('id', viz.model.uid)\n            .classed(viz.visualType, true);\n            //.style('position', 'absolute');\n        return div.node();\n    },\n\n    group (cname) {\n        if (!cname) cname = 'main';\n        var sel = this.sel;\n        sel\n            .selectAll(`.${cname}`)\n            .data([0]).enter()\n            .append('div').classed(cname, true);\n        return sel.select(`.${cname}`);\n    },\n});\n","//\n//  Add a menu buttom to a visual\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\n\n\nglobalOptions.menu = {\n    display: false,\n    height: '8%',\n    maxHeight: 50,\n    minHeight: 20\n};\n\n\nvisuals.events.on('after-init.menu', viz => {\n    if (viz.visualType === 'visual') {\n        var menu = viz.getModel('menu');\n        if (menu.display) {\n            viz.menu = viz.sel.insert('nav', ':first-child').classed('d3-nav navbar p-1', true);\n            viz.menu.append('h4').classed('title', true);\n        }\n    }\n});\n\nvisuals.events.on('before-draw.menu', viz => {\n    if (viz && viz.menu) {\n        refreshMenu(viz);\n    }\n});\n\n\nfunction refreshMenu(viz) {\n    var menu = viz.getModel('menu'),\n        height = viz.dim(menu.height, viz.height, menu.minHeight, menu.maxHeight);\n    viz.menu.style('height', `${height}px`);\n}\n","import {format} from 'd3-format';\nimport {map} from 'd3-collection';\n\nconst formats = map();\n\nexport default function (specifier, value) {\n    var fmt = formats.get(specifier);\n    if (!fmt) {\n        fmt = format(specifier);\n        formats.set(specifier, fmt);\n    }\n    return fmt(value);\n}\n","//\n//  dataStore integration with visuals\nimport {isString, pop} from 'd3-let';\nimport {resolvedPromise} from 'd3-view';\n\nimport {visuals} from '../core/base';\nimport DataStore from '../data/store';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\nimport cachedFormat from '../utils/format';\n\n//\n// Visual Data Context\nvisuals.options.dataContext = {\n    $format: cachedFormat\n};\n\n//  getData method\n//  =====================\n//\n//  Inject a method for easily retrieving data from the datastore\nvizPrototype.getData = function () {\n    var name = this.model.data;\n    if (!name) {\n        warn(`Visual ${this.visualType} without data name, cannot get data`);\n        return resolvedPromise();\n    }\n    return this.dataStore.getData(name);\n};\n\n//\n// Context for expression evaluation\nvizPrototype.getContext = function (context) {\n    return this.dataStore.model.$child(context);\n};\n\n\nvisuals.events.on('before-init.data', viz => {\n    if (!viz.isViz) return;\n    // remove data from options\n    viz.data = pop(viz.options, 'data');\n});\n\n\nvisuals.events.on('after-init.data', viz => {\n    Object.defineProperties(viz, {\n        dataStore : {\n            get () {\n                return viz.model.root.dataStore;\n            }\n        },\n    });\n    if (viz.isViz) setupLayer(viz);\n    else setupVisual(viz);\n});\n\n\nfunction setupVisual (visual) {\n    var store = visual.dataStore,\n        data = pop(visual.options, 'data');\n    //\n    if (!store) {\n        // create the data store for the visual or container\n        store = new DataStore(visual.getModel('dataContext'));\n        visual.model.root.dataStore = store;\n    }\n    store.addSources(data);\n}\n\n\nfunction setupLayer (layer) {\n    var store = layer.dataStore,\n        data = pop(layer, 'data');\n    if (!data) return;\n    if (isString(data)) data = {source: data};\n    if (!data.name) data.name = layer.model.uid;\n    data = store.addSources(data);\n    if (data)\n        layer.model.$set('data', data.name);\n    else\n        warn(`Could not create data source ${data.name}`);\n}\n","import {vizPrototype} from '../core/chart';\nimport {visuals} from '../core/base';\n\n\nvisuals.options.font = {\n    size: '3%',\n    minSize: 10,\n    maxSize: 20\n};\n\n\nvizPrototype.font = function (box) {\n    var model = this.getModel(),\n        font = this.getModel('font'),\n        size = this.dim(font.size, box.height, font.minSize, font.maxSize);\n    if (model.fontSizeMultiplier)\n        size *= model.fontSizeMultiplier;\n    return size;\n};\n","import {inBrowser} from 'd3-let';\nimport {viewDebounce} from 'd3-view';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nif (!globalOptions.resizeDelay)\n    globalOptions.resizeDelay = 200;\n\n\nif (inBrowser) {\n    var resize = viewDebounce(() => {\n        visuals.live.forEach(p => p.resize());\n    }, globalOptions.resizeDelay);\n\n    select(window).on('resize.visuals', resize);\n}\n","// Title plot annotation\nimport {isString} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.title = {\n    text: null,\n    fontSize: '5%',\n    minFontSize: 15,\n    maxFontSize: 25\n};\n\n\nvisuals.events.on('before-init.title', viz => {\n    var title = viz.options.title;\n    if (isString(title)) viz.options.title = {text: title};\n});\n\n\nvisuals.events.on('before-draw.title', viz => {\n    var title = viz.getModel('title');\n    if (!title.text) return;\n    var visual = viz.isViz ? viz.visualParent : viz;\n    if (visual.visualType === 'visual' && visual.menu) menuTitle(visual, title, viz);\n});\n\n\nfunction menuTitle(visual, title, viz) {\n    var height = number(visual.menu.style('height')),\n        maxSize = title.maxFontSize ? Math.min(height-4, title.maxFontSize) : height-4,\n        size = viz.dim(title.fontSize, visual.width, title.minFontSize, maxSize);\n    visual.menu.select('.title')\n        .html(title.text)\n        .style('font-size', `${size}px`)\n        .style('line-height', `${height}px`);\n}\n\n\nfunction number (px) {\n    return +px.substring(0, px.length-2);\n}\n","import {isObject} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport {sizeValue} from '../utils/size';\n\n\nconst KEYS = ['top', 'bottom', 'left', 'right'];\nconst LEFTRIGHT = ['left', 'right'];\n\n\n// margin for visual marks\nglobalOptions.margin = {\n    top: 20,\n    bottom: 20,\n    left: 20,\n    right: 20\n};\n// padding for the visual paper\nglobalOptions.padding = {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n};\n\n\n//\n//  Bounding box for a viz\n//  ==========================\nvizPrototype.boundingBox = function () {\n    var width = this.visualParent.width,\n        height = this.visualParent.height,\n        margin = calculate(this.getModel('margin'), width, height),\n        padding = calculate(this.getModel('padding'), width, height),\n        total = KEYS.reduce((o, key) => {\n            o[key] = margin[key] + padding[key];\n            return o;\n        }, {});\n    return {\n        width: width,\n        height: height,\n        margin: margin,\n        padding: margin,\n        total: total,\n        innerWidth: width - total.left - total.right,\n        innerHeight: height - total.top - total.bottom\n    };\n};\n\n\nvisuals.events.on('after-init.margin', viz => {\n    viz.margin = margins('margin', viz);\n    viz.padding = margins('padding', viz);\n});\n\n\nfunction margins (name, viz) {\n    var value = viz.options[name];\n\n    if (value !== undefined && !isObject(value)) {\n        var v = value || 0;\n        viz.options[name] = {\n            left: v,\n            right: v,\n            top: v,\n            bottom: v\n        };\n    }\n}\n\n\nfunction calculate (model, width, height) {\n    return KEYS.reduce((o, key) => {\n        o[key] = sizeValue(model[key], LEFTRIGHT.indexOf(key) > -1 ? width : height);\n        return o;\n    }, {});\n}\n","import assign from 'object-assign';\n\nimport {map} from 'd3-collection';\nimport {format} from 'd3-format';\nimport {timeFormat} from 'd3-time-format';\nimport {axisTop, axisBottom, axisLeft, axisRight} from 'd3-axis';\nimport {isDate} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\n\n\nconst axisOrientation = map({\n    top: axisTop,\n    bottom: axisBottom,\n    left: axisLeft,\n    right: axisRight\n});\n\nconst axisDefaults = {\n    ticks: 5,\n    tickSize: 6,\n    tickSizeOuter: null,\n    format: null,\n    timeFormat: '%Y-%m-%d',\n    stroke: '#333',\n    // title\n    title: null,\n    titleRotate: null,\n    titleShift: 2/3\n};\n\n\nvisuals.options.xAxis = assign({\n    location: \"bottom\"\n}, axisDefaults);\n\n\nvisuals.options.yAxis = assign({\n    location: \"left\"\n}, axisDefaults);\n\n\nvizPrototype.xAxis = function (scale, x, y) {\n    var model = this.getModel('xAxis'),\n        axis = getAxis(model.location, scale, model);\n    this.paper()\n        .group('x-axis')\n        .attr(\"transform\", this.translate(x, y))\n        .transition()\n        .call(axis).select('path.domain').attr('stroke', model.stroke);\n};\n\nvizPrototype.yAxis = function (scale, x, y) {\n    var model = this.getModel('yAxis'),\n        axis = getAxis(model.location, scale, model);\n    this.paper()\n        .group('y-axis')\n        .attr(\"transform\", this.translate(x, y))\n        .transition()\n        .call(axis).select('path.domain').attr('stroke', model.stroke);\n};\n\n\nvizPrototype.xAxis1 = function (location, scale, box, value) {\n    var model = this.getModel('xAxis'),\n        axis = getAxis(location, scale, model, value);\n    this.paper()\n        .group('x-axis')\n        .attr(\"transform\", this.translateAxis(location, box))\n        .transition()\n        .call(axis).select('path.domain').attr('stroke', model.stroke);\n    if (model.title)\n        this.axisTitle(location, scale, box, model);\n};\n\n\nvizPrototype.yAxis1 = function (location, scale, box, value) {\n    var model = this.getModel('yAxis'),\n        axis = getAxis(location, scale, model, value);\n    this.paper()\n        .group('y-axis')\n        .attr(\"transform\", this.translateAxis(location, box))\n        .transition()\n        .call(axis).select('path.domain').attr('stroke', model.stroke);\n    if (model.title)\n        this.axisTitle(location, scale, box, model);\n};\n\n\nvizPrototype.axis = function (orientation, scale) {\n    return axisOrientation.get(orientation)(scale);\n};\n\n\n//\n//  Apply Axis title\nvizPrototype.axisTitle = function (location, scale, box, model) {\n    var rotate = model.titleRotate || 0, x = 0, y = 0,\n        title = this.group('axis-'+location+'-title')\n                    .attr(\"transform\", this.translateAxis(location, box))\n                    .selectAll('text')\n                    .data([model.title]);\n    if (!rotate && (location === 'right' || location === 'left')) rotate = -90;\n    if (location == \"left\") {\n        x =-model.titleShift*box.margin.left;\n        y = box.innerHeight/2;\n    }\n    var translate = `translate(${x},${y}) rotate(${rotate})`,\n        font = this.font(box);\n\n    title\n        .enter()\n            .append('text')\n            .attr(\"transform\", translate)\n            .style(\"text-anchor\", \"middle\")\n            .style(\"font-size\", font)\n            .style(\"fill\", model.stroke)\n            .text(d => d)\n        .merge(title)\n            .transition()\n            .attr(\"transform\", translate)\n            .style(\"font-size\", font)\n            .style(\"fill\", model.stroke)\n            .text(d => d);\n};\n\nvizPrototype.translateAxis = function (location, box) {\n    if (location === 'top' || location === 'left')\n        return this.translate(box.total.left, box.total.top);\n    else if (location === 'bottom')\n        return this.translate(box.total.left, box.total.top+box.innerHeight);\n    else\n        return this.translate(box.total.left+box.innerWidth, box.total.top);\n};\n\nfunction getAxis (location, scale, model, value) {\n    var axis = axisOrientation.get(location)(scale).tickSize(model.tickSize);\n    if (model.tickSizeOuter !== null) axis.tickSizeOuter(model.tickSizeOuter);\n    if (isDate(value)) axis.tickFormat(timeFormat(model.timeFormat));\n    else if (model.format !== null) axis.tickFormat(format(model.format));\n    return axis.ticks(model.ticks);\n}\n","import {symbol, symbolCircle, symbolSquare, symbolStar} from 'd3-shape';\nimport {map} from 'd3-collection';\n\nimport {vizPrototype} from '../core/chart';\n\nconst symbols = map({\n    circle: symbolCircle,\n    square: symbolSquare,\n    star: symbolStar\n});\n\n\nvizPrototype.getSymbol = function (name) {\n    var s = symbols.get(name);\n    return symbol().type(s);\n};\n","import {map} from 'd3-collection';\nimport {range} from 'd3-array';\nimport {color} from 'd3-color';\nimport {isObject} from 'd3-let';\nimport {\n    scaleSequential,\n    interpolateViridis, interpolateInferno, interpolateMagma,\n    interpolatePlasma, interpolateWarm, interpolateCool,\n    interpolateRainbow, interpolateCubehelixDefault\n} from 'd3-scale';\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\n\nexport const colorScales = map();\n\n\nglobalOptions.color = {\n    scale: 'cool',\n    // Minumim number of colors in a sequantial color scale\n    // This helps in keeping a consistent palette when few colors are used\n    scaleMinPoints: 6,\n    // An offset in the color scale, useful for combined visuals\n    scaleOffset: 0,\n    stroke: '#333',\n    strokeOpacity: 1,\n    fillOpacity: 1,\n};\n\ncolorScales.set('viridis', () =>  scaleSequential(interpolateViridis));\ncolorScales.set('inferno', () =>  scaleSequential(interpolateInferno));\ncolorScales.set('magma', () =>  scaleSequential(interpolateMagma));\ncolorScales.set('plasma', () =>  scaleSequential(interpolatePlasma));\ncolorScales.set('warm', () =>  scaleSequential(interpolateWarm));\ncolorScales.set('cool', () =>  scaleSequential(interpolateCool));\ncolorScales.set('rainbow', () =>  scaleSequential(interpolateRainbow));\ncolorScales.set('cubehelix', () =>  scaleSequential(interpolateCubehelixDefault));\n\n//\n//  Color scale method\n//  ==========================\nvizPrototype.colors = function (n) {\n    var color = this.getModel('color'),\n        scaleDef = colorScales.get(color.scale);\n\n    if (!scaleDef) throw new Error(`Unknown scale ${color.scale}`);\n    if (!isObject(scaleDef)) scaleDef = {scale: scaleDef};\n    if (scaleDef.minPoints === undefined) scaleDef.minPoints = color.scaleMinPoints;\n\n    var offset = color.scaleOffset,\n        npoints = n + offset,\n        points = Math.max(npoints, scaleDef.minPoints),\n        domain = scaleDef.reversed ? [points-1, 0] : [0, points-1],\n        scale = scaleDef.scale().domain(domain);\n    return range(offset, Math.min(npoints, points)).map(v => scale(v));\n};\n\n//\n//  Linear Gradient method\n//  ==========================\n//\n//  Create a monocromatic linear gradient in the visualization box,\n//  either horizontal or vertical\nvizPrototype.linearGradient = function (col, box, orientation, gid) {\n    var paper = this.paper().sel,\n        defs = paper.select('defs');\n    if (!defs.node()) defs = paper.append('defs');\n    const\n        grad = defs.selectAll(`#${gid}`).data([0]),\n        colto = color(col);\n\n    colto.opacity = 0.1;\n\n    grad.enter()\n        .append('linearGradient')\n        .attr('id', gid)\n        .attr('x1', '0%')\n        .attr('y1', '0%')\n        .attr('x2', orientation === 'vertical' ? '0%' : '100%')\n        .attr('y2', orientation === 'vertical' ? '100%' : '0%');\n\n    var stops = defs.select(`#${gid}`)\n                    .selectAll('stop')\n                    .data([{offset: '0%', color: col}, {offset: '100%', color: colto}]);\n\n    stops.enter()\n            .append('stop')\n        .merge(stops)\n            .attr('offset', d => d.offset)\n            .attr('stop-color', d => d.color);\n\n    return `url(#${gid})`;\n};\n","import {legendColor, legendSize, legendSymbol} from 'd3-svg-legend';\nimport {map} from 'd3-collection';\nimport {pop} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nglobalOptions.legend = {\n    location: \"top-right\",\n    orient: \"vertical\",\n    fontSize: '3%',\n    title: '',\n    titleWidth: \"20%\",\n    labelFormat: null,\n    titleMinWidth: 30,\n    titleMaxWidth: 60,\n    minFontSize: 10,\n    maxFontSize: 20,\n    offsetX: 10,\n    offsetY: 10,\n    shapeWidth: 15,\n    shapeHeight: 15\n};\n\n\nconst legends = {\n    color: legendColor,\n    size: legendSize,\n    symbol: legendSymbol\n};\n\n\n//\n//  Legend method\n//  ==========================\nvizPrototype.legend = function (cfg, box) {\n    var vizModel = this.getModel(),\n        lgModel = this.getModel('legend'),\n        name = pop(cfg, 'type') || vizModel.legendType,\n        size = this.dim(lgModel.fontSize, box.height, lgModel.minFontSize, lgModel.maxFontSize);\n    if (!name) return;\n    var legend = legends[name];\n    if (!legend) return warn(`Could not load legend ${name}`);\n    legend = legend().orient(lgModel.orient);\n    if (lgModel.title) {\n        var width = this.dim(lgModel.titleWidth, box.width, lgModel.titleMinWidth, lgModel.titleMaxWidth);\n        legend.title(lgModel.title).titleWidth(width);\n    }\n\n    if (lgModel.labelFormat) legend.labelFormat(lgModel.labelFormat);\n    legend.shapeWidth(lgModel.shapeWidth).shapeHeight(lgModel.shapeHeight);\n\n    // apply cfg parameters\n    for (let key in cfg) legend[key](cfg[key]);\n\n    var g = this.paper()\n            .group('legend')\n            .style('font-size', `${size}px`)\n            .html('')\n            .call(legend),\n        bb = locations.get(lgModel.location)(g.node().getBBox(), box, lgModel);\n    g.attr('transform', this.translate(bb.x, bb.y));\n};\n\n\nconst locations = map({\n    top,\n    bottom,\n    right,\n    left,\n    'top-left': topLeft,\n    'top-right': topRight,\n    'bottom-left': bottomLeft,\n    'bottom-right': bottomRight\n});\n\n\nfunction top (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: options.offsetY\n    };\n}\n\n\nfunction bottom (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: box.height - bb.height - options.offsetY\n    };\n}\n\n\nfunction right (bb, box, options) {\n    return {\n        x: box.width - bb.width - options.offsetX,\n        y: box.total.top + (box.innerHeight - bb.height)/2\n    };\n}\n\n\nfunction left (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: options.offsetY\n    };\n}\n\n\nfunction topLeft (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: options.offsetY\n    };\n}\n\n\nfunction topRight (bb, box, options) {\n    return {\n        x: box.width - bb.width - options.offsetX,\n        y: options.offsetY\n    };\n}\n\n\nfunction bottomLeft (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: box.height - bb.height - options.offsetY\n    };\n}\n\n\nfunction bottomRight (bb, box, options) {\n    return {\n        x: box.width - bb.width - options.offsetX,\n        y: box.height - bb.height - options.offsetY\n    };\n}\n","export default function (x) {\n    return function constant() {\n        return x;\n    };\n}\n","import {isFunction} from 'd3-let';\n\nimport constant from './constant';\n\nexport default function (v) {\n    if (isFunction(v)) return v;\n    return constant(v);\n}\n","export default function (d) {\n    return d;\n}\n","//\n//\n//  Mouse events handling\n//  ==========================\n//\nimport {map} from 'd3-collection';\nimport {color} from 'd3-color';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nexport const mouseStrategies = map({\n    darker: darkerStrategy(),\n    fill: fillStrategy()\n});\n\n\nvisuals.options.mouse = {\n    over: ['darker'],\n    darkerFactor: 0.5,\n    fillColor: '#addd8e'\n};\n\n\nvizPrototype.mouseOver = function () {\n    var self = this,\n        model = this.getModel('mouse');\n\n    return function (d, i) {\n        if (!this.__mouse_over__) this.__mouse_over__ = {};\n        var sel = self.select(this);\n        let strategy;\n        model.over.forEach(name => {\n            strategy = mouseStrategies.get(name);\n            if (!strategy) warn(`Unknown mouse strategy ${name}`);\n            else strategy(self, sel, d, i);\n        });\n    };\n};\n\nvizPrototype.mouseOut = function () {\n    var self = this,\n        model = this.getModel('mouse');\n\n    return function (d, i) {\n        if (!this.__mouse_over__) this.__mouse_over__ = {};\n        var sel = self.select(this);\n        let strategy;\n        model.over.forEach(name => {\n            strategy = mouseStrategies.get(name);\n            if (!strategy) warn(`Unknown mouse strategy ${name}`);\n            else strategy.out(self, sel, d, i);\n        });\n    };\n};\n\n\nfunction darkerStrategy () {\n\n    function darker (viz, sel) {\n        var model = viz.getModel('mouse'),\n            fill = color(sel.style('fill')),\n            filldarker = fill.darker(model.darkerFactor),\n            node = sel.node();\n        node.__mouse_over__.fill = fill;\n        sel.style('fill', filldarker);\n    }\n\n    darker.out = function (viz, sel) {\n        var node = sel.node(),\n            fill = node.__mouse_over__.fill;\n        if (fill) sel.style('fill', fill);\n    };\n\n    return darker;\n}\n\n\nfunction fillStrategy () {\n\n    function fill (viz, sel) {\n        var model = viz.getModel('mouse'),\n            fill = color(sel.style('fill')),\n            node = sel.node();\n        node.__mouse_over__.fill = fill;\n        sel.transition().style('fill', model.fillColor);\n    }\n\n    fill.out = function (viz, sel) {\n        var node = sel.node(),\n            fill = node.__mouse_over__.fill;\n        if (fill) sel.transition().style('fill', fill);\n    };\n\n    return fill;\n}\n","import {map} from 'd3-collection';\nimport {inBrowser} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport functor from '../utils/functor';\nimport noop from '../utils/identity';\nimport {mouseStrategies} from './mouse';\n\n\nvisuals.options.tooltip = {\n    location: \"top\",\n    offset: [0, 0],\n    html: \"\"\n};\n\n\nif (inBrowser) vizPrototype.tooltip = tooltip();\nelse vizPrototype.tooltip = noop;\n\n\nmouseStrategies.set('tooltip', function () {\n\n    function tooltip (viz, sel, d, i) {\n        var html = viz.tooltipHtml(sel, d, i);\n        if (html) {\n            var model = viz.getModel('tooltip');\n            viz.tooltip.location(model.location).offset(model.offset).html(html).show(sel.node());\n        }\n    }\n\n    tooltip.out = function (viz) {\n        viz.tooltip.hide();\n    };\n\n    return tooltip;\n}());\n\n\nvizPrototype.tooltipHtml = function (sel, d, i) {\n    var model = this.getModel('tooltip');\n    if (model.html)\n        return this.dataStore.eval(model.html, {\n            d: d,\n            index: i,\n            model: this.getModel()\n        });\n};\n\n\nfunction tooltip () {\n\n    var location = functor('top'),\n        offset = functor([0, 0]),\n        html = functor(' '),\n        node = null,\n        point = null;\n\n    const locationCallbacks = map({\n        top,\n        bottom,\n        right,\n        left,\n        'top-left': topLeft,\n        'top-right': topRight,\n        'bottom-left': bottomLeft,\n        'bottom-right': bottomRight\n    });\n\n    const locations = locationCallbacks.keys();\n\n    function selectNode() {\n        if (node === null) {\n            node = select(document.body)\n                        .append('div')\n                        .classed('d3-tooltip', true)\n                        .style('position', 'absolute')\n                        .style('top', 0)\n                        .style('opacity', 0)\n                        .style('pointer-events', 'none')\n                        .style('box-sizing', 'border-box')\n                        .node();\n            point = select(document.body)\n                        .append('svg')\n                        .style('opacity', 0)\n                        .style('pointer-events', 'none')\n                        .node().createSVGPoint();\n        }\n        return select(node);\n    }\n\n    function tooltip () {\n    }\n\n    tooltip.show = function (target) {\n        var args = Array.prototype.slice.call(arguments),\n            snode = selectNode(),\n            content = html.apply(this, args) || '',\n            poffset = offset.apply(this, args),\n            dir = location.apply(this, args),\n            scrollTop  = document.documentElement.scrollTop || document.body.scrollTop,\n            scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft,\n            coords;\n\n        snode.html(content).style('opacity', 1).style('pointer-events', 'all');\n\n        let i = locations.length;\n        while (i--) snode.classed(locations[i], false);\n        coords = locationCallbacks.get(dir).call(this, target);\n        snode.classed(dir, true)\n            .style('top', (coords.top + poffset[0]) + scrollTop + 'px')\n            .style('left', (coords.left + poffset[1]) + scrollLeft + 'px');\n\n        return tooltip;\n    };\n\n    tooltip.hide = function () {\n        selectNode().style('opacity', 0).style('pointer-events', 'none');\n        return tooltip;\n    };\n\n    // Returns tip or location\n    tooltip.location = function (v) {\n        if (!arguments.length) return location;\n        location = v === null ? v : functor(v);\n        return tooltip;\n    };\n\n    tooltip.html = function(v) {\n        if (!arguments.length) return html;\n        html = v === null ? v : functor(v);\n        return tooltip;\n    };\n\n    tooltip.offset = function(v) {\n        if (!arguments.length) return offset;\n        offset = v == null ? v : functor(v);\n        return tooltip;\n    };\n\n    return tooltip;\n\n\n\n    function top (target) {\n        var bbox = getScreenBBox(target);\n        return {\n            top:  bbox.n.y - node.offsetHeight,\n            left: bbox.n.x - node.offsetWidth / 2\n        };\n    }\n\n\n    function bottom (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    function right (target) {\n        var bbox = getScreenBBox(target);\n        return {\n            top:  bbox.e.y - node.offsetHeight / 2,\n            left: bbox.e.x\n        };\n    }\n\n\n    function left (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: options.offsetY\n        };\n    }\n\n\n    function topLeft (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: options.offsetY\n        };\n    }\n\n\n    function topRight (bb, box, options) {\n        return {\n            x: box.width - bb.width - options.offsetX,\n            y: options.offsetY\n        };\n    }\n\n\n    function bottomLeft (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    function bottomRight (bb, box, options) {\n        return {\n            x: box.total.left + (box.innerWidth - bb.width)/2,\n            y: box.height - bb.height - options.offsetY\n        };\n    }\n\n\n    // Private - gets the screen coordinates of a shape\n    //\n    // Given a shape on the screen, will return an SVGPoint for the locations\n    // n(north), s(south), e(east), w(west), ne(northeast), se(southeast),\n    // nw(northwest), sw(southwest).\n    //\n    //    +-+-+\n    //    |   |\n    //    +   +\n    //    |   |\n    //    +-+-+\n    //\n    // Returns an Object {n, s, e, w, nw, sw, ne, se}\n    function getScreenBBox (targetel) {\n\n        while (targetel.getScreenCTM == null && targetel.parentNode == null) {\n            targetel = targetel.parentNode;\n        }\n\n        var bbox = {},\n            matrix = targetel.getScreenCTM(),\n            tbbox = targetel.getBBox(),\n            width = tbbox.width,\n            height = tbbox.height,\n            x = tbbox.x,\n            y = tbbox.y;\n\n        point.x = x;\n        point.y = y;\n        bbox.nw = point.matrixTransform(matrix);\n        point.x += width;\n        bbox.ne = point.matrixTransform(matrix);\n        point.y += height;\n        bbox.se = point.matrixTransform(matrix);\n        point.x -= width;\n        bbox.sw = point.matrixTransform(matrix);\n        point.y -= height / 2;\n        bbox.w = point.matrixTransform(matrix);\n        point.x += width;\n        bbox.e = point.matrixTransform(matrix);\n        point.x -= width / 2;\n        point.y -= height / 2;\n        bbox.n = point.matrixTransform(matrix);\n        point.y += height;\n        bbox.s = point.matrixTransform(matrix);\n\n        return bbox;\n    }\n}\n","import createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\n\n\nexport default createVisual('container', {\n\n    initialise () {\n        this.live = [];\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    draw (fetchData) {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, self);\n        return Promise.all(this.live.map(visual => visual.redraw(fetchData))).then(() => {\n            delete self.drawing;\n            visuals.events.call('after-draw', undefined, self);\n        });\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n    }\n});\n","import assign from 'object-assign';\nimport {isString, isObject} from 'd3-let';\n\nimport VisualContainer from '../core/container';\nimport warn from '../utils/warn';\n\n//\n//  vizComponent base prototype\n//  =============================\n//\n//  Some common properties and methods for all visualize components\n//\nexport const vizComponent = {\n    props: [\n        'schema',\t    // Schema is a collection of fields to display in the table\n        'datasource',\t// Data source\n        'plugins',      // list of string/objects\n\t],\n\n    render (props, attrs, el) {\n        var self = this,\n            inner = this.select(el).html();\n        //\n        // build\n        return this.getSchema(props.schema, schema => {\n            if (!isObject(schema)) schema = {};\n            return self.build(schema, inner, attrs);\n        });\n    },\n\n    // get the schema from the input schema property\n    getSchema (input, build) {\n        var parent = this.model.visual;\n\n        // allow to specify the schema as an entry of\n        // visuals object in the dashboard schema\n        if (parent && parent !== this.model && isString(input)) {\n            var schema = parent.getVisualSchema(input);\n            if (schema) input = schema;\n        }\n\n        if (isString(input)) {\n            return this.json(input).then(build).catch(err => {\n                warn(`Could not reach ${input}: ${err}`);\n            });\n        }\n        else return build(input);\n    },\n    //\n    // build the visual component has the schema available\n    build () {}\n};\n//\n//  Dashboard Component\n//  ========================\n//\n//  A collection of visual components arranged according\n//  to a custom layout.\n//\n//  * Dashboard visuals are independent of each other but\n//    interact via the data object\n//  * The Dashboard layout is given by the inner HTML elements\n//  * The configuration is obtained via the schema property which\n//    can be either:\n//      1) an object\n//      2) a url\nexport default assign({}, vizComponent, {\n\n    build (schema, inner, attrs) {\n        var model = this.model,\n            sel = this.createElement('div'),\n            root = model.root;\n        if (attrs.class) sel.attr('class', attrs.class);\n        if (!schema.visuals) schema.visuals = {};\n        model.visual = new VisualContainer(sel.node(), schema, model.visual, model.visual ? null : model.$new());\n        if (!root.visualDashboard) root.visualDashboard = model.visual;\n        return this.mountInner(sel, inner);\n    }\n});\n","import assign from 'object-assign';\nimport {pop} from 'd3-let';\n\nimport {vizComponent} from './dashboard';\nimport Visual from '../core/visual';\n\n\n//\n//  Visual component\n//  ======================\n//\n//  An element containing a visualization\nexport default assign({}, vizComponent, {\n\n    build (schema) {\n        var sel = this.createElement('div'),\n            type = schema.type || 'visual',\n            model = this.model,\n            options = {},\n            layers;\n\n        if (type === 'visual') {\n            layers = pop(schema, 'layers');\n            options = schema;\n        }\n        else\n            options.visual = pop(schema, 'visual') || {};\n\n        model.visual = new Visual(sel.node(), options, model.visual, model.visual ? null : model.$new());\n        if (type !== 'visual') model.visual.addVisual(schema);\n        else if (layers) {\n            layers.forEach(layer => model.visual.addVisual(layer));\n        }\n        return sel;\n    },\n\n    // once the element is mounted in the dom, draw the visual\n    mounted () {\n        if (this.model.visualDrawOnMount === false) return;\n        this.model.visual.redraw();\n    }\n});\n","//\n//  d3-view components\n//  ======================\n//\n//  d3-view plugin for visualization components\n//\n//  visual plugins first\nimport '../plugins/menu';\nimport '../plugins/data';\nimport '../plugins/font';\nimport '../plugins/responsive';\nimport '../plugins/title';\nimport '../plugins/margin';\nimport '../plugins/axis';\nimport '../plugins/shapes';\nimport '../plugins/color';\nimport '../plugins/legend';\nimport '../plugins/tooltip';\nimport '../plugins/mouse';\nimport dashboard from './dashboard';\nimport visual from './visual';\n\n\n// Visual components plugin\nexport default {\n\n    install (vm) {\n        vm.addComponent('dashboard', dashboard);\n        vm.addComponent('visual', visual);\n    }\n\n};\n","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","import constant from \"../utils/constant\";\nimport descending from \"../utils/descending\";\nimport identity from \"../utils/identity\";\n\n//\n//  Pyramid Shape generator\n//  ============================\nexport default function () {\n    var value = identity,\n        pad = constant(0),\n        height = 1,\n        base = 1;\n\n    function pyramid (data) {\n        let i, j, k, points, fraction,\n            hi, x, y, v0, ph, pj;\n        var n = data.length,\n            r = 0.5*base/height,\n            polygons = new Array(n),\n            index = new Array(n);\n\n        for (i=0; i<n; ++i) {\n            polygons[index[i] = i] = +value(data[i], i, data);\n        }\n\n        // Sort the polygons\n        index.sort((i, j) => {return descending(polygons[i], polygons[j]);});\n\n        // Compute the polygons! They are stored in the original data's order.\n        v0 = polygons[index[0]];\n        hi = null;\n\n        for (i=n-1; i>=0; --i) {\n            points = [];\n            if (hi === null)\n                points.push([0, 0]);\n            else {\n                y = hi + ph;\n                x = y*r;\n                points.push([x, y]);\n                points.push([-x, y]);\n            }\n            j = index[i];\n            k = n - i - 1;\n            fraction = polygons[j]/v0;\n            pj = Math.sqrt(fraction);\n            hi = height*pj;\n            ph = i ? pad(pj, k) : 0;\n            y = hi - ph;\n            x = y*r;\n            points.push([-x, y]);\n            points.push([x, y]);\n            polygons[j] = {\n                index: k,\n                value: polygons[j],\n                fraction: fraction,\n                points: points,\n                data: data[j]\n            };\n        }\n        return polygons;\n    }\n\n    pyramid.value = function(_) {\n        return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pyramid) : value;\n    };\n\n    pyramid.base = function (_) {\n        return arguments.length ? (base = _, pyramid) : base;\n    };\n\n    pyramid.height = function (_) {\n        return arguments.length ? (height = _, pyramid) : height;\n    };\n\n    pyramid.pad = function(_) {\n        return arguments.length ? (pad = typeof _ === \"function\" ? _ : constant(+_), pyramid) : pad;\n    };\n\n    return pyramid;\n}\n","export default function (range, splits) {\n    var x0 = range[0],\n        x1 = range[1],\n        dx = (x1 - x0)/splits,\n        n = Math.floor(Math.log10(dx)),\n        v = Math.pow(10, n);\n    if (dx/v > 5) v *= 10;\n    v *= 0.1;\n\n    var ndx = v*Math.ceil(dx/v),\n        nx0 = v*Math.floor(x0/v);\n    return [nx0, nx0 + splits*ndx];\n}\n","import * as d3_shape from 'd3-shape';\nimport {extent} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport warn from '../utils/warn';\nimport accessor from '../utils/accessor';\nimport camelFunction from '../utils/camelfunction';\n\n\nexport const lineDrawing = {\n\n    // get information about\n    //  * data []\n    //  * range {x: [min, max], y: [min, max]}\n    //  * meta []\n    //      * index\n    //      * label\n    //      * range\n    //\n    getDataInfo (frame) {\n        var model = this.getModel(),\n            range = this.newRange(),\n            nseries = frame.series.size(),\n            data = nseries ? frame.series.values() : [frame.data],\n            keys = nseries ? frame.series.keys() : [model.y],\n            x = accessor(model.x),\n            y = accessor(model.y),\n            self = this;\n        return {\n            data: data,\n            range: range,\n            meta: keys.map((label, index) => {\n                return {\n                    index: index,\n                    label: label,\n                    range: self.range(data[index], x, y, range)\n                };\n            })\n        };\n    },\n\n    fill (data) {\n        var colors = this.colors(data.length);\n\n        function fill (d, index) {\n            return colors[index];\n        }\n\n        fill.colors = colors;\n\n        return fill;\n    },\n\n    curve (name) {\n        var obj = camelFunction(d3_shape, 'curve', name, true);\n        if (!obj) {\n            warn(`Could not locate curve type \"${name}\"`);\n            obj = camelFunction(d3_shape, 'curve', 'cardinalOpen', true);\n        }\n        return obj;\n    },\n\n    range (data, x, y, agg) {\n        var range = {\n            x: extent(data, x),\n            y: extent(data, y)\n        };\n        if (agg) {\n            Array.prototype.push.apply(agg.x, range.x);\n            Array.prototype.push.apply(agg.y, range.y);\n        }\n    },\n\n    newRange () {\n        return {\n            x: [],\n            y: []\n        };\n    },\n\n    x (box, ranges) {\n        var model = this.getModel(),\n            scale = this.getScale(model.scaleX)\n                .domain(extent(ranges))\n                .range([0, box.innerWidth]);\n        return function (d) {\n            return scale(d[model.x]);\n        };\n    },\n\n    y (box, ranges, value) {\n        var model = this.getModel(),\n            scale = this.getScale(model.scaleY)\n                .domain(extent(ranges))\n                .range([box.innerHeight, 0]);\n        if (arguments.length === 2) value = d => d[model.y];\n        return function (d) {\n            return scale(value(d));\n        };\n    },\n\n    getStack () {\n        var model = this.getModel();\n        if (model.stack) {\n            var s = d3_shape.stack();\n            if (model.stackOrder) s.order(model.stackOrder);\n            return s;\n        }\n    }\n};\n\n//\n//  Line Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('linechart', lineDrawing, {\n\n    options: {\n        lineWidth: 1,\n        curve: 'cardinalOpen',\n        x: 'x',\n        y: 'y',\n        scaleX: 'linear',\n        scaleY: 'linear'\n    },\n\n    doDraw (frame) {\n        var self = this,\n            range = this.newRange(),\n            model = this.getModel(),\n            color = this.getModel('color'),\n            x = accessor(model.x),\n            y = accessor(model.y),\n            data = frame.series.values(),\n            meta = frame.series.keys().map((label, index) => {\n                return {\n                    index: index,\n                    label: label,\n                    range: self.range(data[index], x, y, range)\n                };\n            }),\n            box = this.boundingBox(),\n            paper = this.paper(),\n            lines = paper.size(box).group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.line').data(data),\n            strokeColor = this.fill(meta),\n            //merge = paper.transition('update'),\n            line = d3_shape.line()\n                .x(this.x(box, range.x))\n                .y(this.y(box, range.y))\n                .curve(this.curve(model.curve));\n\n        lines\n            .enter()\n                .append('path')\n                .attr('class', 'line')\n                .attr('fill', 'none')\n                .attr('stroke', strokeColor)\n                .attr('stroke-opacity', 0)\n                .attr('stroke-width', model.lineWidth)\n            .merge(lines)\n                //.transition(merge)\n                .attr('stroke', strokeColor)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', line);\n\n        lines\n            .exit()\n            .remove();\n    }\n});\n","import {stack, stackOrderDescending} from 'd3-shape';\nimport {max} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport {lineDrawing} from './line';\n//\n//  Bar Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('barchart', lineDrawing, {\n\n    options: {\n        orientation: 'vertical',\n        // stack multiple y series?\n        sortby: null, // specify \"x\" or \"y\"\n        stack: true,\n        normalize: false,\n        scale: 'linear',\n        padding: 0.2,\n        x: 'x',\n        y: 'y',\n        groupby: null,  // group data by a field for staked or grouped bar chart\n        //\n        axisY: true,\n        axisX: true,\n        //\n        // legend & tooltip\n        valueformat: '.1f',\n        legendType: 'color',\n        legendLabel: 'label'\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            data = frame.data,\n            box = this.boundingBox(),\n            paper = this.paper().size(box),\n            bars = paper.group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.group'),\n            x = model.x,\n            y = model.y,\n            groupby = model.groupby,\n            sx = this.getScale('band'),\n            sy = this.getScale(model.scale),\n            sz = this.getScale('ordinal');\n\n        let stacked = false,\n            width = null,\n            height = null,\n            xrect, yrect, yi, groups, rects, axis;\n\n        if (model.orientation === 'vertical') {\n            sx.rangeRound([0, box.innerWidth]).paddingInner(model.padding);\n            sy.rangeRound([box.innerHeight, 0]);\n            width = sx.bandwidth;\n            height = bardim;\n        } else {\n            sx.rangeRound([0, box.innerHeight]).paddingInner(model.padding);\n            sy.rangeRound([0, box.innerWidth]);\n            width = bardim;\n            height = sx.bandwidth;\n        }\n\n        if (groupby) {\n            groups = frame.dimension(groupby).group().top(Infinity).map(g => g['key']);\n            if (groups.length <= 1) groups = null;\n        }\n\n        if (groups) {\n            var gframe = frame.pivot(x, groupby, y);\n            if (model.sortby === 'y') gframe = gframe.sortby('total');\n            data = gframe.data;\n            sz.domain(groups).range(this.colors(groups.length));\n            if (model.stack) {\n                if (model.normalize)\n                    data = this.normalize(gframe);\n                stacked = true;\n            }\n        }\n\n        // set domain for the labels\n        sx.domain(data.map(d => d[x]));\n\n        //\n        // Stacked bar chart\n        if (stacked) {\n            if (model.orientation === 'vertical') {\n                xrect = x0;\n                yrect = y0;\n                yi = 1;\n            } else {\n                xrect = y0;\n                yrect = x0;\n                yi = 0;\n            }\n            sy.domain([0, max(data, d => d.total)]).nice();\n            data = stack().order(stackOrderDescending).keys(groups)(data);\n            rects = bars.data(data)\n                        .enter()\n                            .append('g')\n                            .classed('group', true)\n                            .attr('fill', d => sz(d.key))\n                        .merge(bars)\n                            .attr('fill', d => sz(d.key))\n                            .attr('stroke', color.stroke)\n                            .attr('stroke-opacity', color.strokeOpacity)\n                            .attr('fill-opacity', color.fillOpacity)\n                            .selectAll('rect')\n                            .data(stackedData);\n            rects.enter()\n                .append('rect')\n                    .attr('x', xrect)\n                    .attr('y', yrect)\n                    .attr('height', height)\n                    .attr('width', width)\n                    .on(\"mouseover\", this.mouseOver())\n                    .on(\"mouseout\", this.mouseOut())\n                .merge(rects)\n                    .transition()\n                    .attr('x', xrect)\n                    .attr('y', yrect)\n                    .attr('height', height)\n                    .attr('width', width);\n\n        } else if (groups) {\n            //\n            //  Grouped bar chart\n            var x1 = this.getScale('band')\n                            .domain(groups)\n                            .paddingInner(0.5*model.padding);\n\n            // set the value domain\n            sy.domain([0, max(frame.data, d => d[y])]).nice();\n\n            if (model.orientation === 'vertical') {\n                x1.rangeRound([0, sx.bandwidth()]);\n                xrect = gx;\n                width = x1.bandwidth;\n                height = gh;\n            } else {\n                yrect = gx;\n                height = x1.bandwidth;\n                width = gh;\n            }\n\n            bars = bars.data(data);\n            bars.exit().remove();\n            //\n            // join for rectangles\n            rects = bars\n                .enter()\n                    .append('g')\n                    .classed('group', true)\n                    .attr(\"transform\", d => this.translate(xrect(d), 0))\n                .merge(bars)\n                    .attr(\"transform\", d => this.translate(xrect(d), 0))\n                    .selectAll('rect')\n                    .data(groupData);\n            //\n            rects.exit()\n                .transition()\n                .style('opacity', 0)\n                .remove();\n            //\n            rects\n                .enter()\n                    .append('rect')\n                    .attr('x', d => x1(d.key))\n                    .attr('y', gy)\n                    .attr('height', height)\n                    .attr('width', width)\n                    .attr('stroke', color.stroke)\n                    .attr('stroke-opacity', 0)\n                    .attr('fill-opacity', 0)\n                    .attr('fill', d => sz(d.key))\n                    .on(\"mouseover\", this.mouseOver())\n                    .on(\"mouseout\", this.mouseOut())\n                .merge(rects)\n                    .transition()\n                    .attr('x', d => x1(d.key))\n                    .attr('y', gy)\n                    .attr('height', height)\n                    .attr('width', width)\n                    .attr('stroke', color.stroke)\n                    .attr('stroke-opacity', color.strokeOpacity)\n                    .attr('fill-opacity', color.fillOpacity)\n                    .attr('fill', d => sz(d.key));\n\n            rects.exit().remove();\n        }\n\n        // Axis\n        if (model.orientation === 'vertical') {\n            if (model.axisX)\n                this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, sx, box);\n            if (model.axisY)\n                this.yAxis1(model.axisY === true ? \"left\" : model.axisY, sy, box);\n        } else {\n            axis = this.axis('left', sx).tickSizeOuter(0);\n            paper.group('axis')\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .call(axis);\n            if (model.axisY)\n                this.yAxis1(model.axisY === true ? \"bottom\" : model.axisY, sy, box);\n        }\n\n        if (model.legendType && groups) {\n            this.legend({scale: sz}, box);\n        }\n\n        // utilities for stacked charts\n        function bardim (d) {\n            return sy(d[1-yi]) - sy(d[yi]);\n        }\n\n        function x0 (d) {\n            return sx(d.data[x]);\n        }\n\n        function y0 (d) {\n            return sy(d[yi]);\n        }\n\n        // utilities for grouped charts\n        function gx (d) {\n            return sx(d[x]);\n        }\n\n        function gy (d) {\n            return sy(d.value);\n        }\n\n        function gh (d) {\n            return sy(0) - sy(d.value);\n        }\n\n        function stackedData (d) {\n            d.forEach(r => {\n                r.key = d.key;\n                r.value = r.data[d.key];\n            });\n            return d;\n        }\n\n        function groupData (d) {\n            return groups.map(key => {\n                return {key: key, value: d[key]};\n            });\n        }\n    }\n});\n","import {ascending, range, extent, quantile} from 'd3-array';\nimport {scaleLinear} from 'd3-scale';\n\nimport createChart from '../core/chart';\nimport accessor from '../utils/accessor';\nimport constant from '../utils/constant';\nimport {lineDrawing} from './line';\n\n//\n//  Box Chart\n//  =============\n//\n//  A box-and-whisker plot uses simple glyphs that summarize a quantitative\n//  distribution with five standard statistics: the smallest value, lower\n//  quartile, median, upper quartile, and largest value.\n//  This summary approach allows the viewer to easily recognize\n//  differences between distributions.\n//\nexport default createChart('boxchart', lineDrawing, {\n\n    options: {\n        orientation: 'vertical',\n        lineWidth: 1,\n        x: 'x',\n        y: 'y',\n        scaleX: 'linear',\n        scaleY: 'linear',\n        // area with vertical gradient to zero opacity\n        gradient: true\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            //color = this.getModel('color'),\n            info = self.getDataInfo(frame),\n            box = this.boundingBox(),\n            chart = boxplot(),\n            paper = this.paper().size(box),\n            x = accessor(model.x),\n            //y = accessor(model.y),\n            boxes = paper.group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.box')\n                .data(info.data),\n            //fill = this.fill(info.meta),\n            groups = frame.groupby(model.x),\n            sx = this.getScale(model.scaleX)\n                .domain(extent(frame.data, x)),\n            //sy = this.getScale(model.scaleY)\n            //    .domain(extent(frame.data, y)),\n            width = box.innerWidth;\n\n        if (model.orientation === 'vertical') {\n            sx.range([0, box.innerWidth]);\n        } else {\n            sx.range([0, box.innerHeight]);\n            width = this.innerHeight;\n        }\n        chart.width(this.dim(model.width, width, width/groups.length - 2));\n\n        boxes\n            .enter()\n                .append('g')\n                    .classed('box', true)\n                    .call(chart);\n    }\n});\n\n\nfunction boxplot () {\n    var width = 1,\n        height = 1,\n        duration = 0,\n        domain = null,\n        value = Number,\n        whiskers = boxWhiskers,\n        quartiles = boxQuartiles,\n        tickFormat = null;\n\n    // For each small multiple\n    function box (g) {\n        g.each((d, i) => {\n            d = d.map(value).sort(ascending);\n\n            const\n                n = d.length,\n                min = d[0],\n                max = d[n - 1],\n                // Compute quartiles. Must return exactly 3 elements.\n                quartileData = d.quartiles = quartiles(d),\n                // Compute whiskers. Must return exactly 2 elements, or null.\n                whiskerIndices = whiskers && whiskers(d),\n                whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]),\n                // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n                // We compute the outliers as indices, so that we can join across transitions!\n                outlierIndices = whiskerIndices\n                    ? range(0, whiskerIndices[0]).concat(range(whiskerIndices[1] + 1, n))\n                    : range(n),\n                // Compute the new x-scale.\n                x1 = scaleLinear()\n                    .domain(domain && domain.call(this, d, i) || [min, max])\n                    .range([height, 0]),\n                // Retrieve the old x-scale, if this is an update.\n                x0 = this.__chart__ || scaleLinear()\n                  .domain([0, Infinity])\n                  .range(x1.range());\n\n            // Stash the new scale.\n            this.__chart__ = x1;\n            // Note: the box, median, and box tick elements are fixed in number,\n            // so we only have to handle enter and update. In contrast, the outliers\n            // and other elements are variable, so we need to exit them! Variable\n            // elements also fade in and out.\n\n            // Update center line: the vertical line spanning the whiskers.\n            var center = g.selectAll(\"line.center\")\n              .data(whiskerData ? [whiskerData] : []);\n\n            center.enter().insert(\"line\", \"rect\")\n              .attr(\"class\", \"center\")\n              .attr(\"x1\", width / 2)\n              .attr(\"y1\", function(d) { return x0(d[0]); })\n              .attr(\"x2\", width / 2)\n              .attr(\"y2\", function(d) { return x0(d[1]); })\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .style(\"opacity\", 1)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); });\n\n            center.transition()\n              .duration(duration)\n              .style(\"opacity\", 1)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); });\n\n            center.exit().transition()\n              .duration(duration)\n              .style(\"opacity\", 1e-6)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); })\n              .remove();\n\n            // Update innerquartile box.\n            var box = g.selectAll(\"rect.box\")\n              .data([quartileData]);\n\n            box.enter().append(\"rect\")\n              .attr(\"class\", \"box\")\n              .attr(\"x\", 0)\n              .attr(\"y\", function(d) { return x0(d[2]); })\n              .attr(\"width\", width)\n              .attr(\"height\", function(d) { return x0(d[0]) - x0(d[2]); })\n            .transition()\n              .duration(duration)\n              .attr(\"y\", function(d) { return x1(d[2]); })\n              .attr(\"height\", function(d) { return x1(d[0]) - x1(d[2]); });\n\n            box.transition()\n              .duration(duration)\n              .attr(\"y\", function(d) { return x1(d[2]); })\n              .attr(\"height\", function(d) { return x1(d[0]) - x1(d[2]); });\n\n            // Update median line.\n            var medianLine = g.selectAll(\"line.median\")\n              .data([quartileData[1]]);\n\n            medianLine.enter().append(\"line\")\n              .attr(\"class\", \"median\")\n              .attr(\"x1\", 0)\n              .attr(\"y1\", x0)\n              .attr(\"x2\", width)\n              .attr(\"y2\", x0)\n            .transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1);\n\n            medianLine.transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1);\n\n            // Update whiskers.\n            var whisker = g.selectAll(\"line.whisker\")\n              .data(whiskerData || []);\n\n            whisker.enter().insert(\"line\", \"circle, text\")\n              .attr(\"class\", \"whisker\")\n              .attr(\"x1\", 0)\n              .attr(\"y1\", x0)\n              .attr(\"x2\", width)\n              .attr(\"y2\", x0)\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1);\n\n            whisker.transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1);\n\n            whisker.exit().transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1e-6)\n              .remove();\n\n            // Update outliers.\n            var outlier = g.selectAll(\"circle.outlier\")\n              .data(outlierIndices, Number);\n\n            outlier.enter().insert(\"circle\", \"text\")\n              .attr(\"class\", \"outlier\")\n              .attr(\"r\", 5)\n              .attr(\"cx\", width / 2)\n              .attr(\"cy\", function(i) { return x0(d[i]); })\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1);\n\n            outlier.transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1);\n\n            outlier.exit().transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1e-6)\n              .remove();\n\n            // Compute the tick format.\n            var format = tickFormat || x1.tickFormat(8);\n\n            // Update box ticks.\n            var boxTick = g.selectAll(\"text.box\")\n              .data(quartileData);\n\n            boxTick.enter().append(\"text\")\n              .attr(\"class\", \"box\")\n              .attr(\"dy\", \".3em\")\n              .attr(\"dx\", (d, i) => i & 1 ? 6 : -6)\n              .attr(\"x\", (d, i) => i & 1 ? width : 0)\n              .attr(\"y\", x0)\n              .attr(\"text-anchor\", function(d, i) { return i & 1 ? \"start\" : \"end\"; })\n              .text(format)\n            .transition()\n              .duration(duration)\n              .attr(\"y\", x1);\n\n            boxTick.transition()\n              .duration(duration)\n              .text(format)\n              .attr(\"y\", x1);\n\n            // Update whisker ticks. These are handled separately from the box\n            // ticks because they may or may not exist, and we want don't want\n            // to join box ticks pre-transition with whisker ticks post-.\n            var whiskerTick = g.selectAll(\"text.whisker\")\n              .data(whiskerData || []);\n\n            whiskerTick.enter().append(\"text\")\n              .attr(\"class\", \"whisker\")\n              .attr(\"dy\", \".3em\")\n              .attr(\"dx\", 6)\n              .attr(\"x\", width)\n              .attr(\"y\", x0)\n              .text(format)\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"y\", x1)\n              .style(\"opacity\", 1);\n\n            whiskerTick.transition()\n              .duration(duration)\n              .text(format)\n              .attr(\"y\", x1)\n              .style(\"opacity\", 1);\n\n            whiskerTick\n                .exit()\n                .transition()\n                .duration(duration)\n                .attr(\"y\", x1)\n                .style(\"opacity\", 1e-6)\n                .remove();\n        });\n    }\n\n    box.width = function(x) {\n        if (!arguments.length) return width;\n        width = x;\n        return box;\n    };\n\n    box.height = function(x) {\n        if (!arguments.length) return height;\n        height = x;\n        return box;\n    };\n\n    box.tickFormat = function(x) {\n        if (!arguments.length) return tickFormat;\n        tickFormat = x;\n        return box;\n    };\n\n    box.duration = function(x) {\n        if (!arguments.length) return duration;\n        duration = x;\n        return box;\n    };\n\n    box.domain = function(x) {\n        if (!arguments.length) return domain;\n        domain = x === null ? x : constant(x);\n        return box;\n    };\n\n    box.value = function(x) {\n        if (!arguments.length) return value;\n        value = x;\n        return box;\n    };\n\n    box.whiskers = function(x) {\n        if (!arguments.length) return whiskers;\n        whiskers = x;\n        return box;\n    };\n\n    box.quartiles = function(x) {\n        if (!arguments.length) return quartiles;\n        quartiles = x;\n        return box;\n    };\n\n    return box;\n}\n\n\nfunction boxWhiskers (d) {\n    return [0, d.length - 1];\n}\n\n\nfunction boxQuartiles (d) {\n    return [\n        quantile(d, 0.25),\n        quantile(d, 0.5),\n        quantile(d, 0.75)\n    ];\n}\n","import {extent} from 'd3-array';\n\n//\n//  Create a Grouper generator\n//  ===============================\n//\n//  This is a chart transform rather than a data transform\nexport default function () {\n    var groupby = null,\n        x = 'x',\n        y = 'y',\n        sort = false,\n        stack = null,\n        normalize = false;\n\n    function grouper (frame) {\n        let stacked = false,\n            data, labels, s;\n\n        if (groupby) {\n            labels = frame.dimension(groupby).group().top(Infinity).map(g => g['key']);\n            if (labels.length <= 1) labels = null;\n        }\n\n        if (labels) {\n            frame = frame.pivot(x, groupby, y);\n            if (sort) frame = frame.sortby('total');\n            data = frame.data;\n            if (stack) {\n                if (normalize)\n                    data = normalizeData(data);\n                data = stack.keys(labels)(data);\n                stacked = true;\n            }\n        } else {\n            data = frame.data;\n            labels = [y];\n        }\n\n        if (!stacked)\n            data = labels.map((key, index) => {\n                s = data.map(d => {\n                    s = [0, d[key]];\n                    s.data = d;\n                    return s;\n                });\n                s.index = index;\n                s.key = key;\n                return s;\n            });\n\n        return new GroupedData(data, x, y, stacked);\n    }\n\n    grouper.groupby = function(_) {\n        if (arguments.length) {\n            groupby = _;\n            return grouper;\n        }\n        return groupby;\n    };\n\n    grouper.x = function(_) {\n        return arguments.length ? (x = _, grouper) : x;\n    };\n\n    grouper.y = function(_) {\n        return arguments.length ? (y = _, grouper) : y;\n    };\n\n    grouper.normalize = function(_) {\n        return arguments.length ? (normalize = _, grouper) : normalize;\n    };\n\n    grouper.stack = function(_) {\n        return arguments.length ? (stack = _, grouper) : stack;\n    };\n\n    return grouper;\n}\n\n\nfunction GroupedData (data, x, y, stacked) {\n    this.data = data;\n    this.stacked = stacked;\n    this.x = x;\n    this.y = y;\n}\n\nGroupedData.prototype = {\n    rangeX () {\n        return this.range(this.x);\n    },\n    rangeY () {\n        return this.range();\n    },\n    range (key) {\n        let range, vals;\n        if (key)\n            vals = this.data.reduce((a, d) => {\n                range = extent(d, acc);\n                a.push(range[0]);\n                a.push(range[1]);\n                return a;\n            }, []);\n        else\n        vals = this.data.reduce((a, d) => {\n            range = extent(d, acc0);\n            a.push(range[0]);\n            a.push(range[1]);\n            range = extent(d, acc1);\n            a.push(range[0]);\n            a.push(range[1]);\n            return a;\n        }, []);\n        return extent(vals);\n\n        function acc0 (d) {\n            return d[0];\n        }\n\n        function acc1 (d) {\n            return d[1];\n        }\n\n        function acc (d) {\n            return d.data[key];\n        }\n    }\n};\n\n\nfunction normalizeData (data) {\n    return data;\n}\n","import {area, line} from 'd3-shape';\nimport {color} from 'd3-color';\n\nimport createChart from '../core/chart';\nimport grouper from '../transforms/groups';\nimport {lineDrawing} from './line';\n\n//\n//  Area Chart\n//  =============\nexport default createChart('areachart', lineDrawing, {\n\n    options: {\n        lineWidth: 1,\n        curve: 'natural',\n        x: 'x',\n        y: 'y',\n        groupby: null,  // group data by a field for staked or grouped area chart\n        scaleX: 'linear',\n        scaleY: 'linear',\n        // area with vertical gradient to zero opacity\n        gradient: true,\n        lineDarken: 0.2,\n        //\n        axisX: true,\n        axisXticks: 5,\n        axisY: true,\n        axisYticks: 5,\n        //\n        axisFormat: ',',\n        axisTimeFormat: '%Y-%m-%d',\n        axisTickSizeOuter: 0\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            x = model.x,\n            y = model.y,\n            col = this.getModel('color'),\n            box = this.boundingBox(),\n            info = grouper()\n                        .groupby(model.groupby)\n                        .stack(this.getStack())\n                        .x(x)\n                        .y(y)(frame),\n            domainX = info.rangeX(),\n            domainY = info.rangeY(),\n            scaleX = this.getScale(model.scaleX)\n                            .domain(domainX)\n                            .rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale(model.scaleY)\n                            .domain(domainY)\n                            .rangeRound([box.innerHeight, 0]).nice(),\n            areas = this.group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.areagroup').data(info.data),\n            colors = this.colors(info.data.length),\n            fill = model.gradient ? colors.map((c, i) => self.linearGradient(c, box, 'vertical', `fill${self.model.uid}-${i}`)) : colors,\n            curve = this.curve(model.curve);\n\n        this.paper().size(box);\n\n        var areagroup = areas\n            .enter()\n                .append('g')\n                .classed('areagroup', true)\n            .merge(areas)\n                .selectAll('path')\n                .data(arealine);\n\n        areagroup\n            .enter()\n                .append('path')\n                .attr('class', d => d.type)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('d', d => d.draw)\n            .merge(areagroup)\n                .attr('d', d => d.draw)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('fill-opacity', col.fillOpacity)\n                .attr('stroke-width', model.lineWidth)\n                .attr('stroke-opacity', col.strokeOpacity);\n\n        areagroup\n            .exit()\n            .transition()\n            .remove();\n\n        if (model.axisX)\n            this.xAxis1(model.axisX === true ? \"bottom\" : model.axisX, scaleX, box, domainX[0]);\n        if (model.axisY)\n            this.yAxis1(model.axisY === true ? \"left\" : model.axisY, scaleY, box, domainY[0]);\n\n        function xx(d) {\n            return scaleX(d.data[x]);\n        }\n\n        function y0(d) {\n            return scaleY(d[0]);\n        }\n\n        function y1(d) {\n            return scaleY(d[1]);\n        }\n\n        function arealine (d) {\n            var area_ = area()\n                            .curve(curve)\n                            .x(xx)\n                            .y1(y1)\n                            .y0(y0),\n                line_ = line()\n                            .curve(curve)\n                            .x(xx)\n                            .y(y1),\n                c = color(colors[d.index]);\n\n            return [\n                {\n                    type: 'area',\n                    data: d,\n                    draw: area_(d),\n                    stroke: 'none',\n                    fill: fill[d.index]\n                },\n                {\n                    type: 'line',\n                    data: d,\n                    draw: line_(d),\n                    fill: 'none',\n                    stroke: c.darker(model.lineDarken)\n                }\n            ];\n        }\n    },\n\n    ticks (size, spacing) {\n        return Math.max(Math.floor(size/spacing), 1);\n    }\n});\n","import {select} from 'd3-selection';\n\n//Text wrapping code adapted from Mike Bostock\nexport default function (text, width) {\n\n    text.each(function() {\n        var text = select(this),\n            words = text.text().split(/\\s+/).reverse(),\n            word,\n            line = [],\n            lineHeight = 1.2,\n            dy = parseFloat(text.attr(\"dy\")) || 0,\n            tspan = text.text(null)\n                        .append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", dy + \"em\");\n\n        while (word = words.pop()) {\n            line.push(word);\n            tspan.text(line.join(\" \"));\n            if (tspan.node().getComputedTextLength() > width && line.length > 1) {\n                line.pop();\n                tspan.text(line.join(\" \"));\n                line = [word];\n                tspan = text.append(\"tspan\")\n                            .attr(\"x\", 0)\n                            .attr(\"dy\", lineHeight + dy + \"em\").text(word);\n            }\n        }\n    });\n}\n","import {pie, arc} from 'd3-shape';\nimport {scaleOrdinal} from 'd3-scale';\nimport {viewExpression} from 'd3-view';\nimport {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport {sizeValue} from '../utils/size';\nimport textWrap from '../utils/text-wrapping';\n\n\nconst pi = Math.PI;\nconst rad = pi/180;\n\n\nexport const proportional = {\n\n    fill (data) {\n        var colors = this.colors(data.length);\n\n        function fill (d, idx) {\n            return colors[idx];\n        }\n\n        fill.colors = colors;\n\n        return fill;\n    },\n\n    proportionalData (frame, field) {\n        return frame.dimension(field).top(Infinity);\n    },\n\n    total (field) {\n        var total = 0;\n\n        function value (d) {\n            total += d[field];\n            return d[field];\n        }\n\n        value.total = () => total;\n        return value;\n    }\n};\n\n//\n//  Pie Chart\n//  =============\n//\nexport default createChart('piechart', proportional, {\n\n    options: {\n        // The data values from this field will be encoded as angular spans.\n        // If omitted, all pie slices will have equal spans\n        field: 'data',\n        label: 'label',\n        startAngle: 0,\n        endAngle: 360,\n        sort: false,\n        innerRadius: 0,\n        padAngle: 0,\n        cornerRadius: 0,\n        lineWidth: 1,\n        //\n        fractionFormat: '.1%',\n        legendType: 'color',\n        legendLabel: \"label + ' - ' + format(fraction)\",\n        //\n        // display information in the center of the pie chart\n        // Should be used with innerRadius greater than 0\n        center: null,\n        centerOpacity: 1,\n        centerFontSize: '7%'\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            field = model.field,\n            box = this.boundingBox(),\n            outerRadius = Math.min(box.innerWidth, box.innerHeight)/2,\n            innerRadius = sizeValue(model.innerRadius, outerRadius),\n            total = this.total(field),\n            angles = pie()\n                .padAngle(rad*model.padAngle)\n                .startAngle(rad*model.startAngle)\n                .endAngle(rad*model.endAngle)\n                .value(total),\n            arcs = arc()\n                .innerRadius(innerRadius)\n                .outerRadius(outerRadius)\n                .cornerRadius(model.cornerRadius),\n            paper = this.paper().size(box),\n            //update = paper.transition('update'),\n            data = angles(this.proportionalData(frame, field)),\n            fill = this.fill(data),\n            slices = paper.group()\n                .attr(\"transform\", this.translate(box.total.left+box.innerWidth/2, box.total.top+box.innerHeight/2))\n                .selectAll('.slice').data(data);\n\n        slices\n            .enter()\n                .append('path')\n                .attr('class', 'slice')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(slices)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', arcs)\n                .attr('fill', fill)\n                .attr('fill-opacity', color.fillOpacity);\n\n        slices.exit().transition().remove();\n\n        if (model.center) {\n            var text = this.dataStore.eval(model.center, {total: total.total()});\n            if (text) {\n                var size = this.dim(model.centerFontSize, box.innerWidth),\n                    center = paper.group('center-notation')\n                        .attr(\"transform\", this.translate(box.total.left+box.innerWidth/2, box.total.top+box.innerHeight/2))\n                        .selectAll('.info').data([text]);\n                center\n                    .enter()\n                        .append('text')\n                        .attr('class', 'info')\n                        .attr(\"text-anchor\", \"middle\")\n                        .attr(\"alignment-baseline\", \"middle\")\n                        .style(\"font-size\", `${size}px`)\n                        .style('fill-opacity', 0)\n                    .merge(center)\n                        .text(text)\n                        .style('fill-opacity', model.centerOpacity)\n                        .call(textWrap, 1.5*(innerRadius || outerRadius));\n\n            }\n        }\n        if (!model.legendType) return;\n        total = total.total();\n        var expr = viewExpression(model.legendLabel),\n            fmt = format(model.fractionFormat),\n            labels = data.map((d, idx) => {\n                return expr.eval({\n                    d: d,\n                    value: d.value,\n                    format: fmt,\n                    total: total,\n                    fraction: d.value/total,\n                    label: d.data[model.label] || idx\n                });\n            });\n        this.legend({\n            scale: scaleOrdinal().domain(labels).range(fill.colors)\n        }, box);\n    }\n});\n","//\n//  Custom Symbol type\n//  =====================\n//\n//  Draw a polygon given an array of points\n//  This can be used as type in a d3-shape symbol\nexport default function (points) {\n\n    return {\n        draw (context) {\n            points.forEach((point, idx) => {\n                if (!idx) context.moveTo(point[0], point[1]);\n                else context.lineTo(point[0], point[1]);\n            });\n            context.closePath();\n        }\n    };\n}\n","import {symbol} from 'd3-shape';\nimport {viewExpression} from 'd3-view';\n\nimport createChart from '../core/chart';\nimport pyramid from '../transforms/pyramid';\nimport polygon from '../utils/polygon';\nimport {proportional} from './pie';\n\n\nexport default createChart('pyramidchart', proportional, {\n\n    options: {\n        field: 'data',\n        label: 'label',\n        pad: 0.005,\n        lineWidth: 1,\n        inverted: false,\n        legendType: 'color',\n        invereted: false,\n        legendLabel: \"label + ' - ' + format('.1%', fraction)\"\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            field = model.field,\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            pad = this.dim(model.pad, Math.min(box.innerWidth, box.innerHeight)),\n            polygons = pyramid()\n                .pad(pad)\n                .value(d => d[field]),\n            scaleX = this.getScale('linear').rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale('linear').rangeRound(model.inverted ? [box.innerHeight, 0] : [0, box.innerHeight]),\n            data = frame.new(polygons(this.proportionalData(frame, field))).dimension('fraction').bottom(Infinity),\n            marks = symbol().type(d => polygon(d.points.map(xy => [scaleX(xy[0]), scaleY(xy[1])]))).size(1),\n            fill = this.fill(data),\n            paper = this.paper(),\n            segments = paper.size(box).group()\n                .attr(\"transform\", this.translate(box.total.left+box.innerWidth/2, box.total.top))\n                .style(\"shape-rendering\", \"crispEdges\")\n                .selectAll('.segment').data(data);\n\n        segments\n            .enter()\n                .append('path')\n                .attr('class', 'segment')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', marks)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(segments)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', marks)\n                .attr('fill', fill)\n                .attr('fill-opacity', color.fillOpacity);\n\n        segments.exit().remove();\n\n        if (!model.legendType) return;\n        var expr = viewExpression(model.legendLabel),\n            self = this,\n            labels = data.map((d, idx) => {\n                return expr.eval(self.getContext({\n                    d: d,\n                    value: d.value,\n                    fraction: d.fraction,\n                    label: d.data[model.label] || idx\n                }));\n            });\n        this.legend({\n            scale: this.getScale('ordinal').domain(labels).range(fill.colors)\n        }, box);\n    }\n\n});\n","import {color} from 'd3-color';\n\n\nexport default function (c, white, black) {\n    c = color(c);\n    return (c.r*0.299 + c.g*0.587 + c.b*0.114) > 186 ? (black || '#000') : (white || '#fff');\n}\n","import {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport camelFunction from '../utils/camelfunction';\nimport accessor from '../utils/accessor';\nimport colorContrast from '../utils/contrast';\n\n//\n//  Treemap\n//  =============\n//\nexport default createChart('treemap', {\n    requires: ['d3-hierarchy'],\n\n    options: {\n        label: 'label',\n        field: 'data',\n        padding: 2,\n        tile: 'resquarify',\n        format: ','\n    },\n\n    doDraw (frame, d3) {\n        var model = this.getModel(),\n            box = this.boundingBox(),\n            labelAccessor = accessor(model.label),\n            valueAccessor = accessor(model.field),\n            valueFormat = format(model.format),\n            root = d3.hierarchy(rootData(frame.data))\n                    .sum(valueAccessor)\n                    .sort((a, b) => b.value - a.value)\n                    .eachBefore(dataColor),\n            treemap = d3.treemap()\n                        .tile(camelFunction(d3, 'treemap', model.tile, true))\n                        .size([box.innerWidth, box.innerHeight])\n                        .round(true)\n                        .padding(model.padding),\n            colors = this.colors(root.children.length),\n            group = this.group()\n                        .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                        .style(\"shape-rendering\", \"crispEdges\"),\n            leaves = treemap(root).leaves(),\n            cell = group.selectAll('g').data(leaves),\n            self = this;\n\n        this.paper().size(box);\n        cell.exit().remove();\n\n        cell = cell\n            .enter()\n                .append('g')\n                .attr(\"transform\", d => this.translate(d.x0, d.y0))\n            .merge(cell)\n                .attr(\"transform\", d => this.translate(d.x0, d.y0));\n\n        var rects = cell.selectAll('rect').data(singleData);\n\n        rects.enter()\n                .append('rect')\n                .attr(\"width\", d => d.x1 - d.x0)\n                .attr(\"height\", d => d.y1 - d.y0)\n                .attr(\"fill\", d => colors[d.data._counter])\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(rects)\n                .transition()\n                .attr(\"width\", d => d.x1 - d.x0)\n                .attr(\"height\", d => d.y1 - d.y0)\n                .attr(\"fill\", d => colors[d.data._counter]);\n\n        rects = cell.selectAll('text').data(singleData);\n        rects.enter()\n            .append(\"text\")\n            .style('fill', d => colorContrast(colors[d.data._counter]))\n            .selectAll(\"tspan\")\n                .data(textData)\n                .enter()\n                    .append(\"tspan\")\n                    .style('font-size', d => d.size)\n                    .attr(\"x\", 4)\n                    .attr(\"y\", (d, i) => 1.5*d.size + i * 1.2 * d.size)\n                    .text(d => d.text);\n\n\n        function dataColor (d) {\n            if (!d.parent) d.data._counter = 0;\n            else {\n                d.data._counter = d.parent.data._counter;\n                d.parent.data._counter++;\n            }\n        }\n\n        function rootData (data) {\n            data = {children: hideChildren(data)};\n            data[model.label] = 'root';\n            return data;\n        }\n\n        function textData (d) {\n            var size = self.font({height: Math.min(d.x1 - d.x0, d.y1 - d.y0)}),\n                text = labelAccessor(d.data).split(/(?=[A-Z][^A-Z])/g);\n            text.push(valueFormat(d.value));\n            return text.map(t => {return {size:size, text:t};});\n        }\n\n        function singleData (d) {\n            return [d];\n        }\n\n        function hideChildren (data) {\n            let children;\n            return data.map(d => {\n                children = d.children;\n                if (children) {\n                    d._children = hideChildren(children);\n                    delete d.children;\n                }\n                return d;\n            });\n        }\n    }\n});\n","import createChart from '../core/chart';\nimport textWrap from '../utils/text-wrapping';\n\n\nexport default createChart('text', {\n\n    options: {\n        label: 'label',\n        data: 'data',\n        text: 'label + \" \" + data'\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            size = this.font(box),\n            group = this.group()\n                    .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                    .selectAll('text').data(frame.data),\n            width = box.innerWidth/frame.data.length,\n            widthWrap = 0.4*width,\n            store = this.dataStore;\n\n        this.paper().size(box);\n        group\n            .enter()\n                .append('text')\n                .attr(\"transform\", shift)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"alignment-baseline\", \"middle\")\n                .style(\"font-size\", `${size}px`)\n                .style('fill-opacity', 0)\n            .merge(group)\n                .attr(\"transform\", shift)\n                .text(d => store.eval(model.text, d))\n                .style('fill-opacity', color.fillOpacity)\n                .call(textWrap, widthWrap);\n\n        group.exit().remove();\n\n\n        function shift (d, i) {\n            return self.translate((i+0.5)*width, 0);\n        }\n    }\n});\n","import {extent, range} from 'd3-array';\nimport {map} from 'd3-collection';\n\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport createChart from '../core/chart';\nimport {lineDrawing} from './line';\n//\n//  Heatmap\n//  =============\n//\n//  A heatmap is a graphical representation of data where the individual\n//  values contained in a matrix are represented as colors.\n//  This chart type allow to specify to types of layout:\n//  * heatmap - classical heatmap\n//  * punchcard - the z dimension is converted into different sizes of the shape elements\n//  * contour - similar to heatmap but continous rather than descrete\nexport default createChart('heatmap', lineDrawing, {\n\n    options: {\n        shape: 'square',\n        layout: 'heatmap',\n        buckets: 10,\n        pad: 0.005,     // padding for heatmap & punchcard\n        x: 'x',\n        y: 'y',\n        z: 'data',\n        axisX: 'bottom',\n        axisY: 'left'\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            layout = model.layout,\n            box = this.boundingBox(),\n            zrange = extent(frame.data, accessor(model.z)),\n            paper = this.paper().size(box);\n\n        if (zrange[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        var heat = this.heatmap(layout, frame, box, zrange),\n            dx = (box.innerWidth - heat.width)/2,\n            dy = (box.innerHeight - heat.height)/2,\n            shape = this.getSymbol(model.shape).size(d => d.size*d.size),\n            shapes = paper.group()\n                        .attr(\"transform\", this.translate(box.total.left + dx, box.total.top + dy))\n                        .selectAll('.shape')\n                        .data(heat.data);\n\n        if (range[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        shapes\n            .enter()\n                .append('path')\n                .classed('shape', true)\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill\", d => d.color)\n                .attr(\"fill-opacity\", 0)\n                .attr(\"stroke-opacity\", 0)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(shapes)\n                .transition()\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill-opacity\", color.fillOpacity)\n                .attr(\"fill\", d => d.color)\n                .attr(\"stroke-opacity\", color.strokeOpacity)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape);\n\n        if (model.axisX === 'bottom')\n            this.xAxis(heat.scaleX, box.total.left, box.total.top + heat.height + dy);\n        if (model.axisY === 'left')\n            this.yAxis(heat.scaleY, box.total.left, box.total.top + dy);\n\n        if (layout === 'heatmap')\n            this.legend({\n                type: 'color',\n                shape: model.shape,\n                scale: heat.colors\n            }, box);\n        else if (layout === 'punchcard')\n            this.legend({\n                type: 'size',\n                shape: model.shape,\n                scale: heat.sizes\n            }, box);\n    },\n\n    heatmap (layout, frame, box, zrange) {\n        var model = this.getModel(),\n            pad = model.pad,\n            x = model.x,\n            y = model.y,\n            z = model.z,\n            gx = frame.dimension(model.x).group().size(),\n            gy = frame.dimension(model.y).group().size(),\n            buckets = Math.min(model.buckets, gx*gy),\n            dx = (1 - pad*(gx + 1))*box.innerWidth/gx,\n            dy = (1 - pad*(gy + 1))*box.innerHeight/gy,\n            data = [],\n            labelsX = [],\n            labelsY = [],\n            xp = map(), yp = map();\n\n        let xv, yv, zv, i, j, colors, sizes, dd, width, height;\n\n        if (dx < dy) {\n            dd = dx;\n            width = box.innerWidth;\n            pad = width*pad;\n            height = gy*(dd + pad) + pad;\n        } else {\n            dd = dy;\n            height = box.innerHeight;\n            pad = height*pad;\n            width = gx*(dd + pad) + pad;\n        }\n\n        zrange = niceRange(zrange, buckets);\n\n        if (layout === 'heatmap') {\n            colors = this.getScale('quantile').range(this.colors(buckets).reverse()).domain(zrange);\n            sizes = () => 1;\n        } else {\n            var color = this.colors(1)[0];\n            colors = () => color;\n            sizes = this.getScale('quantile').range(range(buckets).map(s => (s+1)/buckets)).domain(zrange);\n        }\n        frame.data.forEach(d => {\n            xv = d[x];\n            yv = d[y];\n            zv = d[z];\n            if (!xp.has(xv)) {\n                xp.set(xv, labelsX.length);\n                labelsX.push(xv);\n            }\n            if (!yp.has(yv)) {\n                yp.set(yv, labelsY.length);\n                labelsY.push(yv);\n            }\n            i = xp.get(xv);\n            j = yp.get(yv);\n            data.push({\n                i: i,\n                j: j,\n                x: pad + dd/2 + i*(dd + pad),\n                y: pad + dd/2 + j*(dd + pad),\n                color: colors(zv),\n                size: dd*sizes(zv),\n                data: d\n            });\n        });\n        return {\n            data: data,\n            size: dd,\n            width: width,\n            height: height,\n            scaleX: this.getScale('band').domain(labelsX).range([0, width]),\n            scaleY: this.getScale('band').domain(labelsY).range([0, height]),\n            colors: colors,\n            sizes: sizes\n        };\n    }\n});\n","import {extent} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport camelFunction from '../utils/camelfunction';\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport warn from '../utils/warn';\n\n//\n//  GeoChart\n//  =============\n//\n//  A chart displaying a geographical map\nexport default createChart('geochart', {\n    // load these libraries\n    requires: ['d3-geo', 'topojson', 'd3-geo-projection', 'leaflet'],\n\n    options: {\n        // Geometry data to display in this chart - must be in the topojson source\n        geometry: 'countries',\n        //\n        // for choropleth maps\n        // geoKey and dataKey are used to match geometry with data\n        geoKey: 'id',\n        dataKey: 'id',\n        dataLabelKey : 'label',\n        dataValueKey: 'value',\n        // how many color buckets to visualise\n        buckets: 10,\n        choroplethScale: 'quantile',\n        //\n        // specify one of the topojson geometry object for calculating\n        // the projected bounding box\n        boundGeometry: null,\n        // how much to zoom out, 1 = no zoom out, 0.95 to 0.8 are sensible values\n        boundScaleFactor: 0.9,\n        //\n        projection: null,\n        graticule: false,\n        leaflet: false,\n        scale: 200,\n        //\n        // mouseover strategy\n        mouseover: ['darken', 'tooltip']\n    },\n\n    doDraw (frame, geo) {\n        var info = this.getGeoData(frame);\n        if (!info) return warn ('Topojson data not available - cannot draw topology');\n        if (!this._geoPath) this.createGeoPath(geo, info);\n        this.update(geo, info);\n    },\n\n    update (geo, info) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            paper = this.paper().size(box),\n            group = paper.group()\n                    .attr(\"transform\", this.translate(box.total.left, box.total.top)),\n            path = this._geoPath,\n            geometryData = geo.feature(info.topology, info.topology.objects[model.geometry]).features,\n            paths = group.selectAll('.geometry').data(geometryData),\n            fill = 'none';\n\n        this.center(geo, info);\n        if (info.data) fill = this.choropleth(info.data, box);\n\n        paths\n            .enter()\n                .append(\"path\")\n                .attr(\"class\", \"geometry\")\n                .attr(\"d\", path)\n                .style('fill', 'none')\n                .style(\"stroke\", color.stroke)\n                .style(\"stroke-opacity\", 0)\n                .style(\"fill-opacity\", 0)\n                .on(\"mouseover\", this.mouseOver())\n                .on(\"mouseout\", this.mouseOut())\n            .merge(paths)\n                .transition()\n                .attr(\"d\", path)\n                .style(\"stroke\", color.stroke)\n                .style(\"stroke-opacity\", color.strokeOpacity)\n                .style(\"fill\", fill)\n                .style(\"fill-opacity\", color.fillOpacity);\n\n        paths\n            .exit()\n            .remove();\n    },\n\n    createGeoPath (geo, info) {\n        var model = this.getModel(),\n            projection = camelFunction(geo, 'geo', info.projection).scale(model.scale),\n            path = geo.geoPath().projection(projection),\n            self = this,\n            lefletMap;\n\n        this._geoPath = path;\n        this.center(geo, info);\n\n        if (model.leaflet) {\n            var leafletId = `leaflet-${model.uid}`,\n                paper = this.paper();\n            this.visualParent.paper\n                    .append('div')\n                    .attr('id', leafletId);\n            lefletMap = new geo.Map(leafletId, {center: [37.8, -96.9], zoom: 4})\n                            .addLayer(new geo.TileLayer(\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\")),\n            lefletMap.getPanes().overlayPane.appendChild(paper.element);\n            projection = geo.transform({point: projectPoint});\n            lefletMap.on(\"viewreset\", () => self.update(geo, info));\n        }\n\n        return path;\n\n        function projectPoint(x, y) {\n            var point = lefletMap.latLngToLayerPoint(new geo.LatLng(y, x));\n            this.stream.point(point.x, point.y);\n        }\n    },\n\n    getGeoData (frame) {\n        var info = {};\n        if (frame.type === 'frameCollection')\n            for (let key in frame) {\n                if (frame[key].type === 'Topology') info.topology = frame[key];\n                else info.data = frame[key];\n            }\n        else if (frame.type === 'Topology')\n            info.topology = frame;\n        if (info.topology) {\n            var model = this.getModel();\n            if (model.projection) info.projection = model.proection;\n            else {\n                info.projection = 'kavrayskiy7';\n            }\n            return info;\n        }\n    },\n\n    center (geo, info) {\n        var model = this.getModel();\n        if (!model.boundGeometry) return;\n\n        var path = this._geoPath,\n            projection = path.projection(),\n            box = this.boundingBox(),\n            boundGeometry = geo.feature(info.topology, info.topology.objects[model.boundGeometry]).features;\n\n        projection.scale(1).translate([0, 0]);\n\n        var b = path.bounds(boundGeometry[0]),\n            topLeft = b[0],\n            bottomRight = b[1],\n            scaleX = (bottomRight[0] - topLeft[0]) / box.innerWidth,\n            scaleY = (bottomRight[1] - topLeft[1]) / box.innerHeight,\n            scale = Math.round(model.boundScaleFactor / Math.max(scaleX, scaleY)),\n            translate = [\n                (box.innerWidth - scale * (bottomRight[0] + topLeft[0])) / 2,\n                (box.innerHeight - scale * (bottomRight[1] + topLeft[1])) / 2\n            ];\n\n        projection.scale(scale).translate(translate);\n    },\n\n    // choropleth map based on data\n    choropleth (frame, box) {\n        var model = this.getModel(),\n            buckets = Math.min(model.buckets, frame.data.length),\n            dataKey = model.dataKey,\n            dataLabelKey = model.dataLabelKey,\n            dataValueKey = model.dataValueKey,\n            geoKey = model.geoKey,\n            valueRange = niceRange(extent(frame.data, accessor(dataValueKey)), buckets),\n            colors = this.getScale(model.choroplethScale).range(this.colors(buckets).reverse()).domain(valueRange),\n            values = frame.data.reduce((o, d) => {o[d[dataKey]] = d; return o;}, {});\n        let key, value;\n\n        this.legend({\n            type: 'color',\n            scale: colors\n        }, box);\n\n        return d => {\n            key = d.properties[geoKey];\n            value = values[key];\n            d.choropleth = {\n                label: value[dataLabelKey] || key,\n                value: value[dataValueKey],\n                color: colors(value[dataValueKey])\n            };\n            return d.choropleth.color;\n        };\n    }\n\n});\n","//\nexport {version as visualizeVersion} from './package.json';\n//\nexport {default as randomPath} from './src/utils/randompath';\n//\n// Data layer\nexport {default as DataStore} from './src/data/store';\nexport {default as dataSources} from './src/data/sources';\n//export {default as dataLocale} from './src/data/locale';\n\n//\n//  Core API\nexport {visuals} from './src/core/base';\nexport {default as createChart} from './src/core/chart';\nexport {default as createPaper, Svg, Div} from './src/core/paper';\nexport {default as visualTransforms} from './src/transforms/index';\n//\n//  Components\nexport {default as visualComponents} from './src/components/index';\n\n// utilities\nexport {colorScales} from './src/plugins/color';\nexport {default as pyramid} from './src/transforms/pyramid';\nexport {default as niceRange} from './src/utils/nicerange';\n//\n//  Charts\n//  =========\n//\n//  Last import, important!\nexport {default as Visual} from './src/core/visual';\nexport {default as BarChart} from './src/charts/bar';\nexport {default as BoxChart} from './src/charts/box';\nexport {default as LineChart} from './src/charts/line';\nexport {default as AreaChart} from './src/charts/area';\nexport {default as PieChart} from './src/charts/pie';\nexport {default as PyramidChart} from './src/charts/pyramid';\nexport {default as Treemap} from './src/charts/treemap';\nexport {default as TextChart} from './src/charts/text';\nexport {default as Heatmap} from './src/charts/heatmap';\nexport {default as Geochart} from './src/charts/geo';\n"],"names":["defaults","size","options","assign","t","range","S","sigma","drift","data","x","y","norm","randomNormal","dx","i","length","config","_data","isArray","isObject","resolvedPromise","asFrame","prefix","msg","logger","warn","schemes","value","isString","indexOf","split","CSV","set","isUrl","url","fetch","viewProviders","self","then","parse","response","ct","headers","get","has","text","csvParse","json","source","store","sources","Promise","all","map","getData","frames","merge","mergeFrames","reduce","o","frame","index","type","expression","viewExpression","model","result","eval","isPromise","field","d","DataFrame","serie","defineProperties","dimensions","series","prototype","_inner","cf","crossfilter","name","keepExisting","arguments","current","dispose","accessor","dimension","top","new","Infinity","key","total","group","pivoter","Object","m","pk","pv","record","mapper","transform","schema","jsonValidator","dummyValidator","transformFactory","valid","validate","logError","doTransform","expr","safeEval","push","a","Array","fill","operations","scalar_operations","agg","v","Math","max","min","count","array","undefined","fields","ops","as","groupby","countAll","fillArray","aggregate","op","forEach","entries","oo","entry","query","dim","q","filterAll","filter","sortby","timeseries","groups","newframe","tmp","filterExact","globalOptions","dateFormat","converters","utcParse","parseFloat","mappers","converter","each","DEFAULT_METHOD","DEFAULT_PERIOD","DEFAULT_ALPHA","MAXALPHA","method","fieldto","s","period","cumulate","buffer","splice","alpha","minmax","sum","children","bottom","cutoff","applyTransforms","transforms","ts","dataEvents","dispatch","dataSourcePrototype","transformStore","constructor","DataSource","values","cfg","getConfig","initDataSource","dataSource","dataName","pop","initialise","addTransforms","call","dataSources","add","remote","composite","DataStore","dataCount","create","p","remove","ds","cachedFrame","Error","cache","context","ctx","$child","def","n","round","pow","WIDTH","HEIGHT","sizeValue","getSize","element","width","height","getWidth","widthElement","getWidthElement","getHeight","heightElement","getHeightElement","el","getParentElementRect","elementWidth","elementHeight","w","getBoundingClientRect","select","left","padding","style","right","parent","node","tagName","parentNode","substring","clone","CONTAINERS","visuals","visualPrototype","fetchData","drawing","event","toString","events","on","redraw","draw","visualType","uid","visualParent","getModel","$new","$update","$on","refSize","minSize","maxSize","container","idx","live","getVisualSchema","viewBase","proto","opts","Visual","visualRoot","viewModel","types","createVisual","append","classed","sel","layers","drawCount","__visual__","fit","clear","visual","err","VisualClass","resize","currentSize","viewDebug","paper","inBrowser","observer","MutationObserver","visualManager","observe","document","documentElement","records","nodes","removedNodes","nodeName","selectAll","destroy","viz","objectOnly","toUpperCase","protos","vizPrototype","chartPrototype","apply","_paper","paperType","render","PaperType","papers","cname","isFunction","xt","yt","camelFunction","d3_scale","doDraw","_drawArgs","requires","require","args","unshift","displayError","createPaper","Paper","paperPrototype","box","attr","enter","Svg","svg","Div","div","menu","display","insert","refreshMenu","minHeight","maxHeight","formats","specifier","fmt","format","dataContext","cachedFormat","dataStore","getContext","isViz","root","setupLayer","setupVisual","addSources","layer","$set","font","fontSizeMultiplier","resizeDelay","viewDebounce","window","title","menuTitle","number","maxFontSize","fontSize","minFontSize","html","px","KEYS","LEFTRIGHT","margin","boundingBox","calculate","margins","axisOrientation","axisTop","axisBottom","axisLeft","axisRight","axisDefaults","xAxis","yAxis","scale","axis","getAxis","location","translate","transition","stroke","xAxis1","translateAxis","axisTitle","yAxis1","orientation","rotate","titleRotate","titleShift","innerHeight","innerWidth","tickSize","tickSizeOuter","isDate","tickFormat","timeFormat","ticks","symbols","symbolCircle","symbolSquare","symbolStar","getSymbol","symbol","colorScales","color","scaleSequential","interpolateViridis","interpolateInferno","interpolateMagma","interpolatePlasma","interpolateWarm","interpolateCool","interpolateRainbow","interpolateCubehelixDefault","colors","scaleDef","minPoints","scaleMinPoints","offset","scaleOffset","npoints","points","domain","reversed","linearGradient","col","gid","defs","grad","colto","opacity","stops","legend","legends","legendColor","legendSize","legendSymbol","vizModel","lgModel","legendType","orient","titleWidth","titleMinWidth","titleMaxWidth","labelFormat","shapeWidth","shapeHeight","g","bb","locations","getBBox","topLeft","topRight","bottomLeft","bottomRight","offsetY","offsetX","constant","mouseStrategies","darkerStrategy","fillStrategy","mouse","mouseOver","__mouse_over__","strategy","over","mouseOut","out","darker","filldarker","darkerFactor","fillColor","tooltip","noop","tooltipHtml","show","hide","functor","point","locationCallbacks","keys","selectNode","body","createSVGPoint","target","slice","snode","content","poffset","dir","scrollTop","scrollLeft","coords","bbox","getScreenBBox","offsetHeight","offsetWidth","e","targetel","getScreenCTM","matrix","tbbox","nw","matrixTransform","ne","se","sw","vizComponent","props","attrs","inner","getSchema","build","input","catch","createElement","class","VisualContainer","visualDashboard","mountInner","addVisual","visualDrawOnMount","vm","addComponent","dashboard","b","NaN","identity","pad","base","pyramid","j","k","fraction","hi","v0","ph","pj","r","polygons","sort","descending","sqrt","_","splits","x0","x1","floor","log10","ndx","ceil","nx0","lineDrawing","newRange","nseries","label","obj","d3_shape","extent","ranges","getScale","scaleX","scaleY","stack","stackOrder","order","createChart","meta","lines","strokeColor","curve","lineWidth","strokeOpacity","line","exit","bars","sx","sy","sz","stacked","xrect","yrect","yi","rects","rangeRound","paddingInner","bandwidth","bardim","gframe","pivot","normalize","y0","nice","stackOrderDescending","fillOpacity","stackedData","gx","gh","groupData","gy","axisX","axisY","getDataInfo","chart","boxplot","info","duration","Number","whiskers","boxWhiskers","quartiles","boxQuartiles","ascending","whiskerData","whiskerIndices","concat","scaleLinear","__chart__","center","quartileData","medianLine","whisker","outlier","outlierIndices","boxTick","whiskerTick","quantile","grouper","labels","normalizeData","GroupedData","vals","acc","acc0","acc1","getStack","domainX","rangeX","domainY","rangeY","areas","gradient","c","areagroup","arealine","xx","y1","area_","area","line_","lineDarken","spacing","words","reverse","word","lineHeight","dy","tspan","join","getComputedTextLength","pi","PI","rad","proportional","outerRadius","innerRadius","angles","pie","padAngle","startAngle","endAngle","arcs","arc","cornerRadius","proportionalData","slices","centerFontSize","centerOpacity","textWrap","legendLabel","fractionFormat","scaleOrdinal","moveTo","lineTo","closePath","inverted","marks","polygon","xy","segments","white","black","d3","labelAccessor","valueAccessor","valueFormat","hierarchy","rootData","eachBefore","dataColor","treemap","tile","leaves","cell","singleData","_counter","colorContrast","textData","hideChildren","_children","widthWrap","shift","layout","zrange","z","heat","heatmap","shape","shapes","sizes","buckets","labelsX","labelsY","xp","yp","xv","yv","zv","dd","niceRange","geo","getGeoData","_geoPath","createGeoPath","update","path","geometryData","feature","topology","objects","geometry","features","paths","choropleth","projection","geoPath","lefletMap","leaflet","leafletId","Map","zoom","addLayer","TileLayer","getPanes","overlayPane","appendChild","projectPoint","latLngToLayerPoint","LatLng","stream","proection","boundGeometry","bounds","boundScaleFactor","dataKey","dataLabelKey","dataValueKey","geoKey","valueRange","choroplethScale","properties"],"mappings":"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"}
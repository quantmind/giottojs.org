{"version":3,"file":"d3-fluid.min.js","sources":["../components/active/index.js","../components/alert/index.js","../components/autocomplete/index.js","../components/card/index.js","../components/collapse/index.js","../components/flatpickr/index.js","../components/icons/index.js","../components/markdown/index.js","../components/modal/index.js","../components/modal/header.js","../components/modal/body.js","../components/modal/footer.js","../components/sidebar/index.js","../components/tabs/index.js","../components/router/link.js","../components/router/routes.js","../components/router/navigo.js","../components/router/index.js","../components/index.js"],"sourcesContent":["\nexport default {\n\n    //\n    // Listen for changes to the currentUrl attribute\n    mount (model) {\n        var dir = this;\n        model.$on(`currentUrl.${this.uid}`, () => dir.refresh(model));\n        return model;\n    },\n\n    refresh (model) {\n        const\n            href = this.el.href,\n            current = model.currentUrl,\n            sel = this.sel;\n\n        sel.classed('active', false);\n\n        if (!href || !current || href !== current.substring(0, href.length)) return;\n        if (sel.attr('data-active-strict') !== null && href !== current) return;\n\n        var rel = current.substring(href.length),\n            dvd = rel.substring(0, 1);\n\n        if (!rel || dvd === '/' || dvd === '#')\n            this.sel.classed('active', true);\n    },\n\n    //\n    // Remove listener for changes to the currentUrl attribute\n    destroy (model) {\n        if (model)\n            model.$off(`currentUrl.${this.uid}`);\n    }\n};\n\n//\n// Make sure the currentUrl attribute is a reactive attribute\n//viewEvents.on('component-mount.currentUrl', vm => {\n//    if (!vm.parent) vm.model.currentUrl = vm.ownerDocument.location.href;\n//});\n","import {isString} from 'd3-let';\n\nimport tpl from './template.html';\n\n\nconst levels = {\n    error: 'danger',\n    warn: 'warning'\n};\n\n\nconst messageKey = msg => `${msg.level}::${msg.message}`;\n\nconst alertDirective = {\n\n    mount (model) {\n        // event handler for adding messages\n        model.$alertMessageAdd = addMessage;\n        model.$alertMessageClose = closeMessage;\n        model.$$messageIds = new Map;\n        // messages\n        model.$set('alertMessages', []);\n    }\n};\n\n// component\nconst alertMessages = {\n\n    props: {\n        transitionDuration: 0\n    },\n\n    model: {\n        $messageClass (message) {\n            return 'alert-' + (levels[message.level] || message.level);\n        }\n    },\n\n    render () {\n        this.model.$connect('alertMessages');\n        return tpl;\n    }\n};\n\n\nexport default {\n\n    install (vm) {\n        vm.addComponent('alerts', alertMessages);\n        vm.addDirective('alerts', alertDirective);\n    }\n};\n\n\nfunction addMessage (data) {\n    if (!data) return false;\n    if (isString(data)) data = {message: data};\n    if (data.message) {\n        if (!data.level) data.level = 'info';\n        var key = messageKey(data),\n            msg = this.$$messageIds.get(key);\n        if (msg) msg.count += 1;\n        else {\n            data.count = 1;\n            msg = this.$new(data);\n            this.$$messageIds.set(key, msg);\n            this.$push('alertMessages', msg);\n        }\n    }\n    return false;\n}\n\n\nfunction closeMessage (msg) {\n    var messages = this.alertMessages;\n    this.$$messageIds.delete(messageKey(msg));\n\n    for (let i=0; i<messages.length; ++i) {\n        if (msg === messages[i]) {\n            this.alertMessages = messages.slice();\n            this.alertMessages.splice(i, 1);\n            break;\n        }\n    }\n}\n","import {assign} from 'd3-let';\n\n\nconst\n    sep = new RegExp('[^,]*$'),\n    rep = new RegExp('^.+,*|');\n\n\nconst multiple = {\n    filter (text, input) {\n        return window.Awesomplete.FILTER_CONTAINS(text, input.match(sep)[0]);\n    },\n\n    item (text, input) {\n        return window.Awesomplete.ITEM(text, input.match(sep)[0]);\n    },\n\n    replace (text) {\n        var before = this.input.value.match(rep)[0];\n        this.input.value = before + text + \", \";\n    }\n};\n\n\nexport default {\n\n    refresh (model, awe) {\n        if (!this.awe) {\n            var self = this;\n            this.awe = true;\n            awe = awe || {};\n            this.htmlAttribute(awe, 'multiple');\n\n            this.providers.require('awesomplete').catch(() => {\n                if (!window.Awesomplete)\n                    return self.logError(`Could not load awesomplete`);\n                self.build(model, awe);\n            });\n        }\n    },\n\n    build (model, awe) {\n        var self = this,\n            cfg = self.getConfig(awe);\n\n        if (awe.url) {\n            this.json(awe.url).then(response => {\n                var data = response.data;\n                model.$emit('autoCompleteData', data);\n                cfg.list = data;\n                self.awe = new window.Awesomplete(self.el, cfg);\n            });\n        } else {\n            self.awe = new window.Awesomplete(self.el, cfg);\n        }\n    },\n\n    getConfig (awe) {\n        var cfg = {\n            minChars: awe.minChars || 2,\n        };\n        if (awe.label || awe.value) {\n            if (!awe.label) awe.label = 'label';\n            if (!awe.value) awe.value = 'value';\n\n            cfg.data = function (d) {\n                return {\n                    label: d[awe.label],\n                    value: d[awe.value]\n                };\n            };\n        }\n        if (awe.multiple) assign(cfg, multiple);\n        return cfg;\n    },\n\n    htmlAttribute (o, name) {\n        if (o[name] === undefined) {\n            var value = this.sel.attr(`data-${name}`);\n            if (value !== undefined) o[name] = value === null ? false : value || true;\n        }\n    }\n};\n","export default {\n    props: {\n        title: '',\n        titleTag: 'h5',\n        image: null,\n        imageHeight: null\n    },\n\n    render (props, attrs, el) {\n        var sel = this.select(el),\n            body = sel.text(),\n            card = this.createElement('div').classed('card', true);\n\n        if (body) body = `<p>${body}</p>`;\n        else body = sel.html();\n\n        if (props.image) {\n            const img = card.append('img')\n                .classed(\"card-img-top\", true)\n                .attr(\"src\", props.image)\n                .attr(\"alt\", props.imageAlt || props.title);\n            if (props.imageHeight) img.attr(\"height\", props.imageHeight);\n        }\n        const main = card.append('div').classed(\"card-body\", true);\n        if (props.title) body.append(props.titleTag).classed(\"card-title\", true).text(props.title);\n        main.append('div').html(body);\n        return card;\n    }\n};\n","import {dispatch} from 'd3-dispatch';\n\nconst\n    COLLAPSE = 'collapse',\n    COLLAPSING = 'd3-collapsing',\n    COLLAPSED = 'collapsed',\n    WIDTH = 'width',\n    SHOW = 'show';\n\nexport const events = dispatch(\n    'show-start',\n    'show-end',\n    'hide-start',\n    'hide-end'\n);\n\n\nexport default {\n    events,\n\n    refresh () {\n        if (this.target) return;\n\n        var self = this,\n            sel = this.sel,\n            tid = sel.attr('aria-controls'),\n            target = tid ? this.select(`#${tid}`) : null,\n            node = target ? target.node() : null;\n\n        if (node) {\n            node.d3Collapse = this;\n            this.target = target;\n            this.smallScreen = sel.attr('data-small-screen') || 993;\n            this.container = this.getContainer(target);\n            const isOpen = target.classed(SHOW);\n            this.duration = 400;\n            this.transitioning = false;\n            sel.classed(COLLAPSED, !isOpen);\n            sel.attr('aria-expanded', isOpen);\n            this.on(sel, `click.${this.uid}`, (event) => self.toggle(target, event));\n        }\n    },\n\n    show (target, event) {\n        if (this.transitioning || target.classed(SHOW)) return;\n        if (event) event.preventDefault();\n        var self = this,\n            sel = this.sel,\n            dimension = this.getDimension(target);\n        target.classed(COLLAPSE, false).classed(COLLAPSING, true).style(dimension, 0);\n        sel.classed(COLLAPSED, false).attr('aria-expanded', true);\n        this.transitioning = true;\n        const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1),\n            scrollSize = `scroll${capitalizedDimension}`,\n            node = target.node(),\n            size = node[scrollSize],\n            sizepx = `${size}px`;\n\n        if (this.container) this.container.show(sizepx);\n        events.call('show-start', undefined, target);\n\n        target.transition()\n            .duration(this.duration)\n            .style(dimension, sizepx)\n            .on(\"end\", () => {\n                self.transitioning = false;\n                target.classed(COLLAPSING, false).classed(COLLAPSE, true).classed(SHOW, true);\n                target.style(dimension, '');\n                events.call('show-end', undefined, target);\n            });\n    },\n\n    hide (target, event) {\n        if (this.transitioning || !target.classed('show')) return;\n        if (event) event.preventDefault();\n        var self = this,\n            sel = this.sel,\n            dimension = this.getDimension(target);\n        target.classed(COLLAPSING, true).classed(COLLAPSE, false).classed(SHOW, false);\n        sel.classed(COLLAPSED, true).attr('aria-expanded', false);\n        this.transitioning = true;\n        target.style(dimension, '');\n        if (this.container) this.container.hide();\n        events.call('hide-start', undefined, target);\n        target.transition()\n            .duration(this.duration)\n            .style(dimension, '0px')\n            .on(\"end\", () => {\n                self.transitioning = false;\n                target.classed(COLLAPSING, false).classed(COLLAPSE, true);\n                events.call('hide-end', undefined, target);\n            });\n    },\n\n    toggle (target, event) {\n        var sel = this.sel,\n            expanded = sel.attr('aria-expanded');\n        if (expanded === 'false') this.show(target, event);\n        else this.hide(target, event);\n    },\n\n    getDimension (target) {\n        return target.classed(WIDTH) ? 'width' : 'height';\n    },\n\n    getContainer (target) {\n        const self = this,\n            style = target.attr('data-container'),\n            element = style ? this.select(target.node().parentNode) : null;\n\n        if (element) {\n            let small = this.getSize(target);\n\n            this.select(window)\n                .on(`resize.${this.uid}`, () => {\n                    small = self.getSize(target, small);\n                });\n\n\n            return {\n                show (sizepx) {\n                    element\n                        .transition()\n                        .duration(self.duration)\n                        .style(style, sizepx)\n                        .on(\"end\", () => {\n                            element.classed(SHOW, true).style(style, '');\n                        });\n                },\n                hide () {\n                    element\n                        .transition()\n                        .duration(self.duration)\n                        .style(style, '0px')\n                        .on(\"end\", () => {\n                            element.classed(SHOW, false);\n                        });\n                }\n            };\n        }\n    },\n\n    getSize (target, prev) {\n        const sizepx = this.select('body').style('width'),\n            size = +sizepx.substring(0, sizepx.length-2),\n            small = +size < this.smallScreen;\n        if (prev === undefined) {\n            if (small) target.classed(SHOW, false);\n        } else if (small !== prev) {\n            if (small) this.hide(target);\n            else this.show(target);\n        }\n        return small;\n    },\n\n    destroy () {\n        if (this.target) this.target.on(`click.${this.uid}`, null);\n    }\n\n};\n","export default {\n\n    refresh (model, options) {\n        var self = this,\n            opts = options && options.$data ? options.$data() : {};\n\n        this.require('flatpickr').then(flatpickr => {\n            if (self.fp) self.fp.destroy();\n            self.sel.on('input', null);\n            self.sel.on('change', null);\n            model.$emit('flatpickr', opts);\n            self.fp = flatpickr.default(self.el, opts);\n        });\n    },\n\n    destroy () {\n        if (this.fp) {\n            this.fp.destroy();\n            this.fp = null;\n        }\n    }\n};\n","import feather from './icons.json';\n\n\nconst icons = {\n    //  map icon name to svg src\n    //  by default use feather icons\n    default: 'droplet',\n    svg: feather,\n    width: 24,\n    height: 24,\n\n    src (name) {\n        return `https://unpkg.com/feather-icons/dist/icons/${name}.svg`;\n    },\n\n    install (vm) {\n        vm.addComponent('icon', icon);\n    }\n};\n\n\n//\n//  Icon component\nexport const icon = {\n\n    props: {\n        width: null,\n        height: null,\n        name: null,\n        fill: 'none',\n        stroke: 'currentColor',\n        strokeWidth: 2,\n        linecup: \"round\",\n        linejoin: \"round\",\n        src: null\n    },\n\n    render () {\n        const props = this.props;\n        if (props.src)\n            return this.createElement('img', true).attr('alt', props.name || '').attr('src', props.src);\n\n        const width = props.width || icons.width,\n            height = props.height || icons.height,\n            name = props.name || icons.default;\n        if (!name) return '<i/>';\n        const svg = icons.svg[name];\n        if (!svg) return '<i/>';\n        return this.createElement('div', true)\n            .append('svg')\n            .attr('height', height)\n            .attr('width', width)\n            .attr('fill', props.fill)\n            .attr('stroke', props.stroke)\n            .attr('stroke-width', props.strokeWidth)\n            .attr('stroke-linecup', props.linecup)\n            .attr('stroke-linejoin', props.linejoin)\n            .attr('version', '1.1')\n            .attr('viewBox', `0 0 ${width} ${height}`)\n            .classed('view-icon', true)\n            .html(svg);\n    }\n};\n\n\nexport default icons;\n","import {viewSlugify} from 'd3-view';\n\nimport {icon} from '../icons/index';\n\n\nexport default {\n    components: {icon},\n\n    props: {\n        source: null,\n        anchorIcon: 'link'\n    },\n\n    render (el) {\n        let marked, hl, markedOptions;\n\n        const\n            props = this.props,\n            compile = source => {\n                source = source ? marked(source, markedOptions) : '';\n                return this.createElement('div', true).classed('markdown', true).html(source);\n            };\n\n        return Promise.all([this.require('marked'), this.require('highlightjs')]).then(libs => {\n            [marked, hl] = libs;\n            markedOptions = this.markedOptions(props, marked, hl);\n            if (props.source)\n                return this.fetchText(props.source).then(response => compile(response.data));\n            else\n                return compile(this.select(el).html());\n        });\n    },\n\n    markedOptions (props, marked, hl) {\n        var renderer = new marked.Renderer(),\n            icon = props.anchorIcon;\n\n        renderer.heading = heading;\n\n        return {\n            renderer,\n            highlight,\n            langPrefix: \"hljs \"\n        };\n\n        function heading (text, level) {\n            var id = viewSlugify(text);\n            return (`<h${level}>\n                <a href=\"#${id}\" aria-hidden=\"true\" class=\"anchor\" id=\"content-${id}\">\n                <icon name=\"${icon}\"></icon>\n                </a>\n                ${text}\n                </h${level}>\n            `);\n        }\n\n        function highlight (code, lang) {\n            lang = hl.getLanguage(lang) ? [lang] : undefined;\n            return hl.highlightAuto(code, lang).value;\n        }\n    }\n\n};\n","import {easeExpOut} from 'd3-ease';\n\nimport modalHeader from './header';\nimport modalBody from './body';\nimport modalFooter from './footer';\n\n\nconst ESCAPE_KEY = 27;\n\n\nconst modalComponent = {\n    components: {\n        modalHeader,\n        modalBody,\n        modalFooter\n    },\n\n    props: {\n        transitionDuration: 300\n    },\n\n    model: {\n        showModal: false,\n        innerHtml: '',\n        $showModal (innerHtml) {\n            if (innerHtml) this.innerHtml = innerHtml;\n            this.showModal = true;\n        },\n        $hideModal () {\n            this.showModal = false;\n        }\n    },\n\n    render () {\n        var props = this.props;\n        this.on(this.ownerDocument, 'keydown.modal', this.maybeHide.bind(this));\n        return (`\n            <div id=\"d3-view-modal\">\n                <div class=\"modal\" tabindex=\"-1\" role=\"dialog\" d3-modal=\"showModal\" data-transition-duration=\"${props.transitionDuration}\">\n                    <div class=\"modal-dialog\" role=\"document\">\n                        <div class=\"modal-content\" d3-html=\"innerHtml\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"modal-backdrop fade\" d3-modal=\"showModal\" data-transition-duration=\"${props.transitionDuration}\"></div>\n            </div>\n        `);\n    },\n\n    maybeHide (e) {\n        switch(e.keyCode) {\n        case ESCAPE_KEY:\n            this.model.$hideModal();\n            break;\n        default:\n            break;\n        }\n    }\n};\n\n\nconst modalDirective = {\n    refresh (model, show) {\n        if (!this.passes) return;\n        var sel = this.sel,\n            modal = sel.classed('modal');\n        let height;\n        if (show) {\n            sel.style('display', 'block').classed('show', true);\n            if (modal) {\n                height = sel.style('height');\n                sel.style('top', '-' + height);\n                this.transition(sel).ease(easeExpOut).style('top', '0px');\n            }\n        }\n        else {\n            var op = sel.style('opacity'),\n                t = this.transition(sel);\n            sel.classed('show', false);\n            if (modal) {\n                height = sel.style('height');\n                t.style('top', '-' + height).on('end', function () {\n                    sel.style('display', 'none');\n                });\n            } else\n                t.style('opacity', 0);\n            t.on('end', function () {\n                sel.style('display', 'none').style('opacity', op);\n            });\n        }\n    }\n};\n\n\nconst viewModal = {\n    modalComponent,\n    modalDirective,\n    modalOpen (innerHtml) {\n        const vm = this.$$view;\n        const se = vm.select(innerHtml);\n        if (se.size()) innerHtml = se.html();\n        var modal = vm.select('#d3-view-modal');\n        if (!modal.size())\n            vm.sel.append('modal').mount().then(() => {\n                vm.select('#d3-view-modal').model().$showModal(innerHtml);\n            });\n        else\n            modal.model().$showModal(innerHtml);\n    },\n\n    install (vm) {\n        vm.addComponent('modal', viewModal.modalComponent);\n        vm.addDirective('modal', viewModal.modalDirective);\n        vm.model.$openModal = viewModal.modalOpen;\n    }\n};\n\n\nexport default viewModal;\n","export default {\n    render (el) {\n        return (`\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\">${el.innerHTML}</h5>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n        `);\n    }\n};\n","export default {\n    render (el) {\n        return (`\n            <div class=\"modal-body\">\n                ${el.innerHTML}\n            </div>\n        `);\n    }\n};\n","export default {\n    render (el) {\n        return (`\n            <div class=\"modal-footer\">\n                ${el.innerHTML}\n            </div>\n        `);\n    }\n};\n","import {viewModel} from 'd3-view';\n\nimport active from '../active/index';\nimport collapse from '../collapse/index';\nimport {icon} from '../icons/index';\n\nimport tpl from './template.html';\nimport groupTpl from './group.html';\n\n\nconst group = {\n\n    render () {\n        return groupTpl;\n    }\n};\n//\n//  Reusable Sidebar component\n//  ================================\n//\n//  Requires:\n//\n//  * collapse directive\n//  * active directive (Optional)\n//\nexport default {\n    components: {group, icon},\n    directives: {active, collapse},\n\n    props: {\n        id: 'sidebar',\n        brand: 'sidebar',\n        classes: 'sticky-top navbar-dark bg-primary',\n        brandUrl: '/',\n        itemAttr: ''\n    },\n\n    model() {\n        return {\n            primaryItems: [],\n            secondaryItems: [],\n            sidebarToggle: '<icon data-name=\"menu\"></icon>',\n            // sidebar\n            sectionCollapse: false,  //  allow sections in sidebar to be collapsible\n            // top navbar attributes\n            navbarItems: [],\n            navbarTitle: \"\",\n            navbarTitleUrl: \"/\"\n        };\n    },\n\n    render (el) {\n        var model = this.model;\n        asItems(model, model.primaryItems);\n        asItems(model, model.secondaryItems);\n        asItems(model, model.navbarItems);\n        this.props.sidebarContent = this.select(el).html();\n        return tpl;\n    }\n};\n\n\nconst asItems = (model, items) => {\n    let item;\n    for (let i=0; i<items.length; ++i) {\n        item = items[i];\n        if (typeof item === 'string')\n            item = {\n                name: item\n            };\n        if (!(item instanceof viewModel)) item = model.$new(item);\n        if (!item.href) item.$set('href', item.name);\n        if (!item.items) item.items = [];\n        items[i] = item;\n    }\n};\n","import {isObject, isString} from 'd3-let';\nimport {viewSlugify} from 'd3-view';\n\nimport tpl from './template.html';\n\n\nconst tabClasses = {\n    none: null,\n    tabs: 'nav-tabs',\n    pills: 'nav-pills'\n};\n\n\n//  Reusable Tabs component with Navigo\n//\n//  Requires:\n//\n//  * d3-active directive\n//\nexport default {\n    props: {\n        tabTransitionDuration: 250\n    },\n\n    model () {\n        return {\n            tabItems: [],\n            tabType: 'tabs',\n            tabTarget: \"\",\n            tabClass: {\n                reactOn: ['tabType'],\n                get () {\n                    return tabClasses[this.tabType];\n                }\n            },\n            // select a tab\n            $selectTab (tab) {\n                if (isObject(tab)) tab = tab.href;\n\n                var target = this.targets.get(tab),\n                    event = this.$event;\n\n                if (target) {\n                    // when local targets are available rather than remote ones\n                    this.tabTarget = target;\n                    if (event && event.currentTarget) this.currentUrl = event.currentTarget.href;\n                } else {\n                    // use router if available\n                    var router = this.$$view.root.router;\n                    if (router && event && event.currentTarget) {\n                        event.preventDefault();\n                        router.navigate(event.currentTarget.href, true);\n                    }\n                }\n                this.tabItems.forEach(item => {\n                    item.active = (item.href === tab);\n                });\n            }\n        };\n    },\n\n    render (props, attrs, el) {\n        var self = this,\n            model = this.model,\n            items = model.tabItems;\n\n        model.targets = new Map;\n\n        items.forEach((item, idx) => {\n            if (isString(item)) {\n                item = model.$new({label: item});\n                items[idx] = item;\n            }\n            if (!item.label) item.label = `item ${idx+1}`;\n            if (!item.id) item.id = viewSlugify(item.label);\n            if (!item.href) item.href = `#${item.id}`;\n            //\n            return item;\n        });\n\n        //\n        //  cache existing targets if avalable\n        this.selectChildren(el).each(function (idx) {\n            var sel = self.select(this),\n                id = sel.attr('id') || (items[idx] ? items[idx].id : null);\n            if (id) model.targets.set(`#${id}`, sel.html());\n        });\n\n        // model.type = data.type;\n        return this.viewElement(tpl, props);\n    },\n\n    mounted () {\n\n    }\n};\n","import {isAbsoluteUrl} from 'd3-view';\n\n//\n//  Directive for navigating\nexport default {\n\n    mount (model) {\n        var self = this;\n        let href;\n        this.on(this.sel, `click.${this.uid}`, (event) => {\n            href = self.sel.attr('href') || '';\n            if (isAbsoluteUrl(href)) return;\n            self.navigate(model, href, event);\n        });\n    },\n\n    navigate (model, href, event) {\n        var router = model.$$view.router;\n        if (router._usePushState) {\n            let to = router._getRoot() + '/' + href.replace(/^\\/+/, '/');\n            to = to.replace(/([^:])(\\/{2,})/g, '$1/');\n            window.history[router._historyAPIUpdateMethod]({}, '', to);\n            if (router.resolve(to))\n                event.preventDefault();\n        } else router.navigate(href);\n    },\n\n    destroy () {\n        this.on(this.sel, `click.${this.uid}`, null);\n    }\n};\n","export default {\n\n    render (el) {\n        let r, path;\n        const\n            router = this.router,\n            self = this,\n            container = this.createElement('div', true);\n\n        this.selectChildren(el).each(function () {\n            r = self.select(this);\n            path = r.attr('path') || r.attr('data-path');\n            if (path)\n                router.on(path, component(this.tagName, container));\n            else\n                router.on(component(this.tagName, container));\n        });\n\n        return container;\n    }\n};\n\n\nfunction component (tag, container) {\n\n    return render;\n\n    function render (params, query) {\n        container.html(`<${tag} />`).mount({params, query});\n    }\n}\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction isPushStateAvailable() {\n  return !!(typeof window !== 'undefined' && window.history && window.history.pushState);\n}\n\nfunction Navigo(r, useHash, hash) {\n  this.root = null;\n  this._routes = [];\n  this._useHash = useHash;\n  this._hash = typeof hash === 'undefined' ? '#' : hash;\n  this._paused = false;\n  this._destroyed = false;\n  this._lastRouteResolved = null;\n  this._notFoundHandler = null;\n  this._defaultHandler = null;\n  this._usePushState = !useHash && isPushStateAvailable();\n  this._onLocationChange = this._onLocationChange.bind(this);\n  this._genericHooks = null;\n  this._historyAPIUpdateMethod = 'pushState';\n\n  if (r) {\n    this.root = useHash ? r.replace(/\\/$/, '/' + this._hash) : r.replace(/\\/$/, '');\n  } else if (useHash) {\n    this.root = this._cLoc().split(this._hash)[0].replace(/\\/$/, '/' + this._hash);\n  }\n\n  this._listen();\n  this.updatePageLinks();\n}\n\nfunction clean(s) {\n  if (s instanceof RegExp) return s;\n  return s.replace(/\\/+$/, '').replace(/^\\/+/, '^/');\n}\n\nfunction regExpResultToParams(match, names) {\n  if (names.length === 0) return null;\n  if (!match) return null;\n  return match.slice(1, match.length).reduce(function (params, value, index) {\n    if (params === null) params = {};\n    params[names[index]] = decodeURIComponent(value);\n    return params;\n  }, null);\n}\n\nfunction replaceDynamicURLParts(route) {\n  var paramNames = [],\n      regexp;\n\n  if (route instanceof RegExp) {\n    regexp = route;\n  } else {\n    regexp = new RegExp(route.replace(Navigo.PARAMETER_REGEXP, function (full, dots, name) {\n      paramNames.push(name);\n      return Navigo.REPLACE_VARIABLE_REGEXP;\n    }).replace(Navigo.WILDCARD_REGEXP, Navigo.REPLACE_WILDCARD) + Navigo.FOLLOWED_BY_SLASH_REGEXP, Navigo.MATCH_REGEXP_FLAGS);\n  }\n  return { regexp: regexp, paramNames: paramNames };\n}\n\nfunction getUrlDepth(url) {\n  return url.replace(/\\/$/, '').split('/').length;\n}\n\nfunction compareUrlDepth(urlA, urlB) {\n  return getUrlDepth(urlB) - getUrlDepth(urlA);\n}\n\nfunction findMatchedRoutes(url) {\n  var routes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  return routes.map(function (route) {\n    var _replaceDynamicURLPar = replaceDynamicURLParts(clean(route.route)),\n        regexp = _replaceDynamicURLPar.regexp,\n        paramNames = _replaceDynamicURLPar.paramNames;\n\n    var match = url.replace(/^\\/+/, '/').match(regexp);\n    var params = regExpResultToParams(match, paramNames);\n\n    return match ? { match: match, route: route, params: params } : false;\n  }).filter(function (m) {\n    return m;\n  });\n}\n\nfunction match(url, routes) {\n  return findMatchedRoutes(url, routes)[0] || false;\n}\n\nfunction root(url, routes) {\n  var matched = routes.map(function (route) {\n    return route.route === '' || route.route === '*' ? url : url.split(new RegExp(route.route + '($|\\/)'))[0];\n  });\n  var fallbackURL = clean(url);\n\n  if (matched.length > 1) {\n    return matched.reduce(function (result, url) {\n      if (result.length > url.length) result = url;\n      return result;\n    }, matched[0]);\n  } else if (matched.length === 1) {\n    return matched[0];\n  }\n  return fallbackURL;\n}\n\nfunction isHashChangeAPIAvailable() {\n  return typeof window !== 'undefined' && 'onhashchange' in window;\n}\n\nfunction extractGETParameters(url) {\n  return url.split(/\\?(.*)?$/).slice(1).join('');\n}\n\nfunction getOnlyURL(url, useHash, hash) {\n  var onlyURL = url,\n      split;\n  var cleanGETParam = function cleanGETParam(str) {\n    return str.split(/\\?(.*)?$/)[0];\n  };\n\n  if (typeof hash === 'undefined') {\n    // To preserve BC\n    hash = '#';\n  }\n\n  if (isPushStateAvailable() && !useHash) {\n    onlyURL = cleanGETParam(url).split(hash)[0];\n  } else {\n    split = url.split(hash);\n    onlyURL = split.length > 1 ? cleanGETParam(split[1]) : cleanGETParam(split[0]);\n  }\n\n  return onlyURL;\n}\n\nfunction manageHooks(handler, hooks, params) {\n  if (hooks && (typeof hooks === 'undefined' ? 'undefined' : _typeof(hooks)) === 'object') {\n    if (hooks.before) {\n      hooks.before(function () {\n        var shouldRoute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n        if (!shouldRoute) return;\n        handler();\n        hooks.after && hooks.after(params);\n      }, params);\n      return;\n    } else if (hooks.after) {\n      handler();\n      hooks.after && hooks.after(params);\n      return;\n    }\n  }\n  handler();\n}\n\nfunction isHashedRoot(url, useHash, hash) {\n  if (isPushStateAvailable() && !useHash) {\n    return false;\n  }\n\n  if (!url.match(hash)) {\n    return false;\n  }\n\n  var split = url.split(hash);\n\n  return split.length < 2 || split[1] === '';\n}\n\nNavigo.prototype = {\n  helpers: {\n    match: match,\n    root: root,\n    clean: clean,\n    getOnlyURL: getOnlyURL\n  },\n  navigate: function navigate(path, absolute) {\n    var to;\n\n    path = path || '';\n    if (this._usePushState) {\n      to = (!absolute ? this._getRoot() + '/' : '') + path.replace(/^\\/+/, '/');\n      to = to.replace(/([^:])(\\/{2,})/g, '$1/');\n      history[this._historyAPIUpdateMethod]({}, '', to);\n      this.resolve();\n    } else if (typeof window !== 'undefined') {\n      path = path.replace(new RegExp('^' + this._hash), '');\n      window.location.href = window.location.href.replace(/#$/, '').replace(new RegExp(this._hash + '.*$'), '') + this._hash + path;\n    }\n    return this;\n  },\n  on: function on() {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[0] === 'function') {\n      this._defaultHandler = { handler: args[0], hooks: args[1] };\n    } else if (args.length >= 2) {\n      if (args[0] === '/') {\n        var func = args[1];\n\n        if (_typeof(args[1]) === 'object') {\n          func = args[1].uses;\n        }\n\n        this._defaultHandler = { handler: func, hooks: args[2] };\n      } else {\n        this._add(args[0], args[1], args[2]);\n      }\n    } else if (_typeof(args[0]) === 'object') {\n      var orderedRoutes = Object.keys(args[0]).sort(compareUrlDepth);\n\n      orderedRoutes.forEach(function (route) {\n        _this.on(route, args[0][route]);\n      });\n    }\n    return this;\n  },\n  off: function off(handler) {\n    if (this._defaultHandler !== null && handler === this._defaultHandler.handler) {\n      this._defaultHandler = null;\n    } else if (this._notFoundHandler !== null && handler === this._notFoundHandler.handler) {\n      this._notFoundHandler = null;\n    }\n    this._routes = this._routes.reduce(function (result, r) {\n      if (r.handler !== handler) result.push(r);\n      return result;\n    }, []);\n    return this;\n  },\n  notFound: function notFound(handler, hooks) {\n    this._notFoundHandler = { handler: handler, hooks: hooks };\n    return this;\n  },\n  resolve: function resolve(current) {\n    var _this2 = this;\n\n    var handler, m;\n    var url = (current || this._cLoc()).replace(this._getRoot(), '');\n\n    if (this._useHash) {\n      url = url.replace(new RegExp('^\\/' + this._hash), '/');\n    }\n\n    var GETParameters = extractGETParameters(current || this._cLoc());\n    var onlyURL = getOnlyURL(url, this._useHash, this._hash);\n\n    if (this._paused) return false;\n\n    if (this._lastRouteResolved && onlyURL === this._lastRouteResolved.url && GETParameters === this._lastRouteResolved.query) {\n      if (this._lastRouteResolved.hooks && this._lastRouteResolved.hooks.already) {\n        this._lastRouteResolved.hooks.already(this._lastRouteResolved.params);\n      }\n      return false;\n    }\n\n    m = match(onlyURL, this._routes);\n\n    if (m) {\n      this._callLeave();\n      this._lastRouteResolved = {\n        url: onlyURL,\n        query: GETParameters,\n        hooks: m.route.hooks,\n        params: m.params,\n        name: m.route.name\n      };\n      handler = m.route.handler;\n      manageHooks(function () {\n        manageHooks(function () {\n          m.route.route instanceof RegExp ? handler.apply(undefined, m.match.slice(1, m.match.length)) : handler(m.params, GETParameters);\n        }, m.route.hooks, m.params, _this2._genericHooks);\n      }, this._genericHooks, m.params);\n      return m;\n    } else if (this._defaultHandler && (onlyURL === '' || onlyURL === '/' || onlyURL === this._hash || isHashedRoot(onlyURL, this._useHash, this._hash))) {\n      manageHooks(function () {\n        manageHooks(function () {\n          _this2._callLeave();\n          _this2._lastRouteResolved = { url: onlyURL, query: GETParameters, hooks: _this2._defaultHandler.hooks };\n          _this2._defaultHandler.handler(GETParameters);\n        }, _this2._defaultHandler.hooks);\n      }, this._genericHooks);\n      return true;\n    } else if (this._notFoundHandler) {\n      manageHooks(function () {\n        manageHooks(function () {\n          _this2._callLeave();\n          _this2._lastRouteResolved = { url: onlyURL, query: GETParameters, hooks: _this2._notFoundHandler.hooks };\n          _this2._notFoundHandler.handler(GETParameters);\n        }, _this2._notFoundHandler.hooks);\n      }, this._genericHooks);\n    }\n    return false;\n  },\n  destroy: function destroy() {\n    this._routes = [];\n    this._destroyed = true;\n    this._lastRouteResolved = null;\n    this._genericHooks = null;\n    clearTimeout(this._listeningInterval);\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('popstate', this._onLocationChange);\n      window.removeEventListener('hashchange', this._onLocationChange);\n    }\n  },\n  updatePageLinks: function updatePageLinks() {\n    var self = this;\n\n    if (typeof document === 'undefined') return;\n\n    this._findLinks().forEach(function (link) {\n      if (!link.hasListenerAttached) {\n        link.addEventListener('click', function (e) {\n          var location = self.getLinkPath(link);\n\n          if (!self._destroyed) {\n            e.preventDefault();\n            self.navigate(location.replace(/\\/+$/, '').replace(/^\\/+/, '/'));\n          }\n        });\n        link.hasListenerAttached = true;\n      }\n    });\n  },\n  generate: function generate(name) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var result = this._routes.reduce(function (result, route) {\n      var key;\n\n      if (route.name === name) {\n        result = route.route;\n        for (key in data) {\n          result = result.toString().replace(':' + key, data[key]);\n        }\n      }\n      return result;\n    }, '');\n\n    return this._useHash ? this._hash + result : result;\n  },\n  link: function link(path) {\n    return this._getRoot() + path;\n  },\n  pause: function pause() {\n    var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this._paused = status;\n    if (status) {\n      this._historyAPIUpdateMethod = 'replaceState';\n    } else {\n      this._historyAPIUpdateMethod = 'pushState';\n    }\n  },\n  resume: function resume() {\n    this.pause(false);\n  },\n  historyAPIUpdateMethod: function historyAPIUpdateMethod(value) {\n    if (typeof value === 'undefined') return this._historyAPIUpdateMethod;\n    this._historyAPIUpdateMethod = value;\n    return value;\n  },\n  disableIfAPINotAvailable: function disableIfAPINotAvailable() {\n    if (!isPushStateAvailable()) {\n      this.destroy();\n    }\n  },\n  lastRouteResolved: function lastRouteResolved() {\n    return this._lastRouteResolved;\n  },\n  getLinkPath: function getLinkPath(link) {\n    return link.getAttribute('href');\n  },\n  hooks: function hooks(_hooks) {\n    this._genericHooks = _hooks;\n  },\n\n  _add: function _add(route) {\n    var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var hooks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (typeof route === 'string') {\n      route = encodeURI(route);\n    }\n    this._routes.push((typeof handler === 'undefined' ? 'undefined' : _typeof(handler)) === 'object' ? {\n      route: route,\n      handler: handler.uses,\n      name: handler.as,\n      hooks: hooks || handler.hooks\n    } : { route: route, handler: handler, hooks: hooks });\n\n    return this._add;\n  },\n  _getRoot: function _getRoot() {\n    if (this.root !== null) return this.root;\n    this.root = root(this._cLoc().split('?')[0], this._routes);\n    return this.root;\n  },\n  _listen: function _listen() {\n    var _this3 = this;\n\n    if (this._usePushState) {\n      window.addEventListener('popstate', this._onLocationChange);\n    } else if (isHashChangeAPIAvailable()) {\n      window.addEventListener('hashchange', this._onLocationChange);\n    } else {\n      var cached = this._cLoc(),\n          current = void 0,\n          _check = void 0;\n\n      _check = function check() {\n        current = _this3._cLoc();\n        if (cached !== current) {\n          cached = current;\n          _this3.resolve();\n        }\n        _this3._listeningInterval = setTimeout(_check, 200);\n      };\n      _check();\n    }\n  },\n  _cLoc: function _cLoc() {\n    if (typeof window !== 'undefined') {\n      if (typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__ !== 'undefined') {\n        return window.__NAVIGO_WINDOW_LOCATION_MOCK__;\n      }\n      return clean(window.location.href);\n    }\n    return '';\n  },\n  _findLinks: function _findLinks() {\n    return [].slice.call(document.querySelectorAll('[data-navigo]'));\n  },\n  _onLocationChange: function _onLocationChange() {\n    this.resolve();\n  },\n  _callLeave: function _callLeave() {\n    var lastRouteResolved = this._lastRouteResolved;\n\n    if (lastRouteResolved && lastRouteResolved.hooks && lastRouteResolved.hooks.leave) {\n      lastRouteResolved.hooks.leave(lastRouteResolved.params);\n    }\n  }\n};\n\nNavigo.PARAMETER_REGEXP = /([:*])(\\w+)/g;\nNavigo.WILDCARD_REGEXP = /\\*/g;\nNavigo.REPLACE_VARIABLE_REGEXP = '([^\\/]+)';\nNavigo.REPLACE_WILDCARD = '(?:.*)';\nNavigo.FOLLOWED_BY_SLASH_REGEXP = '(?:\\/$|$)';\nNavigo.MATCH_REGEXP_FLAGS = '';\n\nexport default Navigo;\n","import {assign} from 'd3-let';\n\nimport {dispatch} from 'd3-dispatch';\n\nimport link from './link';\nimport routes from './routes';\nimport Navigo from './navigo';\n\n\nexport default {\n\n    install (vm) {\n        const config = vm.props.routerConfig || {};\n        var events = dispatch('before', 'after', 'leave'),\n            baseUrl = vm.providers.resolve(config.basePath || '/'),\n            router = new Navigo(baseUrl);\n\n        // d3 link directive\n        vm.addDirective('link', link);\n        // routes component\n        vm.addComponent('routes', routes);\n        //\n        vm.router = router;\n        vm.routerEvents = events;\n        if (config.routes) config.routes(vm);\n\n        router.hooks({\n            before (done, params) {\n                events.call('before', undefined, vm, params);\n                done();\n            },\n            after (params) {\n                // var url = router.lastRouteResolved().url;\n                var url = vm.providers.location.href;\n                vm.model.$set('currentUrl', url);\n                events.call('after', undefined, vm, params);\n            },\n            leave (params) {\n                events.call('leave', undefined, vm, params);\n            }\n        });\n\n        // Add router to all components which are part of the vm view\n        vm.events.on('mount.router', cm => {\n            cm.router = router;\n        });\n\n        // auto resolve\n        if (config.autoResolve !== false)\n            vm.events.on('mounted.router', () => {\n                vm.logDebug('Resolve route with router');\n                vm.router.resolve();\n            });\n    },\n\n    with (obj) {\n        obj = assign({}, obj);\n        if (!obj.props) obj.props = {};\n        obj.props.routeParams = {};\n        obj.props.routeQuery = '';\n        return obj;\n    }\n};\n","export {version as viewFluidVersion} from '../package.json';\nexport {default as viewActive} from './active/index';\nexport {default as viewAlert} from './alert/index';\nexport {default as viewAutocomplete} from './autocomplete/index';\nexport {default as viewCard} from './card/index';\nexport {default as viewCollapse} from './collapse/index';\nexport {default as viewFlatpickr} from './flatpickr/index';\nexport {default as viewIcons} from './icons/index';\nexport {default as viewMarked} from './markdown/index';\nexport {default as viewModal} from './modal/index';\nexport {default as viewSidebar} from './sidebar/index';\nexport {default as viewTabs} from './tabs/index';\nexport {default as viewRouter} from './router/index';\n\nimport 'd3-transition';\nimport Handlebars from 'handlebars';\nimport {viewProviders} from 'd3-view';\n\nviewProviders.compileTemplate = Handlebars.compile;\n"],"names":["[object Object]","model","dir","this","$on","uid","refresh","href","el","current","currentUrl","sel","classed","substring","length","attr","rel","dvd","$off","error","warn","messageKey","msg","level","message","alertDirective","$alertMessageAdd","addMessage","$alertMessageClose","closeMessage","$$messageIds","Map","$set","alertMessages","props","transitionDuration","$messageClass","levels","$connect","vm","addComponent","addDirective","data","isString","key","get","count","$new","set","$push","messages","delete","i","slice","splice","sep","RegExp","rep","multiple","filter","text","input","window","Awesomplete","FILTER_CONTAINS","match","item","ITEM","before","value","awe","self","htmlAttribute","providers","require","catch","logError","build","cfg","getConfig","url","json","then","response","$emit","list","minChars","label","d","assign","o","name","undefined","title","titleTag","image","imageHeight","attrs","select","body","card","createElement","html","img","append","imageAlt","main","SHOW","events","dispatch","target","tid","node","d3Collapse","smallScreen","container","getContainer","isOpen","duration","transitioning","on","event","toggle","preventDefault","dimension","getDimension","style","scrollSize","toUpperCase","sizepx","show","call","transition","hide","element","parentNode","small","getSize","prev","options","opts","$data","flatpickr","fp","destroy","default","icons","svg","width","height","src","icon","fill","stroke","strokeWidth","linecup","linejoin","components","source","anchorIcon","marked","hl","markedOptions","compile","Promise","all","libs","fetchText","renderer","Renderer","heading","id","viewSlugify","highlight","code","lang","getLanguage","highlightAuto","langPrefix","viewModal","modalComponent","modalHeader","render","innerHTML","modalBody","modalFooter","showModal","innerHtml","ownerDocument","maybeHide","bind","e","keyCode","$hideModal","modalDirective","passes","modal","ease","easeExpOut","op","t","$$view","se","size","$showModal","mount","$openModal","modalOpen","group","directives","active","collapse","brand","classes","brandUrl","itemAttr","primaryItems","secondaryItems","sidebarToggle","sectionCollapse","navbarItems","navbarTitle","navbarTitleUrl","asItems","sidebarContent","items","viewModel","none","tabs","pills","tabTransitionDuration","tabItems","tabType","tabTarget","tabClass","reactOn","tabClasses","tab","isObject","targets","$event","currentTarget","router","root","navigate","forEach","idx","selectChildren","each","viewElement","isAbsoluteUrl","_usePushState","to","_getRoot","replace","history","_historyAPIUpdateMethod","resolve","r","path","component","tagName","tag","params","query","_typeof","Symbol","iterator","obj","constructor","prototype","isPushStateAvailable","pushState","Navigo","useHash","hash","_routes","_useHash","_hash","_paused","_destroyed","_lastRouteResolved","_notFoundHandler","_defaultHandler","_onLocationChange","_genericHooks","_cLoc","split","_listen","updatePageLinks","clean","s","getUrlDepth","compareUrlDepth","urlA","urlB","findMatchedRoutes","arguments","map","route","_replaceDynamicURLPar","paramNames","regexp","PARAMETER_REGEXP","full","dots","push","REPLACE_VARIABLE_REGEXP","WILDCARD_REGEXP","REPLACE_WILDCARD","FOLLOWED_BY_SLASH_REGEXP","MATCH_REGEXP_FLAGS","replaceDynamicURLParts","names","reduce","index","decodeURIComponent","regExpResultToParams","m","routes","matched","fallbackURL","result","getOnlyURL","cleanGETParam","str","manageHooks","handler","hooks","after","helpers","absolute","location","_this","_len","args","Array","_key","func","uses","_add","Object","keys","sort","off","notFound","_this2","GETParameters","join","extractGETParameters","onlyURL","already","_callLeave","apply","isHashedRoot","clearTimeout","_listeningInterval","removeEventListener","document","_findLinks","link","hasListenerAttached","addEventListener","getLinkPath","generate","toString","pause","status","resume","historyAPIUpdateMethod","disableIfAPINotAvailable","lastRouteResolved","getAttribute","_hooks","encodeURI","as","_this3","cached","_check","setTimeout","__NAVIGO_WINDOW_LOCATION_MOCK__","querySelectorAll","leave","config","routerConfig","basePath","routerEvents","done","cm","autoResolve","logDebug","with","routeParams","routeQuery","compileTemplate","Handlebars"],"mappings":"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"}
{"version":3,"file":"d3-fluid-server.js","sources":["../server/core/logger.js","../server/core/config.js","../server/utils/map.js","../server/plugins/algolia.js","../server/plugins/github.js","../server/plugins/google.js","../server/plugins/icons.js","../server/utils/meta.js","../server/plugins/markdown.js","../server/utils/path.js","../server/plugins/sitemap.js","../server/plugins/static.js","../server/core/app.js","../server/core/cli.js"],"sourcesContent":["import debug from 'debug';\n\nexport const levels = new Map;\n\nlevels.add = function (name, config) {\n    config.name = name;\n    this.set(name, config);\n    return this;\n};\n\nlevels.add('debug', {\n    color: 81,\n    level: 10\n}).add('info', {\n    color: 76,\n    level: 20\n}).add('warning', {\n    color: 149,\n    level: 220\n}).add('error', {\n    color: 161,\n    level: 161\n}).add('critical', {\n    color: 38,\n    level: 129\n});\n\n\nexport default (name, level) => {\n    level = levels.get(level) || levels.get('info');\n    const logger = {};\n    let db;\n\n    levels.forEach(l => {\n        db = debug(`${name} - ${l.name} -`);\n        db.color = l.color;\n        db.enabled = l.level >= level.level;\n        logger[l.name] = db;\n    });\n\n    return logger;\n};\n","import {existsSync} from 'fs';\nimport {dirname} from 'path';\n\nimport getLogger from './logger';\nimport {name} from '../../package.json';\n\n\nconst CWD = process.cwd();\n\n\nconst defaults = {\n    name,\n    env: process.env.NODE_ENV || 'production',\n    sitemap: true,\n    static: ['static'],\n    scripts: ['/static/site.js'],\n    bodyExtra: [],\n    stylesheets: ['/static/site.css']\n};\n\n\nexport default file => {\n    let cfg = {},\n        path;\n\n    if (file) {\n        const filePath = `${CWD}/${file}`;\n        if (!existsSync(filePath))\n            getLogger(name).error(`No ${file} file found in website folder!`);\n        else {\n            path = dirname(filePath);\n            cfg = require(filePath);\n        }\n    }\n\n    if (!path) path = CWD;\n\n    return Object.assign({}, defaults, cfg, {path});\n};\n","export default obj => {\n    if (obj && obj.constructor === Object) obj = Object.entries(obj);\n    return new Map(obj);\n};\n","\nexport default function (app) {\n    if (!app.config.algolia.apiKey) {\n        app.logger.error('algolia apiKey not available');\n        return;\n    }\n}\n","export default {\n\n    context (app, ctx) {\n        ctx.meta.github = app.config.github;\n    }\n};\n","function tpl(id) {\n    return (`\n        <!-- Global site tag (gtag.js) - Google Analytics -->\n        <script async src=\"https://www.googletagmanager.com/gtag/js?id=${id}\"></script>\n        <script>\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', '${id}');\n        </script>\n    `);\n}\n\n\n//\n//  Add google analytics if required\nexport default app => {\n\n    if (app.config.google.analyticsId) {\n        app.config.bodyExtra.push(tpl(app.config.google.analyticsId));\n    }\n};\n","\nexport default function (app) {\n    if (!app.config.icons) return;\n}\n","//\n//  Original implementation from https://github.com/facebook/Docusaurus\n//\n//  MIT License\n//  Copyright (c) 2017-present, Facebook, Inc.\n\n// Extract markdown metadata header\nexport default function (content) {\n    const metadata = {};\n    const both = splitHeader(content);\n    if (Object.keys(both).length === 0) {\n        return {\n            metadata, content\n        };\n    }\n    const lines = both.header.split('\\n');\n    for (let i = 0; i < lines.length - 1; ++i) {\n        const keyvalue = lines[i].split(':');\n        const key = keyvalue[0].trim();\n        let value = keyvalue.slice(1)\n            .join(':')\n            .trim();\n        try {\n            value = JSON.parse(value);\n        } catch (e) {\n            // do nothing\n        }\n        metadata[key] = value;\n    }\n    return {\n        metadata, content: both.content\n    };\n}\n\n\n// split markdown header\nfunction splitHeader(content) {\n    // New line characters need to handle all operating systems.\n    const lines = content.split(/\\r?\\n/);\n    if (lines[0] !== '---') {\n        return {};\n    }\n    let i = 1;\n    for (; i < lines.length - 1; ++i) {\n        if (lines[i] === '---') {\n            break;\n        }\n    }\n    return {\n        header: lines.slice(1, i + 1).join('\\n'),\n        content: lines.slice(i + 1).join('\\n'),\n    };\n}\n","import express from 'express';\nimport mime from 'mime-types';\nimport {readFile, lstat, exists} from 'fs-extra';\nimport {join} from 'path';\nimport {compile} from 'handlebars';\nimport {viewSlugify} from 'd3-view';\nimport {pop} from 'd3-let';\n\n// import {JSDOM} from 'jsdom';\nimport extractMetadata from '../utils/meta';\n\n//\n//  Serve markdown pages matching a pattern\nexport default {\n\n    init (app) {\n        const\n            plugins = app.config.markdown.plugins,\n            paths = app.config.markdown.paths || [];\n\n        paths.forEach(cfg => {\n            const slug = cfg.meta.slug || '';\n            app.use(`/${slug}`, markdown(app, cfg, plugins));\n        });\n    },\n\n    context (app, ctx, cfg) {\n        if (ctx.name == cfg.meta.index) ctx.title = cfg.title || app.config.title;\n        else ctx.title = ctx.name;\n        if (ctx.meta) ctx.meta.env = app.config.env;\n    }\n};\n\n\nfunction docTemplate (app, ctx) {\n    const css = app.config.stylesheets.slice(),\n        scripts = app.config.scripts.map(script => `<script src=\"${script}\"></script>`).join('\\n'),\n        bodyExtra = app.config.bodyExtra.join('\\n'),\n        tag = pop(ctx.meta, 'template') || 'markdown',\n        content = pop(ctx, 'content').trim(),\n        highlightTheme = pop(ctx, 'highlightTheme'),\n        ctxStr = JSON.stringify(ctx);\n    //\n    if (highlightTheme) css.push(`https://unpkg.com/highlightjs/styles/${highlightTheme}.css`);\n\n    const styles = css.map(stylesheet => `<link href=\"${stylesheet}\" media=\"all\" rel=\"stylesheet\" />`).join('\\n');\n\n    return (`\n<!DOCTYPE html>\n<html>\n<head>\n    <title>${ctx.meta.title}</title>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    ${styles}\n    <script>var config=${ctxStr}</script>\n</head>\n<body>\n    <div id=\"root\" class=\"${ctx.meta.slug}\">\n        <${tag} data-props=\"${tag}\">${content}</${tag}>\n    </div>\n    ${scripts}\n    ${bodyExtra}\n</body>\n</html>\n    `);\n}\n\n\nfunction renderDoc (app, ctx) {\n    ctx.metadata = JSON.stringify(ctx.metadata);\n    return docTemplate(app, ctx);\n    //const dom = new JSDOM(\n    //    docTemplate(ctx),\n    //    {runScripts: \"dangerously\"}\n    //);\n    //return dom.serialize();\n}\n\n\n//\n//  Markdown micro site\nfunction markdown (app, cfg) {\n    const mdApp = express().disable('x-powered-by'),\n        index = cfg.meta.index;\n\n    mdApp.get('/', async (req, res, next) => {\n        await tryFile(index, res, next);\n    });\n\n    mdApp.use('/*', async (req, res, next) => {\n        await tryFile(req.params[0], res, next);\n    });\n\n    app.logger.debug('Markdown micro-site');\n    if (app.config.debug) app.logger.debug(JSON.stringify(cfg, null, 4));\n\n    return mdApp;\n\n    async function tryFile (name, res, next) {\n        let path = cfg.meta.path,\n            file = join(path, name),\n            json = false;\n\n        if (!(await exists(file))) {\n            const bits = file.split('.');\n            json = bits.length > 1 ? bits.pop() === 'json' : false;\n            if (json) file = bits.join('');\n        }\n\n        if (await exists(file)) {\n            const stat = await lstat(file);\n            if (stat.isDirectory()) file = join(file, index);\n        }\n\n        if (app.config.debug)\n            app.logger.debug(`try loading from \"${file}\"`);\n\n        if (!(await exists(file))) {\n            file = `${file}.md`;\n            if (!(await exists(file))) {\n                next();\n                return;\n            }\n        }\n\n        const bits = file.split('.');\n        const ext = bits.length > 1 ? bits.pop() : 'txt';\n        let text = await readFile(file, 'utf8');\n\n        if (ext === 'md') {\n            let context = Object.assign({name}, extractMetadata(text));\n            if (!json) {\n                context = JSON.parse(JSON.stringify(Object.assign({}, cfg, context)));\n                pop(context.meta, 'path');\n                pop(context.meta, 'index');\n            } else context.meta = {};\n\n            app.config.plugins.forEach(plugin => {\n                if (plugin.context) plugin.context(app, context, cfg);\n            });\n\n            // generate table of contents if appropriate\n            if (context.content) {\n                context.content = compile(context.content)(context);\n\n                if (context.content.indexOf(TABLE_OF_CONTENTS_TOKEN) !== -1)\n                    context.content = insertTableOfContents(context.content);\n            }\n            if (!json) text = renderDoc(app, context);\n            else {\n                res.setHeader('Content-Type', 'application/json');\n                text = JSON.stringify(context);\n            }\n        } else {\n            const ct = mime.lookup(ext);\n            if (!ct) {\n                res.status(404);\n                text = 'Not found';\n            } else\n                res.setHeader('Content-Type', ct);\n        }\n        return res.send(text);\n    }\n}\n\n\nconst TABLE_OF_CONTENTS_TOKEN = '<AUTOGENERATED_TABLE_OF_CONTENTS>';\n\n\nfunction insertTableOfContents (rawContent) {\n    const regexp = /\\n###\\s+(`.*`.*)\\n/g;\n    let match;\n    const headers = [];\n    while ((match = regexp.exec(rawContent))) {\n        headers.push(match[1]);\n    }\n\n    const tableOfContents = headers\n        .map(header => `  - [${header}](#${viewSlugify(header)})`)\n        .join('\\n');\n\n    return rawContent.replace(TABLE_OF_CONTENTS_TOKEN, tableOfContents);\n}\n","import {resolve as resolvePath} from 'path';\n\n\nexport function resolve (base, path) {\n    path = resolvePath(base, path);\n    return clean(`${path}/`);\n}\n\n\nexport function clean (path) {\n    return path.replace(/^\\/+/, '/');\n}\n","import {createSitemap} from 'sitemap';\nimport {readFileSync, writeFileSync, existsSync, readdirSync, lstatSync} from 'fs';\nimport {join} from 'path';\nimport glob from 'glob';\n\nimport extractMetadata from '../utils/meta';\nimport {resolve, clean} from '../utils/path';\n\n\nconst mdDefaults = {\n    index: 'readme',\n    highlightTheme: 'github'\n};\n\n\nexport default function (app) {\n\n    buildNavigations(app);\n\n    app.get('/sitemap.xml', (req, res) => {\n        res.set('Content-Type', 'application/xml');\n\n        sitemap(app, xml => {\n            res.send(xml);\n        });\n    });\n\n}\n\n//\n//  Build JSON files for site navigation\nconst buildNavigations = app => {\n    var paths = app.config.markdown ? app.config.markdown.paths || [] : [];\n\n    paths.forEach(cfg => {\n        cfg.meta = Object.assign({}, mdDefaults, cfg.meta);\n        cfg.meta.path = resolve(app.config.path, cfg.meta.path);\n        const index = cfg.meta.index || 'readme',\n            nav = [];\n\n        readdirSync(cfg.meta.path).forEach(name => {\n            var n = name.length-3;\n            let file = join(cfg.meta.path, name),\n                url, meta;\n\n            if (name.substring(n) === '.md') {\n                name = name.substring(0, n);\n                if (name === index) name = null;\n            } else if (lstatSync(file).isDirectory()) {\n                file = join(file, `${index}.md`);\n                if (!existsSync(file)) name = null;\n            } else\n                name = null;\n\n            if (name) {\n                meta = extractMetadata(readFileSync(file, 'utf8')).metadata;\n                url = clean(\"/\" + cfg.meta.slug + \"/\" + name);\n\n                nav.push({\n                    href: url,\n                    name: name,\n                    label: meta.title || name\n                });\n            }\n        });\n\n        writeFileSync(`${cfg.meta.path}nav.json`, JSON.stringify(nav, null, 4));\n    });\n};\n\n\nconst sitemap = (app, callback) => {\n    var paths = app.config.markdown ? app.config.markdown.paths || [] : [];\n    app.logger.info('sitemap triggered');\n    let urls = [];\n\n    paths.forEach(cfg => {\n        var path = resolve(app.config.path, cfg.meta.path);\n        app.logger.debug(path);\n        let files = glob.sync(path + '*.md'),\n            url;\n\n        files.forEach(file => {\n            file = file.substring(path.length, file.length-3);\n            if (file === 'index') file = '';\n            url = \"/\" + cfg.meta.slug + \"/\" + file;\n            url = app.config.baseUrl + url.replace(/^\\/+/, '/');\n            app.logger.debug(url);\n            urls.push({\n                url,\n                changefreq: 'weekly',\n                priority: 0.5\n            });\n        });\n    });\n\n    const sm = createSitemap({\n        hostname: app.config.url,\n        cacheTime: 600 * 1000, // 600 sec - cache purge period\n        urls: urls,\n    });\n\n    sm.toXML((err, xml) => {\n        if (err) {\n            app.logger.error(err);\n            callback('An error has occured.');\n        }\n        callback(xml);\n    });\n};\n","import express from 'express';\n\n\nexport default app => {\n    app.config.static.forEach(path  => {\n        if (typeof path === 'string')\n            app.use(express.static(path));\n        else\n            app.use(path[0], express.static(path[1]));\n    });\n};\n","import express from 'express';\n\nimport readConfig from './config';\nimport getLogger from './logger';\nimport map from '../utils/map';\nimport algolia from '../plugins/algolia';\nimport github from '../plugins/github';\nimport google from '../plugins/google';\nimport icons from '../plugins/icons';\nimport markdown from '../plugins/markdown';\nimport sitemap from '../plugins/sitemap';\nimport static_ from '../plugins/static';\n\n//\n//  Create d3-fluid server application\nexport default cfg => {\n    if (!cfg) cfg = {};\n    const app = express().disable('x-powered-by');\n    // default plugins\n    const plugins = map({static: static_, algolia, github, google, icons, sitemap, markdown});\n    app.config = readConfig(cfg.config);\n    app.config.debug = cfg.debug || false;\n    app.logger = getLogger(app.config.name, cfg.logLevel);\n    if (app.config.debug)\n        app.logger.debug(JSON.stringify(app.config, null, 4));\n\n    if (app.config.plugins)\n        Object.entries(app.config.plugins).forEach(e => {\n            plugins.set(e[0], e[1]);\n        });\n\n    app.config.plugins = [];\n\n    plugins.forEach((plugin, name) => {\n        if (app.config[name]) {\n            if (typeof plugin === 'function') plugin = {init: plugin};\n            app.config.plugins.push(plugin);\n            if (plugin.init) plugin.init(app);\n        }\n    });\n\n    return app;\n};\n","import program from 'commander';\nimport tcpPortUsed from 'tcp-port-used';\nimport dotenv from 'dotenv';\n\nimport {version} from '../../package.json';\n\nimport createApp from './app';\n\n\nexport default config => {\n    dotenv.config();\n\n    config = Object.assign({\n        version,\n        configFile: process.env.D3_FLUID_CONFIG || 'siteConfig.js',\n        plugins: [serve]\n    }, config);\n\n    program\n        .version(config.version)\n        .usage(\"[COMMAND] [options]\");\n\n    config.plugins.forEach(plugin => {\n        plugin(config);\n    });\n\n    return program;\n};\n\n//\n//  Serve command\nexport const serve = config => {\n\n    config = Object.assign({\n        port: +(process.env.D3_FLUID_PORT || 9020)\n    }, config);\n\n    program\n        .command('serve')\n        .usage(\"[options] [file]\")\n        .description(\"starts the web server\")\n        .option('-p, --port <number>', 'Specify port number', config.port)\n        .option('-c, --config <file>', 'Specify config file', config.configFile)\n        .option(\"--log-level <name>\", \"logging level\", \"info\")\n        .option(\"--debug\", \"debug mode\", false)\n        .action(function () {\n            const app = createApp(this);\n            tcpPortUsed.check(this.port, 'localhost').then(inUse => {\n                if (inUse) {\n                    app.logger.error(`port ${this.port} is in use`);\n                    process.exit(1);\n                } else {\n                    app.listen(this.port, () => {\n                        app.logger.warning(`starting ${app.config.name} server on port ${this.port}`);\n                    });\n                }\n            }).catch(err => {\n                app.logger.error(err);\n            });\n        });\n};\n"],"names":["path","existsSync","dirname","markdown","pop","join","exists","lstat","readFile","compile","viewSlugify","resolvePath","sitemap","readdirSync","lstatSync","readFileSync","writeFileSync","createSitemap"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAEO,MAAM,MAAM,GAAG,IAAI,GAAG,CAAC;;AAE9B,MAAM,CAAC,GAAG,GAAG,UAAU,IAAI,EAAE,MAAM,EAAE;IACjC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IACvB,OAAO,IAAI,CAAC;CACf,CAAC;;AAEF,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE;IAChB,KAAK,EAAE,EAAE;IACT,KAAK,EAAE,EAAE;CACZ,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE;IACX,KAAK,EAAE,EAAE;IACT,KAAK,EAAE,EAAE;CACZ,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE;IACd,KAAK,EAAE,GAAG;IACV,KAAK,EAAE,GAAG;CACb,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE;IACZ,KAAK,EAAE,GAAG;IACV,KAAK,EAAE,GAAG;CACb,CAAC,CAAC,GAAG,CAAC,UAAU,EAAE;IACf,KAAK,EAAE,EAAE;IACT,KAAK,EAAE,GAAG;CACb,CAAC,CAAC;;;AAGH,gBAAe,CAAC,IAAI,EAAE,KAAK,KAAK;IAC5B,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAChD,MAAM,MAAM,GAAG,EAAE,CAAC;IAClB,IAAI,EAAE,CAAC;;IAEP,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI;QAChB,EAAE,GAAG,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QACpC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;QACnB,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC;QACpC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;KACvB,CAAC,CAAC;;IAEH,OAAO,MAAM,CAAC;CACjB,CAAC;;AClCF,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC;;;AAG1B,MAAM,QAAQ,GAAG;IACb,IAAI;IACJ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI,YAAY;IACzC,OAAO,EAAE,IAAI;IACb,MAAM,EAAE,CAAC,QAAQ,CAAC;IAClB,OAAO,EAAE,CAAC,iBAAiB,CAAC;IAC5B,SAAS,EAAE,EAAE;IACb,WAAW,EAAE,CAAC,kBAAkB,CAAC;CACpC,CAAC;;;AAGF,iBAAe,IAAI,IAAI;IACnB,IAAI,GAAG,GAAG,EAAE;QACRA,OAAI,CAAC;;IAET,IAAI,IAAI,EAAE;QACN,MAAM,QAAQ,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QAClC,IAAI,CAACC,aAAU,CAAC,QAAQ,CAAC;YACrB,SAAS,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,8BAA8B,CAAC,CAAC,CAAC;aACjE;YACDD,OAAI,GAAGE,YAAO,CAAC,QAAQ,CAAC,CAAC;YACzB,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;SAC3B;KACJ;;IAED,IAAI,CAACF,OAAI,EAAEA,OAAI,GAAG,GAAG,CAAC;;IAEtB,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,EAAE,GAAG,EAAE,OAACA,OAAI,CAAC,CAAC,CAAC;CACnD,CAAC;;ACtCF,UAAe,GAAG,IAAI;IAClB,IAAI,GAAG,IAAI,GAAG,CAAC,WAAW,KAAK,MAAM,EAAE,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACjE,OAAO,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC;CACvB,CAAC;;ACFa,gBAAQ,EAAE,GAAG,EAAE;IAC1B,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE;QAC5B,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,8BAA8B,CAAC,CAAC;QACjD,OAAO;KACV;CACJ;;ACND,aAAe;;IAEX,OAAO,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE;QACf,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC;KACvC;CACJ,CAAC;;ACLF,SAAS,GAAG,CAAC,EAAE,EAAE;IACb,QAAQ,CAAC;;uEAE0D,EAAE,EAAE,CAAC;;;;;4BAKhD,EAAE,EAAE,CAAC;;IAE7B,CAAC,EAAE;CACN;;;;;AAKD,aAAe,GAAG,IAAI;;IAElB,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE;QAC/B,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;KACjE;CACJ,CAAC;;ACpBa,cAAQ,EAAE,GAAG,EAAE;IAC1B,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO;CACjC;;ACHD;;;;;;;AAOA,AAAe,wBAAQ,EAAE,OAAO,EAAE;IAC9B,MAAM,QAAQ,GAAG,EAAE,CAAC;IACpB,MAAM,IAAI,GAAG,WAAW,CAAC,OAAO,CAAC,CAAC;IAClC,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;QAChC,OAAO;YACH,QAAQ,EAAE,OAAO;SACpB,CAAC;KACL;IACD,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;QACvC,MAAM,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrC,MAAM,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;QAC/B,IAAI,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;aACxB,IAAI,CAAC,GAAG,CAAC;aACT,IAAI,EAAE,CAAC;QACZ,IAAI;YACA,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SAC7B,CAAC,OAAO,CAAC,EAAE;;SAEX;QACD,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;KACzB;IACD,OAAO;QACH,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO;KAClC,CAAC;CACL;;;;AAID,SAAS,WAAW,CAAC,OAAO,EAAE;;IAE1B,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IACrC,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,KAAK,EAAE;QACpB,OAAO,EAAE,CAAC;KACb;IACD,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,OAAO,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;QAC9B,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,KAAK,EAAE;YACpB,MAAM;SACT;KACJ;IACD,OAAO;QACH,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;QACxC,OAAO,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;KACzC,CAAC;CACL;;ACzCD;;AAEA,eAAe;;IAEX,IAAI,CAAC,CAAC,GAAG,EAAE;QACP;YACI,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO;YACrC,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE,CAAC;;QAE5C,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;YACjB,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC;YACjC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAEG,UAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC;SACpD,CAAC,CAAC;KACN;;IAED,OAAO,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;QACpB,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC;aACrE,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC;QAC1B,IAAI,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC;KAC/C;CACJ,CAAC;;;AAGF,SAAS,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE;IAC5B,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE;QACtC,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;QAC1F,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;QAC3C,GAAG,GAAGC,SAAG,CAAC,GAAG,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,UAAU;QAC7C,OAAO,GAAGA,SAAG,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,IAAI,EAAE;QACpC,cAAc,GAAGA,SAAG,CAAC,GAAG,EAAE,gBAAgB,CAAC;QAC3C,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;;IAEjC,IAAI,cAAc,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,qCAAqC,EAAE,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;;IAE3F,MAAM,MAAM,GAAG,GAAG,CAAC,GAAG,CAAC,UAAU,IAAI,CAAC,YAAY,EAAE,UAAU,CAAC,iCAAiC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;IAE9G,QAAQ,CAAC;;;;WAIF,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;;;;IAIxB,EAAE,MAAM,CAAC;uBACU,EAAE,MAAM,CAAC;;;0BAGN,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;SACjC,EAAE,GAAG,CAAC,aAAa,EAAE,GAAG,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,GAAG,CAAC;;IAElD,EAAE,OAAO,CAAC;IACV,EAAE,SAAS,CAAC;;;IAGZ,CAAC,EAAE;CACN;;;AAGD,SAAS,SAAS,EAAE,GAAG,EAAE,GAAG,EAAE;IAC1B,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAC5C,OAAO,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;;;;;;CAMhC;;;;;AAKD,SAASD,UAAQ,EAAE,GAAG,EAAE,GAAG,EAAE;IACzB,MAAM,KAAK,GAAG,OAAO,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC;QAC3C,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;;IAE3B,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,GAAG,EAAE,GAAG,EAAE,IAAI,KAAK;QACrC,MAAM,OAAO,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;KACnC,CAAC,CAAC;;IAEH,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,OAAO,GAAG,EAAE,GAAG,EAAE,IAAI,KAAK;QACtC,MAAM,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;KAC3C,CAAC,CAAC;;IAEH,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;IACxC,IAAI,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;;IAErE,OAAO,KAAK,CAAC;;IAEb,eAAe,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE;QACrC,IAAIH,OAAI,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI;YACpB,IAAI,GAAGK,SAAI,CAACL,OAAI,EAAE,IAAI,CAAC;YACvB,IAAI,GAAG,KAAK,CAAC;;QAEjB,IAAI,EAAE,MAAMM,cAAM,CAAC,IAAI,CAAC,CAAC,EAAE;YACvB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC7B,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,KAAK,MAAM,GAAG,KAAK,CAAC;YACvD,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAClC;;QAED,IAAI,MAAMA,cAAM,CAAC,IAAI,CAAC,EAAE;YACpB,MAAM,IAAI,GAAG,MAAMC,aAAK,CAAC,IAAI,CAAC,CAAC;YAC/B,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,GAAGF,SAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SACpD;;QAED,IAAI,GAAG,CAAC,MAAM,CAAC,KAAK;YAChB,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEnD,IAAI,EAAE,MAAMC,cAAM,CAAC,IAAI,CAAC,CAAC,EAAE;YACvB,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;YACpB,IAAI,EAAE,MAAMA,cAAM,CAAC,IAAI,CAAC,CAAC,EAAE;gBACvB,IAAI,EAAE,CAAC;gBACP,OAAO;aACV;SACJ;;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC;QACjD,IAAI,IAAI,GAAG,MAAME,gBAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;;QAExC,IAAI,GAAG,KAAK,IAAI,EAAE;YACd,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,EAAE,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,IAAI,EAAE;gBACP,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;gBACtEJ,SAAG,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBAC1BA,SAAG,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;aAC9B,MAAM,OAAO,CAAC,IAAI,GAAG,EAAE,CAAC;;YAEzB,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI;gBACjC,IAAI,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;aACzD,CAAC,CAAC;;;YAGH,IAAI,OAAO,CAAC,OAAO,EAAE;gBACjB,OAAO,CAAC,OAAO,GAAGK,kBAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC;;gBAEpD,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;oBACvD,OAAO,CAAC,OAAO,GAAG,qBAAqB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;aAChE;YACD,IAAI,CAAC,IAAI,EAAE,IAAI,GAAG,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;iBACrC;gBACD,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;gBAClD,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;aAClC;SACJ,MAAM;YACH,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC5B,IAAI,CAAC,EAAE,EAAE;gBACL,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBAChB,IAAI,GAAG,WAAW,CAAC;aACtB;gBACG,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;SACzC;QACD,OAAO,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACzB;CACJ;;;AAGD,MAAM,uBAAuB,GAAG,mCAAmC,CAAC;;;AAGpE,SAAS,qBAAqB,EAAE,UAAU,EAAE;IACxC,MAAM,MAAM,GAAG,qBAAqB,CAAC;IACrC,IAAI,KAAK,CAAC;IACV,MAAM,OAAO,GAAG,EAAE,CAAC;IACnB,QAAQ,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG;QACtC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;KAC1B;;IAED,MAAM,eAAe,GAAG,OAAO;SAC1B,GAAG,CAAC,MAAM,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,GAAG,EAAEC,kBAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SACzD,IAAI,CAAC,IAAI,CAAC,CAAC;;IAEhB,OAAO,UAAU,CAAC,OAAO,CAAC,uBAAuB,EAAE,eAAe,CAAC,CAAC;CACvE;;ACrLM,SAAS,OAAO,EAAE,IAAI,EAAEV,OAAI,EAAE;IACjCA,OAAI,GAAGW,YAAW,CAAC,IAAI,EAAEX,OAAI,CAAC,CAAC;IAC/B,OAAO,KAAK,CAAC,CAAC,EAAEA,OAAI,CAAC,CAAC,CAAC,CAAC,CAAC;CAC5B;;;AAGD,AAAO,SAAS,KAAK,EAAEA,OAAI,EAAE;IACzB,OAAOA,OAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;CACpC;;ACFD,MAAM,UAAU,GAAG;IACf,KAAK,EAAE,QAAQ;IACf,cAAc,EAAE,QAAQ;CAC3B,CAAC;;;AAGF,AAAe,kBAAQ,EAAE,GAAG,EAAE;;IAE1B,gBAAgB,CAAC,GAAG,CAAC,CAAC;;IAEtB,GAAG,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC,GAAG,EAAE,GAAG,KAAK;QAClC,GAAG,CAAC,GAAG,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;;QAE3CY,SAAO,CAAC,GAAG,EAAE,GAAG,IAAI;YAChB,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACjB,CAAC,CAAC;KACN,CAAC,CAAC;;CAEN;;;;AAID,MAAM,gBAAgB,GAAG,GAAG,IAAI;IAC5B,IAAI,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE,GAAG,EAAE,CAAC;;IAEvE,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;QACjB,GAAG,CAAC,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,UAAU,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;QACnD,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxD,MAAM,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,QAAQ;YACpC,GAAG,GAAG,EAAE,CAAC;;QAEbC,cAAW,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,IAAI;YACvC,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACtB,IAAI,IAAI,GAAGR,SAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;gBAChC,GAAG,EAAE,IAAI,CAAC;;YAEd,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,KAAK,EAAE;gBAC7B,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC5B,IAAI,IAAI,KAAK,KAAK,EAAE,IAAI,GAAG,IAAI,CAAC;aACnC,MAAM,IAAIS,YAAS,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,EAAE;gBACtC,IAAI,GAAGT,SAAI,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;gBACjC,IAAI,CAACJ,aAAU,CAAC,IAAI,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC;aACtC;gBACG,IAAI,GAAG,IAAI,CAAC;;YAEhB,IAAI,IAAI,EAAE;gBACN,IAAI,GAAG,eAAe,CAACc,eAAY,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC;gBAC5D,GAAG,GAAG,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;;gBAE9C,GAAG,CAAC,IAAI,CAAC;oBACL,IAAI,EAAE,GAAG;oBACT,IAAI,EAAE,IAAI;oBACV,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,IAAI;iBAC5B,CAAC,CAAC;aACN;SACJ,CAAC,CAAC;;QAEHC,gBAAa,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;KAC3E,CAAC,CAAC;CACN,CAAC;;;AAGF,MAAMJ,SAAO,GAAG,CAAC,GAAG,EAAE,QAAQ,KAAK;IAC/B,IAAI,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE,GAAG,EAAE,CAAC;IACvE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IACrC,IAAI,IAAI,GAAG,EAAE,CAAC;;IAEd,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;QACjB,IAAIZ,OAAI,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnD,GAAG,CAAC,MAAM,CAAC,KAAK,CAACA,OAAI,CAAC,CAAC;QACvB,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAACA,OAAI,GAAG,MAAM,CAAC;YAChC,GAAG,CAAC;;QAER,KAAK,CAAC,OAAO,CAAC,IAAI,IAAI;YAClB,IAAI,GAAG,IAAI,CAAC,SAAS,CAACA,OAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,IAAI,KAAK,OAAO,EAAE,IAAI,GAAG,EAAE,CAAC;YAChC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;YACvC,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;YACpD,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,IAAI,CAAC;gBACN,GAAG;gBACH,UAAU,EAAE,QAAQ;gBACpB,QAAQ,EAAE,GAAG;aAChB,CAAC,CAAC;SACN,CAAC,CAAC;KACN,CAAC,CAAC;;IAEH,MAAM,EAAE,GAAGiB,qBAAa,CAAC;QACrB,QAAQ,EAAE,GAAG,CAAC,MAAM,CAAC,GAAG;QACxB,SAAS,EAAE,GAAG,GAAG,IAAI;QACrB,IAAI,EAAE,IAAI;KACb,CAAC,CAAC;;IAEH,EAAE,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK;QACnB,IAAI,GAAG,EAAE;YACL,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACtB,QAAQ,CAAC,uBAAuB,CAAC,CAAC;SACrC;QACD,QAAQ,CAAC,GAAG,CAAC,CAAC;KACjB,CAAC,CAAC;CACN,CAAC;;AC1GF,cAAe,GAAG,IAAI;IAClB,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAACjB,OAAI,KAAK;QAC/B,IAAI,OAAOA,OAAI,KAAK,QAAQ;YACxB,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAACA,OAAI,CAAC,CAAC,CAAC;;YAE9B,GAAG,CAAC,GAAG,CAACA,OAAI,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,MAAM,CAACA,OAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACjD,CAAC,CAAC;CACN,CAAC;;ACGF;;AAEA,gBAAe,GAAG,IAAI;IAClB,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,CAAC;IACnB,MAAM,GAAG,GAAG,OAAO,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;;IAE9C,MAAM,OAAO,GAAG,GAAG,CAAC,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,WAAEY,SAAO,EAAE,QAAQ,CAAC,CAAC,CAAC;IAC1F,GAAG,CAAC,MAAM,GAAG,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACpC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC;IACtC,GAAG,CAAC,MAAM,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC;IACtD,IAAI,GAAG,CAAC,MAAM,CAAC,KAAK;QAChB,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;;IAE1D,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO;QAClB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI;YAC5C,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC3B,CAAC,CAAC;;IAEP,GAAG,CAAC,MAAM,CAAC,OAAO,GAAG,EAAE,CAAC;;IAExB,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,IAAI,KAAK;QAC9B,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;YAClB,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,MAAM,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;YAC1D,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAChC,IAAI,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACrC;KACJ,CAAC,CAAC;;IAEH,OAAO,GAAG,CAAC;CACd,CAAC;;ACjCF,UAAe,MAAM,IAAI;IACrB,MAAM,CAAC,MAAM,EAAE,CAAC;;IAEhB,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QACnB,OAAO;QACP,UAAU,EAAE,OAAO,CAAC,GAAG,CAAC,eAAe,IAAI,eAAe;QAC1D,OAAO,EAAE,CAAC,KAAK,CAAC;KACnB,EAAE,MAAM,CAAC,CAAC;;IAEX,OAAO;SACF,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;SACvB,KAAK,CAAC,qBAAqB,CAAC,CAAC;;IAElC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI;QAC7B,MAAM,CAAC,MAAM,CAAC,CAAC;KAClB,CAAC,CAAC;;IAEH,OAAO,OAAO,CAAC;CAClB,CAAC;;;;AAIF,AAAO,MAAM,KAAK,GAAG,MAAM,IAAI;;IAE3B,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QACnB,IAAI,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa,IAAI,IAAI,CAAC;KAC7C,EAAE,MAAM,CAAC,CAAC;;IAEX,OAAO;SACF,OAAO,CAAC,OAAO,CAAC;SAChB,KAAK,CAAC,kBAAkB,CAAC;SACzB,WAAW,CAAC,uBAAuB,CAAC;SACpC,MAAM,CAAC,qBAAqB,EAAE,qBAAqB,EAAE,MAAM,CAAC,IAAI,CAAC;SACjE,MAAM,CAAC,qBAAqB,EAAE,qBAAqB,EAAE,MAAM,CAAC,UAAU,CAAC;SACvE,MAAM,CAAC,oBAAoB,EAAE,eAAe,EAAE,MAAM,CAAC;SACrD,MAAM,CAAC,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC;SACtC,MAAM,CAAC,YAAY;YAChB,MAAM,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;YAC5B,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI;gBACpD,IAAI,KAAK,EAAE;oBACP,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;oBAChD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACnB,MAAM;oBACH,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM;wBACxB,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBACjF,CAAC,CAAC;iBACN;aACJ,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI;gBACZ,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aACzB,CAAC,CAAC;SACN,CAAC,CAAC;CACV,CAAC;;;;;"}
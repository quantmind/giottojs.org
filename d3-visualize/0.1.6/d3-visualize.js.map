{"version":3,"file":"d3-visualize.js","sources":["../src/utils/randompath.js","../src/data/array.js","../src/data/warn.js","../src/utils/isurl.js","../src/data/remote.js","../src/data/composite.js","../src/data/expression.js","../src/utils/accessor.js","../src/data/dataframe.js","../src/transforms/base.js","../src/transforms/filter.js","../src/utils/warn.js","../src/utils/fillarray.js","../src/transforms/aggregate.js","../src/transforms/crossfilter.js","../src/transforms/timeseries.js","../src/core/options.js","../src/transforms/mapfields.js","../src/utils/minmax.js","../src/transforms/moving-average.js","../src/transforms/index.js","../src/data/sources.js","../src/data/store.js","../src/data/locale.js","../src/utils/round.js","../src/utils/size.js","../src/utils/clone.js","../src/core/base.js","../src/core/visual.js","../src/utils/camelfunction.js","../src/core/chart.js","../src/core/paper.js","../src/plugins/menu.js","../src/utils/format.js","../src/plugins/data.js","../src/plugins/responsive.js","../src/plugins/title.js","../src/plugins/margin.js","../src/plugins/axis.js","../src/plugins/shapes.js","../src/plugins/color.js","../src/plugins/legend.js","../src/plugins/clusterize.js","../src/plugins/paginate.js","../src/plugins/bootstrap.js","../src/plugins/index.js","../src/core/container.js","../src/components/dashboard.js","../src/components/visual.js","../src/data/formatters.js","../src/utils/columns.js","../src/components/tabular.js","../src/components/index.js","../src/utils/constant.js","../src/utils/descending.js","../src/utils/identity.js","../src/transforms/pyramid.js","../src/utils/nicerange.js","../src/charts/line.js","../src/charts/bar.js","../src/charts/box.js","../src/transforms/groups.js","../src/charts/area.js","../src/utils/text-wrapping.js","../src/charts/pie.js","../src/utils/polygon.js","../src/charts/pyramid.js","../src/charts/treemap.js","../src/charts/text.js","../src/charts/heatmap.js","../index.js"],"sourcesContent":["import assign from 'object-assign';\nimport {range} from 'd3-array';\nimport {randomNormal} from 'd3-random';\n\n\nconst defaults = {\n    sigma: 0.1,\n    drift: 0\n};\n\n\nexport default function (size, options) {\n    options = assign({}, defaults, options);\n    var t = range(0, +size, 1),\n        S = options.sigma,\n        drift = options.drift,\n        data = [{x: 0, y: 0}],\n        norm = randomNormal(0, 1),\n        dx;\n\n    for (var i = 1; i < t.length; i++) {\n        dx = drift + S * norm();\n        data[i] = {\n            x: i,\n            y: data[i - 1].y + dx\n        };\n    }\n\n    return data;\n}\n","import {isArray, isObject} from 'd3-let';\nimport {resolvedPromise} from 'd3-view';\n\n//\n//  Array DataSource\n//  ====================\n//\n//  Data is given in an array, pkain & simple\nexport default {\n\n    initialise (config) {\n        this._data = config.data;\n    },\n\n    getConfig (config) {\n        if (isArray(config)) return {data: config};\n        else if (isObject(config) && isArray(config.data)) return config;\n    },\n\n    getData () {\n        return resolvedPromise(this.asFrame(this._data));\n    }\n};\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-data-source]';\n\n\nexport default function (msg) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n}\n","import {isString} from 'd3-let';\n\n\nconst schemes = ['http', 'https', 'ws', 'wss'];\n\n\nexport default function (value) {\n    return isString(value) && schemes.indexOf(value.split('://')[0]) > -1;\n}\n","import {csvParse} from 'd3-dsv';\nimport {set} from 'd3-collection';\nimport {isObject} from 'd3-let';\nimport {viewProviders, resolvedPromise} from 'd3-view';\n\nimport warn from './warn';\nimport isUrl from '../utils/isurl';\n\nconst CSV = set(['text/plain', 'text/csv', 'application/vnd.ms-excel']);\n//\n//  Remote dataSource\n//  ===================\n//\n//  handle Json and csv data\nexport default {\n\n    getConfig (config) {\n        if (isUrl(config)) return {url: config};\n        else if (isObject(config) && config.url)\n            return config;\n    },\n\n    initialise (config) {\n        this.url = config.url;\n    },\n\n    getData () {\n        var fetch = viewProviders.fetch,\n            self = this;\n        if (!fetch) {\n            warn('fetch provider not available, cannot submit');\n            return resolvedPromise([]);\n        }\n        return fetch(this.url).then(parse).then((data) => self.asFrame(data));\n    }\n};\n\n\nfunction parse (response) {\n    var ct = (response.headers.get('content-type') || '').split(';')[0];\n    if (CSV.has(ct))\n        return response.text().then(csvParse);\n    else if (ct === 'application/json')\n        return response.json();\n    else {\n        warn(`Cannot load content type '${ct}'`);\n        return [];\n    }\n}\n","import {isArray, isObject} from 'd3-let';\n//\n//  A composite dataSource\n//  ===================\n//\n//  A composite data source has the source attribute with the name of one\n//  or more data sets to use as the source for this data set.\n//  The source property is useful in combination with a transform pipeline\n//  to derive new data.\n//  If string-valued, indicates the name of the source data set.\n//  If array-valued, specifies a collection of data source names that\n//  should be merged (unioned) together.\nexport default {\n\n    initialise (config) {\n        this.source = config.source;\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.source) {\n            if (!isArray(config.source)) config.source = [config.source];\n            return config;\n        }\n    },\n\n    getData () {\n        var store = this.store,\n            self = this;\n        let frame;\n        return Promise.all(this.source.map(source => {\n             return store.getData(source);\n        })).then(frames => {\n            if (frames.length === 1) frame = frames[0];\n            else frame = self.mergeFrames(frames);\n            return self.asFrame(frame);\n        });\n    },\n\n    // TODO: implement frame merging\n    mergeFrames (frames) {\n        return frames[0];\n    }\n};\n","import {isObject} from 'd3-let';\nimport {viewExpression, resolvedPromise} from 'd3-view';\n\n\nexport default {\n\n    initialise (config) {\n        this.expression = viewExpression(config.expression);\n    },\n\n    getConfig (config) {\n        if (isObject(config) && config.expression)\n            return config;\n    },\n\n    getData () {\n        var self = this,\n            model = this.store.model;\n        return resolvedPromise(this.expression.eval(model)).then((data) => self.asFrame(data));\n    }\n};\n","export default function (field) {\n    return function (d) {\n        return d[field];\n    };\n}\n","import {isArray} from 'd3-let';\nimport {map} from 'd3-collection';\nimport crossfilter from 'crossfilter';\n\nimport accessor from '../utils/accessor';\n\n\nexport default function DataFrame (data, serie, store) {\n    if (isArray(data)) data = {\n        store: store,\n        data: data,\n        dimensions: {},\n        series: map()\n    };\n    Object.defineProperties(this, {\n        _inner: {\n            get () {\n                return data;\n            }\n        },\n        store: {\n            get () {\n                return data.store;\n            }\n        },\n        data: {\n            get () {\n                return data.data;\n            }\n        },\n        dimensions: {\n            get () {\n                return data.dimensions;\n            }\n        },\n        series: {\n            get () {\n                return data.series;\n            }\n        }\n    });\n    this.serie = serie;\n}\n\n\nDataFrame.prototype = {\n\n    size () {\n        return this.data.length;\n    },\n\n    new (serie) {\n        if (isArray(serie)) return new DataFrame(serie, null, this.store);\n        else return new DataFrame(this._inner, serie);\n    },\n\n    cf () {\n        if (!this._inner.cf) this._inner.cf = crossfilter(this.data);\n        return this._inner.cf;\n    },\n\n    //  Create and return a crossfilter dimension\n    //  If value is not specified, keepExisting is by default true, and any\n    //  existing dimension name is recycled.\n    dimension (name, value, keepExisting) {\n        if (arguments.length === 1) keepExisting = true;\n        var current = this.dimensions[name];\n        if (current) {\n            if (keepExisting) return current;\n            current.dispose();\n        }\n        if (!value) value = accessor(name);\n        this.dimensions[name] = this.cf().dimension(value);\n        return this.dimensions[name];\n    },\n\n    //  Sort a dataframe by name and return the top values or all of them if\n    //  top is not defined. The name can be a function.\n    sortby (name, top) {\n        return this.new(this.dimension(name).top(top || Infinity));\n    },\n\n    // return a new dataframe by pivoting values for field name\n    pivot (dimension, key, value, total) {\n        var group = this.dimension(dimension).group();\n        if (!total) total = 'total';\n        return this.new(group.reduce(pivoter(1), pivoter(-1), Object).all().map(d => d.value));\n\n        function pivoter (m) {\n            let pk, pv;\n            return function (o, record) {\n                pk = ''+record[key];\n                pv = m*record[value];\n                o[dimension] = record[dimension];\n                if (pk in o) o[pk] += pv;\n                else o[pk] = pv;\n                if (total in o) o[total] += pv;\n                else o[total] = pv;\n                return o;\n            };\n        }\n    },\n\n    add () {\n        //this._inner.cf.add(data);\n    },\n\n    map (mapper) {\n        return this.new(this.data.map(mapper));\n    }\n};\n","import {viewProviders} from 'd3-view';\n\n\nexport default function (options) {\n    const\n        transform = options.transform,\n        schema = options.schema || {},\n        jsonValidator = viewProviders.jsonValidator ? viewProviders.jsonValidator(options.schema) : dummyValidator;\n    if (!schema.type) schema.type = 'object';\n\n    function transformFactory (config) {\n        const valid = jsonValidator.validate(config);\n\n        if (!valid) return jsonValidator.logError();\n\n        return doTransform;\n\n        function doTransform (frame) {\n            return transform(frame, config);\n        }\n    }\n\n    transformFactory.schema = schema;\n\n    return transformFactory;\n}\n\n\nconst dummyValidator = {\n    validate () {\n        return true;\n    }\n};\n","import {viewExpression} from 'd3-view';\n\nimport transformFactory from './base';\n\n//\n// Create a groupby transform from a config object\nexport default transformFactory ({\n    schema: {\n        description: \"The filter transform removes objects from a data frame based on a provided filter expression\",\n        properties: {\n            expr: {\n                type: \"string\"\n            }\n        },\n        required: [\"expr\"]\n    },\n    transform (frame, config) {\n        var expr = viewExpression(config.expr);\n        return frame.data.reduce((data, d, index) => {\n            if (expr.safeEval({d: d, index: index, frame: frame})) data.push(d);\n            return data;\n        }, []);\n    }\n});\n","import {viewProviders} from 'd3-view';\n\nconst prefix = '[d3-visualize]';\n\n\nexport default function (msg) {\n    viewProviders.logger.warn(`${prefix} ${msg}`);\n}\n","export default function (size, value) {\n    var a = new Array(size);\n    a.fill(value);\n    return a;\n}\n","import {map} from 'd3-collection';\nimport {isArray, isString} from 'd3-let';\nimport {max, min, sum, mean, median, variance, deviation} from 'd3-array';\n\nimport warn from '../utils/warn';\nimport fillArray from '../utils/fillarray';\n\nexport const operations = map({\n    count,\n    max,\n    min,\n    sum,\n    mean,\n    median,\n    variance,\n    deviation\n});\n\nexport const scalar_operations = map({\n    count (agg) {return agg + 1;},\n    sum (agg, v) {return agg + v;},\n    max: Math.max,\n    min: Math.min\n});\n\n\nfunction count (array, accessor) {\n    return array.reduce((v, d) => {\n        if (accessor(d) !== undefined) v += 1;\n        return v;\n    }, 0);\n}\n//\n// The aggregate transform groups and summarizes an imput data stream to\n// produce a derived output data stream. Aggregate transforms can be used\n// to compute counts, sums, averages and other descriptive statistics over\n// groups of data objects.\nexport default function (config) {\n    let fields = config.fields,\n        ops = config.ops,\n        as = config.as,\n        groupby = config.groupby;\n\n    if (!fields && !ops) return countAll;\n\n    if (!isArray(fields)) return warn('Aggregate transforms expect an array of fields');\n    if (!ops) ops = 'count';\n    if (isString(ops)) ops = fillArray(fields.length, ops);\n    if (!isArray(ops)) return warn('Aggregate transform expects an array of ops');\n    if (ops.length < fields.length) warn('Aggregate transforms expects an ops array with same length as fields');\n    if (!as) as = [];\n    if (!isArray(as)) return warn('Aggregate transform expects an array of as fields');\n    return aggregate;\n\n\n    function countAll (frame) {\n        let key;\n        return frame.data.reduce((o, d) => {\n            for (key in d) {\n                if (key in o) o[key] += 1;\n                else o[key] = 1;\n            }\n            return o;\n        }, {});\n    }\n\n    function aggregate (frame) {\n        var data = [],\n            name, op;\n\n        if (groupby) return group(frame);\n\n        fields.forEach((field, index) => {\n            name = ops[index];\n            op = count;\n            if (name) {\n                op = operations.get(name);\n                if (!op) {\n                    op = count;\n                    warn(`Operation ${ops[index]} is not supported, use count`);\n                }\n            }\n            data.push({\n                label: as[index] || field,\n                data: op(frame.data, d => d[field])\n            });\n        });\n        return data;\n    }\n\n    //\n    //  Perform aggregation with a set of data fields to group by\n    function group (frame) {\n        let v, name, op;\n        const entries = fields.map((field, index) => {\n            name = ops[index];\n            op = scalar_operations.get('count');\n            if (name) {\n                op = scalar_operations.get(name);\n                if (!op) {\n                    op = scalar_operations.get('count');\n                    warn(`Operation ${name} is not supported, use count`);\n                }\n            }\n            return {\n                field: field,\n                as: as[index] || field,\n                op: op\n            };\n        });\n\n        return frame.dimension(groupby).group().reduce((o, record) => {\n            return entries.reduce((oo, entry) => {\n                v = 0;\n                if (entry.as in oo) v = oo[entry.as];\n                oo[entry.as] = entry.op(v, record[entry.field]);\n                return oo;\n            }, o);\n        }, null, Object).all().map(d => {\n            d.value[groupby] = d.key;\n            return d.value;\n        });\n    }\n}\n","import {isArray, isString} from 'd3-let';\nimport warn from '../utils/warn';\n\n//\n// Apply a cross filter to an array of fields\nexport default function (config) {\n    let fields = config.fields,\n        query = config.query;\n\n    if (!isArray(fields)) return warn('crossfilter transform expects an array of fields');\n    if (!isArray(query)) return warn('crossfilter transform expects an array of query');\n    if (query.length != fields.length) return warn('crossfilter transform expects an query array with same length as fields');\n\n    return crossfilter;\n\n    function crossfilter (frame) {\n        let dim, q;\n        fields.forEach((field, index) => {\n            q = query[index];\n            if (isString(q)) q = frame.store.eval(q);\n            dim = frame.dimension(field).filterAll();\n            if (q) dim.filter(q);\n        });\n        if (dim) return frame.new(dim.top(Infinity));\n        return frame;\n    }\n}\n","import warn from '../utils/warn';\n\n//\n// Create a groupby transform from a config object\nexport default function (config) {\n    var sortby = config.sortby,\n        groupby = config.groupby;\n\n    if (!sortby) warn('timeseries transform requires a \"sortby\" entry');\n\n    return timeseries;\n\n    function timeseries (frame) {\n        if (sortby) {\n            if (groupby) {\n                var dim = frame.dimension(groupby),\n                    groups = dim.group().top(Infinity),\n                    newframe = frame.new([]),\n                    tmp;\n                groups.forEach(group => {\n                    tmp = frame.new(dim.filterExact(group.key).top(Infinity)).dimension(sortby).group().top(Infinity);\n                    newframe.series.set(group.key, frame.new(tmp).dimension('key').top(Infinity));\n                });\n                return newframe;\n            } else {\n                return frame.new(frame.dimension(sortby).top(Infinity));\n            }\n        }\n        return frame;\n    }\n}\n","//\n//  Global options for visuals\n//  ============================\n//\nexport default {\n    // visual data source\n    dataSource: null,\n    //\n    size: {\n        // width set by the parent element\n        width: null,\n        // height set as percentage of width\n        height: '70%'\n    }\n};\n","//\n//  Map Fields Transform\n//  ========================\n//\n//  Convert a set af fields to a different data type\n//\nimport {map} from 'd3-collection';\nimport {isString} from 'd3-let';\nimport {utcParse} from 'd3-time-format';\n\nimport transformFactory from './base';\nimport warn from '../utils/warn';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.dateFormat = '%d-%b-%y';\n\n\nconst converters = {\n    date (entry) {\n        return utcParse(entry.dateFormat || globalOptions.dateFormat);\n    },\n    number () {\n        return parseFloat;\n    }\n};\n\nexport default transformFactory({\n    shema: {\n        description: \"map a field values into another type\",\n        properties: {\n            fields: {\n                type: \"object\"\n            },\n            dateFormat: {\n                type: \"string\"\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        var fields = map(config.fields),\n            mappers = [];\n        let i, converter;\n\n        fields.each((entry, key) => {\n            if (isString(entry)) entry = {type: entry};\n            converter = converters[entry.type];\n            if (!converter) warn(`Cannot convert field ${key} to type ${entry.type}`);\n            else mappers.push([key, converter(entry)]);\n        });\n\n        if (mappers.length)\n            frame = frame.map(d => {\n                for (i=0; i<mappers.length; ++i)\n                    d[mappers[i][0]] = mappers[i][1](d[mappers[i][0]]);\n                return d;\n            });\n\n        return frame;\n    }\n});\n","export default function (value, min, max) {\n    return Math.max(Math.min(value, max), min);\n}\n","import transformFactory from './base';\nimport minmax from '../utils/minmax';\n\nconst\n    DEFAULT_METHOD = 'ema',   // or sma simple moving average\n    DEFAULT_PERIOD = 10,\n    DEFAULT_ALPHA = 0.5,\n    MAXALPHA = 0.999999;\n\n//\n// Exponential moving average transform\n// Useful for smoothing out volatile timeseries\nexport default transformFactory({\n    shema: {\n        description: \"Create moving average series from existing one. The new series override the existing one unless the as array is provided\",\n        properties: {\n            method: {\n                type: \"string\"\n            },\n            alpha: {\n                type: \"number\"\n            },\n            period: {\n                type: \"number\"\n            },\n            fields: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            },\n            as: {\n                type: \"array\",\n                items: {\n                    type: \"string\"\n                }\n            }\n        },\n        required: [\"fields\"]\n    },\n    transform (frame, config) {\n        const as = config.as || [],\n            method = config.method || DEFAULT_METHOD;\n        let fieldto, y, s;\n\n        config.fields.forEach((field, index) => {\n            fieldto = as[index] || field;\n            //\n            // Simple Moving Average\n            if (method === 'sma') {\n                const period = Math.max(config.period || DEFAULT_PERIOD, 1),\n                    cumulate = [],\n                    buffer = [];\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (cumulate.length === period) y -= buffer.splice(0, 1)[0];\n                    buffer.push(y);\n                    if (index) y += cumulate[cumulate.length-1];\n                    cumulate.push(y);\n                    d[fieldto] = y/cumulate.length;\n                });\n            //\n            // Exponential moving average\n            } else {\n                const alpha = minmax(config.alpha || DEFAULT_ALPHA, 1-MAXALPHA, MAXALPHA);\n\n                frame.data.forEach((d, index) => {\n                    y = d[field];\n                    if (!index) s = y;\n                    else s = alpha*s + (1-alpha)*y;\n                    d[fieldto] = s;\n                });\n            }\n        });\n    }\n});\n","// Collection of transforms\nimport {map} from 'd3-collection';\nimport {isArray} from 'd3-let';\n\nimport filter from './filter';\nimport aggregate from './aggregate';\nimport crossfilter from './crossfilter';\nimport timeseries from './timeseries';\nimport mapfields from './mapfields';\nimport movingaverage from './moving-average';\n\n//\n//  transforms Store\nexport default map({\n    filter,\n    aggregate,\n    mapfields,\n    timeseries,\n    crossfilter,\n    movingaverage\n});\n\n\n// Apply data transforms to a series\nexport function applyTransforms (frame, transforms) {\n    let ts;\n    if (!transforms) return frame;\n    transforms.forEach(transform => {\n        if (transform) {\n            ts = transform(frame);\n            if (isArray(ts)) frame = frame.new(ts);\n            else if (ts) frame = ts;\n        }\n    });\n    return frame;\n}\n","import assign from 'object-assign';\nimport {map} from 'd3-collection';\nimport {dispatch} from 'd3-dispatch';\nimport {pop, isArray} from 'd3-let';\n\nimport DataFrame from './dataframe';\nimport transformStore, {applyTransforms} from '../transforms/index';\nimport warn from '../utils/warn';\n\nconst dataEvents = dispatch('init', 'data');\n\n\n//\n//  DataSource prototype\n//  ======================\nconst dataSourcePrototype = {\n\n    // get the config object-assign// This method is used by the prototype\n    // to check if the config object is a valid one\n    getConfig () {},\n\n    // initialise the data source with a config object\n    initialise () {},\n\n    getData () {},\n\n    //\n    addTransforms (transforms) {\n        var self = this;\n        let t;\n        if (!transforms) return;\n        if (!isArray(transforms)) transforms = [transforms];\n        transforms.forEach(transform => {\n            t = transformStore.get(transform.type);\n            if (!t) warn(`Transform \"${transform.type}\" not known`);\n            else self.transforms.push(t(transform));\n        });\n    },\n    //\n    // given a data object returns a Cross filter object\n    asFrame (data) {\n        if (isArray(data)) {\n            data = data.map(entry => {\n                if (entry.constructor !== Object) entry = {data: entry};\n                return entry;\n            });\n            data = new DataFrame(data, null, this.store);\n        }\n        return applyTransforms(data, this.transforms);\n    }\n};\n\n\n// DataSource container\nexport default assign(map(), {\n    events: dataEvents,\n\n    add (type, source) {\n\n        // DataSource constructor\n        function DataSource (config, store) {\n            initDataSource(this, type, config, store);\n        }\n\n        DataSource.prototype = assign({}, dataSourcePrototype, source);\n\n        this.set(type, DataSource);\n        return DataSource;\n    },\n\n    // Create a new DataSource\n    create (config, store) {\n        var sources = this.values(),\n            cfg;\n        for (var i=0; i<sources.length; ++i) {\n            cfg = sources[i].prototype.getConfig(config);\n            if (cfg) return new sources[i](cfg, store);\n        }\n    }\n});\n\n\nfunction initDataSource(dataSource, type, config, store) {\n\n    var name = store.dataName(pop(config, 'name')),\n        transforms = [];\n\n    // store.natural = cf.dimension(d => d._id);\n\n    Object.defineProperties(dataSource, {\n        name: {\n            get () {\n                return name;\n            }\n        },\n        store: {\n            get () {\n                return store;\n            }\n        },\n        type: {\n            get () {\n                return type;\n            }\n        },\n        // transforms to apply to data\n        transforms: {\n            get () {\n                return transforms;\n            }\n        },\n        config: {\n            get () {\n                return config;\n            }\n        }\n    });\n\n    dataSource.initialise(config);\n    dataSource.addTransforms(pop(config, 'transforms'));\n    store.sources.set(name, dataSource);\n    dataEvents.call('init', undefined, dataSource);\n}\n","import assign from 'object-assign';\n\nimport {map} from 'd3-collection';\nimport {isArray, isString} from 'd3-let';\nimport {resolvedPromise, viewExpression} from 'd3-view';\n\nimport array from './array';\nimport remote from './remote';\nimport composite from './composite';\nimport expression from './expression';\nimport dataSources from './sources';\nimport transformStore from '../transforms/index';\n\n\ndataSources.add('array', array);\ndataSources.add('remote', remote);\ndataSources.add('composite', composite);\ndataSources.add('expression', expression);\n\n//\n//  DataStore\n//  ==============\n//\n//  Map names to datasets\n//  Individual data sets are assumed to contain a collection of records\n//  (or “rows”), which may contain any number of named data\n//  attributes (fields, or “columns”).\n//  Records are modeled using standard JavaScript objects.\nexport default function DataStore(model) {\n    var sources = map();\n\n    Object.defineProperties(this, {\n        sources: {\n            get () {\n                return sources;\n            }\n        }\n    });\n\n    // transforms function\n    this.transforms = assign({}, transformStore);\n    this.dataCount = 0;\n    this.model = model;\n}\n\n\nDataStore.prototype = {\n    size () {\n        return this.sources.size();\n    },\n\n    // Add a new serie from a data source\n    addSources (config) {\n        //\n        // data is a string, it must be already registered with store\n        if (isString(config)) config = {source: config};\n\n        if (isArray(config)) {\n            var self = this;\n            return config.map(cfg => {\n                return dataSources.create(cfg, self);\n            });\n        } else if (config) {\n            return dataSources.create(config, this);\n        }\n    },\n\n    addTransforms (transforms) {\n        assign(this.transforms, transforms);\n    },\n\n    // set, get or remove a data source\n    source (name, source) {\n        if (arguments.length === 1) return this.sources.get(name);\n        if (source === null) {\n            var p = this.sources.get(name);\n            this.sources.remove(name);\n            return p;\n        }\n        this.sources.set(name, source);\n        return this;\n    },\n\n    clearCache () {\n        this.sources.each(ds => {\n            delete ds.cachedFrame;\n        });\n    },\n\n    // get data from a source\n    getData (source) {\n        var ds = this.sources.get(source);\n        if (!ds) throw new Error(`Data source ${source} not available`);\n        if (ds.cachedFrame) return resolvedPromise(ds.cachedFrame);\n        return ds.getData().then(frame => {\n            if (ds.config.cache) ds.cachedFrame = frame;\n            return frame;\n        });\n    },\n\n    eval (expr, context) {\n        let ctx = this.model;\n        if (context) ctx = ctx.$child(context);\n        return viewExpression(expr).safeEval(ctx);\n    },\n\n    dataName (name) {\n        this.dataCount++;\n        if (name) return '' + name;\n        var def = this.source('default');\n        if (!def) return 'default';\n        return `source${this.dataCount}`;\n    }\n};\n","// utility to load and set locale\nimport {formatDefaultLocale} from 'd3-format';\nimport {timeFormatDefaultLocale, timeFormat} from 'd3-time-format';\n\nimport dataSources from './sources';\n\n//\n// manage locale\nexport default {\n    formatDate: timeFormat('%d/%m/%Y'),\n\n    formatDateTime: timeFormat('%a %e %b %X %Y'),\n\n    load (symbol) {\n        var locales = this,\n            source1 = dataSources.create(`https://unpkg.com/d3-format/locale/${symbol}.json`),\n            source2 = dataSources.create(`https://unpkg.com/d3-time-format/locale/${symbol}.json`);\n\n        return Promise.all([\n            source1.load().then(\n                locale => {\n                    locales.symbol = symbol;\n                    locales.number = locale;\n                    formatDefaultLocale(locale);\n                }\n            ),\n            source2.load().then(\n                locale => {\n                    locales.time = locale;\n                    locales.formatDate = timeFormat(locale.date);\n                    locales.formatDateTime = timeFormat(locale.dateTime);\n                    timeFormatDefaultLocale(locale);\n                }\n            )\n        ]);\n    }\n};\n","export default function (x, n) {\n    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);\n}\n","import {select} from 'd3-selection';\n\nimport round from './round';\n\n\nconst WIDTH = 400;\nconst HEIGHT = '75%';\n\n\nexport function sizeValue (value, size) {\n    if (typeof(value) === \"string\" && value.indexOf('%') === value.length-1)\n        return round(0.01*parseFloat(value)*size);\n    return +value;\n}\n\n// Internal function for evaluating paper dom size\nexport function getSize (element, options) {\n    var size = {\n        width: options.width,\n        height: options.height\n    };\n\n    if (!size.width) {\n        size.width = getWidth(element);\n        if (size.width)\n            size.widthElement = getWidthElement(element);\n        else\n            size.width = WIDTH;\n    }\n\n    if (!size.height) {\n        size.height = getHeight(element);\n        if (size.height)\n            size.heightElement = getHeightElement(element);\n        else\n            size.height = HEIGHT;\n    }\n\n    // Allow to specify height as a percentage of width\n    size.height = sizeValue(size.height, size.width);\n    return size;\n}\n\n\nexport function getWidth (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementWidth(el);\n}\n\n\nexport function getHeight (element) {\n    var el = getParentElementRect(element, 'width');\n    if (el) return elementHeight(el);\n}\n\n\nexport function getWidthElement (element) {\n    return getParentElementRect(element, 'width');\n}\n\n\nexport function getHeightElement (element) {\n    return getParentElementRect(element, 'height');\n}\n\n\nfunction elementWidth (el) {\n    var w = el.getBoundingClientRect()['width'],\n        s = select(el),\n        left = padding(s.style('padding-left')),\n        right = padding(s.style('padding-right'));\n    return w - left - right;\n}\n\n\nfunction elementHeight (el) {\n    var w = el.getBoundingClientRect()['height'],\n        s = select(el),\n        top = padding(s.style('padding-top')),\n        bottom = padding(s.style('padding-bottom'));\n    return w - top - bottom;\n}\n\n\nfunction getParentElementRect (element, key) {\n    let parent = element.node ? element.node() : element,\n        v;\n    while (parent && parent.tagName !== 'BODY') {\n        v = parent.getBoundingClientRect()[key];\n        if (v)\n            return parent;\n        parent = parent.parentNode;\n    }\n}\n\n\nfunction padding (value) {\n    if (value && value.substring(value.length-2) == 'px')\n        return +value.substring(0, value.length-2);\n    return 0;\n}\n\n\nexport function boundingBox (size) {\n    var w = size.widthElement ? getWidth(size.widthElement) : size.width,\n        h;\n    if (size.heightPercentage)\n        h = round(w*size.heightPercentage, 0);\n    else\n        h = size.heightElement ? getHeight(size.heightElement) : size.height;\n    if (size.minHeight)\n        h = Math.max(h, size.minHeight);\n    return [round(w), round(h)];\n}\n","import {isArray, isObject} from 'd3-let';\n\n\nexport default function clone (o) {\n    if (isArray(o)) return o.map(clone);\n    else if (isObject(o)) {\n        var v = {};\n        for (let key in o) {\n            v[key] = clone(o[key]);\n        }\n        return v;\n    } else return o;\n}\n","import assign from 'object-assign';\nimport {pop, isString, isObject} from 'd3-let';\nimport {dispatch} from 'd3-dispatch';\nimport {select} from 'd3-selection';\nimport {viewBase, viewModel} from 'd3-view';\nimport 'd3-transition';\n\nimport globalOptions from './options';\nimport {sizeValue} from '../utils/size';\nimport clone from '../utils/clone';\n\n\nconst CONTAINERS = ['visual', 'container'];\n\n//\n//  Gloval visuals object\n//  ==========================\n//\n//  Container of\n//  * live visuals\n//  * visual types\n//  * paper types\n//  * visual events\nexport const visuals = {\n    live: [],\n    types: {},\n    papers: {},\n    options: globalOptions,\n    events: dispatch(\n        'before-init',\n        'after-init',\n        'before-draw',\n        'after-draw'\n    )\n};\n\n//\n//  Visual Interface\n//  ====================\n//\n//  Base prototype object for visuals\n//\nexport const visualPrototype = assign({}, {\n\n    // initialise the visual with options\n    initialise () {\n\n    },\n\n    // draw this visual\n    draw () {},\n\n    // redraw the visual\n    // this is the method that should be invoked by applications\n    redraw () {\n        if (this.drawing) {\n            var self = this,\n                event = `after-draw.${this.toString()}`;\n            visuals.events.on(event, () => {\n                // remove callback\n                visuals.events.on(event, null);\n                self.redraw();\n            });\n        } else\n            this.drawing = this.draw();\n        return this.drawing;\n    },\n\n    select (el) {\n        return select(el);\n    },\n\n    // destroy the visual\n    destroy () {\n\n    },\n\n    toString () {\n        return `${this.visualType}-${this.model.uid}`;\n    },\n\n    // get a reactive model for type\n    getModel (type) {\n        if (!type) type = this.visualType;\n        var model = this.model[type];\n        if (!model && type in globalOptions) {\n            var options = pop(this.options, type),\n                self = this;\n            if (this.visualParent)\n                model = this.visualParent.getModel(type).$child(options);\n            else {\n                model = this.model.$new(globalOptions[type]);\n                model.$update(options);\n            }\n            this.model[type] = model;\n            model.$on(() => self.draw());\n        }\n        return model;\n    },\n\n    dim (size, refSize, minSize, maxSize) {\n        size = Math.max(sizeValue(size, refSize), minSize || 0);\n        if (maxSize) {\n            maxSize = Math.max(maxSize, minSize || 0);\n            size = Math.min(size, maxSize);\n        }\n        return size;\n    },\n    // pop this visual from a container\n    pop (container) {\n        if (container) {\n            var idx = container.live.indexOf(this);\n            if (idx > -1) container.live.splice(idx, 1);\n        }\n    },\n\n    getVisualSchema (name) {\n        var schema = this.options.visuals ? this.options.visuals[name] : null,\n            parent = this.visualParent;\n        if (parent && isString(schema)) {\n            name = schema;\n            schema = parent.getVisualSchema(name);\n        } else if (parent && !schema)\n            schema = parent.getVisualSchema(name);\n        if (isObject(schema))\n            return clone(schema);\n    }\n}, viewBase);\n\n//\n//  Create a new Visual Constructor\nexport default function (type, proto) {\n    const opts = pop(proto, 'options');\n    if (opts)\n        globalOptions[type] = opts;\n\n    function Visual(element, options, parent, model) {\n        Object.defineProperties(this, {\n            visualType: {\n                get () {\n                    return type;\n                }\n            },\n            isViz: {\n                get () {\n                    return CONTAINERS.indexOf(type) === -1;\n                }\n            }\n        });\n        this.visualParent = parent;\n        this.model = parent ? parent.model.$new() : (model || viewModel());\n        this.options = options || {};\n        this.drawing = false;\n        visuals.events.call('before-init', undefined, this);\n        this.initialise(element);\n        visuals.events.call('after-init', undefined, this);\n    }\n\n    Visual.prototype = assign({}, visualPrototype, proto);\n    visuals.types[type] = Visual;\n    return Visual;\n}\n","import {pop, inBrowser} from 'd3-let';\nimport {select} from 'd3-selection';\nimport {viewDebug} from 'd3-view';\n\nimport createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\nimport {getSize} from '../utils/size';\n\n//\n//  Visual\n//  =============\n//\n//  A Visual is a a container of visual layers and it is\n//  associated with an HTML element\n//\n//  Usually a Visual contains one layer only, however it is possible to\n//  have more than one by combining several layers together. Importantly,\n//  layers in one visual generate HTMLElements which are children of the visual\n//  element and inherit both the width and height.\n//\n//  A visual register itself with the visuals.live array\n//\nexport default createVisual('visual', {\n\n    options: {\n        render: 'svg',\n        // width set by the parent element\n        width: null,\n        // height set as percentage of width\n        height: '70%',\n        // heightElement - selector for an element from wich to obtain height\n        heightElement: null\n    },\n\n    initialise (element) {\n        if (!element) throw new Error('HTMLElement required by visual group');\n        if (this.visualParent && this.visualParent.visualType !== 'container')\n            throw new Error('Visual parent can be a container only');\n        if (!this.select(element).select('.paper').node())\n            this.select(element).append('div').classed('paper', true);\n\n        Object.defineProperties(this, {\n            element : {\n                get () {\n                    return element;\n                }\n            },\n            paper : {\n                get () {\n                    return this.sel.select('.paper');\n                }\n            },\n            sel: {\n                get () {\n                    return select(element);\n                }\n            },\n            size: {\n                get () {\n                    return [this.width, this.height];\n                }\n            }\n        });\n\n        this.sel.classed('d3-visual', true);\n        // list of layers which define the visual\n        this.layers = [];\n        this.drawCount = 0;\n        visuals.live.push(this);\n        element.__visual__ = this;\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    toString () {\n        return `visual ${this.model.uid}`;\n    },\n\n    // Draw the visual\n    draw() {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        else if (!this.drawCount) {\n            this.drawCount = 1;\n            this.fit();\n        } else {\n            this.drawCount++;\n            this.clear();\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, this);\n        return Promise.all(this.layers.map(visual => visual.redraw()))\n            .then(() => {\n                delete self.drawing;\n                visuals.events.call('after-draw', undefined, self);\n            }, err => {\n                delete self.drawing;\n                warn(`Could not draw ${self.toString()}: ${err}`);\n            });\n    },\n\n    clear () {},\n\n    // Add a new visual to this group\n    addVisual (options) {\n        var type = pop(options, 'type');\n        var VisualClass = visuals.types[type];\n        if (!VisualClass)\n            warn(`Cannot add visual ${options.type}`);\n        else\n            return new VisualClass(this.element, options, this);\n    },\n    //\n    // Fit the root element to the size of the parent element\n    fit () {\n        this.resize(null, true);\n    },\n\n    resize (size, fit) {\n        if (!size) size = getSize(this.element.parentNode || this.element, this.getModel());\n        var currentSize = this.size;\n\n        if (fit || (currentSize[0] !== size.width || currentSize[1] !== size.height)) {\n            if (!fit) viewDebug(`Resizing \"${this.toString()}\"`);\n            this.width = size.width;\n            this.height = size.height;\n            this.paper.style('width', this.width + 'px').style('height', this.height + 'px');\n            if (!fit) this.draw();\n        }\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n        this.pop(visuals);\n    }\n});\n\n\nif (inBrowser) {\n    // DOM observer\n    // Check for changes in the DOM that leads to visual actions\n    const observer = new MutationObserver(visualManager);\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\n\n//\n//  Clears visualisation going out of scope\nfunction visualManager (records) {\n    records.forEach(record => {\n        var nodes = record.removedNodes;\n        if (!nodes || !nodes.length) return;  // phantomJs hack\n        nodes.forEach(node => {\n            if (node.nodeName !== '#text') {\n                if (!node.__visual__)\n                    select(node).selectAll('.d3-visual').each(destroy);\n                else\n                    destroy.call(node);\n            }\n        });\n    });\n}\n\n\nfunction destroy () {\n    var viz = this.__visual__;\n    if (viz) {\n        viz.destroy();\n        viewDebug(`Removed \"${viz.toString()}\" from DOM, ${visuals.live.length} live visuals left`);\n    }\n    else warn('d3-visual without __visual__ object');\n}\n","export default function (o, prefix, name, objectOnly) {\n    if (name.substring(0, prefix.length) !== prefix)\n        name = `${prefix}${name[0].toUpperCase()}${name.substring(1)}`;\n    return objectOnly ? o[name] : o[name]();\n}\n","import assign from 'object-assign';\nimport {isFunction} from 'd3-let';\nimport * as d3_scale from 'd3-scale';\n\nimport createVisual, {visuals} from './base';\nimport Visual from './visual';\nimport camelFunction from '../utils/camelfunction';\nimport warn from '../utils/warn';\n\n//\n//  crateChart\n//\n//  A chart is a drawing of series data in two dimensional\nexport default function (type) {\n    var protos = [{}, vizPrototype, chartPrototype];\n    for (var i=1; i<arguments.length; ++i) protos.push(arguments[i]);\n    return createVisual(type, assign.apply(undefined, protos));\n}\n\n\n//  Viz Prototype\n//  =================\nexport const vizPrototype = {\n\n    initialise (element) {\n        // No visual parent, create the visual\n        var visual = this.visualParent;\n        if (!visual) {\n            this.visualParent = visual = new Visual(element, this.options, null, this.model);\n            this.model = visual.model.$new();\n            this.options = {};\n        } else if (visual.visualType !== 'visual')\n            throw new Error(`visual parent of ${this.visualType} can only be \"visual\"`);\n        visual.layers.push(this);\n    },\n\n    //\n    // paper object for this visualisation\n    paper () {\n        var visual = this.getModel('visual'),\n            paper = this._paper;\n        if (paper && paper.paperType === visual.render) return paper;\n        var PaperType = visuals.papers[visual.render];\n        if (!PaperType) throw new Error(`Unknown paper ${visual.render}`);\n        paper = new PaperType(this);\n        this._paper = paper;\n        return paper;\n    },\n\n    translate (x, y) {\n        if (isFunction(x)) {\n            return function (d) {\n                var xt = x(d) || 0,\n                    yt = y(d) || 0;\n                return `translate(${xt}, ${yt})`;\n            };\n        } else return `translate(${x}, ${y})`;\n    },\n\n    getScale (name) {\n        return camelFunction(d3_scale, 'scale', name);\n    },\n\n    displayError () {}\n};\n\n\nexport const chartPrototype = {\n\n    //  override draw method\n    draw () {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, this);\n        this.getData().then(frame => {\n            delete self.drawing;\n            if (frame) {\n                this.doDraw(frame);\n                visuals.events.call('after-draw', undefined, self);\n            }\n        }, err => {\n            delete self.drawing;\n            warn(`Could not draw ${self.toString()}: ${err}`);\n            this.displayError(err);\n        });\n    }\n};\n","import assign from 'object-assign';\nimport {select} from 'd3-selection';\n\nimport {visuals} from './base';\n\n\nexport default function createPaper (type, proto) {\n\n    function Paper (viz) {\n        var element = this.initialise(viz);\n        Object.defineProperties(this, {\n            element: {\n                get () {\n                    return element;\n                }\n            },\n            sel: {\n                get () {\n                    return select(element);\n                }\n            },\n            paperType: {\n                get () {\n                    return type;\n                }\n            }\n        });\n    }\n\n    Paper.prototype = assign({}, paperPrototype, proto);\n\n    visuals.papers[type] = Paper;\n    return Paper;\n}\n\n\nconst paperPrototype = {\n\n    initialise () {},\n    transition () {},\n    size (box) {\n        this.sel\n            .attr('width', box.width)\n            .attr('height', box.height);\n        return this;\n    },\n\n    group (cname) {\n        if (!cname) cname = 'main';\n        var sel = this.sel;\n        sel\n            .selectAll(`.${cname}`)\n            .data([0]).enter()\n            .append('g').classed(cname, true);\n        return sel.select(`.${cname}`);\n    },\n\n    dim (value) {\n        return value;\n    }\n};\n\n\nexport const Svg = createPaper('svg', {\n\n    initialise (viz) {\n        var svg = viz.visualParent.paper.append('svg')\n            .attr('id', viz.model.uid)\n            .classed(viz.visualType, true)\n            .style('position', 'absolute');\n        return svg.node();\n    }\n});\n","//\n//  Add a menu buttom to a visual\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\n\n\nglobalOptions.menu = {\n    display: false,\n    height: '8%',\n    maxHeight: 50,\n    minHeight: 20\n};\n\n\nvisuals.events.on('after-init.menu', viz => {\n    if (viz.visualType === 'visual') {\n        var menu = viz.getModel('menu');\n        if (menu.display) {\n            viz.menu = viz.sel.insert('nav', ':first-child').classed('d3-nav navbar p-1', true);\n            viz.menu.append('h4').classed('title', true);\n        }\n    }\n});\n\nvisuals.events.on('before-draw.menu', viz => {\n    if (viz && viz.menu) {\n        refreshMenu(viz);\n    }\n});\n\n\nfunction refreshMenu(viz) {\n    var menu = viz.getModel('menu'),\n        height = viz.dim(menu.height, viz.height, menu.minHeight, menu.maxHeight);\n    viz.menu.style('height', `${height}px`);\n}\n","import {format} from 'd3-format';\nimport {map} from 'd3-collection';\n\nconst formats = map();\n\nexport default function (specifier, value) {\n    var fmt = formats.get(specifier);\n    if (!fmt) {\n        fmt = format(specifier);\n        formats.set(specifier, fmt);\n    }\n    return fmt(value);\n}\n","//\n//  dataStore integration with visuals\nimport {isString, pop} from 'd3-let';\nimport {resolvedPromise} from 'd3-view';\n\nimport {visuals} from '../core/base';\nimport DataStore from '../data/store';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\nimport cachedFormat from '../utils/format';\n\n//\n// Visual Data Context\nvisuals.options.dataContext = {\n    $format: cachedFormat\n};\n\n//  getData method\n//  =====================\n//\n//  Inject a method for easily retrieving data from the datastore\nvizPrototype.getData = function () {\n    var name = this.model.data;\n    if (!name) {\n        warn(`Visual ${this.visualType} without data name, cannot get data`);\n        return resolvedPromise();\n    }\n    return this.dataStore.getData(name);\n};\n\n//\n// Context for expression evaluation\nvizPrototype.getContext = function (context) {\n    return this.dataStore.model.$child(context);\n};\n\n\nvisuals.events.on('before-init.data', viz => {\n    if (!viz.isViz) return;\n    // remove data from options\n    viz.data = pop(viz.options, 'data');\n});\n\n\nvisuals.events.on('after-init.data', viz => {\n    Object.defineProperties(viz, {\n        dataStore : {\n            get () {\n                if (viz.visualParent) return viz.visualParent.dataStore;\n                return viz.model.dataStore;\n            }\n        },\n    });\n    if (viz.isViz) setupLayer(viz);\n    else setupVisual(viz);\n});\n\n\nfunction setupVisual (visual) {\n    var store = visual.dataStore,\n        data = pop(visual.options, 'data');\n    //\n    if (!store) {\n        // create the data store for the visual or container\n        store = new DataStore(visual.getModel('dataContext'));\n        visual.model.dataStore = store;\n    }\n    store.addSources(data);\n}\n\n\nfunction setupLayer (layer) {\n    var store = layer.dataStore,\n        data = pop(layer, 'data');\n    if (!data) return;\n    if (isString(data)) data = {source: data};\n    if (!data.name) data.name = layer.model.uid;\n    data = store.addSources(data);\n    if (data)\n        layer.model.$set('data', data.name);\n    else\n        warn(`Could not create data source ${data.name}`);\n}\n","import {inBrowser} from 'd3-let';\nimport {viewDebounce} from 'd3-view';\nimport {select} from 'd3-selection';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nif (!globalOptions.resizeDelay)\n    globalOptions.resizeDelay = 200;\n\n\nif (inBrowser) {\n    var resize = viewDebounce(() => {\n        visuals.live.forEach(p => p.resize());\n    }, globalOptions.resizeDelay);\n\n    select(window).on('resize.visuals', resize);\n}\n","// Title plot annotation\nimport {isString} from 'd3-let';\n\nimport {visuals} from '../core/base';\nimport globalOptions from '../core/options';\n\n\nglobalOptions.title = {\n    text: null,\n    fontSize: '5%',\n    minFontSize: 15,\n    maxFontSize: 25\n};\n\n\nvisuals.events.on('before-init.title', viz => {\n    var title = viz.options.title;\n    if (isString(title)) viz.options.title = {text: title};\n});\n\n\nvisuals.events.on('before-draw.title', viz => {\n    var title = viz.getModel('title');\n    if (!title.text) return;\n    var visual = viz.isViz ? viz.visualParent : viz;\n    if (visual.visualType === 'visual' && visual.menu) menuTitle(visual, title, viz);\n});\n\n\nfunction menuTitle(visual, title, viz) {\n    var height = number(visual.menu.style('height')),\n        maxSize = title.maxFontSize ? Math.min(height-4, title.maxFontSize) : height-4,\n        size = viz.dim(title.fontSize, visual.width, title.minFontSize, maxSize);\n    visual.menu.select('.title')\n        .html(title.text)\n        .style('font-size', `${size}px`)\n        .style('line-height', `${height}px`);\n}\n\n\nfunction number (px) {\n    return +px.substring(0, px.length-2);\n}\n","import {isObject} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\nimport {sizeValue} from '../utils/size';\n\n\nconst KEYS = ['top', 'bottom', 'left', 'right'];\nconst LEFTRIGHT = ['left', 'right'];\n\n\n// margin for visual marks\nglobalOptions.margin = {\n    top: 20,\n    bottom: 20,\n    left: 20,\n    right: 20\n};\n// padding for the visual paper\nglobalOptions.padding = {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n};\n\n\n//\n//  Bounding box for a viz\n//  ==========================\nvizPrototype.boundingBox = function () {\n    var width = this.visualParent.width,\n        height = this.visualParent.height,\n        margin = calculate(this.getModel('margin'), width, height),\n        padding = calculate(this.getModel('padding'), width, height),\n        total = KEYS.reduce((o, key) => {\n            o[key] = margin[key] + padding[key];\n            return o;\n        }, {});\n    return {\n        width: width,\n        height: height,\n        margin: margin,\n        padding: margin,\n        total: total,\n        innerWidth: width - total.left - total.right,\n        innerHeight: height - total.top - total.bottom\n    };\n};\n\n\nvisuals.events.on('after-init.margin', viz => {\n    viz.margin = margins('margin', viz);\n    viz.padding = margins('padding', viz);\n});\n\n\nfunction margins (name, viz) {\n    var value = viz.options[name];\n\n    if (value !== undefined && !isObject(value)) {\n        var v = value || 0;\n        viz.options[name] = {\n            left: v,\n            right: v,\n            top: v,\n            bottom: v\n        };\n    }\n}\n\n\nfunction calculate (model, width, height) {\n    return KEYS.reduce((o, key) => {\n        o[key] = sizeValue(model[key], LEFTRIGHT.indexOf(key) > -1 ? width : height);\n        return o;\n    }, {});\n}\n","import assign from 'object-assign';\n\nimport {map} from 'd3-collection';\nimport {axisTop, axisBottom, axisLeft, axisRight} from 'd3-axis';\n\nimport {visuals} from '../core/base';\nimport {vizPrototype} from '../core/chart';\n\n\nconst axisOrientation = map({\n    top: axisTop,\n    bottom: axisBottom,\n    left: axisLeft,\n    right: axisRight\n});\n\nconst axisDefaults = {\n    tickSize: 6,\n    tickSizeOuter: null,\n    stroke: '#333'\n};\n\n\nvisuals.options.xAxis = assign({\n    location: \"bottom\"\n}, axisDefaults);\n\n\nvisuals.options.yAxis = assign({\n    location: \"left\"\n}, axisDefaults);\n\n\nvizPrototype.xAxis = function (scale, x, y) {\n    var model = this.getModel('xAxis'),\n        axis = axisOrientation.get(model.location)(scale).tickSize(model.tickSize);\n    if (model.tickSizeOuter !== null) axis.tickSizeOuter(model.tickSizeOuter);\n    this.paper()\n        .group('x-axis')\n        .attr(\"transform\", this.translate(x, y))\n        .call(axis).select('path.domain').attr('stroke', model.stroke);\n};\n\nvizPrototype.yAxis = function (scale, x, y) {\n    var model = this.getModel('yAxis'),\n        axis = axisOrientation.get(model.location)(scale).tickSize(model.tickSize);\n    if (model.tickSizeOuter !== null) axis.tickSizeOuter(model.tickSizeOuter);\n    this.paper()\n        .group('y-axis')\n        .attr(\"transform\", this.translate(x, y))\n        .call(axis).select('path.domain').attr('stroke', model.stroke);\n};\n\n\nvizPrototype.axis = function (orientation, scale) {\n    return axisOrientation.get(orientation)(scale);\n};\n","import {symbol, symbolCircle, symbolSquare, symbolStar} from 'd3-shape';\nimport {map} from 'd3-collection';\n\nimport {vizPrototype} from '../core/chart';\n\nconst symbols = map({\n    circle: symbolCircle,\n    square: symbolSquare,\n    star: symbolStar\n});\n\n\nvizPrototype.getSymbol = function (name) {\n    var s = symbols.get(name);\n    return symbol().type(s);\n};\n","import {map} from 'd3-collection';\nimport {range} from 'd3-array';\nimport {color} from 'd3-color';\nimport {isObject} from 'd3-let';\nimport {\n    scaleSequential,\n    interpolateViridis, interpolateInferno, interpolateMagma,\n    interpolatePlasma, interpolateWarm, interpolateCool,\n    interpolateRainbow, interpolateCubehelixDefault\n} from 'd3-scale';\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\n\nexport const colorScales = map();\n\n\nglobalOptions.color = {\n    scale: 'cool',\n    // Minumim number of colors in a sequantial color scale\n    // This helps in keeping a consistent palette when few colors are used\n    scaleMinPoints: 6,\n    // An offset in the color scale, useful for combined visuals\n    scaleOffset: 0,\n    stroke: '#333',\n    strokeOpacity: 1,\n    fillOpacity: 1,\n};\n\ncolorScales.set('viridis', () =>  scaleSequential(interpolateViridis));\ncolorScales.set('inferno', () =>  scaleSequential(interpolateInferno));\ncolorScales.set('magma', () =>  scaleSequential(interpolateMagma));\ncolorScales.set('plasma', () =>  scaleSequential(interpolatePlasma));\ncolorScales.set('warm', () =>  scaleSequential(interpolateWarm));\ncolorScales.set('cool', () =>  scaleSequential(interpolateCool));\ncolorScales.set('rainbow', () =>  scaleSequential(interpolateRainbow));\ncolorScales.set('cubehelix', () =>  scaleSequential(interpolateCubehelixDefault));\n\n//\n//  Color scale method\n//  ==========================\nvizPrototype.colors = function (n) {\n    var color = this.getModel('color'),\n        scaleDef = colorScales.get(color.scale);\n\n    if (!scaleDef) throw new Error(`Unknown scale ${color.scale}`);\n    if (!isObject(scaleDef)) scaleDef = {scale: scaleDef};\n    if (scaleDef.minPoints === undefined) scaleDef.minPoints = color.scaleMinPoints;\n\n    var offset = color.scaleOffset,\n        npoints = n + offset,\n        points = Math.max(npoints, scaleDef.minPoints),\n        domain = scaleDef.reversed ? [points-1, 0] : [0, points-1],\n        scale = scaleDef.scale().domain(domain);\n    return range(offset, Math.min(npoints, points)).map(v => scale(v));\n};\n\n//\n//  Linear Gradient method\n//  ==========================\n//\n//  Create a monocromatic linear gradient in the visualization box,\n//  either horizontal or vertical\nvizPrototype.linearGradient = function (col, box, orientation, gid) {\n    var paper = this.paper().sel,\n        defs = paper.select('defs');\n    if (!defs.node()) defs = paper.append('defs');\n    const\n        grad = defs.selectAll(`#${gid}`).data([0]),\n        colto = color(col);\n\n    colto.opacity = 0.1;\n\n    grad.enter()\n        .append('linearGradient')\n        .attr('id', gid)\n        .attr('x1', '0%')\n        .attr('y1', '0%')\n        .attr('x2', orientation === 'vertical' ? '0%' : '100%')\n        .attr('y2', orientation === 'vertical' ? '100%' : '0%');\n\n    var stops = defs.select(`#${gid}`)\n                    .selectAll('stop')\n                    .data([{offset: '0%', color: col}, {offset: '100%', color: colto}]);\n\n    stops.enter()\n            .append('stop')\n        .merge(stops)\n            .attr('offset', d => d.offset)\n            .attr('stop-color', d => d.color);\n\n    return `url(#${gid})`;\n};\n","import {legendColor, legendSize, legendSymbol} from 'd3-svg-legend';\nimport {map} from 'd3-collection';\nimport {pop} from 'd3-let';\n\nimport globalOptions from '../core/options';\nimport {vizPrototype} from '../core/chart';\nimport warn from '../utils/warn';\n\n\nglobalOptions.legend = {\n    location: \"top-right\",\n    orient: \"vertical\",\n    fontSize: '3%',\n    title: '',\n    titleWidth: \"20%\",\n    labelFormat: null,\n    titleMinWidth: 30,\n    titleMaxWidth: 60,\n    minFontSize: 10,\n    maxFontSize: 20,\n    offsetX: 10,\n    offsetY: 10\n};\n\n\nconst legends = {\n    color: legendColor,\n    size: legendSize,\n    symbol: legendSymbol\n};\n\n\n//\n//  Legend method\n//  ==========================\nvizPrototype.legend = function (cfg, box) {\n    var vizModel = this.getModel(),\n        lgModel = this.getModel('legend'),\n        name = pop(cfg, 'type') || vizModel.legendType,\n        size = this.dim(lgModel.fontSize, box.height, lgModel.minFontSize, lgModel.maxFontSize);\n    if (!name) return;\n    var legend = legends[name];\n    if (!legend) return warn(`Could not load legend ${name}`);\n    legend = legend().orient(lgModel.orient);\n    if (lgModel.title) {\n        var width = this.dim(lgModel.titleWidth, box.width, lgModel.titleMinWidth, lgModel.titleMaxWidth);\n        legend.title(lgModel.title).titleWidth(width);\n    }\n\n    if (lgModel.labelFormat) legend.labelFormat(lgModel.labelFormat);\n\n    // apply cfg parameters\n    for (let key in cfg) legend[key](cfg[key]);\n\n    var g = this.paper()\n            .group('legend')\n            .style('font-size', `${size}px`)\n            .call(legend),\n        bb = locations.get(lgModel.location)(g.node().getBBox(), box, lgModel);\n    g.attr('transform', this.translate(bb.x, bb.y));\n};\n\n\nconst locations = map({\n    top,\n    bottom,\n    right,\n    left,\n    'top-left': topLeft,\n    'top-right': topRight,\n    'bottom-left': bottomLeft,\n    'bottom-right': bottomRight\n});\n\n\nfunction top (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: options.offsetY\n    };\n}\n\n\nfunction bottom (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: box.height - bb.height - options.offsetY\n    };\n}\n\n\nfunction right (bb, box, options) {\n    return {\n        x: box.width - bb.width - options.offsetX,\n        y: box.total.top + (box.innerHeight - bb.height)/2 \n    };\n}\n\n\nfunction left (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: options.offsetY\n    };\n}\n\n\nfunction topLeft (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: options.offsetY\n    };\n}\n\n\nfunction topRight (bb, box, options) {\n    return {\n        x: box.width - bb.width - options.offsetX,\n        y: options.offsetY\n    };\n}\n\n\nfunction bottomLeft (bb, box, options) {\n    return {\n        x: box.total.left + (box.innerWidth - bb.width)/2,\n        y: box.height - bb.height - options.offsetY\n    };\n}\n\n\nfunction bottomRight (bb, box, options) {\n    return {\n        x: box.width - bb.width - options.offsetX,\n        y: box.height - bb.height - options.offsetY\n    };\n}\n","//\n// Use clusterize.js to render the table\nexport default function (table, options) {\n    return table.require('clusterize.js@0.17.6').then(Clusterize => clusterize(Clusterize, table, options));\n}\n\n\nfunction clusterize(Clusterize) {\n    var cl = new Clusterize();\n    return cl;\n}\n","export default function (table) {\n    return table;\n}\n","//\n//  bootstrap styling for tabular component\n//  ==========================================\n//\nimport assign from 'object-assign';\n\n\nconst defaults = {\n    over: true,\n    small: true,\n    bordered: true,\n    loadingClass: 'table-info',\n    loadingTextClass: 'text-center'\n};\n\n\nexport default function (table, options) {\n    var style = table.model.style;\n    style.$update(assign({}, defaults, options));\n\n    style.tableClass = 'table table-responsive';\n    if (style.striped) style.tableClass += ' table-striped';\n    if (style.over) style.tableClass += ' table-hover';\n    if (style.bordered) style.tableClass += ' table-bordered';\n    if (style.small) style.tableClass += ' table-sm';\n}\n","//\n//  Plugins for visuals and tabular\n//\n// visual plugins\nimport './menu';\nimport './data';\nimport './responsive';\nimport './title';\nimport './margin';\nimport './axis';\nimport './shapes';\nimport './color';\nimport './legend';\n//\n//  This module depends on core but not on components\nimport clusterize from './clusterize';\nimport paginate from './paginate';\nimport bootstrap from './bootstrap';\n\n// plugins add functionalities to a d3 table\n// A plugin is a function accepting two parameters:\n//  * the table component\n//  * object with configuration parameters\nexport default {\n    bootstrap,\n    clusterize,\n    paginate\n};\n","import createVisual, {visuals} from './base';\nimport warn from '../utils/warn';\n\n\nexport default createVisual('container', {\n\n    initialise () {\n        this.live = [];\n        if (this.visualParent) this.visualParent.live.push(this);\n    },\n\n    draw() {\n        if (this.drawing) {\n            warn(`${this.toString()} already drawing`);\n            return this.drawing;\n        }\n        var self = this;\n        visuals.events.call('before-draw', undefined, self);\n        return Promise.all(this.live.map(visual => visual.redraw())).then(() => {\n            delete self.drawing;\n            visuals.events.call('after-draw', undefined, self);\n        });\n    },\n\n    destroy () {\n        this.pop(this.visualParent);\n    }\n});\n","import assign from 'object-assign';\nimport {isString, isObject} from 'd3-let';\n\nimport VisualContainer from '../core/container';\nimport warn from '../utils/warn';\n\n//\n//  vizComponent base prototype\n//  =============================\n//\n//  Some common properties and methods for all visualize components\n//\nexport const vizComponent = {\n    props: [\n        'schema',\t    // Schema is a collection of fields to display in the table\n        'datasource',\t// Data source\n        'plugins',      // list of string/objects\n\t],\n\n    render (props, attrs, el) {\n        var self = this,\n            inner = this.select(el).html();\n        //\n        // build\n        return this.getSchema(props.schema, schema => {\n            if (!isObject(schema)) schema = {};\n            return self.build(schema, inner, attrs);\n        });\n    },\n\n    // get the schema from the input schema property\n    getSchema (input, build) {\n        var parent = this.model.visual;\n\n        // allow to specify the schema as an entry of\n        // visuals object in the dashboard schema\n        if (parent && parent !== this.model && isString(input)) {\n            var schema = parent.getVisualSchema(input);\n            if (schema) input = schema;\n        }\n\n        if (isString(input)) {\n            return this.json(input).then(build).catch(err => {\n                warn(`Could not reach ${input}: ${err}`);\n            });\n        }\n        else return build(input);\n    },\n    //\n    // build the visual component has the schema available\n    build () {}\n};\n//\n//  Dashboard Component\n//  ========================\n//\n//  A collection of visual components arranged according\n//  to a custom layout.\n//\n//  * Dashboard visuals are independent of each other but\n//    interact via the data object\n//  * The Dashboard layout is given by the inner HTML elements\n//  * The configuration is obtained via the schema property which\n//    can be either:\n//      1) an object\n//      2) a url\nexport default assign({}, vizComponent, {\n\n    build (schema, inner, attrs) {\n        var model = this.model,\n            sel = this.createElement('div'),\n            root = model.root;\n        if (attrs.class) sel.attr('class', attrs.class);\n        if (!schema.visuals) schema.visuals = {};\n        model.visual = new VisualContainer(sel.node(), schema, model.visual);\n        if (!root.visualDashboard) root.visualDashboard = model.visual;\n        return this.mountInner(sel, inner);\n    }\n});\n","import assign from 'object-assign';\nimport {pop} from 'd3-let';\n\nimport {vizComponent} from './dashboard';\nimport Visual from '../core/visual';\n\n\n//\n//  Visual component\n//  ======================\n//\n//  An element containing a visualization\nexport default assign({}, vizComponent, {\n\n    build (schema) {\n        var sel = this.createElement('div'),\n            type = schema.type || 'visual',\n            model = this.model,\n            options = {},\n            layers;\n\n        if (type === 'visual') {\n            layers = pop(schema, 'layers');\n            options = schema;\n        }\n        else\n            options.visual = pop(schema, 'visual') || {};\n\n        model.visual = new Visual(sel.node(), options, model.visual);\n        if (type !== 'visual') model.visual.addVisual(schema);\n        else if (layers) {\n            layers.forEach(layer => model.visual.addVisual(layer));\n        }\n        return sel;\n    },\n\n    // once the element is mounted in the dom, draw the visual\n    mounted () {\n        this.model.visual.redraw();\n    }\n});\n","import {isoParse} from 'd3-time-format';\n\nimport locale from './locale';\n\n\nexport const parsers = {\n    date: isoParse,\n\n    string (value) {\n        return ''+value;\n    }\n};\n\n// formatters\nexport const formatters = {\n\n    number (value) {\n        return value;\n    },\n\n    date (value) {\n        return locale.formatDate(value);\n    },\n\n    boolean (value) {\n        return value;\n    }\n};\n","import {isObject, isArray} from 'd3-let';\n\nimport {formatters, parsers} from '../data/formatters';\n\n\n//\n// Create table columns from schema\nexport default function (schema) {\n    var columns = [];\n    let col;\n\n\tif (!schema) return columns;\n\n    if (isArray(schema))\n        schema = {properties: schema};\n\n    if (isObject(schema.properties)) {\n        for (let key in schema.properties) {\n            col = schema.properties[key];\n            if (isObject(col)) {\n                if (!col.name) col.name = key;\n                columns.push(col);\n            }\n        }\n    } else\n        Array.prototype.push.apply(columns, schema.properties);\n\n    return columns.map((col) => {\n        if (!isObject(col)) col = {name: col};\n        if (!col.label) col.label = col.name;\n        if (!col.hidden) col.hidden = false;\n        if (!col.$parse) col.$parse = parsers[col.type] || parsers.string;\n        if (!col.$html) col.$html = formatters[col.type] || $html;\n        return col;\n    });\n}\n\n\nfunction $html (value) {\n    return value;\n}\n","// import {timeout} from 'd3-timer';\nimport assign from 'object-assign';\nimport {isString, isArray, isPromise} from 'd3-let';\n\nimport warn from '../utils/warn';\nimport createColumns from '../utils/columns';\nimport tablePlugins from '../plugins/index';\nimport {vizComponent} from './dashboard';\n\n\nconst tableTpl = `<table d3-class=\"[style.tableClass, loadingData ? 'loading' : null]\">\n<thead d3-class=\"style.headerClass\">\n<tr d3-class=\"style.headerRowClass\">\n  <th d3-for=\"col in columns\"\n        d3-html=\"col.label\"\n        d3-if=\"!col.hidden\">\n  </th>\n</tr>\n<tr d3-if=\"loadingData\" d3-class=\"style.loadingClass\">\n    <td d3-attr-colspan=\"columns.length\">\n        <p d3-class=\"style.loadingTextClass\">loading data</p>\n    </td>\n</tr>\n</thead>\n<tbody></tbody>\n</table>`;\n\n\nexport default assign({}, vizComponent, {\n\n\tmodel () {\n        return {\n            header: true,            // show header\n            columns: [],             // table columns\n            loadingData: false,\n            style: {\n                tableClass: null,\n                headerClass: null,\n                headerRowClass: null,\n                loadingClass: 'loading',\n                loadingTextClass: null\n            }\n        };\n\t},\n\n\tbuild (schema) {\n\t\tvar self = this,\n            model = this.model,\n            plugins = schema.plugins || [];\n        // model.allData = crossfilter([]);\n        this.records = {};\n        this.data = [];\n        this.template = tableTpl;\n\n\t\tmodel.columns = createColumns(schema);\n\t\t// if (data.dataurl) model.dataLoader = new DataLoader(data.dataurl);\n\n        if (!isArray(plugins)) {\n            warn('plugins should be an array');\n        } else {\n            var promises = [];\n            let promise;\n            plugins.forEach(plugin => {\n                if (isString(plugin)) plugin = {name: plugin};\n                if (!tablePlugins[plugin.name])\n                    warn(`Unknown table plugin ${plugin.name}`);\n                else {\n                    promise = tablePlugins[plugin.name](self, plugin);\n                    if (isPromise(promise)) promises.push(promise);\n                }\n            });\n            if (promises.length)\n                 return Promise.all(promises).then(() => self.viewElement(self.template));\n        }\n\n\t\treturn this.viewElement(this.template);\n\t},\n\n\tmounted () {\n        var vm = this,\n            model = this.model;\n\t\tif (model.dataLoader) {\n\t\t\tvar p = model.dataLoader.load(model.columns);\n            if (p) {\n                model.loadingData = true;\n                p.then((data) => {\n                    // var allData = model.allData;\n                    model.loadingData = false;\n                    addData(vm, data);\n                }, (err) => {\n                    model.loadingData = false;\n                    return err;\n                });\n            }\n        }\n\t}\n});\n\n// new data to include in the table\nfunction addData (vm, newData) {\n    var records = vm.records,\n        data = vm.data,\n        model = vm.model,\n        delayData = newData;\n\n    let record, value;\n\n    newData = delayData.splice(0, 100);\n\n    newData.forEach((d) => {\n        if (d.id) {\n            record = d.id ? records[d.id] : null;\n            if (record)\n                d = assign(record, d);\n            else {\n                data.push(d);\n                records[d.id] = d;\n            }\n        } else\n            data.push(d);\n        model.columns.forEach((col) => {\n            d[col.name] = col.$parse(d[col.name]);\n        });\n    });\n\n    //if (delayData.length)\n    //    timeout(() => addData(vm, delayData));\n\n    var rows = vm.sel.select('tbody')\n                .selectAll('tr').data(data);\n\n    rows\n        .enter()\n            .append('tr')\n            .attr('scope', 'row')\n            .selectAll('td')\n            .data(model.columns)\n            .enter()\n                .append('td')\n                .style('display', (col) => {\n                    return col.hidden ? 'none' : null;\n                })\n                .html(function (col) {\n                    record = this.parentNode.__data__;\n                    value = record[col.name];\n                    return col.$html(value === undefined ? '' : value);\n                });\n}\n","//\n//  d3-view components\n//  ======================\n//\n//  d3-view plugin for visualization components\n//\nimport tabularPlugins from '../plugins/index';\nimport dashboard from './dashboard';\nimport visual from './visual';\nimport tabular from './tabular';\n\n\n// Visual components plugin\nexport default {\n    tabularPlugins,\n\n    install (vm) {\n        vm.addComponent('dashboard', dashboard);\n        vm.addComponent('visual', visual);\n        vm.addComponent('tabular', tabular);\n    }\n\n};\n","export default function (x) {\n    return function constant() {\n        return x;\n    };\n}\n","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function (d) {\n    return d;\n}\n","import constant from \"../utils/constant\";\nimport descending from \"../utils/descending\";\nimport identity from \"../utils/identity\";\n\n//\n//  Pyramid Shape generator\n//  ============================\nexport default function () {\n    var value = identity,\n        pad = constant(0),\n        height = 1,\n        base = 1;\n\n    function pyramid (data) {\n        let i, j, k, points, fraction,\n            hi, x, y, v0, ph, pj;\n        var n = data.length,\n            r = 0.5*base/height,\n            polygons = new Array(n),\n            index = new Array(n);\n\n        for (i=0; i<n; ++i) {\n            polygons[index[i] = i] = +value(data[i], i, data);\n        }\n\n        // Sort the polygons\n        index.sort((i, j) => {return descending(polygons[i], polygons[j]);});\n\n        // Compute the polygons! They are stored in the original data's order.\n        v0 = polygons[index[0]];\n        hi = null;\n\n        for (i=n-1; i>=0; --i) {\n            points = [];\n            if (hi === null)\n                points.push([0, 0]);\n            else {\n                y = hi + ph;\n                x = y*r;\n                points.push([x, y]);\n                points.push([-x, y]);\n            }\n            j = index[i];\n            k = n - i - 1;\n            fraction = polygons[j]/v0;\n            pj = Math.sqrt(fraction);\n            hi = height*pj;\n            ph = i ? pad(pj, k) : 0;\n            y = hi - ph;\n            x = y*r;\n            points.push([-x, y]);\n            points.push([x, y]);\n            polygons[j] = {\n                index: k,\n                value: polygons[j],\n                fraction: fraction,\n                points: points,\n                data: data[j]\n            };\n        }\n        return polygons;\n    }\n\n    pyramid.value = function(_) {\n        return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pyramid) : value;\n    };\n\n    pyramid.base = function (_) {\n        return arguments.length ? (base = _, pyramid) : base;\n    };\n\n    pyramid.height = function (_) {\n        return arguments.length ? (height = _, pyramid) : height;\n    };\n\n    pyramid.pad = function(_) {\n        return arguments.length ? (pad = typeof _ === \"function\" ? _ : constant(+_), pyramid) : pad;\n    };\n\n    return pyramid;\n}\n","export default function (range, splits) {\n    var x0 = range[0],\n        x1 = range[1],\n        dx = (x1 - x0)/splits,\n        n = Math.floor(Math.log10(dx)),\n        v = Math.pow(10, n);\n    if (dx/v > 5) v *= 10;\n    v *= 0.1;\n\n    var ndx = v*Math.ceil(dx/v),\n        nx0 = v*Math.floor(x0/v);\n    return [nx0, nx0 + splits*ndx];\n}\n","import * as d3_shape from 'd3-shape';\nimport {extent} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport warn from '../utils/warn';\nimport accessor from '../utils/accessor';\nimport camelFunction from '../utils/camelfunction';\n\n\nexport const lineDrawing = {\n\n    // get information about\n    //  * data []\n    //  * range {x: [min, max], y: [min, max]}\n    //  * meta []\n    //      * index\n    //      * label\n    //      * range\n    //\n    getDataInfo (frame) {\n        var model = this.getModel(),\n            range = this.newRange(),\n            nseries = frame.series.size(),\n            data = nseries ? frame.series.values() : [frame.data],\n            keys = nseries ? frame.series.keys() : [model.y],\n            x = accessor(model.x),\n            y = accessor(model.y),\n            self = this;\n        return {\n            data: data,\n            range: range,\n            meta: keys.map((label, index) => {\n                return {\n                    index: index,\n                    label: label,\n                    range: self.range(data[index], x, y, range)\n                };\n            })\n        };\n    },\n\n    fill (data) {\n        var colors = this.colors(data.length);\n\n        function fill (d, index) {\n            return colors[index];\n        }\n\n        fill.colors = colors;\n\n        return fill;\n    },\n\n    curve (name) {\n        var obj = camelFunction(d3_shape, 'curve', name, true);\n        if (!obj) {\n            warn(`Could not locate curve type \"${name}\"`);\n            obj = camelFunction(d3_shape, 'curve', 'cardinalOpen', true);\n        }\n        return obj;\n    },\n\n    range (data, x, y, agg) {\n        var range = {\n            x: extent(data, x),\n            y: extent(data, y)\n        };\n        if (agg) {\n            Array.prototype.push.apply(agg.x, range.x);\n            Array.prototype.push.apply(agg.y, range.y);\n        }\n    },\n\n    newRange () {\n        return {\n            x: [],\n            y: []\n        };\n    },\n\n    x (box, ranges) {\n        var model = this.getModel(),\n            scale = this.getScale(model.scaleX)\n                .domain(extent(ranges))\n                .range([0, box.innerWidth]);\n        return function (d) {\n            return scale(d[model.x]);\n        };\n    },\n\n    y (box, ranges, value) {\n        var model = this.getModel(),\n            scale = this.getScale(model.scaleY)\n                .domain(extent(ranges))\n                .range([box.innerHeight, 0]);\n        if (arguments.length === 2) value = d => d[model.y];\n        return function (d) {\n            return scale(value(d));\n        };\n    },\n\n    getStack () {\n        var model = this.getModel();\n        if (model.stack) {\n            var s = d3_shape.stack();\n            if (model.stackOrder) s.order(model.stackOrder);\n            return s;\n        }\n    }\n};\n\n//\n//  Line Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('linechart', lineDrawing, {\n\n    options: {\n        lineWidth: 1,\n        curve: 'cardinalOpen',\n        x: 'x',\n        y: 'y',\n        scaleX: 'linear',\n        scaleY: 'linear'\n    },\n\n    doDraw (frame) {\n        var self = this,\n            range = this.newRange(),\n            model = this.getModel(),\n            color = this.getModel('color'),\n            x = accessor(model.x),\n            y = accessor(model.y),\n            data = frame.series.values(),\n            meta = frame.series.keys().map((label, index) => {\n                return {\n                    index: index,\n                    label: label,\n                    range: self.range(data[index], x, y, range)\n                };\n            }),\n            box = this.boundingBox(),\n            paper = this.paper(),\n            lines = paper.size(box).group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.line').data(data),\n            strokeColor = this.fill(meta),\n            //merge = paper.transition('update'),\n            line = d3_shape.line()\n                .x(this.x(box, range.x))\n                .y(this.y(box, range.y))\n                .curve(this.curve(model.curve));\n\n        lines\n            .enter()\n                .append('path')\n                .attr('class', 'line')\n                .attr('fill', 'none')\n                .attr('stroke', strokeColor)\n                .attr('stroke-opacity', 0)\n                .attr('stroke-width', model.lineWidth)\n            .merge(lines)\n                //.transition(merge)\n                .attr('stroke', strokeColor)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', line);\n\n        lines\n            .exit()\n            .remove();\n    }\n});\n","import {stack, stackOrderDescending} from 'd3-shape';\nimport {max} from 'd3-array';\n\nimport createChart from '../core/chart';\nimport {lineDrawing} from './line';\n//\n//  Bar Chart\n//  =============\n//\n//  The barchart is one of the most flexible visuals.\n//  It can be used to display label data as well as\n//  timeserie data. It can display absulte values as\n//  proportional data via vertical staking and normalization\nexport default createChart('barchart', lineDrawing, {\n\n    options: {\n        orientation: 'vertical',\n        // stack multiple y series?\n        sortby: null, // specify \"x\" or \"y\"\n        stack: true,\n        normalize: false,\n        scale: 'linear',\n        padding: 0.1,\n        x: 'x',\n        y: 'y',\n        groupby: null,  // group data by a field for staked or grouped bar chart\n        //\n        // legend & tooltip\n        valueformat: '.1f',\n        legendType: 'color',\n        legendLabel: 'label'\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            data = frame.data,\n            box = this.boundingBox(),\n            paper = this.paper().size(box),\n            bars = paper.group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.group'),\n            x = model.x,\n            y = model.y,\n            groupby = model.groupby,\n            sx = this.getScale('band'),\n            sy = this.getScale(model.scale),\n            sz = this.getScale('ordinal'),\n            stacked = false,\n            width = null,\n            height = null,\n            xrect = x0,\n            yrect = y0,\n            yi = 1,\n            groups,\n            axis;\n\n        if (model.orientation === 'vertical') {\n            sx.rangeRound([0, box.innerWidth]).paddingInner(model.padding);\n            sy.rangeRound([box.innerHeight, 0]);\n            width = sx.bandwidth;\n            height = bardim;\n        } else {\n            sx.rangeRound([0, box.innerHeight]).paddingInner(model.padding);\n            sy.rangeRound([0, box.innerWidth]);\n            yi = 0;\n            width = bardim;\n            height = sx.bandwidth;\n            xrect = y0;\n            yrect = x0;\n        }\n\n        if (groupby) {\n            groups = frame.dimension(groupby).group().top(Infinity).map(g => g['key']);\n            if (groups.length <= 1) groups = null;\n        }\n\n        if (groups) {\n            frame = frame.pivot(x, groupby, y);\n            if (model.sortby === 'y') frame = frame.sortby('total');\n            data = frame.data;\n            sz.domain(groups).range(this.colors(groups.length));\n            if (model.stack) {\n                if (model.normalize)\n                    this.normalize(frame.data);\n                stacked = true;\n            }\n        }\n\n        // set domain for the labels\n        sx.domain(data.map(d => d[x]));\n\n        if (stacked) {\n            sy.domain([0, max(data, d => d.total)]).nice();\n            data = stack().order(stackOrderDescending).keys(groups)(data);\n            var rects = bars.data(data)\n                            .enter()\n                                .append('g')\n                                .classed('group', true)\n                                .attr('fill', d => sz(d.key))\n                            .merge(bars)\n                                .attr('fill', d => sz(d.key))\n                                .attr('stroke', color.stroke)\n                                .attr('stroke-opacity', color.strokeOpacity)\n                                .attr('fill-opacity', color.fillOpacity)\n                                .selectAll('rect')\n                                .data(d => d);\n            rects.enter()\n                .append('rect')\n                .merge(rects)\n                    .transition()\n                    .attr('x', xrect)\n                    .attr('y', yrect)\n                    .attr('height', height)\n                    .attr('width', width);\n\n        } else {\n            var x1 = self.getScale('band').padding(0.5*model.padding);\n            return x1;\n        }\n\n        if (model.orientation === 'vertical') {\n            axis = this.axis('bottom', sx).tickSizeOuter(0);\n            paper.group('axis')\n                .attr(\"transform\", this.translate(box.total.left, box.total.top+box.innerHeight))\n                .call(axis);\n        } else {\n            axis = this.axis('left', sx).tickSizeOuter(0);\n            paper.group('axis')\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .call(axis);\n        }\n\n        if (model.legendType && groups) {\n            this.legend({scale: sz}, box);\n        }\n\n        function bardim (d) {\n            return sy(d[1-yi]) - sy(d[yi]);\n        }\n\n        function x0 (d) {\n            return sx(d.data[x]);\n        }\n\n        function y0 (d) {\n            return sy(d[yi]);\n        }\n    }\n});\n","import {ascending, range, extent, quantile} from 'd3-array';\nimport {scaleLinear} from 'd3-scale';\n\nimport createChart from '../core/chart';\nimport accessor from '../utils/accessor';\nimport constant from '../utils/constant';\nimport {lineDrawing} from './line';\n\n//\n//  Box Chart\n//  =============\n//\n//  A box-and-whisker plot uses simple glyphs that summarize a quantitative\n//  distribution with five standard statistics: the smallest value, lower\n//  quartile, median, upper quartile, and largest value.\n//  This summary approach allows the viewer to easily recognize\n//  differences between distributions.\n//\nexport default createChart('boxchart', lineDrawing, {\n\n    options: {\n        orientation: 'vertical',\n        lineWidth: 1,\n        x: 'x',\n        y: 'y',\n        scaleX: 'linear',\n        scaleY: 'linear',\n        // area with vertical gradient to zero opacity\n        gradient: true\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            //color = this.getModel('color'),\n            info = self.getDataInfo(frame),\n            box = this.boundingBox(),\n            chart = boxplot(),\n            paper = this.paper().size(box),\n            x = accessor(model.x),\n            //y = accessor(model.y),\n            boxes = paper.group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.box')\n                .data(info.data),\n            //fill = this.fill(info.meta),\n            groups = frame.groupby(model.x),\n            sx = this.getScale(model.scaleX)\n                .domain(extent(frame.data, x)),\n            //sy = this.getScale(model.scaleY)\n            //    .domain(extent(frame.data, y)),\n            width = box.innerWidth;\n\n        if (model.orientation === 'vertical') {\n            sx.range([0, box.innerWidth]);\n        } else {\n            sx.range([0, box.innerHeight]);\n            width = this.innerHeight;\n        }\n        chart.width(this.dim(model.width, width, width/groups.length - 2));\n\n        boxes\n            .enter()\n                .append('g')\n                    .classed('box', true)\n                    .call(chart);\n    }\n});\n\n\nfunction boxplot () {\n    var width = 1,\n        height = 1,\n        duration = 0,\n        domain = null,\n        value = Number,\n        whiskers = boxWhiskers,\n        quartiles = boxQuartiles,\n        tickFormat = null;\n\n    // For each small multiple\n    function box (g) {\n        g.each((d, i) => {\n            d = d.map(value).sort(ascending);\n\n            const\n                n = d.length,\n                min = d[0],\n                max = d[n - 1],\n                // Compute quartiles. Must return exactly 3 elements.\n                quartileData = d.quartiles = quartiles(d),\n                // Compute whiskers. Must return exactly 2 elements, or null.\n                whiskerIndices = whiskers && whiskers(d),\n                whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]),\n                // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n                // We compute the outliers as indices, so that we can join across transitions!\n                outlierIndices = whiskerIndices\n                    ? range(0, whiskerIndices[0]).concat(range(whiskerIndices[1] + 1, n))\n                    : range(n),\n                // Compute the new x-scale.\n                x1 = scaleLinear()\n                    .domain(domain && domain.call(this, d, i) || [min, max])\n                    .range([height, 0]),\n                // Retrieve the old x-scale, if this is an update.\n                x0 = this.__chart__ || scaleLinear()\n                  .domain([0, Infinity])\n                  .range(x1.range());\n\n            // Stash the new scale.\n            this.__chart__ = x1;\n            // Note: the box, median, and box tick elements are fixed in number,\n            // so we only have to handle enter and update. In contrast, the outliers\n            // and other elements are variable, so we need to exit them! Variable\n            // elements also fade in and out.\n\n            // Update center line: the vertical line spanning the whiskers.\n            var center = g.selectAll(\"line.center\")\n              .data(whiskerData ? [whiskerData] : []);\n\n            center.enter().insert(\"line\", \"rect\")\n              .attr(\"class\", \"center\")\n              .attr(\"x1\", width / 2)\n              .attr(\"y1\", function(d) { return x0(d[0]); })\n              .attr(\"x2\", width / 2)\n              .attr(\"y2\", function(d) { return x0(d[1]); })\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .style(\"opacity\", 1)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); });\n\n            center.transition()\n              .duration(duration)\n              .style(\"opacity\", 1)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); });\n\n            center.exit().transition()\n              .duration(duration)\n              .style(\"opacity\", 1e-6)\n              .attr(\"y1\", function(d) { return x1(d[0]); })\n              .attr(\"y2\", function(d) { return x1(d[1]); })\n              .remove();\n\n            // Update innerquartile box.\n            var box = g.selectAll(\"rect.box\")\n              .data([quartileData]);\n\n            box.enter().append(\"rect\")\n              .attr(\"class\", \"box\")\n              .attr(\"x\", 0)\n              .attr(\"y\", function(d) { return x0(d[2]); })\n              .attr(\"width\", width)\n              .attr(\"height\", function(d) { return x0(d[0]) - x0(d[2]); })\n            .transition()\n              .duration(duration)\n              .attr(\"y\", function(d) { return x1(d[2]); })\n              .attr(\"height\", function(d) { return x1(d[0]) - x1(d[2]); });\n\n            box.transition()\n              .duration(duration)\n              .attr(\"y\", function(d) { return x1(d[2]); })\n              .attr(\"height\", function(d) { return x1(d[0]) - x1(d[2]); });\n\n            // Update median line.\n            var medianLine = g.selectAll(\"line.median\")\n              .data([quartileData[1]]);\n\n            medianLine.enter().append(\"line\")\n              .attr(\"class\", \"median\")\n              .attr(\"x1\", 0)\n              .attr(\"y1\", x0)\n              .attr(\"x2\", width)\n              .attr(\"y2\", x0)\n            .transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1);\n\n            medianLine.transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1);\n\n            // Update whiskers.\n            var whisker = g.selectAll(\"line.whisker\")\n              .data(whiskerData || []);\n\n            whisker.enter().insert(\"line\", \"circle, text\")\n              .attr(\"class\", \"whisker\")\n              .attr(\"x1\", 0)\n              .attr(\"y1\", x0)\n              .attr(\"x2\", width)\n              .attr(\"y2\", x0)\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1);\n\n            whisker.transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1);\n\n            whisker.exit().transition()\n              .duration(duration)\n              .attr(\"y1\", x1)\n              .attr(\"y2\", x1)\n              .style(\"opacity\", 1e-6)\n              .remove();\n\n            // Update outliers.\n            var outlier = g.selectAll(\"circle.outlier\")\n              .data(outlierIndices, Number);\n\n            outlier.enter().insert(\"circle\", \"text\")\n              .attr(\"class\", \"outlier\")\n              .attr(\"r\", 5)\n              .attr(\"cx\", width / 2)\n              .attr(\"cy\", function(i) { return x0(d[i]); })\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1);\n\n            outlier.transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1);\n\n            outlier.exit().transition()\n              .duration(duration)\n              .attr(\"cy\", function(i) { return x1(d[i]); })\n              .style(\"opacity\", 1e-6)\n              .remove();\n\n            // Compute the tick format.\n            var format = tickFormat || x1.tickFormat(8);\n\n            // Update box ticks.\n            var boxTick = g.selectAll(\"text.box\")\n              .data(quartileData);\n\n            boxTick.enter().append(\"text\")\n              .attr(\"class\", \"box\")\n              .attr(\"dy\", \".3em\")\n              .attr(\"dx\", (d, i) => i & 1 ? 6 : -6)\n              .attr(\"x\", (d, i) => i & 1 ? width : 0)\n              .attr(\"y\", x0)\n              .attr(\"text-anchor\", function(d, i) { return i & 1 ? \"start\" : \"end\"; })\n              .text(format)\n            .transition()\n              .duration(duration)\n              .attr(\"y\", x1);\n\n            boxTick.transition()\n              .duration(duration)\n              .text(format)\n              .attr(\"y\", x1);\n\n            // Update whisker ticks. These are handled separately from the box\n            // ticks because they may or may not exist, and we want don't want\n            // to join box ticks pre-transition with whisker ticks post-.\n            var whiskerTick = g.selectAll(\"text.whisker\")\n              .data(whiskerData || []);\n\n            whiskerTick.enter().append(\"text\")\n              .attr(\"class\", \"whisker\")\n              .attr(\"dy\", \".3em\")\n              .attr(\"dx\", 6)\n              .attr(\"x\", width)\n              .attr(\"y\", x0)\n              .text(format)\n              .style(\"opacity\", 1e-6)\n            .transition()\n              .duration(duration)\n              .attr(\"y\", x1)\n              .style(\"opacity\", 1);\n\n            whiskerTick.transition()\n              .duration(duration)\n              .text(format)\n              .attr(\"y\", x1)\n              .style(\"opacity\", 1);\n\n            whiskerTick\n                .exit()\n                .transition()\n                .duration(duration)\n                .attr(\"y\", x1)\n                .style(\"opacity\", 1e-6)\n                .remove();\n        });\n    }\n\n    box.width = function(x) {\n        if (!arguments.length) return width;\n        width = x;\n        return box;\n    };\n\n    box.height = function(x) {\n        if (!arguments.length) return height;\n        height = x;\n        return box;\n    };\n\n    box.tickFormat = function(x) {\n        if (!arguments.length) return tickFormat;\n        tickFormat = x;\n        return box;\n    };\n\n    box.duration = function(x) {\n        if (!arguments.length) return duration;\n        duration = x;\n        return box;\n    };\n\n    box.domain = function(x) {\n        if (!arguments.length) return domain;\n        domain = x === null ? x : constant(x);\n        return box;\n    };\n\n    box.value = function(x) {\n        if (!arguments.length) return value;\n        value = x;\n        return box;\n    };\n\n    box.whiskers = function(x) {\n        if (!arguments.length) return whiskers;\n        whiskers = x;\n        return box;\n    };\n\n    box.quartiles = function(x) {\n        if (!arguments.length) return quartiles;\n        quartiles = x;\n        return box;\n    };\n\n    return box;\n}\n\n\nfunction boxWhiskers (d) {\n    return [0, d.length - 1];\n}\n\n\nfunction boxQuartiles (d) {\n    return [\n        quantile(d, 0.25),\n        quantile(d, 0.5),\n        quantile(d, 0.75)\n    ];\n}\n","import {extent} from 'd3-array';\n\n//\n//  Create a Grouper generator\n//  ===============================\n//\n//  This is a chart transform rather than a data transform\nexport default function () {\n    var groupby = null,\n        x = 'x',\n        y = 'y',\n        sort = false,\n        stack = null,\n        normalize = false;\n\n    function grouper (frame) {\n        let stacked = false,\n            data, labels, s;\n\n        if (groupby) {\n            labels = frame.dimension(groupby).group().top(Infinity).map(g => g['key']);\n            if (labels.length <= 1) labels = null;\n        }\n\n        if (labels) {\n            frame = frame.pivot(x, groupby, y);\n            if (sort) frame = frame.sortby('total');\n            data = frame.data;\n            if (stack) {\n                if (normalize)\n                    data = normalizeData(data);\n                data = stack.keys(labels)(data);\n                stacked = true;\n            }\n        } else {\n            data = frame.data;\n            labels = [y];\n        }\n\n        if (!stacked)\n            data = labels.map((key, index) => {\n                s = data.map(d => {\n                    s = [0, d[key]];\n                    s.data = d;\n                    return s;\n                });\n                s.index = index;\n                s.key = key;\n                return s;\n            });\n\n        return new GroupedData(data, x, y, stacked);\n    }\n\n    grouper.groupby = function(_) {\n        if (arguments.length) {\n            groupby = _;\n            return grouper;\n        }\n        return groupby;\n    };\n\n    grouper.x = function(_) {\n        return arguments.length ? (x = _, grouper) : x;\n    };\n\n    grouper.y = function(_) {\n        return arguments.length ? (y = _, grouper) : y;\n    };\n\n    grouper.normalize = function(_) {\n        return arguments.length ? (normalize = _, grouper) : normalize;\n    };\n\n    grouper.stack = function(_) {\n        return arguments.length ? (stack = _, grouper) : stack;\n    };\n\n    return grouper;\n}\n\n\nfunction GroupedData (data, x, y, stacked) {\n    this.data = data;\n    this.stacked = stacked;\n    this.x = x;\n    this.y = y;\n}\n\nGroupedData.prototype = {\n    rangeX () {\n        return this.range(this.x);\n    },\n    rangeY () {\n        return this.range();\n    },\n    range (key) {\n        let range, vals;\n        if (key)\n            vals = this.data.reduce((a, d) => {\n                range = extent(d, acc);\n                a.push(range[0]);\n                a.push(range[1]);\n                return a;\n            }, []);\n        else\n        vals = this.data.reduce((a, d) => {\n            range = extent(d, acc0);\n            a.push(range[0]);\n            a.push(range[1]);\n            range = extent(d, acc1);\n            a.push(range[0]);\n            a.push(range[1]);\n            return a;\n        }, []);\n        return extent(vals);\n\n        function acc0 (d) {\n            return d[0];\n        }\n\n        function acc1 (d) {\n            return d[1];\n        }\n\n        function acc (d) {\n            return d.data[key];\n        }\n    }\n};\n\n\nfunction normalizeData (data) {\n    return data;\n}\n","import {area, line} from 'd3-shape';\nimport {format} from 'd3-format';\nimport {timeFormat} from 'd3-time-format';\nimport {isDate} from 'd3-let';\nimport {color} from 'd3-color';\n\nimport createChart from '../core/chart';\nimport grouper from '../transforms/groups';\nimport {lineDrawing} from './line';\n\n//\n//  Area Chart\n//  =============\nexport default createChart('areachart', lineDrawing, {\n\n    options: {\n        lineWidth: 1,\n        curve: 'natural',\n        x: 'x',\n        y: 'y',\n        groupby: null,  // group data by a field for staked or grouped area chart\n        scaleX: 'linear',\n        scaleY: 'linear',\n        // area with vertical gradient to zero opacity\n        gradient: true,\n        lineDarken: 0.2,\n        //\n        axisX: 'bottom',\n        axisXticks: 5,\n        axisY: 'left',\n        axisYticks: 5,\n        //\n        axisFormat: ',',\n        axisTimeFormat: '%Y-%m-%d',\n        axisTickSizeOuter: 0\n    },\n\n    doDraw (frame) {\n        var self = this,\n            model = this.getModel(),\n            x = model.x,\n            y = model.y,\n            col = this.getModel('color'),\n            box = this.boundingBox(),\n            info = grouper()\n                        .groupby(model.groupby)\n                        .stack(this.getStack())\n                        .x(x)\n                        .y(y)(frame),\n            rangeX = info.rangeX(),\n            rangeY = info.rangeY(),\n            scaleX = this.getScale(model.scaleX)\n                            .domain(rangeX)\n                            .rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale(model.scaleY)\n                            .domain(rangeY)\n                            .rangeRound([box.innerHeight, 0]).nice(),\n            paper = this.paper().size(box),\n            areas = paper.group()\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .selectAll('.areagroup').data(info.data),\n            colors = this.colors(info.data.length),\n            fill = model.gradient ? colors.map((c, i) => self.linearGradient(c, box, 'vertical', `fill${self.model.uid}-${i}`)) : colors,\n            curve = this.curve(model.curve);\n\n        var areagroup = areas\n            .enter()\n                .append('g')\n                .classed('areagroup', true)\n            .merge(areas)\n                .selectAll('path')\n                .data(arealine);\n\n        areagroup\n            .enter()\n                .append('path')\n                .attr('class', d => d.type)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('d', d => d.draw)\n            .merge(areagroup)\n                .attr('d', d => d.draw)\n                .attr('fill', d => d.fill)\n                .attr('stroke', d => d.stroke)\n                .attr('fill-opacity', col.fillOpacity)\n                .attr('stroke-width', model.lineWidth)\n                .attr('stroke-opacity', col.strokeOpacity);\n\n        areagroup\n            .exit()\n            .transition()\n            .remove();\n\n        if (model.axisX) {\n            var xa = this.axis(model.axisX, scaleX)\n                    .ticks(this.ticks(box.innerWidth, 50))\n                    .tickFormat(this.format(rangeX[0]))\n                    .tickSizeOuter(model.axisTickSizeOuter);\n            paper\n                .group('x-axis')\n                .attr(\"transform\", this.translate(box.total.left, box.total.top+box.innerHeight))\n                .call(xa);\n        }\n        if (model.axisY) {\n            var ya = this.axis(model.axisY, scaleY)\n                        .ticks(this.ticks(box.innerHeight, 30))\n                        .tickFormat(this.format(rangeY[0]))\n                        .tickSizeOuter(model.axisTickSizeOuter);\n            paper\n                .group('y-axis')\n                .attr(\"transform\", this.translate(box.total.left, box.total.top))\n                .call(ya);\n        }\n\n        function xx(d) {\n            return scaleX(d.data[x]);\n        }\n\n        function y0(d) {\n            return scaleY(d[0]);\n        }\n\n        function y1(d) {\n            return scaleY(d[1]);\n        }\n\n        function arealine (d) {\n            var area_ = area()\n                            .curve(curve)\n                            .x(xx)\n                            .y1(y1)\n                            .y0(y0),\n                line_ = line()\n                            .curve(curve)\n                            .x(xx)\n                            .y(y1),\n                c = color(colors[d.index]);\n\n            return [\n                {\n                    type: 'area',\n                    data: d,\n                    draw: area_(d),\n                    stroke: 'none',\n                    fill: fill[d.index]\n                },\n                {\n                    type: 'line',\n                    data: d,\n                    draw: line_(d),\n                    fill: 'none',\n                    stroke: c.darker(model.lineDarken)\n                }\n            ];\n        }\n    },\n\n    format (value) {\n        if (isDate(value)) return timeFormat(this.getModel().axisTimeFormat);\n        else return format(this.getModel().axisFormat);\n    },\n\n    ticks (size, spacing) {\n        return Math.max(Math.floor(size/spacing), 1);\n    }\n});\n","import {select} from 'd3-selection';\n\n//Text wrapping code adapted from Mike Bostock\nexport default function (text, width) {\n\n    text.each(function() {\n        var text = select(this),\n            words = text.text().split(/\\s+/).reverse(),\n            word,\n            line = [],\n            lineHeight = 1.2,\n            dy = parseFloat(text.attr(\"dy\")) || 0,\n            tspan = text.text(null)\n                        .append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", dy + \"em\");\n\n        while (word = words.pop()) {\n            line.push(word);\n            tspan.text(line.join(\" \"));\n            if (tspan.node().getComputedTextLength() > width && line.length > 1) {\n                line.pop();\n                tspan.text(line.join(\" \"));\n                line = [word];\n                tspan = text.append(\"tspan\")\n                            .attr(\"x\", 0)\n                            .attr(\"dy\", lineHeight + dy + \"em\").text(word);\n            }\n        }\n    });\n}\n","import {pie, arc} from 'd3-shape';\nimport {scaleOrdinal} from 'd3-scale';\nimport {viewExpression} from 'd3-view';\nimport {format} from 'd3-format';\n\nimport createChart from '../core/chart';\nimport {sizeValue} from '../utils/size';\nimport textWrap from '../utils/text-wrapping';\n\n\nconst pi = Math.PI;\nconst rad = pi/180;\n\n\nexport const proportional = {\n\n    fill (data) {\n        var colors = this.colors(data.length);\n\n        function fill (d, idx) {\n            return colors[idx];\n        }\n\n        fill.colors = colors;\n\n        return fill;\n    },\n\n    proportionalData (frame, field) {\n        return frame.dimension(field).top(Infinity);\n    },\n\n    total (field) {\n        var total = 0;\n\n        function value (d) {\n            total += d[field];\n            return d[field];\n        }\n\n        value.total = () => total;\n        return value;\n    }\n};\n\n//\n//  Pie Chart\n//  =============\n//\nexport default createChart('piechart', proportional, {\n\n    options: {\n        // The data values from this field will be encoded as angular spans.\n        // If omitted, all pie slices will have equal spans\n        field: 'data',\n        label: 'label',\n        startAngle: 0,\n        endAngle: 360,\n        sort: false,\n        innerRadius: 0,\n        padAngle: 0,\n        cornerRadius: 0,\n        lineWidth: 1,\n        //\n        fractionFormat: '.1%',\n        legendType: 'color',\n        legendLabel: \"label + ' - ' + format(fraction)\",\n        //\n        // display information in the center of the pie chart\n        // Should be used with innerRadius greater than 0\n        center: null,\n        centerOpacity: 1,\n        centerFontSize: '7%'\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            color = this.getModel('color'),\n            field = model.field,\n            box = this.boundingBox(),\n            outerRadius = Math.min(box.innerWidth, box.innerHeight)/2,\n            innerRadius = sizeValue(model.innerRadius, outerRadius),\n            total = this.total(field),\n            angles = pie()\n                .padAngle(rad*model.padAngle)\n                .startAngle(rad*model.startAngle)\n                .endAngle(rad*model.endAngle)\n                .value(total),\n            arcs = arc()\n                .innerRadius(innerRadius)\n                .outerRadius(outerRadius)\n                .cornerRadius(model.cornerRadius),\n            paper = this.paper().size(box),\n            //update = paper.transition('update'),\n            data = angles(this.proportionalData(frame, field)),\n            fill = this.fill(data),\n            slices = paper.group()\n                .attr(\"transform\", this.translate(box.total.left+box.innerWidth/2, box.total.top+box.innerHeight/2))\n                .selectAll('.slice').data(data);\n\n        slices\n            .enter()\n                .append('path')\n                .attr('class', 'slice')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n            .merge(slices)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', arcs)\n                .attr('fill', fill)\n                .attr('fill-opacity', color.fillOpacity);\n\n        slices.exit().transition().remove();\n\n        if (model.center) {\n            var text = this.dataStore.eval(model.center, {total: total.total()});\n            if (text) {\n                var size = this.dim(model.centerFontSize, box.innerWidth),\n                    center = paper.group('center-notation')\n                        .attr(\"transform\", this.translate(box.total.left+box.innerWidth/2, box.total.top+box.innerHeight/2))\n                        .selectAll('.info').data([text]);\n                center\n                    .enter()\n                        .append('text')\n                        .attr('class', 'info')\n                        .attr(\"text-anchor\", \"middle\")\n                        .attr(\"alignment-baseline\", \"middle\")\n                        .style(\"font-size\", `${size}px`)\n                        .style('fill-opacity', 0)\n                    .merge(center)\n                        .text(text)\n                        .style('fill-opacity', model.centerOpacity)\n                        .call(textWrap, 1.5*(innerRadius || outerRadius));\n\n            }\n        }\n        if (!model.legendType) return;\n        total = total.total();\n        var expr = viewExpression(model.legendLabel),\n            fmt = format(model.fractionFormat),\n            labels = data.map((d, idx) => {\n                return expr.eval({\n                    d: d,\n                    value: d.value,\n                    format: fmt,\n                    total: total,\n                    fraction: d.value/total,\n                    label: d.data[model.label] || idx\n                });\n            });\n        this.legend({\n            scale: scaleOrdinal().domain(labels).range(fill.colors)\n        }, box);\n    }\n});\n","//\n//  Custom Symbol type\n//  =====================\n//\n//  Draw a polygon given an array of points\n//  This can be used as type in a d3-shape symbol\nexport default function (points) {\n\n    return {\n        draw (context) {\n            points.forEach((point, idx) => {\n                if (!idx) context.moveTo(point[0], point[1]);\n                else context.lineTo(point[0], point[1]);\n            });\n            context.closePath();\n        }\n    };\n}\n","import {symbol} from 'd3-shape';\nimport {viewExpression} from 'd3-view';\n\nimport createChart from '../core/chart';\nimport pyramid from '../transforms/pyramid';\nimport polygon from '../utils/polygon';\nimport {proportional} from './pie';\n\n\nexport default createChart('pyramidchart', proportional, {\n\n    options: {\n        field: 'data',\n        label: 'label',\n        pad: 0.005,\n        lineWidth: 1,\n        inverted: false,\n        legendType: 'color',\n        invereted: false,\n        legendLabel: \"label + ' - ' + format('.1%', fraction)\"\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n            field = model.field,\n            color = this.getModel('color'),\n            box = this.boundingBox(),\n            pad = this.dim(model.pad, Math.min(box.innerWidth, box.innerHeight)),\n            polygons = pyramid()\n                .pad(pad)\n                .value(d => d[field]),\n            scaleX = this.getScale('linear').rangeRound([0, box.innerWidth]),\n            scaleY = this.getScale('linear').rangeRound(model.inverted ? [box.innerHeight, 0] : [0, box.innerHeight]),\n            data = frame.new(polygons(this.proportionalData(frame, field))).dimension('fraction').bottom(Infinity),\n            marks = symbol().type(d => polygon(d.points.map(xy => [scaleX(xy[0]), scaleY(xy[1])]))).size(1),\n            fill = this.fill(data),\n            paper = this.paper(),\n            segments = paper.size(box).group()\n                .attr(\"transform\", this.translate(box.total.left+box.innerWidth/2, box.total.top))\n                .selectAll('.segment').data(data);\n\n        segments\n            .enter()\n                .append('path')\n                .attr('class', 'segment')\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', 0)\n                .attr('fill-opacity', 0)\n                .attr('fill', fill)\n                .attr('stroke-width', model.lineWidth)\n                .attr('d', marks)\n            .merge(segments)\n                .transition()\n                .attr('stroke', color.stroke)\n                .attr('stroke-opacity', color.strokeOpacity)\n                .attr('d', marks)\n                .attr('fill', fill)\n                .attr('fill-opacity', color.fillOpacity);\n\n        segments.exit().remove();\n\n        if (!model.legendType) return;\n        var expr = viewExpression(model.legendLabel),\n            self = this,\n            labels = data.map((d, idx) => {\n                return expr.eval(self.getContext({\n                    d: d,\n                    value: d.value,\n                    fraction: d.fraction,\n                    label: d.data[model.label] || idx\n                }));\n            });\n        this.legend({\n            scale: this.getScale('ordinal').domain(labels).range(fill.colors)\n        }, box);\n    }\n\n});\n","import createChart from '../core/chart';\n\n//\n//  Treemap\n//  =============\n//\nexport default createChart('treemap', {\n    requires: ['d3-treemap']\n\n});\n","import createChart from '../core/chart';\n\n\nexport default createChart('text', {\n\n    options: {\n        scale: 'linear',\n        field: 'data',\n        label: 'label'\n    },\n\n    doDraw () {\n    }\n});\n","import {extent, range} from 'd3-array';\nimport {map} from 'd3-collection';\n\nimport accessor from '../utils/accessor';\nimport niceRange from '../utils/nicerange';\nimport createChart from '../core/chart';\nimport {lineDrawing} from './line';\n//\n//  Heatmap\n//  =============\n//\n//  A heatmap is a graphical representation of data where the individual\n//  values contained in a matrix are represented as colors.\n//  This chart type allow to specify to types of layout:\n//  * heatmap - classical heatmap\n//  * punchcard - the z dimension is converted into different sizes of the shape elements\n//  * contour - similar to heatmap but continous rather than descrete\nexport default createChart('heatmap', lineDrawing, {\n\n    options: {\n        shape: 'square',\n        layout: 'heatmap',\n        buckets: 10,\n        pad: 0.005,     // padding for heatmap & punchcard\n        x: 'x',\n        y: 'y',\n        z: 'data',\n        axisX: 'bottom',\n        axisY: 'left'\n    },\n\n    doDraw (frame) {\n        var model = this.getModel(),\n        color = this.getModel('color'),\n            layout = model.layout,\n            box = this.boundingBox(),\n            zrange = extent(frame.data, accessor(model.z)),\n            paper = this.paper().size(box);\n\n        if (zrange[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        var heat = this.heatmap(layout, frame, box, zrange),\n            dx = (box.innerWidth - heat.width)/2,\n            dy = (box.innerHeight - heat.height)/2,\n            shape = this.getSymbol(model.shape).size(d => d.size*d.size),\n            shapes = paper.group()\n                        .attr(\"transform\", this.translate(box.total.left + dx, box.total.top + dy))\n                        .selectAll('.shape')\n                        .data(heat.data);\n\n        if (range[0] < 0 && layout === 'punchcard') layout = 'heatmap';\n\n        shapes\n            .enter()\n                .append('path')\n                .classed('shape', true)\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill\", d => d.color)\n                .attr(\"fill-opacity\", 0)\n                .attr(\"stroke-opacity\", 0)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape)\n            .merge(shapes)\n                .transition()\n                .attr(\"transform\", d => `translate(${d.x}, ${d.y})`)\n                .attr(\"fill-opacity\", color.fillOpacity)\n                .attr(\"fill\", d => d.color)\n                .attr(\"stroke-opacity\", color.strokeOpacity)\n                .attr(\"stroke\", color.stroke)\n                .attr('d', shape);\n\n        if (model.axisX === 'bottom')\n            this.xAxis(heat.scaleX, box.total.left, box.total.top + heat.height + dy);\n        if (model.axisY === 'left')\n            this.yAxis(heat.scaleY, box.total.left, box.total.top + dy);\n\n        if (layout === 'heatmap')\n            this.legend({\n                type: 'color',\n                shape: model.shape,\n                scale: heat.colors\n            }, box);\n        else if (layout === 'punchcard')\n            this.legend({\n                type: 'size',\n                shape: model.shape,\n                scale: heat.sizes\n            }, box);\n    },\n\n    heatmap (layout, frame, box, zrange) {\n        var model = this.getModel(),\n            pad = model.pad,\n            x = model.x,\n            y = model.y,\n            z = model.z,\n            gx = frame.dimension(model.x).group().size(),\n            gy = frame.dimension(model.y).group().size(),\n            buckets = Math.min(model.buckets, gx*gy),\n            dx = (1 - pad*(gx + 1))*box.innerWidth/gx,\n            dy = (1 - pad*(gy + 1))*box.innerHeight/gy,\n            data = [],\n            labelsX = [],\n            labelsY = [],\n            xp = map(), yp = map();\n\n        let xv, yv, zv, i, j, colors, sizes, dd, width, height;\n\n        if (dx < dy) {\n            dd = dx;\n            width = box.innerWidth;\n            pad = width*pad;\n            height = gy*(dd + pad) + pad;\n        } else {\n            dd = dy;\n            height = box.innerHeight;\n            pad = height*pad;\n            width = gx*(dd + pad) + pad;\n        }\n\n        zrange = niceRange(zrange, buckets);\n\n        if (layout === 'heatmap') {\n            colors = this.getScale('quantile').range(this.colors(buckets).reverse()).domain(zrange);\n            sizes = () => 1;\n        } else {\n            var color = this.colors(1)[0];\n            colors = () => color;\n            sizes = this.getScale('quantile').range(range(buckets).map(s => (s+1)/buckets)).domain(zrange);\n        }\n        frame.data.forEach(d => {\n            xv = d[x];\n            yv = d[y];\n            zv = d[z];\n            if (!xp.has(xv)) {\n                xp.set(xv, labelsX.length);\n                labelsX.push(xv);\n            }\n            if (!yp.has(yv)) {\n                yp.set(yv, labelsY.length);\n                labelsY.push(yv);\n            }\n            i = xp.get(xv);\n            j = yp.get(yv);\n            data.push({\n                i: i,\n                j: j,\n                x: pad + dd/2 + i*(dd + pad),\n                y: pad + dd/2 + j*(dd + pad),\n                color: colors(zv),\n                size: dd*sizes(zv),\n                data: d\n            });\n        });\n        return {\n            data: data,\n            size: dd,\n            width: width,\n            height: height,\n            scaleX: this.getScale('band').domain(labelsX).range([0, width]),\n            scaleY: this.getScale('band').domain(labelsY).range([0, height]),\n            colors: colors,\n            sizes: sizes\n        };\n    }\n});\n","//\nexport {version as visualizeVersion} from './package.json';\n//\nexport {default as randomPath} from './src/utils/randompath';\n//\n// Data layer\nexport {default as DataStore} from './src/data/store';\nexport {default as dataSources} from './src/data/sources';\nexport {default as dataLocale} from './src/data/locale';\n\n//\n//  Core API\nexport {visuals} from './src/core/base';\nexport {default as createChart} from './src/core/chart';\nexport {default as createPaper, Svg} from './src/core/paper';\nexport {default as visualTransforms} from './src/transforms/index';\n//\n//  Components\nexport {default as visualComponents} from './src/components/index';\n\n// utilities\nexport {colorScales} from './src/plugins/color';\nexport {default as pyramid} from './src/transforms/pyramid';\nexport {default as niceRange} from './src/utils/nicerange';\n//\n//  Charts\n//  =========\n//\n//  Last import, important!\nexport {default as Visual} from './src/core/visual';\nexport {default as BarChart} from './src/charts/bar';\nexport {default as BoxChart} from './src/charts/box';\nexport {default as LineChart} from './src/charts/line';\nexport {default as AreaChart} from './src/charts/area';\nexport {default as PieChart} from './src/charts/pie';\nexport {default as PyramidChart} from './src/charts/pyramid';\nexport {default as Treemap} from './src/charts/treemap';\nexport {default as TextChart} from './src/charts/text';\nexport {default as Heatmap} from './src/charts/heatmap';\n"],"names":["defaults","size","options","assign","t","range","S","sigma","drift","data","x","y","norm","randomNormal","dx","i","length","config","_data","isArray","isObject","resolvedPromise","asFrame","prefix","msg","logger","warn","schemes","value","isString","indexOf","split","CSV","set","isUrl","url","fetch","viewProviders","self","then","parse","response","ct","headers","get","has","text","csvParse","json","source","store","frame","Promise","all","map","getData","frames","mergeFrames","expression","viewExpression","model","eval","field","d","DataFrame","serie","defineProperties","dimensions","series","prototype","_inner","cf","crossfilter","name","keepExisting","arguments","current","dispose","accessor","dimension","top","new","Infinity","key","total","group","reduce","pivoter","Object","m","pk","pv","o","record","mapper","transform","schema","jsonValidator","dummyValidator","type","transformFactory","valid","validate","logError","doTransform","expr","index","safeEval","push","a","Array","fill","operations","scalar_operations","agg","v","Math","max","min","count","array","undefined","fields","ops","as","groupby","countAll","fillArray","aggregate","op","forEach","entries","oo","entry","query","dim","q","filterAll","filter","sortby","timeseries","groups","newframe","tmp","filterExact","globalOptions","dateFormat","converters","utcParse","parseFloat","mappers","converter","each","DEFAULT_METHOD","DEFAULT_PERIOD","DEFAULT_ALPHA","MAXALPHA","method","fieldto","s","period","cumulate","buffer","splice","alpha","minmax","applyTransforms","transforms","ts","dataEvents","dispatch","dataSourcePrototype","transformStore","constructor","DataSource","sources","values","cfg","getConfig","initDataSource","dataSource","dataName","pop","initialise","addTransforms","call","dataSources","add","remote","composite","DataStore","dataCount","create","p","remove","ds","cachedFrame","Error","cache","context","ctx","$child","def","timeFormat","symbol","locales","source1","source2","load","number","locale","time","formatDate","date","formatDateTime","dateTime","n","round","pow","WIDTH","HEIGHT","sizeValue","getSize","element","width","height","getWidth","widthElement","getWidthElement","getHeight","heightElement","getHeightElement","el","getParentElementRect","elementWidth","elementHeight","w","getBoundingClientRect","select","left","padding","style","right","bottom","parent","node","tagName","parentNode","substring","clone","CONTAINERS","visuals","visualPrototype","drawing","event","toString","events","on","redraw","draw","visualType","uid","visualParent","getModel","$new","$update","$on","refSize","minSize","maxSize","container","idx","live","getVisualSchema","viewBase","proto","opts","Visual","viewModel","types","createVisual","append","classed","sel","layers","drawCount","__visual__","fit","clear","visual","err","VisualClass","resize","currentSize","viewDebug","paper","inBrowser","observer","MutationObserver","visualManager","observe","document","documentElement","records","nodes","removedNodes","nodeName","selectAll","destroy","viz","objectOnly","toUpperCase","protos","vizPrototype","chartPrototype","apply","_paper","paperType","render","PaperType","papers","isFunction","xt","yt","camelFunction","d3_scale","doDraw","displayError","createPaper","Paper","paperPrototype","box","attr","cname","enter","Svg","svg","menu","display","insert","refreshMenu","minHeight","maxHeight","formats","specifier","fmt","format","dataContext","cachedFormat","dataStore","getContext","isViz","setupLayer","setupVisual","addSources","layer","$set","resizeDelay","viewDebounce","window","title","menuTitle","maxFontSize","fontSize","minFontSize","html","px","KEYS","LEFTRIGHT","margin","boundingBox","calculate","margins","axisOrientation","axisTop","axisBottom","axisLeft","axisRight","axisDefaults","xAxis","yAxis","scale","axis","location","tickSize","tickSizeOuter","translate","stroke","orientation","symbols","symbolCircle","symbolSquare","symbolStar","getSymbol","colorScales","color","scaleSequential","interpolateViridis","interpolateInferno","interpolateMagma","interpolatePlasma","interpolateWarm","interpolateCool","interpolateRainbow","interpolateCubehelixDefault","colors","scaleDef","minPoints","scaleMinPoints","offset","scaleOffset","npoints","points","domain","reversed","linearGradient","col","gid","defs","grad","colto","opacity","stops","merge","legend","legends","legendColor","legendSize","legendSymbol","vizModel","lgModel","legendType","orient","titleWidth","titleMinWidth","titleMaxWidth","labelFormat","g","bb","locations","getBBox","topLeft","topRight","bottomLeft","bottomRight","innerWidth","offsetY","offsetX","innerHeight","table","require","clusterize","Clusterize","cl","tableClass","striped","over","bordered","small","vizComponent","props","attrs","inner","getSchema","build","input","catch","createElement","root","class","VisualContainer","visualDashboard","mountInner","addVisual","parsers","isoParse","formatters","columns","properties","label","hidden","$parse","string","$html","tableTpl","plugins","template","createColumns","promises","promise","plugin","tablePlugins","isPromise","viewElement","vm","dataLoader","loadingData","addData","newData","delayData","id","rows","__data__","addComponent","dashboard","tabular","constant","b","NaN","identity","pad","base","pyramid","j","k","fraction","hi","v0","ph","pj","r","polygons","sort","descending","sqrt","_","splits","x0","x1","floor","log10","ndx","ceil","nx0","lineDrawing","newRange","nseries","keys","obj","d3_shape","extent","ranges","getScale","scaleX","scaleY","stack","stackOrder","order","createChart","meta","lines","strokeColor","curve","lineWidth","strokeOpacity","line","exit","bars","sx","sy","sz","stacked","xrect","yrect","y0","yi","rangeRound","paddingInner","bandwidth","bardim","pivot","normalize","nice","stackOrderDescending","rects","fillOpacity","transition","getDataInfo","chart","boxplot","info","duration","Number","whiskers","boxWhiskers","quartiles","boxQuartiles","tickFormat","ascending","whiskerData","whiskerIndices","concat","scaleLinear","__chart__","center","quartileData","medianLine","whisker","outlier","outlierIndices","boxTick","whiskerTick","quantile","grouper","labels","normalizeData","GroupedData","vals","acc","acc0","acc1","getStack","rangeX","rangeY","areas","gradient","c","areagroup","arealine","axisX","xa","ticks","axisTickSizeOuter","axisY","ya","xx","y1","area_","area","line_","darker","lineDarken","isDate","axisTimeFormat","axisFormat","spacing","words","reverse","word","lineHeight","dy","tspan","join","getComputedTextLength","pi","PI","rad","proportional","outerRadius","innerRadius","angles","pie","padAngle","startAngle","endAngle","arcs","arc","cornerRadius","proportionalData","slices","centerFontSize","centerOpacity","textWrap","legendLabel","fractionFormat","scaleOrdinal","point","moveTo","lineTo","closePath","inverted","marks","polygon","xy","segments","layout","zrange","z","heat","heatmap","shape","shapes","sizes","gx","gy","buckets","labelsX","labelsY","xp","yp","xv","yv","zv","dd","niceRange"],"mappings":"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"}
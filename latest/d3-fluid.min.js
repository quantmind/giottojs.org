// d3-fluid Version 0.1.1. Copyright 2016 quantmind.com.
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-collection"),require("d3-let"),require("d3-view"),require("crossfilter/crossfilter"),require("d3-selection")):"function"==typeof define&&define.amd?define("d3-fluid",["exports","d3-collection","d3-let","d3-view","crossfilter/crossfilter","d3-selection"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.cf,e.d3)}(this,function(e,t,i,n,r,o){"use strict";function s(e){var t=new d(e);return t}function d(e){this.$series=t.map(),this.$vm=e}function u(e,t){return 1===arguments.length?this.model.$dataStore.serie(e):(this.model.$dataStore.serie(e,t),this)}r="default"in r?r.default:r;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={init:function(e){this._cf=r.crossfilter(),arguments.length&&this.add(e),this.natural=this._cf.dimension(function(e){return e._id})},size:function(){return this._cf.size()},get:function(){},getList:function(){},add:function(e){var t=this.size();return e=e.map(function(i){return"object"===("undefined"==typeof i?"undefined":f(i))?e._id=++t:e={_id:++t,data:e},e}),this._cf.add(e),e}};d.prototype=s.prototype={size:function(){return this.$series.size()},serie:function e(t,n){if(1===arguments.length)return this.$series.get(t);if(null===n){var r=this.$series.get(t);return this.$series.remove(t),r}var e=i.assign({},a,n);return e.init(),this.$series.set(t,e),this},getList:function(e,t){var r=this.$series.get(e),o=r?r.getList(t):[];return i.isPromise(o)||(o=new Promise(function(e){e(o)}),r)?o.then(function(e){return i.isArray(e)||(n.viewWarn("Excepted an array, got "+("undefined"==typeof e?"undefined":f(e))),e=[]),r.add(e),e}):(n.viewWarn('Serie "'+e+" not available"),o)}};var l='<ul class="d3-list">\n<li d3-for="entry in data">\n</li>\n</ul>',c=function(){return n.viewElement(l)},h={ul:c},p={render:function(e,t){var i,r=e.tag||"ul",s=t.id||"list-"+this.uid,d=h[r];t.source?(i=this.model.$dataStore.serie(t.source),i||n.viewWarn('source "'+t.source+'" not available, cannot retrieve serie')):n.viewWarn("source not specified, cannot retrieve serie");var u=this.htmlElement('<div id="'+s+'"></div>');return d?o.select(u).append(d):n.viewWarn('Could not find html builder for "'+r+'" tag'),u}},v={install:function(e){e.model.$dataStore=s(e),e.addComponent("d3list",p),e.dataSerie=u}};e.fluid=v,e.dataStore=s,Object.defineProperty(e,"__esModule",{value:!0})});
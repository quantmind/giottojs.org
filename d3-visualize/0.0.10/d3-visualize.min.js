// d3-visualize Version 0.0.10. Copyright 2017 quantmind.com.
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-canvas-transition"),require("object-assign"),require("d3-array"),require("d3-random"),require("d3-collection"),require("d3-let"),require("d3-view"),require("d3-dsv"),require("d3-dispatch"),require("crossfilter"),require("d3-format"),require("d3-time-format"),require("d3-selection"),require("d3-scale"),require("d3-shape")):"function"==typeof define&&define.amd?define(["exports","d3-canvas-transition","object-assign","d3-array","d3-random","d3-collection","d3-let","d3-view","d3-dsv","d3-dispatch","crossfilter","d3-format","d3-time-format","d3-selection","d3-scale","d3-shape"],e):e(t.d3={},t.d3,t.assign,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.crossfilter,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,e,i,n,r,a,o,s,l,u,d,c,h,f,p,g){"use strict";function v(t){var e=(t.headers.get("content-type")||"").split(";")[0];return"text/plain"===e||"text/csv"===e?t.text().then(l.csvParse):"application/json"===e?t.json():(I("Cannot load content type '"+e+"'"),[])}function m(t,e,i,n){var r=n.dataName(o.pop(i,"name")),a=d();Object.defineProperties(t,{cf:{get:function(){return a}},name:{get:function(){return r}},store:{get:function(){return n}},type:{get:function(){return e}},config:{get:function(){return i}}}),t.initialise(i),n.sources.set(r,t),Q.call("init",void 0,t)}function w(t,e){var i=void 0;return e?(e.forEach(function(e){i=e(t),t=i||t}),t):t}function y(t){var e=a.map();Object.defineProperties(this,{sources:{get:function(){return e}}}),this.transforms=i({},it),this.dataCount=0,this.model=t}function b(t,e){return"string"==typeof t&&t.indexOf("%")===t.length-1?dt(.01*parseFloat(t)*e):+t}function C(t,e){var i={width:e.width,height:e.height};return i.width||(i.width=P(t),i.width?i.widthElement=D(t):i.width=ct),i.height||(i.height=x(t),i.height?i.heightElement=O(t):i.height=ht),"string"==typeof i.height&&i.height.indexOf("%")===i.height.length-1&&(i.heightPercentage=.01*parseFloat(i.height),i.height=dt(i.heightPercentage*i.width)),i}function P(t){var e=E(t,"width");if(e)return S(e)}function x(t){var e=E(t,"width");if(e)return k(e)}function D(t){return E(t,"width")}function O(t){return E(t,"height")}function S(t){var e=t.getBoundingClientRect().width,i=f.select(t);return e-j(i.style("padding-left"))-j(i.style("padding-right"))}function k(t){var e=t.getBoundingClientRect().height,i=f.select(t);return e-j(i.style("padding-top"))-j(i.style("padding-bottom"))}function E(t,e){for(var i=t.node?t.node():t;i&&"BODY"!==i.tagName;){if(i.getBoundingClientRect()[e])return i;i=i.parentNode}}function j(t){return t&&"px"==t.substring(t.length-2)?+t.substring(0,t.length-2):0}function q(t){var e,i=t.widthElement?P(t.widthElement):t.width;return e=t.heightPercentage?dt(i*t.heightPercentage,0):t.heightElement?x(t.heightElement):t.height,t.minHeight&&(e=Math.max(e,t.minHeight)),[dt(i),dt(e)]}function _(t){t.forEach(function(t){var e=t.removedNodes;e&&e.length&&e.forEach(function(t){"#text"!==t.nodeName&&(t.__visual__?M.call(t):f.select(t).selectAll(".d3-visual").each(M))})})}function M(){var t=this.__visual__;t?(t.destroy(),s.viewDebug('Removed "'+t.toString()+'" from DOM, '+ot.live.length+" live visuals left")):ut("d3-visual without __visual__ object")}function z(t,e){function n(e){var i=this.initialise(e);Object.defineProperties(this,{element:{get:function(){return i}},sel:{get:function(){return f.select(i)}},paperType:{get:function(){return t}}})}return n.prototype=i({},mt,e),ot.papers[t]=n,n}function A(t){return t}function T(t){var e=t.dataStore,i=o.pop(t.options,"data");e||(e=new y(t.model),t.model.dataStore=e),e.addSources(i)}function F(t){var e=t.dataStore,i=o.pop(t,"data");i&&(o.isString(i)&&(i={source:i}),i.name||(i.name=t.model.uid),i=e.addSources(i),i?t.model.$set("data",i.name):ut("Could not create data source "+i.name))}function R(t,e){var i=e.options[t];if(void 0!==i&&!o.isObject(i)){var n=i||0;e.options[t]={left:n,right:n,top:n,bottom:n}}}function W(t,e,i){return kt.reduce(function(n,r){return n[r]=b(t[r],Et.indexOf(r)>-1?e:i),n},{})}function $(t){return new t}function N(t,e){var n=t.records,r=t.data,a=t.model,o=e,s=void 0,l=void 0;e=o.splice(0,100),e.forEach(function(t){t.id?(s=t.id?n[t.id]:null,s?t=i(s,t):(r.push(t),n[t.id]=t)):r.push(t),a.columns.forEach(function(e){t[e.name]=e.$parse(t[e.name])})}),t.sel.select("tbody").selectAll("tr").data(r).enter().append("tr").attr("scope","row").selectAll("td").data(a.columns).enter().append("td").style("display",function(t){return t.hidden?"none":null}).html(function(t){return s=this.parentNode.__data__,l=s[t.name],t.$html(void 0===l?"":l)})}function B(t,e){var i=g[V(e)];return i||(ut('Could not locate curve type "'+e+'"'),e=V(t.defaults().curveName),i=g[e]),i}function V(t){return"curve"!==t.substring(0,5)&&(t="curve"+t[0].toUpperCase()+t.substring(1)),t}i=i&&i.hasOwnProperty("default")?i.default:i,d=d&&d.hasOwnProperty("default")?d.default:d;var H={sigma:.1,drift:0},L=function(t,e){e=i({},H,e);for(var a,o=n.range(0,+t,1),s=e.sigma,l=e.drift,u=[{x:0,y:0}],d=r.randomNormal(0,1),c=1;c<o.length;c++)a=l+s*d(),u[c]={x:c,y:u[c-1].y+a};return u},U={initialise:function(t){this._data=t.data},getConfig:function(t){return o.isArray(t)?{data:t}:o.isObject(t)&&o.isArray(t.data)?t:void 0},getData:function(){return s.resolvedPromise(this.asFrame(this._data))}},I=function(t){s.viewProviders.logger.warn("[d3-data-source] "+t)},Y=["http","https","ws","wss"],X=function(t){return o.isString(t)&&Y.indexOf(t.split("://")[0])>-1},G={getConfig:function(t){return X(t)?{url:t}:o.isObject(t)&&t.url?t:void 0},getData:function(){var t=s.viewProviders.fetch;return t?t(this.url).then(v):void I("fetch provider not available, cannot submit")}},J={getConfig:function(t){if(o.isObject(t)&&t.source)return o.isArray(t.source)||(t.source=[t.source]),t},getData:function(){var t=this.store;return Promise.all(this.source.map(function(e){return t.getData(e)})).then(function(t){return t.length,t[0]})}},K={initialise:function(t){this.expression=s.viewExpression(t.expression)},getConfig:function(t){if(o.isObject(t)&&t.expression)return t},getData:function(){var t=this,e=this.store.model;return s.resolvedPromise(this.expression.eval(e)).then(function(e){return t.asFrame(e)})}},Q=u.dispatch("init","data"),Z={getConfig:function(){},initialise:function(t){i(this,t)},getData:function(){},asFrame:function(t){return t=t.map(function(t){return t.constructor!==Object&&(t={data:t}),t}),d(t)}},tt=i(a.map(),{events:Q,add:function(t,e){function n(e,i){m(this,t,e,i)}return n.prototype=i({},Z,e),this.set(t,n),n},create:function(t,e){for(var i,n=this.values(),r=0;r<n.length;++r)if(i=n[r].prototype.getConfig(t))return new n[r](i,e)}}),et=function(t){function e(e){return e.groupby(t.field)}return e},it={groupby:et};tt.add("array",U),tt.add("remote",G),tt.add("composite",J),tt.add("expression",K),y.prototype={size:function(){return this.sources.size()},addSources:function(t){if(o.isString(t)&&(t={source:t}),o.isArray(t)){var e=this;return t.map(function(t){return tt.create(t,e)})}if(t)return tt.create(t,this)},addTransforms:function(t){i(this.transforms,t)},source:function(t,e){if(1===arguments.length)return this.sources.get(t);if(null===e){var i=this.sources.get(t);return this.sources.remove(t),i}return this.sources.set(t,e),this},clearCache:function(){this.sources.each(function(t){delete t.cachedFrame})},getData:function(t){var e=this.sources.get(t);if(!e)throw new Error("Data source "+t+" not available");return e.cachedFrame?s.resolvedPromise(e.cachedFrame):e.getData().then(function(t){return e.cachedFrame=t,t})},dataName:function(t){return this.dataCount++,t?""+t:this.source("default")?"source"+this.dataCount:"default"}};var nt={formatDate:h.timeFormat("%d/%m/%Y"),formatDateTime:h.timeFormat("%a %e %b %X %Y"),load:function(t){var e=this,i=tt.create("https://unpkg.com/d3-format/locale/"+t+".json"),n=tt.create("https://unpkg.com/d3-time-format/locale/"+t+".json");return Promise.all([i.load().then(function(i){e.symbol=t,e.number=i,c.formatDefaultLocale(i)}),n.load().then(function(t){e.time=t,e.formatDate=h.timeFormat(t.date),e.formatDateTime=h.timeFormat(t.dateTime),h.timeFormatDefaultLocale(t)})])}},rt={dataSource:null,size:{width:null,height:"70%"}},at=["visual","container"],ot={live:[],types:{},papers:{},events:u.dispatch("before-init","after-init","before-draw","after-draw")},st=i({},{initialise:function(){},draw:function(){},select:function(t){return f.select(t)},destroy:function(){},getModel:function(t){t||(t=this.visualType);var e=this.model[t];if(!e&&t in rt){var i=o.pop(this.options,t);this.visualParent?e=this.visualParent.getModel(t).$child(i):(e=this.model.$new(rt[t]),e.$update(i)),this.model[t]=e}return e}},s.viewBase),lt=function(t,e){function n(e,i,n,r){Object.defineProperties(this,{visualType:{get:function(){return t}},isViz:{get:function(){return-1===at.indexOf(t)}}}),this.visualParent=n,this.model=n?n.model.$new():r||s.viewModel(),this.options=i||{},ot.events.call("before-init",void 0,this),this.initialise(e),ot.events.call("after-init",void 0,this)}var r=o.pop(e,"options");return r&&(rt[t]=r),n.prototype=i({},st,e),ot.types[t]=n,n},ut=function(t){s.viewProviders.logger.warn("[d3-visualize] "+t)},dt=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},ct=400,ht="75%",ft=lt("visual",{options:{render:"svg",width:null,height:"70%"},initialise:function(t){if(!t)throw new Error("HTMLElement required by visual group");if(this.visualParent&&"container"!==this.visualParent.visualType)throw new Error("Visual parent can be a container only");Object.defineProperties(this,{element:{get:function(){return t}},sel:{get:function(){return f.select(t)}},size:{get:function(){return[this.width,this.height]}}}),this.sel.classed("d3-visual",!0),this.layers=[],this.drawCount=0,ot.live.push(this),t.__visual__=this},toString:function(){return"visual "+this.model.uid},draw:function(){this.drawCount?(this.drawCount++,this.clear()):(this.drawCount=1,this.fit()),ot.events.call("before-draw",void 0,this),this.layers.forEach(function(t){t.draw()}),ot.events.call("after-draw",void 0,this)},clear:function(){},addVisual:function(t){var e=o.pop(t,"type"),i=ot.types[e];if(i)return new i(this.element,t,this);ut("Cannot add visual "+t.type)},fit:function(){var t=C(this.element.parentNode,this.getModel("visual"));this.width=t.width,this.height=t.height,this.sel.style("width",this.width+"px").style("height",this.height+"px")},resize:function(t){t||(t=q(this));var e=this.size;e[0]===t[0]&&e[1]===t[1]||(s.viewDebug('Resizing "'+this.toString()+'"'),this.width=t[0],this.height=t[1],this.draw())},destroy:function(){var t=ot.live.indexOf(this);t>-1&&ot.live.splice(t,1)}});if(o.inBrowser){new MutationObserver(_).observe(document.documentElement,{childList:!0,subtree:!0})}var pt=function(t){for(var e=[{},gt,vt],n=1;n<arguments.length;++n)e.push(arguments[n]);return lt(t,i.apply(void 0,e))},gt={initialise:function(t){var e=this.visualParent;if(e){if("visual"!==e.visualType)throw new Error("visual parent of "+this.visualType+' can only be "visual"')}else this.visualParent=e=new ft(t,this.options,null,this.model),this.model=e.model.$new(),this.options={};e.layers.push(this)},paper:function(){var t=this.getModel("visual"),e=this._paper;if(e&&e.paperType===t.render)return e;var i=ot.papers[t.render];if(!i)throw new Error("Unknown paper "+t.render);return e=new i(this),this._paper=e,e},translate:function(t,e){return o.isFunction(t)?function(i){return"translate("+(t(i)||0)+", "+(e(i)||0)+")"}:"translate("+t+", "+e+")"}},vt={draw:function(){var t=this;ot.events.call("before-draw",void 0,this);var e=this;this.getData().then(function(i){i&&(i=w(i,e.transforms),t.doDraw(i),ot.events.call("after-draw",void 0,t))})}},mt={initialise:function(){},transition:function(){},size:function(t){return this.sel.attr("width",t.width).attr("height",t.height),this},group:function(t,e){return e||(e="main"),this.sel.selectAll("."+e).data([0]).enter().append("g").classed(e,!0)},dim:function(t){return t}},wt=z("svg",{initialise:function(t){return t.visualParent.sel.append("svg").attr("id",t.model.uid).classed(t.visualType,!0).node()}}),yt=lt("container"),bt={props:["schema","datasource","plugins"],render:function(t,e,i){var n=this,r=this.select(i).html();return this.getSchema(t.schema,function(t){return o.isObject(t)||(t={}),n.build(t,r,e)})},getSchema:function(t,e){var i=this.model.visual;if(i&&i!==this.model&&o.isString(t)){var n=i.options.visuals[t];n&&(t=n)}return o.isString(t)?this.json(t).then(e):e(t)},build:function(){}},Ct=i({},bt,{build:function(t,e,i){var n=this.model,r=this.createElement("div");return i.class&&r.attr("class",i.class),t.visuals||(t.visuals={}),n.visual=new yt(r.node(),t,n.visual),this.mountInner(r,e)}}),Pt=i({},bt,{build:function(t){var e=this.createElement("div"),i=t.type||"visual",n=this.model,r="visual"===i?t:{};return n.visual=new ft(e.node(),r,n.visual),"visual"!==i&&n.visual.addVisual(t),e},mounted:function(){this.model.visual.draw()}}),xt={date:h.isoParse,string:function(t){return""+t}},Dt={number:function(t){return t},date:function(t){return nt.formatDate(t)},boolean:function(t){return t}},Ot=function(t){var e=[],i=void 0;if(!t)return e;if(o.isArray(t)&&(t={properties:t}),o.isObject(t.properties))for(var n in t.properties)i=t.properties[n],o.isObject(i)&&(i.name||(i.name=n),e.push(i));else Array.prototype.push.apply(e,t.properties);return e.map(function(t){return o.isObject(t)||(t={name:t}),t.label||(t.label=t.name),t.hidden||(t.hidden=!1),t.$parse||(t.$parse=xt[t.type]||xt.string),t.$html||(t.$html=Dt[t.type]||A),t})};if(gt.getData=function(){var t=this.model.data;return t?this.dataStore.getData(t):(ut("Visual without data name, cannot get data"),s.resolvedPromise())},ot.events.on("before-init.data",function(t){t.isViz&&(t.data=o.pop(t.options,"data"))}),ot.events.on("after-init.data",function(t){Object.defineProperties(t,{dataStore:{get:function(){return t.visualParent?t.visualParent.dataStore:t.model.dataStore}}}),t.isViz?F(t):T(t)}),rt.resizeDelay||(rt.resizeDelay=200),o.inBrowser){var St=s.viewDebounce(function(){ot.live.forEach(function(t){return t.resize()})},rt.resizeDelay);f.select(window).on("resize.visuals",St)}rt.title={text:null,fontSize:"10px"},ot.events.on("after-init.title",function(t){var e=t.options.title;o.isString(e)&&(t.options.title={text:e})});var kt=["top","bottom","left","right"],Et=["left","right"];rt.margin={top:20,bottom:20,left:20,right:20},rt.padding={top:0,bottom:0,left:0,right:0},gt.boundingBox=function(){var t=this.visualParent.width,e=this.visualParent.height,i=W(this.getModel("margin"),t,e),n=W(this.getModel("padding"),t,e),r=kt.reduce(function(t,e){return t[e]=i[e]+n[e],t},{});return{width:t,height:e,margin:i,padding:i,total:r,innerWidth:t-r.left-r.right,innerHeight:e-r.top-r.bottom}},ot.events.on("after-init.margin",function(t){t.margin=R("margin",t),t.padding=R("padding",t)});var jt=a.map();rt.color={scale:"cool",stroke:"#333",strokeOpacity:1,fillOpacity:1},jt.set("viridis",function(){return p.scaleSequential(p.interpolateViridis)}),jt.set("inferno",function(){return p.scaleSequential(p.interpolateInferno)}),jt.set("magma",function(){return p.scaleSequential(p.interpolateMagma)}),jt.set("plasma",function(){return p.scaleSequential(p.interpolatePlasma)}),jt.set("warm",function(){return p.scaleSequential(p.interpolateWarm)}),jt.set("cool",function(){return p.scaleSequential(p.interpolateCool)}),jt.set("rainbow",function(){return p.scaleSequential(p.interpolateRainbow)}),jt.set("cubehelix",function(){return p.scaleSequential(p.interpolateCubehelixDefault)}),gt.colorScale=function(){var t=this.getModel("color"),e=jt.get(t.scale);if(!e)throw new Error("Unknown scale "+t.scale);return e()};var qt=function(t,e){return t.require("clusterize.js@0.17.6").then(function(t){return $(t)})},_t=function(t){return t},Mt={over:!0,small:!0,bordered:!0,loadingClass:"table-info",loadingTextClass:"text-center"},zt=function(t,e){var n=t.model.style;n.$update(i({},Mt,e)),n.tableClass="table table-responsive",n.striped&&(n.tableClass+=" table-striped"),n.over&&(n.tableClass+=" table-hover"),n.bordered&&(n.tableClass+=" table-bordered"),n.small&&(n.tableClass+=" table-sm")},At={bootstrap:zt,clusterize:qt,paginate:_t},Tt=i({},bt,{model:function(){return{header:!0,columns:[],loadingData:!1,style:{tableClass:null,headerClass:null,headerRowClass:null,loadingClass:"loading",loadingTextClass:null}}},build:function(t){var e=this,i=this.model,n=t.plugins||[];if(this.records={},this.data=[],this.template='<table d3-class="[style.tableClass, loadingData ? \'loading\' : null]">\n<thead d3-class="style.headerClass">\n<tr d3-class="style.headerRowClass">\n  <th d3-for="col in columns"\n        d3-html="col.label"\n        d3-if="!col.hidden">\n  </th>\n</tr>\n<tr d3-if="loadingData" d3-class="style.loadingClass">\n    <td d3-attr-colspan="columns.length">\n        <p d3-class="style.loadingTextClass">loading data</p>\n    </td>\n</tr>\n</thead>\n<tbody></tbody>\n</table>',i.columns=Ot(t),o.isArray(n)){var r=[],a=void 0;if(n.forEach(function(t){o.isString(t)&&(t={name:t}),At[t.name]?(a=At[t.name](e,t),o.isPromise(a)&&r.push(a)):ut("Unknown table plugin "+t.name)}),r.length)return Promise.all(r).then(function(){return e.viewElement(e.template)})}else ut("plugins should be an array");return this.viewElement(this.template)},mounted:function(){var t=this,e=this.model;if(e.dataLoader){var i=e.dataLoader.load(e.columns);i&&(e.loadingData=!0,i.then(function(i){e.loadingData=!1,N(t,i)},function(t){return e.loadingData=!1,t}))}}}),Ft={tabularPlugins:At,install:function(t){t.addComponent("dashboard",Ct),t.addComponent("visual",Pt),t.addComponent("tabular",Tt)}},Rt=function(t){return function(){return t}},Wt=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},$t=function(t){return t},Nt=function(){function t(t){var a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,h=void 0,f=void 0,p=void 0,g=void 0,v=t.length,m=.5*r/n,w=new Array(v),y=new Array(v);for(a=0;a<v;++a)w[y[a]=a]=+e(t[a],a,t);for(y.sort(function(t,e){return Wt(w[t],w[e])}),f=w[y[0]],d=null,a=v-1;a>=0;--a)l=[],null===d?l.push([0,0]):(h=d+p,c=h*m,l.push([-c,h]),l.push([c,h])),o=y[a],s=v-a-1,u=w[o]/f,g=Math.sqrt(u),d=n*g,p=a?i(g,s):0,h=d-p,c=h*m,l.push([c,h]),l.push([-c,h]),w[o]={index:s,value:w[o],fraction:u,points:l};return w}var e=$t,i=Rt(0),n=1,r=1;return t.value=function(i){return arguments.length?(e="function"==typeof i?i:Rt(+i),t):e},t.base=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(n=e,t):n},t.pad=function(e){return arguments.length?(i="function"==typeof e?e:Rt(+e),t):i},t},Bt=pt("barchart",{options:{orientation:"vertical",stack:!1},doDraw:function(){}}),Vt=pt("linechart",{options:{lineWidth:1,colorOpacity:1,curve:"cardinalOpen"},doDraw:function(){var t=this.series,e=this.aesthetics,i=this.plot.path(this).data([t]),n=this.scaled(this.mapping.x,this.plot,t),r=this.scaled(this.mapping.y,this.plot,t),a=g.line().x(n).y(r).curve(B(this,e.curve)),o=this.plot.dim(e.lineWidth),s=this.plot.transition("update");i.enter().append("path").attr("class","line").attr("fill","none").attr("stroke",e.color).attr("stroke-opacity",0).attr("stroke-width",o).merge(i).transition(s).attr("stroke",e.color).attr("stroke-opacity",e.colorOpacity).attr("stroke-width",o).attr("d",a),i.exit().remove()}}),Ht=Math.PI,Lt=Ht/180,Ut={fill:function(t){function e(t){return i(t.index)}var i=this.colorScale().domain([0,t.length-1]);return e.scale=i,e},proportionalData:function(t,e){return t.dimension(function(t){return t[e]}).top(1/0)}},It=pt("piechart",Ut,{options:{field:"data",startAngle:0,endAngle:360,sort:!1,innerRadius:0,padAngle:0,cornerRadius:0,color:null,lineWidth:1,colorOpacity:1,fillOpacity:1},doDraw:function(t){var e=this.getModel(),i=this.getModel("color"),n=e.field,r=this.boundingBox(),a=Math.min(r.innerWidth,r.innerHeight)/2,o=b(e.innerRadius,a),s=g.pie().padAngle(Lt*e.padAngle).startAngle(Lt*e.startAngle).endAngle(Lt*e.endAngle).value(function(t){return t[n]}),l=g.arc().innerRadius(o).outerRadius(a).cornerRadius(e.cornerRadius),u=this.paper(),d=s(this.proportionalData(t,n)),c=this.fill(d),h=u.size(r).group().attr("transform",this.translate(r.total.left+r.innerWidth/2,r.total.top+r.innerHeight/2)).selectAll(".slice").data(d);h.enter().append("path").attr("class","slice").attr("stroke",i.stroke).attr("stroke-opacity",0).attr("fill-opacity",0).attr("fill",c).attr("stroke-width",e.lineWidth).merge(h).attr("stroke",i.stroke).attr("stroke-opacity",i.strokeOpacity).attr("d",l).attr("fill",c).attr("fill-opacity",i.fillOpacity),h.exit().remove()}}),Yt=function(t){return{draw:function(e){t.forEach(function(t,i){i?e.lineTo(t[0],t[1]):e.moveTo(t[0],t[1])}),e.closePath()}}},Xt=pt("pyramidchart",Ut,{options:{field:"data",pad:0,lineWidth:1},doDraw:function(t){var e=this.getModel(),i=e.field,n=this.getModel("color"),r=this.boundingBox(),a=b(e.pad,Math.min(r.innerWidth,r.innerHeight)),o=Nt().base(r.innerWidth).height(r.innerHeight).pad(a).value(function(t){return t[i]}),s=o(this.proportionalData(t,i)),l=g.symbol().type(function(t){return Yt(t.points)}).size(1),u=this.fill(s),d=this.paper(),c=d.size(r).group().attr("transform",this.translate(r.total.left+r.innerWidth/2,r.total.top)).selectAll(".segment").data(s);c.enter().append("path").attr("class","segment").attr("stroke",n.stroke).attr("stroke-opacity",0).attr("fill-opacity",0).attr("fill",u).attr("stroke-width",e.lineWidth).merge(c).attr("stroke",n.stroke).attr("stroke-opacity",n.strokeOpacity).attr("d",l).attr("fill",u).attr("fill-opacity",n.fillOpacity),c.exit().remove()}}),Gt=pt("treemap",{requires:["d3-treemap"]});t.visualizeVersion="0.0.10",t.randomPath=L,t.DataStore=y,t.dataSources=tt,t.dataLocale=nt,t.visuals=ot,t.Visual=ft,t.crateChart=pt,t.cratePaper=z,t.Svg=wt,t.visualComponents=Ft,t.colorScales=jt,t.pyramid=Nt,t.BarChart=Bt,t.LineChart=Vt,t.PieChart=It,t.PyramidChart=Xt,t.Treemap=Gt,Object.defineProperty(t,"__esModule",{value:!0})});
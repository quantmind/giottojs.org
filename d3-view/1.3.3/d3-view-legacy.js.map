{"version":3,"file":"d3-view-legacy.js","sources":["../src/components/isolated.js","../src/components/index.js","../src/utils/htmlprops.js","../src/directives/attr.js","../src/directives/html.js","../src/utils/debounce.js","../src/utils/sel.js","../src/directives/types/type.js","../src/directives/types/input.js","../src/directives/types/checkbox.js","../src/directives/types/select.js","../src/directives/types/index.js","../src/directives/value.js","../src/directives/on.js","../src/require.js","../src/utils/providers.js","../src/utils/warn.js","../src/utils/template.js","../src/utils/http.js","../src/utils/select.js","../src/core/base.js","../src/core/transition.js","../src/parser/jsep.js","../src/parser/eval.js","../src/parser/expression.js","../src/utils/uid.js","../src/model/dispatch.js","../src/model/as.js","../src/model/string.js","../src/utils/object.js","../src/model/set.js","../src/model/on.js","../src/model/update.js","../src/model/off.js","../src/utils/slice.js","../src/model/change.js","../src/model/isreactive.js","../src/model/owner.js","../src/model/data.js","../src/model/emit.js","../src/model/array.js","../src/model/main.js","../src/core/events.js","../src/core/directive.js","../src/utils/maybeJson.js","../src/utils/map.js","../src/utils/data.js","../src/core/cache.js","../src/core/component.js","../src/core/getdirs.js","../src/core/selection.js","../src/core/view.js","../src/directives/for.js","../src/directives/if.js","../src/directives/prop.js","../src/directives/index.js","../src/core/clean.js","../src/main.js","../src/utils/dom.js","../src/forms/field.js","../src/forms/utils.js","../src/forms/field-set.js","../src/forms/validators.js","../src/forms/field-input.js","../src/forms/field-textarea.js","../src/forms/field-select.js","../src/forms/field-submit.js","../src/forms/responses.js","../src/forms/actions.js","../src/forms/form.js","../src/forms/plugin.js","../src/forms/bootstrap/label.js","../src/forms/bootstrap/form-group.js","../src/forms/bootstrap/input-group.js","../src/forms/bootstrap/check.js","../src/forms/bootstrap/submit.js","../src/forms/bootstrap/plugin.js","../src/utils/slugify.js"],"sourcesContent":["//\n// An isolated component\n//\n// Use this component to create a component with an isolated model\nexport default {\n    props: {\n        tag: 'div'\n    },\n\n    render (props, attrs, htmlEl) {\n        var sel = this.createElement(props.tag);\n        return sel\n                .attr('id', attrs.id)\n                .attr('class', attrs.class)\n                .html(htmlEl.innerHTML);\n    },\n\n    createModel (data) {\n        var model = this.parent.model.$new(data);\n        model.$$view = this;\n        model.$$name = this.name;\n        return model;\n    }\n};\n","import isolated from './isolated';\n\nexport default {\n    isolated\n};\n","export default new Map([\n    ['disabled', 'disabled'],\n    ['readonly', 'readOnly'],\n    ['required', 'required']\n]);\n","import {isArray} from 'd3-let';\n\nimport properties from '../utils/htmlprops';\n\n\n//\n//  d3-attr-<attr> directive\n//  ==============================\n//\n//  Create a one-way binding between a model and a HTML element attribute\n//\nexport default {\n\n    create (expression) {\n        if (!this.arg) return this.logWarn('Cannot bind to empty attribute. Specify :<attr-name>');\n        return expression;\n    },\n\n    refresh (model, value) {\n        if (this.arg === 'class') return this.refreshClass(value);\n        if (isArray(value)) return this.logWarn(`Cannot apply array to attribute ${this.arg}`);\n        var prop = properties.get(this.arg);\n        if (prop) this.sel.property(prop, value || false);\n        else this.sel.attr(this.arg, value || null);\n    },\n\n    refreshClass (value) {\n        var sel = this.sel;\n\n        if (!isArray(value)) value = [value];\n\n        if (this.oldValue)\n            this.oldValue.forEach(entry => {\n                if (entry)\n                    sel.classed(entry, false);\n            });\n\n        this.oldValue = value.map(entry => {\n            var exist = true;\n            if (isArray(entry)) {\n                exist = entry[1];\n                entry = entry[0];\n            }\n            if (entry)\n                sel.classed(entry, exist);\n            return entry;\n        });\n    }\n\n};\n","import {isString, isNumber} from 'd3-let';\n//\n//  d3-html\n//  =============\n//  attach html or text to the innerHtml property and mount components if required\n//\n//  Usage:\n//      <div id=\"foo\" d3-html=\"output\"></div>\nexport default {\n\n    refresh (model, html) {\n        if (isNumber(html)) html = ''+html;\n        if (isString(html)) {\n            var dir = this,\n                sel = this.sel,\n                transition = this.passes ? this.transition(sel) : null;\n            if (transition) {\n                transition.style('opacity', 0).on('end', () => {\n                    sel.html(html);\n                    dir.selectChildren().mount();\n                    dir.transition(sel).style('opacity', 1);\n                });\n            } else {\n                sel.html(html);\n                this.selectChildren().mount();\n            }\n        }\n    }\n};\n","import {timeout} from 'd3-timer';\n\n//\n// Evaluate a callback (optional) with given delay (optional)\n//\n// if delay is not given or 0, the callback is evaluated at the next tick\n// of the event loop.\n// Calling this method multiple times in the same event loop tick produces\n// always the initial promise\nexport default function (callback, delay) {\n    let promise = null,\n        self, args;\n\n    function debounce () {\n        self = this;\n        args = arguments;\n        if (promise !== null) return promise;\n\n        promise = new Promise((resolve, reject) => {\n\n            timeout(() => {\n                promise = null;\n                try {\n                    resolve(callback ? callback.apply(self, args) : undefined);\n                } catch (err) {\n                    reject(err);\n                }\n            }, delay);\n        });\n\n        return promise;\n    }\n\n    debounce.promise = function () {\n        return promise;\n    };\n\n    return debounce;\n}\n","import {select} from 'd3-selection';\n\n\nexport default function (o) {\n\n    Object.defineProperty(o, 'sel', {\n        get () {\n            return select(this.el);\n        }\n    });\n\n    return o;\n}\n","import {assign} from 'd3-let';\n\nimport debounce from '../../utils/debounce';\nimport sel from '../../utils/sel';\n\n\nconst base = {\n\n    on (model, attrName) {\n        var refresh = refreshFunction(this, model, attrName),\n            uid = model.uid;\n\n        // DOM => model binding\n        this.sel\n            .on(`input.${uid}`, refresh)\n            .on(`change.${uid}`, refresh);\n    },\n\n    off (model) {\n        var uid = model.uid;\n        this.sel\n            .on(`input.${uid}`, null)\n            .on(`change.${uid}`, null);\n    },\n\n    value (value) {\n        if (arguments.length)\n            this.sel.property('value', value);\n        else\n            return this.sel.property('value');\n    }\n};\n\n\nexport function createValueType (proto) {\n\n    function ValueType(el) {\n        sel(this).el = el;\n    }\n\n    ValueType.prototype = assign({}, base, proto);\n\n    return ValueType;\n}\n\n\nexport function refreshFunction (vType, model, attrName) {\n\n    return debounce(() => {\n        model.$set(attrName, vType.value());\n    });\n}\n","import {createValueType} from './type';\n\nexport default createValueType();\n","import {createValueType} from './type';\n\nexport default createValueType({\n    value (value) {\n        if (arguments.length)\n            this.sel.property('checked', value);\n        else\n            return this.sel.property('checked');\n    }\n});\n","import {isArray} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport {createValueType} from './type';\n\n\nexport default createValueType({\n\n    value (value) {\n        var sel = this.sel,\n            options = sel.selectAll('option'),\n            values = value,\n            opt;\n\n        if (arguments.length) {\n            if (!isArray(values)) values = [value || ''];\n            options.each(function () {\n                opt = select(this);\n                value = opt.attr('value') || '';\n                opt.property('selected', values.indexOf(value) > -1);\n            });\n        } else {\n            values = [];\n            options.each(function () {\n                opt = select(this);\n                if (opt.property('selected'))\n                    values.push(opt.attr('value') || '');\n            });\n            if (sel.property('multiple')) return values;\n            else return values[0] || '';\n        }\n    }\n});\n","import input from './input';\nimport checkbox from './checkbox';\nimport select from './select';\n\nexport default {\n    input,\n    textarea: input,\n    select,\n    checkbox\n};\n","import types from './types/index';\n\n//\n//  d3-value directive\n//  ===================\n//\n//  Two-way data binding for HTML elements supporting the value property\nexport default {\n\n    create (expression) {\n        var type = this.sel.attr('type'),\n            tag = this.el.tagName.toLowerCase(),\n            ValueType = types[type] || types[tag];\n\n        if (!ValueType) {\n            this.logWarn(`Cannot apply d3-value directive to ${tag}`);\n            return;\n        }\n        this.tag = new ValueType(this.el);\n        return expression;\n    },\n\n    mount (model) {\n        var expr = this.expression;\n        // TODO: relax this constraint\n        if (expr.parsed.type !== expr.codes.IDENTIFIER) {\n            this.logWarn(`support identifiers only, got \"${expr.parsed.type}\": ${this.expression}`);\n            return;\n        }\n        var attrName = this.expression.expr;\n        //\n        // Create the model reactive attribute\n        model.$set(attrName, this.tag.value());\n        // register dom event\n        this.tag.on(model, attrName);\n        return model;\n    },\n\n    refresh (model, value) {\n        this.tag.value(value);\n    },\n\n    destroy (model) {\n        this.tag.off(model);\n    }\n};\n","//\n//  d3-on directive\n//\n//  A one-way data binding from dom events to model properties/methods\n//  Event listeners are on the DOM, not on the model\nexport default {\n\n    mount (model) {\n        var eventName = this.arg || 'click',\n            expr = this.expression;\n\n        // DOM event => model binding\n        this.on(this.sel, `${eventName}.${this.uid}`, event => {\n            var md = model.$child();\n            md.$event = event;\n            expr.eval(md);\n        });\n\n        this.bindDestroy(model);\n        // Does not return the model so that model data binding is not performed\n    },\n\n    destroy () {\n        var eventName = this.arg || 'click';\n        this.on(this.sel, `${eventName}.${this.uid}`, null);\n    }\n};\n","const isAbsolute = new RegExp('^([a-z]+://|//)'),\n    isRelative = new RegExp('^[.]{0,2}/'),\n    hasOwnProperty = Array.prototype.hasOwnProperty;\n\nexport const viewLibs = new Map;\nexport const isAbsoluteUrl = url => isAbsolute.test(url);\n\n\nexport const viewResolve = (name, options) => {\n    var dist = viewLibs.get(name),\n        main = name,\n        path = null,\n        base = typeof location !== 'undefined' ? location : '';\n\n    if (options) {\n        if (typeof options.base === 'string') base = options.base;\n        path = removeFrontSlash(options.path);\n    }\n\n    if (dist) {\n        path = path || dist.main;\n        main = removeBackSlash(dist.origin || main);\n        if (dist.version)\n            main = `${name}@${dist.version}`;\n        if (path)\n            main = `${main}/${path}`;\n    } else if (path) {\n        if (isAbsolute.test(main))\n            main = new URL(main, base).origin;\n        else if (isRelative.test(main))\n            main = '';\n        main = `${main}/${path}`;\n    }\n\n    if (isAbsolute.test(main)) {\n        return main;\n    } else if (isRelative.test(main)) {\n        return new URL(main, base).href;\n    } else {\n        if (!main.length || /^[\\s._]/.test(main) || /\\s$/.test(main)) throw new Error(\"illegal name\");\n        return \"https://unpkg.com/\" + main;\n    }\n};\n\n\nexport const viewRequireFrom = (resolver, root) => {\n    const modules = new Map,\n        queue = [],\n        map = queue.map,\n        some = queue.some,\n        getRoot = () => {\n            return (!root && typeof window !== 'undefined') ? window : root;\n        },\n        requireRelative = base => {\n            return name => {\n                var url = resolver(name + \"\", base), module = modules.get(url);\n                if (!module) modules.set(url, module = new Promise((resolve, reject) => {\n                    root = getRoot();\n                    const script = root.document.createElement(\"script\");\n                    script.onload = function() {\n                        try { resolve(queue.pop()(requireRelative(url))); }\n                        catch (error) { reject(new Error(\"invalid module\")); }\n                        script.remove();\n                    };\n                    script.onerror = function() {\n                        reject(new Error(\"unable to load module\"));\n                        script.remove();\n                    };\n                    script.async = true;\n                    script.src = url;\n                    root.define = define;\n                    root.document.head.appendChild(script);\n                }));\n                return module;\n            };\n        },\n        requireOne = requireRelative(null);\n\n    function require (name) {\n        return arguments.length > 1 ? Promise.all(map.call(arguments, requireOne)).then(merge) : requireOne(name);\n    }\n\n    require.root = getRoot;\n\n    define.amd = {};\n\n    return require;\n\n    function define (name, dependencies, factory) {\n        if (arguments.length < 3) factory = dependencies, dependencies = name;\n        if (arguments.length < 2) factory = dependencies, dependencies = [];\n        queue.push(some.call(dependencies, isexports) ? function(require) {\n            var exports = {};\n            return Promise.all(map.call(dependencies, function(name) {\n                return isexports(name += \"\") ? exports : require(name);\n            })).then(function(dependencies) {\n                factory.apply(null, dependencies);\n                return exports;\n            });\n        } : function(require) {\n            return Promise.all(map.call(dependencies, require)).then(function(dependencies) {\n                return typeof factory === \"function\" ? factory.apply(null, dependencies) : factory;\n            });\n        });\n    }\n};\n\nexport const viewRequire = viewRequireFrom(viewResolve);\n\n// INTERNALS\n\nconst isexports = name => (name + \"\") === \"exports\";\n\n\nconst removeFrontSlash = path => {\n    if (typeof path === 'string' && path.substring(0, 1) === '/') path = path.substring(1);\n    return path;\n};\n\n\nconst removeBackSlash = path => {\n    if (typeof path === 'string' && path.substring(path.length-1) === '/') path = path.substring(0, path.substring);\n    return path;\n};\n\n\nconst merge = modules => {\n    var o = {}, i = -1, n = modules.length, m, k;\n    while (++i < n) {\n        for (k in (m = modules[i])) {\n            if (hasOwnProperty.call(m, k)) {\n                if (m[k] == null) Object.defineProperty(o, k, {get: getter(m, k)});\n                else o[k] = m[k];\n            }\n        }\n    }\n    return o;\n};\n\n\nconst getter = (object, name) => {\n    return () => object[name];\n};\n","import {logger, inBrowser, isFunction, assign} from 'd3-let';\nimport {viewResolve, viewRequire} from '../require';\n\n\nlogger.debug = null;\n\n\nexport default assign({\n    //\n    require: viewRequire,\n    //\n    resolve: viewResolve,\n    //\n    // log messages\n    logger: logger,\n    //\n    // callbacks when page is loaded in browser\n    readyCallbacks: [],\n    // Set/unset debug\n    setDebug (active) {\n        if (!arguments.length || active)\n            this.logger.debug = isFunction(active) ? active : defaultDebug;\n        else\n            this.logger.debug = null;\n    }\n}, function () {\n    if (inBrowser) {\n        return assign({\n            fetch: window.fetch,\n            location: window.location\n        }, window.d3);\n    }\n}());\n\n\nfunction defaultDebug (msg) {\n    this.info(msg);\n}\n","import providers from './providers';\n\nconst prefix = '[d3-view]';\n\n\nexport default msg => {\n    providers.logger.warn(`${prefix} ${msg}`);\n};\n","import {isString} from 'd3-let';\nimport {select} from 'd3-selection';\n\nimport warn from './warn';\nimport providers from './providers';\n\n\nexport const template = (source, context) => {\n    if (isString(source)) {\n        if (context) {\n            var s = compile(source);\n            if (!s) return source;\n            source = s;\n        }\n        else\n            return source;\n    }\n    return source(context);\n};\n\n\nexport const htmlElement = (source, context, ownerDocument) => {\n    ownerDocument = ownerDocument || document;\n    var el = select(ownerDocument.createElement('div'));\n    el.html(template(source, context));\n    var children = el.node().children;\n    if (children.length !== 1) warn(`viewElement function should return one root element only, got ${children.length}`);\n    return children[0];\n};\n\n\nconst compile = text => {\n    var compile = providers.compileTemplate;\n    if (compile) return compile(text);\n    warn('No compileTemplate function available in viewProviders, cannot render template');\n};\n","\n\nexport function HttpResponse (response, data) {\n    this.response = response;\n    this.data = data;\n    this.status = response.status;\n    this.headers = response.headers;\n    this.description = response.statusText;\n}\n\n\nexport function HttpError (response, data, description) {\n    this.response = response;\n    this.data = data;\n    this.status = response.status;\n    this.headers = response.headers;\n    this.description = description || response.statusText;\n}\n\n\nexport function jsonResponse (response) {\n    var ct = (response.headers.get('content-type') || '').split(';')[0];\n    if (ct === 'application/json')\n        return response.json().then(data => new HttpResponse(response, data));\n    else {\n        var msg = response.status < 300 ? `Expected \"application/json\" content type, got \"${ct}\"` : null;\n        throw new HttpError(response, null, msg);\n    }\n}\n\n\nexport function textResponse (response) {\n    if (response.status < 300)\n        return response.text().then(data => new HttpResponse(response, data));\n    else {\n        throw new HttpError(response);\n    }\n}\n\nHttpError.prototype = Error.prototype;\n","import {isFunction} from 'd3-let';\nimport {select} from 'd3-selection';\n\n\nexport default el => (el && !isFunction(el.size)) ? select(el) : el;\n","import {select, selectAll, event} from 'd3-selection';\n\nimport providers from '../utils/providers';\nimport {htmlElement, template} from '../utils/template';\nimport {jsonResponse, textResponse} from '../utils/http';\nimport asSelect from '../utils/select';\nimport {viewResolve, viewRequireFrom} from '../require';\n\n//\n//  Base d3-view Object\n//  =====================\n//\nexport default {\n    // available once mounted\n    // this is the browser window.document unless we are mounting on jsdom\n    ownerDocument: null,\n    //\n    // d3-view object\n    isd3: true,\n    //\n    providers: providers,\n    //\n    // Create a view element, same as createElement but compile it\n    viewElement (source, context, ownerDocument) {\n        return htmlElement(source, context, ownerDocument || this.ownerDocument);\n    },\n    //\n    select (selector) {\n        if (typeof selector === \"string\")\n            return select(this.ownerDocument || document).select(selector);\n        return select(selector);\n    },\n    //\n    selectAll (selector) {\n        if (typeof selector === \"string\")\n            return select(this.ownerDocument || document).selectAll(selector);\n        return selectAll(selector);\n    },\n    //\n    createElement (tag) {\n        const doc = this.ownerDocument || document;\n        return select(doc.createElement(tag));\n    },\n    // Shortcut for fetch function in providers\n    fetch (url, options) {\n        var fetch = providers.fetch;\n        return arguments.length == 1 ? fetch(url) : fetch(url, options);\n    },\n    //\n    fetchText (url, ...x) {\n        return this.fetch(url, ...x).then(textResponse);\n    },\n    //\n    json (url, ...x) {\n        return this.fetch(url, ...x).then(jsonResponse);\n    },\n    //\n    // render a template from a url\n    renderFromUrl (url, context, asElement=true) {\n        var cache = this.cache;\n        if (cache.has(url))\n            return Promise.resolve(render(cache.get(url), context, asElement));\n        return this.fetchText(url).then(response => {\n            cache.set(url, response.data);\n            return render(response.data, context, asElement);\n        });\n    },\n    //\n    // render from a distribution name. Use d3-require resolve method to find the url\n    renderFromDist (dist, path, context, asElement=true) {\n        var resolve = providers.resolve;\n        return this.renderFromUrl(resolve(dist, {path: path}), context, asElement);\n    },\n    //\n    on (el, name, callback) {\n        el = asSelect(el);\n        if (callback === null) return el.on(name, null);\n        else el.on(name, () => callback(event));\n    },\n    //\n    selectChildren (el) {\n        if (!arguments.length) el = this.el;\n        return this.selectAll(Array.prototype.slice.call(el.children));\n    },\n    //\n    domEvent () {\n        return event;\n    },\n    //\n    logError (err) {\n        if (err.stack) providers.logger.error(err);\n        else providers.logger.error(`[${this.name}] ${err}`);\n        return this;\n    },\n    //\n    logWarn (msg) {\n        providers.logger.warn(`[${this.name}] ${msg}`);\n        return this;\n    },\n    //\n    logInfo (msg) {\n        providers.logger.info(`[${this.name}] ${msg}`);\n        return this;\n    },\n    //\n    logDebug (msg) {\n        if (providers.logger.debug)\n            providers.logger.debug(`[${this.name}] ${msg}`);\n        return this;\n    },\n\n    require () {\n        const root = this.ownerDocument.defaultView;\n        if (!root.d3) root.d3 = {};\n        let require = root.d3.require;\n        if (!require) {\n            if (this.providers.require.root() === root) require = this.providers.require;\n            else require = viewRequireFrom(viewResolve, root);\n            root.d3.require = require;\n        }\n        return require.apply(undefined, arguments);\n    }\n};\n\n\nfunction render (text, context, asElement) {\n    return asElement ? htmlElement(text, context) : template(text, context);\n}\n","import {assign, isFunction} from 'd3-let';\n\nimport providers from '../utils/providers';\nimport base from './base';\n\n\nproviders.transition = {\n    duration: 0\n};\n\n\nexport default assign(base, {\n    //\n    // return a transition object if possible\n    transition (sel) {\n        if (!arguments.length) sel = this.sel;\n        var duration = this.transitionDuration(sel);\n        if (duration > 0) return sel.transition(this.uid).duration(duration);\n    },\n\n    transitionDuration (sel) {\n        if (!arguments.length) sel = this.sel;\n        if (sel && isFunction(sel.transition) && sel.size()) {\n            var duration = sel.attr('data-transition-duration');\n            return +(duration === null ? providers.transition.duration : duration);\n        }\n        return 0;\n    }\n});\n","// Code originally from https://github.com/soney/jsep\n// Copyright (c) 2013 Stephen Oney, http://jsep.from.so/\n// Code modified and adapted to work with d3-view\n\n// This is the full set of types that any JSEP node can be.\n// Store them here to save space when minified\nexport const code = {\n    COMPOUND: 'Compound',\n    IDENTIFIER: 'Identifier',\n    MEMBER_EXP: 'MemberExpression',\n    LITERAL: 'Literal',\n    THIS_EXP: 'ThisExpression',\n    CALL_EXP: 'CallExpression',\n    UNARY_EXP: 'UnaryExpression',\n    BINARY_EXP: 'BinaryExpression',\n    LOGICAL_EXP: 'LogicalExpression',\n    CONDITIONAL_EXP: 'ConditionalExpression',\n    ARRAY_EXP: 'ArrayExpression'\n};\n\nvar PERIOD_CODE = 46, // '.'\n    COMMA_CODE  = 44, // ','\n    SQUOTE_CODE = 39, // single quote\n    DQUOTE_CODE = 34, // double quotes\n    OPAREN_CODE = 40, // (\n    CPAREN_CODE = 41, // )\n    OBRACK_CODE = 91, // [\n    CBRACK_CODE = 93, // ]\n    QUMARK_CODE = 63, // ?\n    SEMCOL_CODE = 59, // ;\n    COLON_CODE  = 58, // :\n\n    throwError = function(message, index) {\n        var error = new Error(message + ' at character ' + index);\n        error.index = index;\n        error.description = message;\n        throw error;\n    },\n\n// Operations\n// ----------\n\n// Set `t` to `true` to save space (when minified, not gzipped)\n    t = true,\n// Use a quickly-accessible map to store all of the unary operators\n// Values are set to `true` (it really doesn't matter)\n    unary_ops = {'-': t, '!': t, '~': t, '+': t},\n// Also use a map for the binary operations but set their values to their\n// binary precedence for quick reference:\n// see [Order of operations](http://en.wikipedia.org/wiki/Order_of_operations#Programming_language)\n    binary_ops = {\n        '||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\n        '==': 6, '!=': 6, '===': 6, '!==': 6,\n        '<': 7,  '>': 7,  '<=': 7,  '>=': 7,\n        '<<':8,  '>>': 8, '>>>': 8,\n        '+': 9, '-': 9,\n        '*': 10, '/': 10, '%': 10\n    },\n// Get return the longest key length of any object\n    getMaxKeyLen = function(obj) {\n        var max_len = 0, len;\n        for(var key in obj) {\n            if((len = key.length) > max_len && obj.hasOwnProperty(key)) {\n                max_len = len;\n            }\n        }\n        return max_len;\n    },\n    max_unop_len = getMaxKeyLen(unary_ops),\n    max_binop_len = getMaxKeyLen(binary_ops),\n// Literals\n// ----------\n// Store the values to return for the various literals we may encounter\n    literals = {\n        'true': true,\n        'false': false,\n        'null': null\n    },\n// Except for `this`, which is special. This could be changed to something like `'self'` as well\n    this_str = 'this',\n// Returns the precedence of a binary operator or `0` if it isn't a binary operator\n    binaryPrecedence = function(op_val) {\n        return binary_ops[op_val] || 0;\n    },\n// Utility function (gets called from multiple places)\n// Also note that `a && b` and `a || b` are *logical* expressions, not binary expressions\n    createBinaryExpression = function (operator, left, right) {\n        var type = (operator === '||' || operator === '&&') ? code.LOGICAL_EXP : code.BINARY_EXP;\n        return {\n            type: type,\n            operator: operator,\n            left: left,\n            right: right\n        };\n    },\n    // `ch` is a character code in the next three functions\n    isDecimalDigit = function(ch) {\n        return (ch >= 48 && ch <= 57); // 0...9\n    },\n    isIdentifierStart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n    isIdentifierPart = function(ch) {\n        return (ch === 36) || (ch === 95) || // `$` and `_`\n                (ch >= 65 && ch <= 90) || // A...Z\n                (ch >= 97 && ch <= 122) || // a...z\n                (ch >= 48 && ch <= 57) || // 0...9\n                (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\n    },\n\n    // Parsing\n    // -------\n    // `expr` is a string with the passed in expression\n    jsep = function(expr) {\n        // `index` stores the character number we are currently at while `length` is a constant\n        // All of the gobbles below will modify `index` as we move along\n        var index = 0,\n            charAtFunc = expr.charAt,\n            charCodeAtFunc = expr.charCodeAt,\n            exprI = function(i) { return charAtFunc.call(expr, i); },\n            exprICode = function(i) { return charCodeAtFunc.call(expr, i); },\n            length = expr.length,\n\n            // Push `index` up to the next non-space character\n            gobbleSpaces = function() {\n                var ch = exprICode(index);\n                // space or tab\n                while(ch === 32 || ch === 9) {\n                    ch = exprICode(++index);\n                }\n            },\n\n            // The main parsing function. Much of this code is dedicated to ternary expressions\n            gobbleExpression = function() {\n                var test = gobbleBinaryExpression(),\n                    consequent, alternate;\n                gobbleSpaces();\n                if(exprICode(index) === QUMARK_CODE) {\n                    // Ternary expression: test ? consequent : alternate\n                    index++;\n                    consequent = gobbleExpression();\n                    if(!consequent) {\n                        throwError('Expected expression', index);\n                    }\n                    gobbleSpaces();\n                    if(exprICode(index) === COLON_CODE) {\n                        index++;\n                        alternate = gobbleExpression();\n                        if(!alternate) {\n                            throwError('Expected expression', index);\n                        }\n                        return {\n                            type: code.CONDITIONAL_EXP,\n                            test: test,\n                            consequent: consequent,\n                            alternate: alternate\n                        };\n                    } else {\n                        throwError('Expected :', index);\n                    }\n                } else {\n                    return test;\n                }\n            },\n\n            // Search for the operation portion of the string (e.g. `+`, `===`)\n            // Start by taking the longest possible binary operations (3 characters: `===`, `!==`, `>>>`)\n            // and move down from 3 to 2 to 1 character until a matching binary operation is found\n            // then, return that binary operation\n            gobbleBinaryOp = function() {\n                gobbleSpaces();\n                var to_check = expr.substr(index, max_binop_len), tc_len = to_check.length;\n                while(tc_len > 0) {\n                    if(binary_ops.hasOwnProperty(to_check)) {\n                        index += tc_len;\n                        return to_check;\n                    }\n                    to_check = to_check.substr(0, --tc_len);\n                }\n                return false;\n            },\n\n            // This function is responsible for gobbling an individual expression,\n            // e.g. `1`, `1+2`, `a+(b*2)-Math.sqrt(2)`\n            gobbleBinaryExpression = function() {\n                var node, biop, prec, stack, biop_info, left, right, i;\n\n                // First, try to get the leftmost thing\n                // Then, check to see if there's a binary operator operating on that leftmost thing\n                left = gobbleToken();\n                biop = gobbleBinaryOp();\n\n                // If there wasn't a binary operator, just return the leftmost node\n                if(!biop) {\n                    return left;\n                }\n\n                // Otherwise, we need to start a stack to properly place the binary operations in their\n                // precedence structure\n                biop_info = { value: biop, prec: binaryPrecedence(biop)};\n\n                right = gobbleToken();\n                if(!right) {\n                    throwError(\"Expected expression after \" + biop, index);\n                }\n                stack = [left, biop_info, right];\n\n                // Properly deal with precedence using [recursive descent](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)\n                while((biop = gobbleBinaryOp())) {\n                    prec = binaryPrecedence(biop);\n\n                    if(prec === 0) {\n                        break;\n                    }\n                    biop_info = { value: biop, prec: prec };\n\n                    // Reduce: make a binary expression from the three topmost entries.\n                    while ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\n                        right = stack.pop();\n                        biop = stack.pop().value;\n                        left = stack.pop();\n                        node = createBinaryExpression(biop, left, right);\n                        stack.push(node);\n                    }\n\n                    node = gobbleToken();\n                    if(!node) {\n                        throwError(\"Expected expression after \" + biop, index);\n                    }\n                    stack.push(biop_info, node);\n                }\n\n                i = stack.length - 1;\n                node = stack[i];\n                while(i > 1) {\n                    node = createBinaryExpression(stack[i - 1].value, stack[i - 2], node);\n                    i -= 2;\n                }\n                return node;\n            },\n\n            // An individual part of a binary expression:\n            // e.g. `foo.bar(baz)`, `1`, `\"abc\"`, `(a % 2)` (because it's in parenthesis)\n            gobbleToken = function() {\n                var ch, to_check, tc_len;\n\n                gobbleSpaces();\n                ch = exprICode(index);\n\n                if(isDecimalDigit(ch) || ch === PERIOD_CODE) {\n                    // Char code 46 is a dot `.` which can start off a numeric literal\n                    return gobbleNumericLiteral();\n                } else if(ch === SQUOTE_CODE || ch === DQUOTE_CODE) {\n                    // Single or double quotes\n                    return gobbleStringLiteral();\n                } else if(isIdentifierStart(ch) || ch === OPAREN_CODE) { // open parenthesis\n                    // `foo`, `bar.baz`\n                    return gobbleVariable();\n                } else if (ch === OBRACK_CODE) {\n                    return gobbleArray();\n                } else {\n                    to_check = expr.substr(index, max_unop_len);\n                    tc_len = to_check.length;\n                    while(tc_len > 0) {\n                        if(unary_ops.hasOwnProperty(to_check)) {\n                            index += tc_len;\n                            return {\n                                type: code.UNARY_EXP,\n                                operator: to_check,\n                                argument: gobbleToken(),\n                                prefix: true\n                            };\n                        }\n                        to_check = to_check.substr(0, --tc_len);\n                    }\n\n                    return false;\n                }\n            },\n            // Parse simple numeric literals: `12`, `3.4`, `.5`. Do this by using a string to\n            // keep track of everything in the numeric literal and then calling `parseFloat` on that string\n            gobbleNumericLiteral = function() {\n                var number = '', ch, chCode;\n                while(isDecimalDigit(exprICode(index))) {\n                    number += exprI(index++);\n                }\n\n                if(exprICode(index) === PERIOD_CODE) { // can start with a decimal marker\n                    number += exprI(index++);\n\n                    while(isDecimalDigit(exprICode(index))) {\n                        number += exprI(index++);\n                    }\n                }\n\n                ch = exprI(index);\n                if(ch === 'e' || ch === 'E') { // exponent marker\n                    number += exprI(index++);\n                    ch = exprI(index);\n                    if(ch === '+' || ch === '-') { // exponent sign\n                        number += exprI(index++);\n                    }\n                    while(isDecimalDigit(exprICode(index))) { //exponent itself\n                        number += exprI(index++);\n                    }\n                    if(!isDecimalDigit(exprICode(index-1)) ) {\n                        throwError('Expected exponent (' + number + exprI(index) + ')', index);\n                    }\n                }\n\n\n                chCode = exprICode(index);\n                // Check to make sure this isn't a variable name that start with a number (123abc)\n                if(isIdentifierStart(chCode)) {\n                    throwError('Variable names cannot start with a number (' +\n                                number + exprI(index) + ')', index);\n                } else if(chCode === PERIOD_CODE) {\n                    throwError('Unexpected period', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: parseFloat(number),\n                    raw: number\n                };\n            },\n\n            // Parses a string literal, staring with single or double quotes with basic support for escape codes\n            // e.g. `\"hello world\"`, `'this is\\nJSEP'`\n            gobbleStringLiteral = function() {\n                var str = '', quote = exprI(index++), closed = false, ch;\n\n                while(index < length) {\n                    ch = exprI(index++);\n                    if(ch === quote) {\n                        closed = true;\n                        break;\n                    } else if(ch === '\\\\') {\n                        // Check for all of the common escape codes\n                        ch = exprI(index++);\n                        switch(ch) {\n                            case 'n': str += '\\n'; break;\n                            case 'r': str += '\\r'; break;\n                            case 't': str += '\\t'; break;\n                            case 'b': str += '\\b'; break;\n                            case 'f': str += '\\f'; break;\n                            case 'v': str += '\\x0B'; break;\n                            default : str += '\\\\' + ch;\n                        }\n                    } else {\n                        str += ch;\n                    }\n                }\n\n                if(!closed) {\n                    throwError('Unclosed quote after \"'+str+'\"', index);\n                }\n\n                return {\n                    type: code.LITERAL,\n                    value: str,\n                    raw: quote + str + quote\n                };\n            },\n\n            // Gobbles only identifiers\n            // e.g.: `foo`, `_value`, `$x1`\n            // Also, this function checks if that identifier is a literal:\n            // (e.g. `true`, `false`, `null`) or `this`\n            gobbleIdentifier = function() {\n                var ch = exprICode(index), start = index, identifier;\n\n                if(isIdentifierStart(ch)) {\n                    index++;\n                } else {\n                    throwError('Unexpected ' + exprI(index), index);\n                }\n\n                while(index < length) {\n                    ch = exprICode(index);\n                    if(isIdentifierPart(ch)) {\n                        index++;\n                    } else {\n                        break;\n                    }\n                }\n                identifier = expr.slice(start, index);\n\n                if(literals.hasOwnProperty(identifier)) {\n                    return {\n                        type: code.LITERAL,\n                        value: literals[identifier],\n                        raw: identifier\n                    };\n                } else if(identifier === this_str) {\n                    return { type: code.THIS_EXP };\n                } else {\n                    return {\n                        type: code.IDENTIFIER,\n                        name: identifier\n                    };\n                }\n            },\n\n            // Gobbles a list of arguments within the context of a function call\n            // or array literal. This function also assumes that the opening character\n            // `(` or `[` has already been gobbled, and gobbles expressions and commas\n            // until the terminator character `)` or `]` is encountered.\n            // e.g. `foo(bar, baz)`, `my_func()`, or `[bar, baz]`\n            gobbleArguments = function(termination) {\n                var ch_i, args = [], node, closed = false;\n                while(index < length) {\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                    if(ch_i === termination) { // done parsing\n                        closed = true;\n                        index++;\n                        break;\n                    } else if (ch_i === COMMA_CODE) { // between expressions\n                        index++;\n                    } else {\n                        node = gobbleExpression();\n                        if(!node || node.type === code.COMPOUND) {\n                            throwError('Expected comma', index);\n                        }\n                        args.push(node);\n                    }\n                }\n                if (!closed) {\n                    throwError('Expected ' + String.fromCharCode(termination), index);\n                }\n                return args;\n            },\n\n            // Gobble a non-literal variable name. This variable name may include properties\n            // e.g. `foo`, `bar.baz`, `foo['bar'].baz`\n            // It also gobbles function calls:\n            // e.g. `Math.acos(obj.angle)`\n            gobbleVariable = function() {\n                var ch_i, node;\n                ch_i = exprICode(index);\n\n                if(ch_i === OPAREN_CODE) {\n                    node = gobbleGroup();\n                } else {\n                    node = gobbleIdentifier();\n                }\n                gobbleSpaces();\n                ch_i = exprICode(index);\n                while(ch_i === PERIOD_CODE || ch_i === OBRACK_CODE || ch_i === OPAREN_CODE) {\n                    index++;\n                    if(ch_i === PERIOD_CODE) {\n                        gobbleSpaces();\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: false,\n                            object: node,\n                            property: gobbleIdentifier()\n                        };\n                    } else if(ch_i === OBRACK_CODE) {\n                        node = {\n                            type: code.MEMBER_EXP,\n                            computed: true,\n                            object: node,\n                            property: gobbleExpression()\n                        };\n                        gobbleSpaces();\n                        ch_i = exprICode(index);\n                        if(ch_i !== CBRACK_CODE) {\n                            throwError('Unclosed [', index);\n                        }\n                        index++;\n                    } else if(ch_i === OPAREN_CODE) {\n                        // A function call is being made; gobble all the arguments\n                        node = {\n                            type: code.CALL_EXP,\n                            'arguments': gobbleArguments(CPAREN_CODE),\n                            callee: node\n                        };\n                    }\n                    gobbleSpaces();\n                    ch_i = exprICode(index);\n                }\n                return node;\n            },\n\n            // Responsible for parsing a group of things within parentheses `()`\n            // This function assumes that it needs to gobble the opening parenthesis\n            // and then tries to gobble everything within that parenthesis, assuming\n            // that the next thing it should see is the close parenthesis. If not,\n            // then the expression probably doesn't have a `)`\n            gobbleGroup = function() {\n                index++;\n                var node = gobbleExpression();\n                gobbleSpaces();\n                if(exprICode(index) === CPAREN_CODE) {\n                    index++;\n                    return node;\n                } else {\n                    throwError('Unclosed (', index);\n                }\n            },\n\n            // Responsible for parsing Array literals `[1, 2, 3]`\n            // This function assumes that it needs to gobble the opening bracket\n            // and then tries to gobble the expressions as arguments.\n            gobbleArray = function() {\n                index++;\n                return {\n                    type: code.ARRAY_EXP,\n                    elements: gobbleArguments(CBRACK_CODE)\n                };\n            },\n\n            nodes = [], ch_i, node;\n\n        while(index < length) {\n            ch_i = exprICode(index);\n\n            // Expressions can be separated by semicolons, commas, or just inferred without any\n            // separators\n            if(ch_i === SEMCOL_CODE || ch_i === COMMA_CODE) {\n                index++; // ignore separators\n            } else {\n                // Try to gobble each expression individually\n                if((node = gobbleExpression())) {\n                    nodes.push(node);\n                // If we weren't able to find a binary expression and are out of room, then\n                // the expression passed in probably has too much\n                } else if(index < length) {\n                    throwError('Unexpected \"' + exprI(index) + '\"', index);\n                }\n            }\n        }\n\n        // If there's only one expression just try returning the expression\n        if(nodes.length === 1) {\n            return nodes[0];\n        } else {\n            return {\n                type: code.COMPOUND,\n                body: nodes\n            };\n        }\n    };\n\n\n/**\n * @method jsep.addUnaryOp\n * @param {string} op_name The name of the unary op to add\n * @return jsep\n */\njsep.addUnaryOp = function(op_name) {\n    max_unop_len = Math.max(op_name.length, max_unop_len);\n    unary_ops[op_name] = t; return this;\n};\n\n/**\n * @method jsep.addBinaryOp\n * @param {string} op_name The name of the binary op to add\n * @param {number} precedence The precedence of the binary op (can be a float)\n * @return jsep\n */\njsep.addBinaryOp = function(op_name, precedence) {\n    max_binop_len = Math.max(op_name.length, max_binop_len);\n    binary_ops[op_name] = precedence;\n    return this;\n};\n\n/**\n * @method jsep.addLiteral\n * @param {string} literal_name The name of the literal to add\n * @param {*} literal_value The value of the literal\n * @return jsep\n */\njsep.addLiteral = function(literal_name, literal_value) {\n    literals[literal_name] = literal_value;\n    return this;\n};\n\n/**\n * @method jsep.removeUnaryOp\n * @param {string} op_name The name of the unary op to remove\n * @return jsep\n */\njsep.removeUnaryOp = function(op_name) {\n    delete unary_ops[op_name];\n    if(op_name.length === max_unop_len) {\n        max_unop_len = getMaxKeyLen(unary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeBinaryOp\n * @param {string} op_name The name of the binary op to remove\n * @return jsep\n */\njsep.removeBinaryOp = function(op_name) {\n    delete binary_ops[op_name];\n    if(op_name.length === max_binop_len) {\n        max_binop_len = getMaxKeyLen(binary_ops);\n    }\n    return this;\n};\n\n/**\n * @method jsep.removeLiteral\n * @param {string} literal_name The name of the literal to remove\n * @return jsep\n */\njsep.removeLiteral = function(literal_name) {\n    delete literals[literal_name];\n    return this;\n};\n\n\nexport default jsep;\n","import {code} from './jsep';\n\n\nexport function evaluate (self, expr, nested) {\n    switch(expr.type) {\n        case code.IDENTIFIER: return self[expr.name];\n        case code.LITERAL: return nested ? self[expr.value] : expr.value;\n        case code.ARRAY_EXP: return expr.elements.map((elem) => {return evaluate(self, elem);});\n        case code.LOGICAL_EXP:\n        case code.BINARY_EXP: return binaryExp(expr.operator, evaluate(self, expr.left), evaluate(self, expr.right));\n        case code.CALL_EXP: return callExpression(self, expr.callee, expr.arguments);\n        case code.MEMBER_EXP: return evaluate(evaluate(self, expr.object), expr.property, true);\n        case code.CONDITIONAL_EXP: return evaluate(self, expr.test) ? evaluate(self, expr.consequent) : evaluate(self, expr.alternate);\n        case code.UNARY_EXP: return unaryExp(expr.operator, evaluate(self, expr.argument));\n    }\n}\n\n// extract identifiers\nexport function identifiers (expr, all) {\n    if (arguments.length === 1) all = new Set;\n    switch(expr.type) {\n        case code.IDENTIFIER:\n            all.add(expr.name); break;\n        case code.ARRAY_EXP:\n            expr.elements.forEach(elem => identifiers(elem, all));\n            break;\n        case code.LOGICAL_EXP:\n        case code.BINARY_EXP:\n            identifiers(expr.left, all);\n            identifiers(expr.right, all);\n            break;\n        case code.CALL_EXP:\n            identifiers(expr.callee, all);\n            expr.arguments.forEach(elem => identifiers(elem, all));\n            break;\n        case code.MEMBER_EXP:\n            all.add(fullName(expr));\n            break;\n        case code.CONDITIONAL_EXP:\n            identifiers(expr.test, all);\n            identifiers(expr.consequent, all);\n            evaluate(expr.alternate, all);\n            break;\n        case code.UNARY_EXP:\n            identifiers(expr.argument, all);\n            break;\n    }\n    return all;\n}\n\n\nfunction callExpression (self, callee, args) {\n    var func;\n\n    args = args.map((arg) => {\n        return evaluate(self, arg);\n    });\n\n    if (callee.type !== code.IDENTIFIER) {\n        self = evaluate(self, callee.object);\n        callee = callee.property;\n    }\n\n    func = self[callee.name];\n    if (!func)\n        throw new EvalError(`callable \"${callee.name}\" not found in context`);\n    return func.apply(self, args);\n}\n\n\nfunction unaryExp (op, arg) {\n    if (!unaryFunctions[op])\n        unaryFunctions[op] = new Function(\"arg\", `return ${op} arg`);\n    return unaryFunctions[op](arg);\n}\n\n\nfunction binaryExp(op, a, b) {\n    if (!binaryFunctions[op])\n        binaryFunctions[op] = new Function(\"a\", \"b\", `return a ${op} b`);\n    return binaryFunctions[op](a, b);\n}\n\n\nfunction fullName (expr) {\n    if (expr.type === code.IDENTIFIER) return expr.name;\n    else return `${fullName(expr.object)}.${expr.property.name}`;\n}\n\nconst unaryFunctions = {};\nconst binaryFunctions = {};\n","// tiny javascript expression parser\nimport jsep, {code} from './jsep';\nimport {evaluate, identifiers} from './eval';\nimport warn from '../utils/warn';\n\n\nconst proto = {\n\n    eval (model) {\n        return evaluate(model, this.parsed);\n    },\n\n    safeEval (model) {\n        try {\n            return evaluate(model, this.parsed);\n        } catch (msg) {\n            warn(`Could not evaluate <<${this.expr}>> expression: ${msg}`);\n        }\n    },\n\n    // evaluate identifiers from a model\n    identifiers () {\n        return identifiers(this.parsed);\n    }\n};\n\n\nfunction Expression (expr) {\n    this.codes = code;\n    this.expr = expr;\n    this.parsed = jsep(expr);\n}\n\nExpression.prototype = proto;\n\n\nexport default function (expr) {\n    return new Expression(expr);\n}\n","let UID = 0;\nconst prefix = 'd3v';\n\n// Add a unique identifier to an object\nexport default function (o) {\n    var uid = prefix + (++UID);\n\n    if (arguments.length) {\n        Object.defineProperty(o, 'uid', {\n            get: function () {\n                return uid;\n            }\n        });\n\n        return o;\n    } else\n        return uid;\n}\n","import {dispatch} from 'd3-dispatch';\n\nimport debounce from '../utils/debounce';\n\n\nexport default function () {\n    var events = dispatch('change'),\n        triggered = 0;\n\n    return {\n        on (typename, callback) {\n            if (arguments.length < 2)\n                return events.on(typename);\n            events.on(typename, callback);\n            return this;\n        },\n        trigger: debounce(function () {\n            events.apply('change', this, arguments);\n            triggered +=1;\n        }),\n        triggered () {\n            return triggered;\n        }\n    };\n}\n","import uid from '../utils/uid';\nimport ddispatch from './dispatch';\n\n//\n// Initialise a model\nexport default function asModel (model, initials, parent, isolated) {\n    var events = new Map,\n        Child = null;\n\n    // event handler for any change in the model\n    events.set('', ddispatch());\n\n    Object.defineProperties(uid(model), {\n        $events: {\n            get () {\n                return events;\n            }\n        },\n        parent: {\n            get () {\n                return parent;\n            }\n        },\n        isolated: {\n            get () {\n                return isolated;\n            }\n        }\n    });\n    model.$child = $child;\n    model.$update(initials);\n\n    function $child (o) {\n        if (Child === null) Child = createChildConstructor(model);\n        return new Child(o);\n    }\n}\n\nfunction createChildConstructor (model) {\n\n    function Child (initials) {\n        asModel(this, initials, model, false);\n    }\n\n    Child.prototype = model;\n    return Child;\n}\n","const modelStr = \"[object d3Model]\";\n\n\nexport default function () {\n    return modelStr;\n}\n","// Check if a value is a vanilla javascript object\nexport default value => value && value.constructor === Object;\n","import {isFunction, isArray, isObject} from 'd3-let';\n\nimport warn from '../utils/warn';\nimport providers from '../utils/providers';\nimport isVanillaObject from '../utils/object';\nimport ddispatch from './dispatch';\n\n\n//  $set a reactive attribute for a Model\n//\n//  Set the value of an attribute in the model\n//  If the attribute is not already reactive make it as such.\n//\nexport default function (key, value) {\n    // property not reactive - make it as such\n    if (!this.$events.get(key)) reactive(this, key, value);\n    else this[key] = value;\n}\n\n\nfunction isModel (value) {\n    return isObject(value) && value.toString() === '[object d3Model]';\n}\n\n\nfunction reactive (model, key, value) {\n    var lazy;\n\n    model.$events.set(key, ddispatch());\n\n    Object.defineProperty(model, key, property());\n\n    // Create a new model if value is an object\n    value = typeValue(value);\n    // Trigger the callback once for initialization\n    model.$change(key);\n\n    function update (newValue) {\n        if (lazy) newValue = lazy.get.call(model);\n        if (newValue === value) return;\n        // trigger lazy callbacks\n        //\n        // Fire model events\n        if (providers.logger.debug) {\n            var modelName = model.$$name || 'model';\n            providers.logger.debug(`[d3-model] updating ${modelName}.${key}`);\n        }\n        model.$change(key, value).$change();\n        value = typeValue (newValue, value);\n    }\n\n    function property () {\n        var prop = {\n                get: function () {\n                    return value;\n                }\n            };\n\n        if (isFunction(value)) value = {get: value};\n\n        // calculated attribute\n        if (isVanillaObject(value) && isFunction(value.get)) {\n            lazy = value;\n            value = lazy.get.call(model);\n\n            if (lazy.reactOn)\n                lazy.reactOn.forEach((name) => {\n                    model.$on(`${name}.${key}`, update);\n                });\n            else\n                warn(`reactive lazy property ${key} does not specify 'reactOn' list or properties`);\n\n            if (isFunction(lazy.set)) prop.set = lazy.set;\n        } else\n            prop.set = update;\n\n        return prop;\n    }\n\n    function typeValue (newValue, oldValue) {\n        if (newValue === oldValue)\n            return oldValue;\n        else if (isArray(newValue))\n            return arrayValue(newValue, oldValue);\n        else if (isModel(oldValue))\n            return modelValue(newValue, oldValue);\n        else\n            return isVanillaObject(newValue) ? model.$new(newValue) : newValue;\n    }\n\n    function arrayValue (newValue, oldValue) {\n        if (isModel(oldValue)) oldValue.$off();\n        if (!isArray(oldValue)) oldValue = [];\n        for (let i=0; i<newValue.length; ++i)\n            newValue[i] = typeValue(newValue[i], oldValue[i]);\n        return newValue;\n    }\n\n    function modelValue (newValue, oldValue) {\n        if (isVanillaObject(newValue)) {\n            oldValue.$update(newValue);\n            return oldValue;\n        } else {\n            oldValue.$off();\n            return typeValue(newValue);\n        }\n    }\n}\n","import {isFunction} from 'd3-let';\n\nimport warn from '../utils/warn';\n\n\n// Add change callback to a model reactive attribute\nexport default function (name, callback) {\n\n    // When no name is provided, wait for changes on this model - no its parents\n    if (arguments.length === 1 && isFunction(name)) {\n        callback = name;\n        name = '';\n    }\n\n    var bits = name.split('.'),\n        key = bits[0],\n        event = getEvent(this, key);\n\n    if (!event) return warn(`Cannot bind to \"${key}\" - no such reactive property`);\n\n    // event from a parent model, add model uid to distinguish it from other child callbacks\n    if (!this.$events.get(key)) bits.push(this.uid);\n\n    bits[0] = 'change';\n    return event.on(bits.join('.'), callback);\n}\n\n\nfunction getEvent(model, name) {\n    var event = model.$events.get(name);\n    if (!event && model.parent) return getEvent(model.parent, name);\n    return event;\n}\n","import warn from '../utils/warn';\n\n// Update a model with reactive model data\nexport default function (data, replace) {\n    if (data) {\n        replace = arguments.length === 2 ? replace : true;\n        for (var key in data) {\n            if (replace || this[key] === undefined) {\n                if (key.substring(0, 1) === '$') {\n                    if (this.constructor.prototype[key]) warn(`Cannot set attribute method ${key}, it is protected`);\n                    else this[key] = data[key];\n                } else\n                    this.$set(key, data[key]);\n            }\n        }\n    }\n    return this;\n}\n","// remove event handlers\nexport default function (attr) {\n    if (attr === undefined)\n        this.$events.forEach(event => removeEvent(event));\n    else {\n        var bits = attr.split('.'),\n            type = bits.splice(0, 1)[0],\n            event = this.$events.get(type);\n        if (event) removeEvent(event, bits.join('.'));\n    }\n}\n\n\nfunction removeEvent (event, name) {\n    if (name) event.on(`change.${name}`, null);\n    else event.on('change', null);\n}\n","export default function (obj, idx=0) {\n    return Array.prototype.slice.call(obj, idx);\n}\n","import warn from '../utils/warn';\nimport slice from '../utils/slice';\n\n\n// trigger change event on a model reactive attribute\nexport default function (attribute) {\n    var name = arguments.length ? attribute : '',\n        event = this.$events.get(name),\n        args = slice(arguments, 1);\n    if (event) event.trigger.apply(this, args);\n    else if (!this.isolated) this.parent.$change(name);\n    else warn(`attribute '${name}' is not a reactive property this model`);\n    return this;\n}\n","//\n//check if an attribute is a reactive attribute for the model (or its prototypical parent)\nexport default function (attr) {\n    if (!this.$events.has(attr)) {\n        if (!this.parent || this.isolated) return false;\n        return this.parent.$isReactive(attr);\n    }\n    return true;\n}\n","//\n//  Return the model owning the reactive attribute attr\nexport default function (attr) {\n    if (!this.$events.has(attr)) {\n        if (!this.parent || this.isolated) return;\n        return this.parent.$owner(attr);\n    }\n    return this;\n}\n","export default function () {\n    var model = this,\n        data = {},\n        keys = Array.from(this.$events.keys()).concat(Object.keys(this)),\n        value;\n\n    keys.forEach(key => {\n        if (key) {\n            value = getValue(model[key]);\n            if (value !== undefined) data[key] = value;\n        }\n    });\n    return data;\n}\n\n\nfunction getValue (value) {\n    if (typeof value === 'function') return;\n    if (value && typeof value.$data === 'function') return value.$data();\n    return value;\n}\n","import {isFunction} from 'd3-let';\n\n//\n//  Emit a custom event Name up the chain of parent models\nexport default function (eventName, data) {\n    var name = '$' + eventName;\n    propagate(this, name, data, this);\n    return this;\n}\n\n\nfunction propagate (model, name, data, originModel) {\n    if (!model) return;\n    if (model.hasOwnProperty(name) && isFunction(model[name])) {\n        if (model[name](data, originModel) === false) return;\n    }\n    propagate(model.parent, name, data, originModel);\n}\n","export function $push (attr, value) {\n    var array = this[attr].slice();\n    array.push(value);\n    this[attr] = array;\n    return this;\n}\n\nexport function $splice (attr, idx, count) {\n    var array = this[attr].slice();\n    if (arguments.length == 2) array.splice(idx);\n    else if (arguments.length == 3) array.splice(idx, count);\n    this[attr] = array;\n    return this;\n}\n","import asModel from './as';\nimport toString from './string';\nimport $set from './set';\nimport $on from './on';\nimport $update from './update';\nimport $off from './off';\nimport $change from './change';\nimport $isReactive from './isreactive';\nimport $owner from './owner';\nimport $data from './data';\nimport $emit from './emit';\nimport {$push, $splice} from './array';\n\n//\n//  Model class\n//\n//  The model is at the core of d3-view reactive data component\nfunction Model (initials, parent) {\n    asModel(this, initials, parent, true);\n}\n\nexport default function model (initials) {\n    return new Model(initials);\n}\n\nmodel.prototype = Model.prototype = {\n    constructor: Model,\n    // Public API methods\n    toString,\n    $on,\n    $change,\n    $emit,\n    $update,\n    $set,\n    $new,\n    $off,\n    $isReactive,\n    $owner,\n    $data,\n    $push,\n    $splice\n};\n\nObject.defineProperties(Model.prototype, {\n    root: {\n        get () {\n            return this.parent ? this.parent.root : this;\n        }\n    },\n    isolatedRoot: {\n        get () {\n            return !this.isolated && this.parent ? this.parent.isolatedRoot : this;\n        }\n    }\n});\n\n\nfunction $new (initials) {\n    return new Model(initials, this);\n}\n","import {dispatch} from 'd3-dispatch';\n\n\nexport default dispatch(\n    'message',\n    'component-created',\n    'component-mount',\n    'component-mounted',\n    'component-error',\n    'directive-refresh'\n);\n","import {isFunction, isObject, assign} from 'd3-let';\n\nimport viewExpression from '../parser/expression';\nimport viewModel from '../model/main';\nimport viewEvents from './events';\nimport uid from '../utils/uid';\nimport sel from '../utils/sel';\nimport base from './transition';\n\n//\n// Directive Prototype\n//\n// Directives are special attributes with the d3- prefix.\n// Directive attribute values are expected to be binding expressions.\n// A directives job is to reactively apply special behavior to the DOM\n// when the value of its expression changes.\n//\n// A directive can implement one or more of the directive methods:\n//\n//  * create\n//  * mount\n//  * refresh\n//  * destroy\n//\nconst prototype = {\n\n    // hooks\n    create (expression) {\n        return expression;\n    },\n\n    // pre mount\n    preMount () {\n\n    },\n\n    mount (model) {\n        return model;\n    },\n\n    refresh () {\n\n    },\n\n    destroy () {\n\n    },\n\n    removeAttribute () {\n        this.el.removeAttribute(this.name);\n    },\n\n    // Execute directive\n    execute (model) {\n        if (!this.active) return;\n        this.removeAttribute();\n        this.identifiers = [];\n        model = this.mount(model);\n        // If model returned, bind the element to its properties\n        if (model) this.bindModel(model);\n    },\n\n    bindModel (model) {\n        var dir = this,\n            error = false,\n            refresh = function () {\n                let value = dir.expression ? dir.expression.eval(model) : dir.data;\n                dir.refresh(model, value);\n                dir.passes++;\n                viewEvents.call('directive-refresh', undefined, dir, model, value);\n            };\n        //\n        // get the cache instance\n        dir.cache = model.$$view.cache;\n\n        // Bind expression identifiers with model\n        let bits, target, attr, i;\n        if (dir.data) {\n            dir.data = model.$new(dir.data);\n            dir.identifiers.push({\n                model: dir.data,\n                attr: ''\n            });\n        } else if (!this.expression) {\n            dir.identifiers.push({\n                model: model,\n                attr: ''\n            });\n        } else {\n            var modelEvents = new Map;\n            this.expression.identifiers().forEach(identifier => {\n                bits = identifier.split('.');\n                target = model;\n                attr = null;\n\n                for (i=0; i<bits.length-1; ++i) {\n                    target = target[bits[i]];\n                    if (!isObject(target)) {\n                        attr = bits.slice(0, i+1).join('.');\n                        dir.logError(`\"${attr}\" is not an object, cannot bind to \"${identifier}\" identifier`);\n                        error = true;\n                        break;\n                    }\n                }\n\n                // process attribute\n                if (attr === null) {\n                    if (!(target instanceof viewModel)) {\n                        dir.logError(`${identifier} is not a reactive model. Cannot bind to it`);\n                        error = true;\n                    } else\n                        addTarget(modelEvents, target, bits[bits.length-1]);\n                }\n            });\n\n            // register with model reactive properties\n            modelEvents.forEach(target => {\n                // if we are listening to all event simply bind to the model changes\n                if (target.events.has(''))\n                    dir.identifiers.push({\n                        model: target.model,\n                        attr: ''\n                    });\n                else\n                    target.events.forEach(attr => {\n                        dir.identifiers.push({\n                            model: target.model,\n                            attr: attr\n                        });\n                    });\n            });\n        }\n\n        if (error) return;\n\n        this.identifiers.forEach(identifier => {\n            var event = `${identifier.attr}.${dir.uid}`;\n            identifier.model.$on(event, refresh);\n        });\n\n        this.bindDestroy(model);\n\n        refresh();\n    },\n\n    bindDestroy (model) {\n        var dir = this,\n            destroy = this.destroy;\n        // bind destroy to the model\n        dir.destroy = function () {\n            dir.identifiers.forEach(identifier => {\n                identifier.model.$off(`${identifier.attr}.${dir.uid}`);\n            });\n            if (dir.data) dir.data.$off();\n            try {\n                destroy.call(dir, model);\n            } finally {\n                model.$emit('destroyDirective', dir);\n            }\n        };\n    }\n};\n\n// Directive constructor\nexport default function (obj) {\n\n    function Directive (el, attr, arg) {\n        this.el = el;\n        this.ownerDocument = el.ownerDocument;\n        this.name = attr.name;\n        this.arg = arg;\n        this.passes = 0;\n        var expr = sel(uid(this)).create(attr.value);\n        if (expr) {\n            try {\n                this.expression = viewExpression(expr);\n            } catch (e) {\n                try {\n                    this.data = JSON.parse(expr);\n                } catch (m) {\n                    this.logError(e);\n                }\n            }\n        }\n        if (!this.active)\n            this.active = Boolean(!attr.value || this.expression || this.data);\n    }\n\n    Directive.prototype = assign({}, base, prototype, obj);\n\n    function directive (el, attr, arg) {\n        return new Directive(el, attr, arg);\n    }\n\n    directive.prototype = Directive.prototype;\n    return directive;\n}\n\n\nfunction addTarget (modelEvents, model, attr) {\n    var value = arguments.length === 3 ? model[attr] : undefined;\n    //\n    // a method of the model, event is at model level\n    if (isFunction(value) || arguments.length === 2)\n        getTarget(modelEvents, model).events.add('');\n    // value is another model, events at both target model level and value model level\n    else if (value instanceof viewModel) {\n        addTarget(modelEvents, value);\n        model = model.$owner(attr);\n        if (model) getTarget(modelEvents, model).events.add('');\n    } else {\n        // make sure attr is a reactive property of model\n        model = model.$owner(attr) || model;\n        if (!model.$isReactive(attr)) model.$set(attr, value);\n        getTarget(modelEvents, model).events.add(attr);\n    }\n}\n\nfunction getTarget(modelEvents, model) {\n    var target = modelEvents.get(model.uid);\n    if (!target) {\n        target = {\n            model: model,\n            events: new Set\n        };\n        modelEvents.set(model.uid, target);\n    }\n    return target;\n}\n","import {isString} from 'd3-let';\n\nexport default value => {\n    if (isString(value)) {\n        try {\n            return JSON.parse(value);\n        } catch (msg) {\n            return value;\n        }\n    }\n    return value;\n};\n","export default obj => {\n    if (obj && obj.constructor === Object) obj = Object.entries(obj);\n    return new Map(obj);\n};\n","import {pop} from 'd3-let';\n\nconst DATAPREFIX = 'data-';\n\n\nexport default attrs => {\n    var keys = Object.keys(attrs);\n    let p;\n    return keys.reduce((o, key) => {\n        if (key.substring(0, 5) === DATAPREFIX) {\n            p = key.split('-').splice(1).reduce((s, key, idx) => {\n                s += idx ? key.substring(0, 1).toUpperCase() + key.substring(1) : key;\n                return s;\n            }, '');\n            o[p] = pop(attrs, key);\n        }\n        return o;\n    }, {});\n};\n","export default function Cache () {\n    this.active = true;\n    this.data = new Map;\n}\n\n\nCache.prototype = {\n    constructor: Cache,\n    set (key, value) {\n        if (this.active) this.data.set(key, value);\n    },\n    get (key) {\n        if (this.active) return this.data.get(key);\n    },\n    has (key) {\n        if (this.active) return this.data.has(key);\n        return false;\n    },\n    clear () {\n        return this.data.clear();\n    },\n    delete (key) {\n        return this.data.delete(key);\n    }\n};\n","import {isFunction, isArray, isObject, isString, pop, assign} from 'd3-let';\nimport {dispatch} from 'd3-dispatch';\n\nimport base from './transition';\nimport createDirective from './directive';\nimport asSelect from '../utils/select';\nimport maybeJson from '../utils/maybeJson';\nimport sel from '../utils/sel';\nimport map from '../utils/map';\nimport dataAttributes from '../utils/data';\nimport viewEvents from './events';\nimport viewModel from '../model/main';\nimport Cache from './cache';\n\n\n// prototype for both views and components\nconst protoComponent = {\n    //\n    // hooks\n    render () {},\n    childrenMounted () {},\n    mounted () {},\n    destroy () {},\n    //\n    // Mount the component into an element\n    // If this component is already mounted, or it is mounting, it does nothing\n    mount (el, data, onMounted) {\n        if (mounted(this)) return;\n        // mark the element as a component\n        el.__d3_component__ = true;\n        this.ownerDocument = el.ownerDocument;\n        // fire mount events\n        this.events.call('mount', undefined, this, el, data);\n        // remove mounted events\n        this.events.on('mount', null);\n        // fire global mount event\n        viewEvents.call('component-mount', undefined, this, el, data);\n        var sel = this.select(el),\n            directives = sel.directives(),\n            dattrs = directives ? directives.attrs : attributes(el),\n            parentModel = this.parent.model,\n            datum = sel.datum();\n\n        let props = this.props,\n            model = this.model,\n            modelData = assign(dataAttributes(dattrs), datum, data),\n            key, value;\n\n        data = assign({}, datum, data);\n\n        // override model keys from data object and element attributes\n        for (key in model) {\n            value = pop(modelData, key);\n            if (value !== undefined) {\n                if (isString(value)) {\n                    if (parentModel.$isReactive(value)) {\n                        if (value !== key) model[key] = reactiveParentProperty(key, value);\n                        else delete model[key];\n                    } else model[key] = maybeJson(value);\n                } else model[key] = value;\n            }\n        }\n\n        // Create model\n        this.model = model = this.createModel(model);\n        if (isArray(props)) props = props.reduce((o, key) => {\n            o[key] = undefined;\n            return o;\n        }, {});\n\n        if (isObject(props)) {\n            Object.keys(props).forEach(key => {\n                value = maybeJson(modelData[key] === undefined ? (data[key] === undefined ? dattrs[key] : data[key]) : modelData[key]);\n                if (value !== undefined) {\n                    // data point to a model attribute\n                    if (isString(value) && model[value]) value = model[value];\n                    data[key] = value;\n                } else if (props[key] !== undefined) {\n                    data[key] = props[key];\n                }\n            });\n        }\n        // Add once only directive values\n        if (directives) directives.once(model, data);\n        //\n        // create the new element from the render function\n        this.props = data;\n\n        let newEl;\n        try {\n            newEl = this.render(data, dattrs, el);\n        } catch (error) {\n            newEl = Promise.reject(error);\n        }\n        if (!newEl || !newEl.then) newEl = Promise.resolve(newEl);\n        return newEl\n            .then(element => compile(this, el, element, onMounted))\n            .catch (exc => error(this, el, exc));\n    },\n\n    createModel (data) {\n        var model = this.parent ? this.parent.model.$child(data) : viewModel(data);\n        model.$$view = this;\n        model.$$name = this.name;\n        return model;\n    }\n};\n\n// factory of View and Component constructors\nexport function createComponent (name, o, coreDirectives, coreComponents) {\n    if (isFunction(o)) o = {render: o};\n\n    var obj = assign({}, o),\n        classComponents = extendComponents(new Map, pop(obj, 'components')),\n        classDirectives = extendDirectives(new Map, pop(obj, 'directives')),\n        model = pop(obj, 'model');\n\n    function Component (options) {\n        var parent = pop(options, 'parent'),\n            components = map(parent ? parent.components : coreComponents),\n            directives = map(parent ? parent.directives : coreDirectives),\n            events = dispatch('message', 'mount', 'mounted'),\n            cache = parent ? null : new Cache;\n\n        classComponents.forEach((comp, key) => {\n            components.set(key, comp);\n        });\n        classDirectives.forEach((comp, key) => {\n            directives.set(key, comp);\n        });\n        extendComponents(components, pop(options, 'components'));\n        extendDirectives(directives, pop(options, 'directives'));\n\n        Object.defineProperties(this, {\n            name : {\n                get () {\n                    return name;\n                }\n            },\n            components: {\n                get: function () {\n                    return components;\n                }\n            },\n            directives: {\n                get: function () {\n                    return directives;\n                }\n            },\n            parent: {\n                get: function () {\n                    return parent;\n                }\n            },\n            root: {\n                get: function () {\n                    return parent ? parent.root : this;\n                }\n            },\n            cache: {\n                get: function () {\n                    return parent ? parent.cache : cache;\n                }\n            },\n            uid: {\n                get: function () {\n                    return this.model.uid;\n                }\n            },\n            events: {\n                get: function () {\n                    return events;\n                }\n            }\n        });\n        this.model = assign({}, isFunction(model) ? model() : model, pop(options, 'model'));\n        viewEvents.call('component-created', undefined, this);\n    }\n\n    Component.prototype = assign({}, base, protoComponent, obj);\n\n    function component (options) {\n        return new Component(options);\n    }\n\n    component.prototype = Component.prototype;\n\n    return component;\n}\n\n\n// Used by both Component and view\n\nexport function extendComponents (container, components) {\n    map(components).forEach((obj, key) => {\n        container.set(key, createComponent(key, obj, protoComponent));\n    });\n    return container;\n}\n\nexport function extendDirectives (container, directives) {\n    map(directives).forEach((obj, key) => {\n        container.set(key, createDirective(obj));\n    });\n    return container;\n}\n\n//\n//  Finalise the binding between the view and the model\n//  inject the model into the view element\n//  call the mounted hook and can return a Promise\nexport function asView(vm, element, onMounted) {\n\n    Object.defineProperty(sel(vm), 'el', {\n        get: function () {\n            return element;\n        }\n    });\n    // Apply model to element and mount\n    return vm.select(element).view(vm).mount(null, onMounted).then(() => vmMounted(vm, onMounted));\n}\n\nexport function mounted (vm, onMounted) {\n    if (vm.isMounted === undefined) {\n        vm.isMounted = false;\n        return false;\n    }\n    else if (vm.isMounted) {\n        vm.logWarn(`component already mounted`);\n    }\n    else {\n        vm.isMounted = true;\n        // invoke mounted component hook\n        vm.mounted();\n        // invoke onMounted callback if available\n        if (onMounted) onMounted(vm);\n        // last invoke the view mounted events\n        vm.events.call('mounted', undefined, vm);\n        // remove mounted events\n        vm.events.on('mounted', null);\n        // fire global event\n        viewEvents.call('component-mounted', undefined, vm);\n    }\n    return true;\n}\n\n// Internals\n\n//\n//  Component/View mounted\n//  =========================\n//\n//  This function is called when a component/view has all its children added\nfunction vmMounted(vm, onMounted) {\n    var parent = vm.parent;\n    vm.childrenMounted();\n    if (parent && !parent.isMounted)\n        parent.events.on(`mounted.${vm.uid}`, () => {\n            mounted(vm, onMounted);\n        });\n    else\n        mounted(vm, onMounted);\n    return vm;\n}\n\n// Compile a component model\n// This function is called once a component has rendered the component element\nfunction compile (cm, origEl, element, onMounted) {\n    if (isString(element)) {\n        const props = Object.keys(cm.props).length ? cm.props : null;\n        element = cm.viewElement(element, props, origEl.ownerDocument);\n    }\n    if (!element) throw new Error('render() must return a single HTML node. It returned nothing!');\n    element = asSelect(element);\n    if (element.size() !== 1) cm.logWarn('render() must return a single HTML node');\n    element = element.node();\n    //\n    // Insert before the component element\n    origEl.parentNode.insertBefore(element, origEl);\n    // remove the component element\n    cm.select(origEl).remove();\n    //\n    return asView(cm, element, onMounted);\n}\n\n\n// Invoked when a component cm has failed to rander\nfunction error (cm, origEl, exc) {\n    cm.logError(`could not render: ${exc}`);\n    viewEvents.call('component-error', undefined, cm, origEl, exc);\n    return cm;\n}\n\n\nconst attributes = element => {\n    const attrs = {};\n    let attr;\n    for (let i = 0; i < element.attributes.length; ++i) {\n        attr = element.attributes[i];\n        attrs[attr.name] = attr.value;\n    }\n    return attrs;\n};\n\n\nconst reactiveParentProperty = (key, value) => {\n    return {\n        reactOn: [value],\n        get () {\n            return this[value];\n        },\n        set () {\n            this.$$view.logError(`Cannot set \"${key}\" value because it is owned by a parent model`);\n        }\n    };\n};\n","import {select} from 'd3-selection';\n\nimport warn from '../utils/warn';\n\n// No value, it has its own directive\nconst attributes = ['name', 'class', 'disabled', 'readonly', 'required', 'href'];\n\n\nexport default function (element, directives) {\n    var sel = select(element),\n        dirs = sel.directives();\n    if (dirs) return dirs;\n    dirs = new Directives();\n\n    if (!directives) return dirs;\n\n    for (let i = 0; i < element.attributes.length; ++i) {\n        let attr = element.attributes[i],\n            bits = attr.name.split('-'),\n            dirName = bits[0] === 'd3' ? bits[1] : null,\n            arg;\n\n        if (dirName) {\n            arg = bits.slice(2).join('-');\n            if (!arg && attributes.indexOf(dirName) > -1) {\n                arg = dirName;\n                dirName = 'attr';\n            }\n            var directive = directives.get(dirName);\n            if (directive) dirs.add(directive(element, attr, arg));\n            else warn(`${element.tagName} cannot find directive \"${dirName}\". Did you forget to register it?`);\n        }\n        dirs.attrs[attr.name] = attr.value;\n    }\n\n    if (dirs.size()) sel.directives(dirs);\n    return dirs;\n}\n\n\n// Directives container\nfunction Directives () {\n    this.attrs = {};\n    this.all = [];\n}\n\n\nDirectives.prototype = {\n\n    size () {\n        return this.all.length;\n    },\n\n    pop: function (dir) {\n        var index = this.all.indexOf(dir);\n        if (index > -1) {\n            dir.removeAttribute();\n            this.all.splice(index, 1);\n        }\n        return dir;\n    },\n\n    add (dir) {\n        this.all.push(dir);\n    },\n\n    forEach (callback) {\n        this.all.forEach(callback);\n    },\n\n    preMount () {\n        let dir;\n        for (let i=0; i<this.all.length; ++i) {\n            dir = this.all[i];\n            if (dir.preMount()) return this.pop(dir);\n        }\n    },\n\n    execute (model) {\n        if (!this.size()) return;\n        return Promise.all(this.all.map(d => d.execute(model)));\n    },\n\n    once (model, data) {\n        let dir;\n        const all = [];\n        for (let i=0; i<this.all.length; ++i) {\n            dir = this.all[i];\n            if (dir.once) dir.once(model, data);\n            else all.push(dir);\n        }\n        this.all = all;\n    }\n};\n","import {select, selection} from 'd3-selection';\n\nimport getdirs from './getdirs';\nimport slice from '../utils/slice';\nimport warn from '../utils/warn';\n\n\n// Extend selection prototype with new methods\nselection.prototype.mount = mount;\nselection.prototype.view = view;\nselection.prototype.model = model;\nselection.prototype.directives = directives;\n\n\nfunction directives (value) {\n    return arguments.length\n      ? this.property(\"__d3_directives__\", value)\n      : this.node().__d3_directives__;\n}\n\n\nfunction model () {\n    var vm = this.view();\n    return vm ? vm.model : null;\n}\n\n\nfunction view (value) {\n    if (arguments.length) {\n        return this.property(\"__d3_view__\", value);\n    } else {\n        var element = this.node(),\n            view = element ? element.__d3_view__ : null,\n            parent = element ? element.parentNode : null;\n\n        while (parent && !view) {\n            view = parent.__d3_view__;\n            parent = parent.parentNode;\n        }\n        return view;\n    }\n}\n\n//\n// mount function on a d3 selection\n// Use this function to mount the selection\n// This method returns nothing or a promise\nfunction mount (data, onMounted) {\n    var promises = [];\n    this.each(function () {\n        var view = select(this).view();\n        if (view) promises.push(mountElement(this, view, data, onMounted));\n        else warn('Cannot mount, no view object available to mount to');\n    });\n    return Promise.all(promises);\n}\n\n\n// mount an element into a given model\nfunction mountElement (element, vm, data, onMounted) {\n    if (!element || !element.tagName) return;\n\n    var component = vm.components.get(element.tagName.toLowerCase()),\n        directives = getdirs(element, vm.directives),\n        preMount = directives.preMount();\n\n    if (preMount)\n        return preMount.execute(vm.model);\n    else {\n        let promise;\n        if (component)\n            promise = component({parent: vm}).mount(element, data, onMounted);\n        else\n            promise = Promise.all(slice(element.children).map(c => mountElement(c, vm, data, onMounted)));\n\n        return promise.then(() => directives.execute(vm.model));\n    }\n}\n","import {isObject} from 'd3-let';\n\nimport './selection';\nimport {createComponent, mounted, asView} from './component';\nimport viewEvents from './events';\nimport createDirective from './directive';\nimport asSelect from '../utils/select';\n\n//\n// prototype for views\nexport default {\n\n    use (plugin) {\n        if (isObject(plugin)) plugin.install(this);\n        else plugin(this);\n        return this;\n    },\n\n    addComponent (name, obj) {\n        var component = createComponent(name, obj);\n        this.components.set(name, component);\n        return component;\n    },\n\n    addDirective (name, obj) {\n        var directive = createDirective(obj);\n        this.directives.set(name, directive);\n        return directive;\n    },\n\n    mount (el, callback) {\n        if (mounted(this)) return;\n        if (!el) return this.logWarn(`element not defined, pass an identifier or an HTMLElement object`);\n        el = asSelect(el).node();\n        if (!el) return this.logWarn(`element not defined, pass an identifier or an HTMLElement object`);\n        this.ownerDocument = el.ownerDocument;\n        viewEvents.call('component-mount', undefined, this, el);\n        this.model = this.createModel(this.model);\n        return asView(this, el, callback);\n    }\n};\n","import {select} from 'd3-selection';\nimport {isArray} from 'd3-let';\n\nimport {createComponent} from '../core/component';\nimport protoView from '../core/view';\n\n//\n//  d3-for directive\n//  ======================\n//\n//  Repeat a element over an array of items and establish\n//  a one way binding between the array and the Dom\nexport default {\n\n    create (expression) {\n        var bits = [];\n        expression.trim().split(' ').forEach((v) => {\n            v ? bits.push(v) : null;\n        });\n        if (bits.length !== 3 || bits[1] != 'in')\n            return this.logWarn(`directive requires \"item in expression\" template, got \"${expression}\"`);\n        this.itemName = bits[0];\n        this.itemClass = `for${this.uid}`;\n        return bits[2];\n    },\n\n    preMount () {\n        return true;\n    },\n\n    mount (model) {\n        this.creator = this.el;\n        this.el = this.creator.parentNode;\n        // remove the creator from the DOM\n        select(this.creator).remove();\n        if (this.el) return model;\n    },\n\n    refresh (model, items) {\n        if (!isArray(items)) return;\n        let d;\n\n        var creator = this.creator,\n            itemClass = this.itemClass,\n            selector = `.${itemClass}`,\n            itemName = this.itemName,\n            sel = this.sel,\n            allItems = sel.selectAll(selector),\n            entries = allItems.filter(function () {\n                d = this.__d3_view__.model[itemName];\n                return items.indexOf(d) > -1;\n            }).data(items),\n            exits = allItems.filter(function () {\n                d = this.__d3_view__.model[itemName];\n                return items.indexOf(d) === -1;\n            }).classed(itemClass, false),\n            vm = sel.view();\n\n        let forComponent = vm.components.get(creator.tagName.toLowerCase());\n        if (!forComponent) forComponent = createComponent('forView', protoView);\n\n        let x, el, fel, tr;\n\n        (this.transition(exits) || exits).style('opacity', 0).remove();\n\n        // Add all missing entries\n        entries\n            .enter()\n                .append(() => {\n                    el = creator.cloneNode(true);\n                    fel = vm.select(el);\n                    if (vm.transitionDuration(fel) > 0) fel.style('opacity', 0);\n                    return el;\n                })\n                .each(function (d, index) {\n                    x = {index: index};\n                    x[itemName] = d;\n                    forComponent({\n                        model: x,\n                        parent: vm\n                    }).mount(this).then(fv => {\n                        fv.sel.classed(itemClass, true);\n                        // replace the item with a property from the model\n                        // This allow for reactivity when d is an object\n                        items[index] = fv.model[itemName];\n                        tr = fv.transition();\n                        if (tr) tr.style('opacity', 1);\n                    });\n                });\n\n        sel.selectAll(selector)\n            .each(function (d) {\n                // update model itemName property\n                this.__d3_view__.model[itemName] = d;\n            });\n    }\n};\n","//\n//  d3-if\n//  =============\n//\n//  Show or hide an element\n//\nexport default {\n\n    mount (model) {\n        var sel = this.sel;\n        this.display = sel.style('display');\n        this.opacity = +sel.style('opacity') || 1;\n        if (!this.display || this.display === 'none') this.display = 'block';\n        return model;\n    },\n\n    refresh (model, value) {\n        var sel = this.sel,\n            transition = this.passes ? this.transition(sel) : null;\n\n        if (value) sel.style('display', this.display);\n        else if (!transition) sel.style('display', 'none');\n\n        if (transition) {\n            if (value)\n                transition.style('opacity', 1);\n            else\n                transition\n                    .style('opacity', 0)\n                    .on('end', () => sel.style('display', 'none'));\n        } else\n            sel.style('opacity', value ? this.opacity : 0);\n    }\n};\n","//\n//  d3-prop-<attr> directive\n//  ==============================\n//\n//  Create a onece-only binding between a model and an HTML data-<prop> element attribute\n//\nexport default {\n    create (expression) {\n        if (!this.arg) return this.logWarn('Cannot bind to empty attribute. Specify :<attr-name>');\n        return expression;\n    },\n\n    once (model, data) {\n        data[this.arg] = this.expression.safeEval(model);\n    }\n\n};\n","import attr from './attr';\nimport html from './html';\nimport value from './value';\nimport on from './on';\nimport d3For from './for';\nimport d3If from './if';\nimport prop from './prop';\n\n\nexport default {\n    attr,\n    prop,\n    html,\n    value,\n    on,\n    'for': d3For,\n    'if': d3If\n};\n","import {select} from 'd3-selection';\nimport {inBrowser} from 'd3-let';\n\n\nif (inBrowser && window.MutationObserver) {\n    // DOM observer\n    // Check for changes in the DOM that leads to visual actions\n    const observer = new window.MutationObserver(visualManager);\n    observer.observe(document.documentElement, {\n        childList: true,\n        subtree: true\n    });\n}\n\n//\n//  Clears element going out of scope\nfunction visualManager (records) {\n    let sel, nodes, node, vm;\n\n    records.forEach(record => {\n        nodes = record.removedNodes;\n        if (!nodes || !nodes.length) return;\n        vm = record.target ? select(record.target).view() : null;\n\n        for (let i=0; i<nodes.length; ++i) {\n            node = nodes[i];\n            if (!node.querySelectorAll || node.__d3_component__) continue;\n            sel = select(node);\n            if (vm || sel.view()) {\n                sel.selectAll('*').each(destroy);\n                destroy.call(nodes[i]);\n            }\n        }\n    });\n}\n\n\nfunction destroy () {\n    var dirs = this.__d3_directives__,\n        view = this.__d3_view__;\n    if (dirs) {\n        dirs.all.forEach(d => d.destroy());\n        delete this.__d3_directives__;\n    }\n    if (view) {\n        view.destroy();\n        delete this.__d3_view__;\n    }\n}\n","import components from './components/index';\nimport directives from './directives/index';\nimport protoView from './core/view';\nimport {createComponent, extendDirectives, extendComponents} from './core/component';\nimport './core/clean';\n\n// Core Directives\nconst coreDirectives = extendDirectives(new Map, directives);\nconst coreComponents = extendComponents(new Map, components);\n\n// the root view constructor\nexport default function (config) {\n    const viewClass = createComponent('view', protoView, coreDirectives, coreComponents);\n    return viewClass(config);\n}\n","import {timeout} from 'd3-timer';\n\nimport providers from './providers';\n\n\n// Add callback to execute when the DOM is ready\nexport default callback => {\n    providers.readyCallbacks.push(callback);\n    /* istanbul ignore next */\n    if (document.readyState !== 'complete') {\n        document.addEventListener('DOMContentLoaded', _completed);\n        // A fallback to window.onload, that will always work\n        window.addEventListener('load', _completed);\n    }\n    else\n        domReady();\n};\n\n\n/* istanbul ignore next */\nfunction _completed () {\n    document.removeEventListener('DOMContentLoaded', _completed);\n\twindow.removeEventListener('load', _completed);\n    domReady();\n}\n\n\nfunction domReady() {\n    let callback;\n    while (providers.readyCallbacks.length ) {\n        callback = providers.readyCallbacks.shift();\n        timeout(callback);\n    }\n}\n","import {isString, isObject, assign} from 'd3-let';\nimport {select, selectAll} from 'd3-selection';\n\nimport properties from '../utils/htmlprops';\n\n//\n// Mixin for all form elements\nexport const formElement = {\n\n    inputData (el, data) {\n        var model = this.model;\n        if (!data) data = {};\n        data.id = data.id || model.uid;\n        model.data = data;\n        el.attr('id', data.id);\n        if (data.classes) el.classed(data.classes, true);\n        addAttributes(el, model, data.attributes);\n        properties.forEach((prop, key) => {\n            var value = data[key];\n            if (value) {\n                if (isString(value))\n                    el.attr(`d3-attr-${key}`, value);\n                else\n                    el.property(prop, true);\n            }\n        });\n        return data;\n    },\n\n    // wrap the form element with extensions\n    wrap (fieldEl) {\n        var field = this,\n            wrappedEl = fieldEl;\n\n        field.model.$formExtensions.forEach(extension => {\n            wrappedEl = extension(field, wrappedEl, fieldEl) || wrappedEl;\n        });\n\n        return wrappedEl;\n    },\n\n    wrapTemplate (sel, template) {\n        var div = document.createElement('div'),\n            outer = select(div).html(template),\n            slot = outer.select('slot');\n\n        if (!slot.size()) {\n            this.logWarn('template does not provide a slot element');\n            return sel;\n        }\n        var target = select(slot.node().parentNode);\n        sel.nodes().forEach(function (node) {\n            target.insert(() => {return node;}, 'slot');\n        });\n        slot.remove();\n        return selectAll(div.children);\n    },\n};\n\n// A mixin for all form field components\nexport default assign({}, formElement, {\n\n    model: {\n        value: null,\n        error: '',\n        isDirty: null,\n        changed: false,\n        srOnly: false,\n        placeholder: '',\n        showError: {\n            reactOn: ['error', 'isDirty'],\n            get () {\n                if (this.error) return this.isDirty;\n                return false;\n            }\n        },\n        // default validate function does nothing, IMPORTANT!\n        $validate () {}\n    },\n\n    inputData (el, data) {\n        // call parent method\n        data = formElement.inputData.call(this, el, data);\n        if (!data.name)\n            return this.logError('Input field without a name');\n\n        el.attr('name', data.name);\n        data.placeholder = data.placeholder || data.label || data.name;\n        var model = this.model;\n        //\n        // add this model to the form inputs object\n        model.form.inputs[data.name] = model;\n        //\n        // give name to model (for debugging info messages)\n        model.name = data.name;\n        //\n        // bind to the value property (two-way binding when used with d3-value)\n        model.$on('value', () => {\n            // set isDirty to false if first time here, otherwise true\n            if (model.isDirty === null) {\n                model.isDirty = false;\n            } else {\n                model.isDirty = true;\n                model.changed = true;\n            }\n            // trigger a change event in the form\n            // required for form method such as $isValid\n            model.form.$change();\n            model.$emit('formFieldChange', model);\n        });\n        return data;\n    }\n\n});\n\n\nfunction addAttributes(el, model, attributes) {\n    var expr, attr;\n\n    if (!isObject(attributes)) return;\n\n    for (attr in attributes) {\n        expr = attributes[attr];\n        if (isObject(expr)) expr = JSON.stringify(expr);\n        el.attr(attr, expr || '');\n    }\n}\n","import {isArray} from 'd3-let';\n\n\nconst componentsFromType = {\n    text: 'input',\n    email: \"input\",\n    password: 'input',\n    checkbox: 'input',\n    number: 'input',\n    date: 'input',\n    url: 'input',\n    'datetime-local': 'input'\n};\n\n\nexport function formComponent (child) {\n    var type = child.type || 'text';\n    return componentsFromType[type] || type;\n}\n\n\nexport function addChildren (sel) {\n    var children = this.model.data.children;\n    if (children) {\n        if (!isArray(children)) {\n            this.logError(`children should be an array of fields, got ${typeof children}`);\n            return sel;\n        }\n        sel.selectAll('.d3form')\n            .data(children)\n            .enter()\n            .append(formChild)\n            .classed('d3form', true);\n    }\n    return sel;\n}\n\n\nfunction formChild (child) {\n    var component = formComponent(child);\n    return document.createElement(`d3-form-${component}`);\n}\n","import {assign} from 'd3-let';\n\nimport {formElement} from './field';\nimport {addChildren} from './utils';\n\n//\n// Fieldset element\nexport default assign({}, formElement, {\n\n    render (data) {\n        var tag = data ? data.tag || 'fieldset' : 'fieldset',\n            el = this.createElement(tag);\n        data = this.inputData(el, data);\n        return addChildren.call(this, el);\n    }\n\n});\n","import {isString, isObject} from 'd3-let';\n\n\nconst required = {\n\n    set (el, data) {\n        var value = data.required;\n        if (isString(value))\n            el.attr(`d3-required`, value);\n        else\n            el.property('required', value || false);\n    },\n\n    validate (el, value) {\n        if (el.property('required'))\n            if (!value) return 'required';\n        else if (value === '') {\n            // this is valid, no need to continue with the remaining validators\n            return true;\n        }\n    }\n};\n\n\nconst minLength = {\n\n    set (el, data) {\n        var value = data.minLength;\n        if (isString(value))\n            el.attr(`d3-attr-minlength`, value);\n        else if (value !== undefined)\n            el.attr('minlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('minlength');\n        if (l === l && l > 0 && value.length < l)\n            return `too short - ${l} characters or more expected`;\n    }\n};\n\n\nconst maxLength = {\n\n    set (el, data) {\n        var value = data.maxLength;\n        if (isString(value))\n            el.attr(`d3-attr-maxlength`, value);\n        else if (value !== undefined)\n            el.attr('maxlength', value);\n    },\n\n    validate (el, value) {\n        var l = +el.attr('maxlength');\n        if (l === l && l > 0 && value && value.length > l)\n            return `too long - ${l} characters or less expected`;\n    }\n};\n\n\nconst minimum = {\n\n    set (el, data) {\n        var value = data.minimum;\n        if (isString(value))\n            el.attr(`d3-attr-min`, value);\n        else if (value !== undefined)\n            el.attr('min', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value < r[0])\n            return `must be greater or equal ${r[0]}`;\n    }\n};\n\n\nconst maximum = {\n\n    set (el, data) {\n        var value = data.maximum;\n        if (isString(value))\n            el.attr(`d3-attr-max`, value);\n        else if (value !== undefined)\n            el.attr('max', value);\n    },\n\n    validate (el, value) {\n        var r = range(el);\n        if (r && +value > r[1])\n            return `must be less or equal ${r[1]}`;\n    }\n};\n\n// validator singleton\nexport default {\n\n    // get the list of validators\n    // custom is an optional list of custom validators\n    get (custom) {\n        var validators = this.all.slice(0);\n        if (isObject(custom))\n            for (var key in custom)\n                validators.push(customValidator(key, custom[key]));\n        return validators;\n    },\n\n    // add model validators to a form-field\n    set (vm, el) {\n        var model = vm.model;\n        model.validators.forEach((validator) => validator.set(el, model.data));\n        model.$on('value.validate', this.validate);\n        model.$validate = this.validate;\n    },\n\n    validate () {\n        var model = this,\n            vm = model.$$view,\n            validators = model.validators,\n            value = model.value,\n            el = vm.sel.attr('id') === model.data.id ? vm.sel : vm.sel.select(`#${model.data.id}`),\n            validator,\n            msg;\n\n        for (var i=0; i<validators.length; ++i) {\n            validator = validators[i];\n            msg = validator.validate(el, value);\n            if (msg) {\n                if (msg === true) msg = '';\n                break;\n            }\n        }\n\n        model.error = msg || '';\n    },\n\n    all: [\n        required,\n        minLength,\n        maxLength,\n        minimum,\n        maximum\n    ]\n};\n\n\nfunction range (el) {\n    var l0 = el.attr('min'),\n        l1 = el.attr('max');\n    l0 = l0 === null ? -Infinity : +l0;\n    l1 = l1 === null ? Infinity : +l1;\n    return [l0, l1];\n}\n\n\nfunction customValidator (key, method) {\n\n    return {\n        set (el, data) {\n            var value = data[key];\n            if (!value) return;\n        },\n\n        validate (el, value) {\n            return method(el, value);\n        }\n    };\n}\n","import {assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n\nconst checks = ['checkbox', 'radio'];\n\n//\n// Input element\nexport default assign({}, field, {\n\n    render (data) {\n        var el = this.createElement('input');\n        data = this.inputData(el, data);\n\n        el.attr('type', data.type || 'text')\n            .attr('d3-value', 'value');\n\n        if (checks.indexOf(el.attr('type')) === -1)\n            el.attr('placeholder', data.placeholder);\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n","import {assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Textarea element\nexport default assign({}, field, {\n\n    render (data) {\n        var el = this.createElement('textarea');\n        data = this.inputData(el, data);\n        el.attr('placeholder', data.placeholder)\n            .attr('d3-value', 'value');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n\n});\n","import {isArray, assign} from 'd3-let';\n\nimport field from './field';\nimport validators from './validators';\n\n//\n// Select element\nexport default assign({}, field, {\n\n    model: assign({\n        options: [],\n        $optionLabel: optionLabel,\n        $optionValue: optionValue\n    }, field.model),\n\n    render (data) {\n        var el = this.createElement('select');\n        data = this.inputData(el, data);\n        el.attr('d3-value', 'value')\n            .attr('placeholder', data.placeholder)\n            .append('option')\n                .attr('d3-for', 'option in options')\n                .attr('d3-html', '$optionLabel()')\n                .attr('d3-attr-value', '$optionValue()');\n\n        validators.set(this, el);\n        return this.wrap(el);\n    }\n});\n\n\nfunction optionValue () {\n    if (isArray(this.option)) return this.option[0];\n    return this.option;\n}\n\n\nfunction optionLabel () {\n    if (isArray(this.option)) return this.option[1] || this.option[0];\n    return this.option;\n}\n","import {event} from 'd3-selection';\nimport {assign} from 'd3-let';\n\nimport {formElement} from './field';\n\n//\n// Submit element\nexport default assign({}, formElement, {\n\n    render (data) {\n        var tag = data ? data.tag || 'button' : 'button',\n            el = this.createElement(tag);\n\n        data = this.inputData(el, data);\n        var model = this.model;\n        //\n        // model non-reactive attributes\n        model.type = data.type || 'submit';\n        if (data.endpoint) model.endpoint = data.endpoint;\n        //\n        // default submit function\n        model.$submit = () => {\n            if (event && event.defaultPrevented) return;\n            model.actions.submit.call(model, event);\n        };\n        if (!data.submit) data.submit = '$submit()';\n\n        el.attr('type', model.type)\n            .attr('name', model.name)\n            .attr('d3-on-click', data.submit)\n            .html(data.label || 'submit');\n\n        return this.wrap(el);\n    }\n});\n","//\n//  Form Responses\n//  ====================\n//\n//  To add/override responses:\n//\n//  import viewForms from 'd3-view'\n//\n//  viewForms.responses.myresponse = function (data, status, headers) {\n//      ...\n//  }\nexport default {\n    \"default\": defaultResponse,\n    redirect: redirect\n};\n\n\n// The default response emit a formMessage to event to parent models\nfunction defaultResponse (response) {\n    var level = response.status < 300 ? 'info' : (response.status < 500 ? 'warning' : 'error');\n    this.$emit('formMessage', {\n        level: level,\n        data: response.data,\n        response: response\n    });\n}\n\n\nfunction redirect (response) {\n    var location = this.$$view.providers.location;\n    location.href = response.data.redirectTo || '/';\n}\n","import {assign} from 'd3-let';\n\n//\n// Form Actions\nexport default {\n    submit: submit\n};\n\nconst messages = {\n    default: '<strong>Error!</strong> Could not submit form'\n};\n\n\nconst endpointDefauls = {\n    contentType: 'application/json',\n    method: 'POST'\n};\n\n//\n// Submit action\nfunction submit (e) {\n    var submit = this,\n        form = submit.form,\n        view = submit.$$view,\n        endpoint = assign({}, endpointDefauls, submit.endpoint);\n\n    if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    var data = form.$inputData(),\n        options = {};\n\n    if (!endpoint.url) {\n        view.logError('No url, cannot submit form');\n        return;\n    }\n\n    if (endpoint.contentType === 'application/json') {\n        options.headers = {\n            'Content-Type': endpoint.contentType\n        };\n        options.body = JSON.stringify(data);\n    }\n    else {\n        options.body = new FormData();\n        for (var key in data)\n            options.body.append(key, data[key]);\n    }\n\n    // Flag the form as submitted\n    if (!form.$setSubmit()) {\n        // form not valid, don't bother with request\n        form.$setSubmitDone();\n    } else {\n        options.method = endpoint.method;\n        view.json(endpoint.url, options).then(done, done);\n    }\n\n\n    function done (response) {\n        form.$setSubmitDone();\n        if (response.status && response.headers)\n            form.$response(response);\n        else\n            form.$emit('formMessage', {\n                level: 'error',\n                message: messages[response.message] || messages.default,\n            });\n    }\n}\n","import {isString} from 'd3-let';\n\nimport {formElement} from './field';\nimport fieldset from './field-set';\nimport input from './field-input';\nimport textarea from './field-textarea';\nimport select from './field-select';\nimport submit from './field-submit';\nimport responses from './responses';\nimport actions from './actions';\nimport validators from './validators';\nimport {addChildren} from './utils';\n\n\n// Main form component\nexport default {\n\n    // Allow to specify form schema and initial values\n    props: ['schema', 'values'],\n\n    components: {\n        'd3-form-fieldset': fieldset,\n        'd3-form-input': input,\n        'd3-form-textarea': textarea,\n        'd3-form-select': select,\n        'd3-form-submit': submit\n    },\n\n    model: {\n        formSubmitted: false,\n        formPending: false,\n        $isValid (submitting) {\n            let inp,\n                valid = true;\n            for (var key in this.inputs) {\n                inp = this.inputs[key];\n                if (submitting) inp.isDirty = true;\n                inp.$validate();\n                if (inp.error) valid = false;\n            }\n            return valid;\n        },\n        $setSubmit () {\n            this.formSubmitted = true;\n            this.formPending = true;\n            return this.$isValid(true);\n        },\n        $setSubmitDone () {\n            this.formPending = false;\n        },\n        $inputData () {\n            var inputs = this.inputs,\n                data = {},\n                value;\n            for (var key in inputs) {\n                value = inputs[key].value;\n                if (value || input.changed) data[key] = value;\n            }\n            return data;\n        },\n        //\n        // response from a server submit\n        $response (response) {\n            if (response.data) {\n                if (this.data.resultHandler) {\n                    var handler = responses[this.data.resultHandler];\n                    if (!handler) this.$$view.logError(`Could not find ${this.data.resultHandler} result handler`);\n                    else handler.call(this, response);\n                } else {\n                    responses.default.call(this, response);\n                }\n            } else\n                this.$responseError(response);\n        },\n        //\n        //  bad response from server submit\n        $responseError (response) {\n            this.$emit('formMessage', {\n                level: 'error',\n                data: response.data,\n                response: response\n            });\n        }\n    },\n\n    render (data) {\n        var model = this.model,\n            form = this.createElement('form').attr('novalidate', ''),\n            self = this;\n        //\n        model.$formExtensions = this.root.$formExtensions || [];\n        model.inputs = {};\n        model.actions = {};\n        model.form = model; // inject self for children models\n        //\n        var schema = data.schema;\n        if (data.values) schema.values = data.values;\n        if (isString(schema))\n            return this.json(schema).then(response => build(response.data));\n        else return build(schema);\n\n        function build (schema) {\n            schema = formElement.inputData.call(self, form, schema);\n            //\n            // Form validations\n            model.validators = validators.get(schema.validators);\n            //\n            // Form actions\n            for (var key in actions) {\n                var action = schema[key];\n                if (isString(action)) action = self.model.$get(action);\n                model.actions[key] = action || actions[key];\n            }\n            addChildren.call(self, form);\n            return form;\n        }\n    },\n\n    childrenMounted () {\n        var model = this.model,\n            values = model.data.values;\n\n        if (values) Object.keys(values).forEach(key => {\n            var inp = model.inputs[key];\n            if (inp) inp.value = values[key];\n        });\n    }\n};\n","import form from './form';\nimport actions from './actions';\nimport responses from './responses';\n\n\n// Forms plugin\nexport default {\n    install (vm) {\n        vm.addComponent('d3form', form);\n        // list of form Extensions\n        vm.$formExtensions = [];\n    },\n    actions,\n    responses\n};\n","export default function (field, wrappedEl) {\n    var data = field.model.data;\n    return field.wrapTemplate(wrappedEl, labelTpl(data));\n}\n\n\nfunction labelTpl(data) {\n    var label = data.label || data.name;\n\n    return `<label for=${data.id} class=\"control-label\" d3-class=\"[srOnly ? 'sr-only' : null]\">${label}</label>\n<slot></slot>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        size = data.size !== undefined ? data.size : field.model.form.data.size,\n        fc = size ? `form-control form-control-${size}` : 'form-control';\n    fieldEl.classed(fc, true).attr('d3-class',\n        `[${data.required || false} ? \"form-control-required\" : null, showError ? \"form-control-danger\" : null]`\n    );\n    return field.wrapTemplate(wrappedEl, groupTpl(data));\n}\n\n\nfunction groupTpl () {\n    return `<div class=\"form-group\" d3-class='showError ? \"has-danger\" : null'>\n<slot></slot>\n<p d3-if=\"showError\" class=\"text-danger error-block\" d3-html=\"error\"></p>\n</div>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        ig = data['group'];\n    if (!ig) return wrappedEl;\n    var gid = `g${fieldEl.attr('id')}`;\n    fieldEl.attr('aria-describedby', gid);\n    return field.wrapTemplate(wrappedEl, groupTpl(gid, ig));\n}\n\n\nfunction groupTpl(gid, group) {\n    return `<div class=\"input-group\" :class=\"bootstrapStatus()\">\n<span class=\"input-group-addon\" id=\"${gid}\">${group}</span>\n<slot></slot>\n</div>`;\n}\n","export default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data;\n    fieldEl.classed('form-check-input', true);\n    return field.wrapTemplate(wrappedEl, groupTpl(data.label));\n}\n\nfunction groupTpl(label) {\n    return `<div class=\"form-check\">\n<label class=\"form-check-label\">\n<slot></slot>\n${label}\n</label>\n</div>`;\n}\n","const groupTpl = `<div class=\"form-group\">\n<slot></slot>\n</div>`;\n\n\nexport default function (field, wrappedEl, fieldEl) {\n    var data = field.model.data,\n        theme = data.theme || 'primary';\n    fieldEl.classed('btn', true).classed(`btn-${theme}`, true);\n    return field.wrapTemplate(wrappedEl, groupTpl);\n}\n","import label from './label';\nimport formGroup from './form-group';\nimport inputGroup from './input-group';\nimport formCheck from './check';\nimport submit from './submit';\n\n\nconst bootstrap = {\n\n    input: ['inputGroup', 'label', 'formGroup'],\n    checkbox: ['formCheck'],\n    textarea: ['label', 'formGroup'],\n    select: ['label', 'formGroup'],\n    submit: ['submit'],\n    wrappers: {\n        label,\n        formGroup,\n        inputGroup,\n        formCheck,\n        submit\n    }\n};\n\n\n//\n//  Bootstrap plugin\n//  ===================\n//\n//  Simply add a new form extension to wrap form fields\n//\nexport default {\n\n    install (vm) {\n        if (!vm.$formExtensions)\n            return vm.logWarn('form bootstrap requires the form plugin installed first!');\n        vm.$formExtensions.push(wrapBootstrap);\n    }\n};\n\n\nfunction wrapBootstrap(field, wrappedEl, fieldEl) {\n    var wrappers = bootstrap[fieldEl.attr('type')] || bootstrap[fieldEl.node().tagName.toLowerCase()];\n    if (!wrappers) return wrappedEl;\n    let wrap;\n\n    wrappers.forEach(wrapper => {\n        wrap = bootstrap.wrappers[wrapper];\n        if (wrap) wrappedEl = wrap(field, wrappedEl, fieldEl);\n        else field.logWarn(`Could not find form field wrapper ${wrapper}`);\n    });\n\n    return wrappedEl;\n}\n","export default str => {\n    str = str.replace(/^\\s+|\\s+$/g, ''); // trim\n    str = str.toLowerCase();\n\n    // remove accents, swap  for n, etc\n    var from = '/_,:;';\n    var to = 'aaaaeeeeiiiioooouuuunc------';\n    for (var i = 0, l = from.length; i < l; i++) {\n        str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\n    }\n\n    str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\n        .replace(/\\s+/g, '-') // collapse whitespace and replace by -\n        .replace(/-+/g, '-'); // collapse dashes\n\n    return str;\n};\n"],"names":["props","attrs","htmlEl","sel","createElement","tag","attr","id","class","html","innerHTML","data","model","parent","$new","$$view","$$name","name","Map","expression","arg","logWarn","value","refreshClass","isArray","prop","properties","get","property","oldValue","forEach","entry","classed","map","exist","isNumber","isString","dir","transition","passes","style","on","selectChildren","mount","callback","delay","promise","self","args","debounce","arguments","Promise","resolve","reject","apply","undefined","err","o","defineProperty","select","el","base","attrName","refresh","refreshFunction","uid","length","createValueType","proto","ValueType","prototype","assign","vType","$set","options","selectAll","values","opt","each","indexOf","push","input","type","tagName","toLowerCase","types","expr","parsed","codes","IDENTIFIER","off","eventName","md","$child","$event","event","eval","bindDestroy","isAbsolute","RegExp","isRelative","hasOwnProperty","Array","viewLibs","isAbsoluteUrl","test","url","viewResolve","dist","main","path","location","removeFrontSlash","removeBackSlash","origin","version","URL","href","Error","viewRequireFrom","resolver","root","modules","queue","some","getRoot","window","requireRelative","module","set","script","document","onload","pop","error","remove","onerror","async","src","define","head","appendChild","requireOne","require","all","call","then","merge","amd","dependencies","factory","isexports","exports","viewRequire","substring","i","n","m","k","Object","getter","object","logger","debug","active","isFunction","defaultDebug","inBrowser","fetch","d3","msg","info","prefix","warn","template","source","context","s","compile","htmlElement","ownerDocument","children","node","providers","compileTemplate","text","HttpResponse","response","status","headers","description","statusText","HttpError","jsonResponse","ct","split","json","textResponse","size","selector","doc","x","asElement","cache","has","render","fetchText","renderFromUrl","asSelect","slice","stack","defaultView","duration","transitionDuration","code","PERIOD_CODE","COMMA_CODE","SQUOTE_CODE","DQUOTE_CODE","OPAREN_CODE","CPAREN_CODE","OBRACK_CODE","CBRACK_CODE","QUMARK_CODE","SEMCOL_CODE","COLON_CODE","throwError","message","index","t","unary_ops","binary_ops","getMaxKeyLen","obj","max_len","len","key","max_unop_len","max_binop_len","literals","this_str","binaryPrecedence","op_val","createBinaryExpression","operator","left","right","LOGICAL_EXP","BINARY_EXP","isDecimalDigit","ch","isIdentifierStart","String","fromCharCode","isIdentifierPart","jsep","charAtFunc","charAt","charCodeAtFunc","charCodeAt","exprI","exprICode","gobbleSpaces","gobbleExpression","gobbleBinaryExpression","consequent","alternate","CONDITIONAL_EXP","gobbleBinaryOp","to_check","substr","tc_len","biop","prec","biop_info","gobbleToken","gobbleNumericLiteral","gobbleStringLiteral","gobbleVariable","gobbleArray","UNARY_EXP","number","chCode","LITERAL","parseFloat","str","quote","closed","gobbleIdentifier","start","identifier","THIS_EXP","gobbleArguments","termination","ch_i","COMPOUND","gobbleGroup","MEMBER_EXP","CALL_EXP","ARRAY_EXP","nodes","addUnaryOp","op_name","Math","max","addBinaryOp","precedence","addLiteral","literal_name","literal_value","removeUnaryOp","removeBinaryOp","removeLiteral","evaluate","nested","elements","elem","binaryExp","callExpression","callee","unaryExp","argument","identifiers","Set","add","fullName","func","EvalError","op","unaryFunctions","Function","a","b","binaryFunctions","Expression","UID","events","dispatch","triggered","typename","asModel","initials","isolated","Child","ddispatch","defineProperties","$update","createChildConstructor","modelStr","constructor","$events","reactive","isModel","isObject","toString","lazy","typeValue","$change","update","newValue","modelName","isVanillaObject","reactOn","$on","arrayValue","modelValue","$off","bits","getEvent","join","replace","removeEvent","splice","idx","attribute","trigger","$isReactive","$owner","keys","from","concat","getValue","$data","propagate","originModel","$push","array","$splice","count","Model","isolatedRoot","removeAttribute","bindModel","target","modelEvents","logError","viewModel","addTarget","destroy","$emit","Directive","create","viewExpression","e","JSON","parse","Boolean","directive","getTarget","entries","DATAPREFIX","p","reduce","toUpperCase","Cache","clear","delete","protoComponent","onMounted","mounted","__d3_component__","directives","dattrs","attributes","parentModel","datum","modelData","dataAttributes","reactiveParentProperty","maybeJson","createModel","once","newEl","element","catch","exc","createComponent","coreDirectives","coreComponents","classComponents","extendComponents","classDirectives","extendDirectives","Component","components","comp","component","container","createDirective","asView","vm","view","vmMounted","isMounted","childrenMounted","cm","origEl","viewElement","parentNode","insertBefore","dirs","Directives","dirName","preMount","d","execute","selection","__d3_directives__","__d3_view__","promises","mountElement","getdirs","c","plugin","install","trim","v","itemName","itemClass","creator","items","allItems","filter","exits","forComponent","protoView","fel","tr","enter","append","cloneNode","fv","display","opacity","safeEval","d3For","d3If","MutationObserver","observer","visualManager","observe","documentElement","records","record","removedNodes","querySelectorAll","config","viewClass","readyCallbacks","readyState","addEventListener","_completed","domReady","removeEventListener","shift","formElement","classes","fieldEl","field","wrappedEl","$formExtensions","extension","div","outer","slot","insert","isDirty","inputData","placeholder","label","form","inputs","changed","addAttributes","stringify","componentsFromType","formComponent","child","addChildren","formChild","required","minLength","l","maxLength","minimum","r","range","maximum","custom","validators","customValidator","validator","validate","$validate","l0","l1","Infinity","method","checks","wrap","optionLabel","optionValue","option","endpoint","$submit","defaultPrevented","actions","submit","defaultResponse","redirect","level","redirectTo","messages","endpointDefauls","preventDefault","stopPropagation","$inputData","contentType","body","FormData","$setSubmit","$setSubmitDone","done","$response","default","fieldset","textarea","submitting","inp","valid","formSubmitted","formPending","$isValid","resultHandler","handler","responses","$responseError","schema","build","action","$get","addComponent","wrapTemplate","labelTpl","fc","groupTpl","ig","gid","group","theme","bootstrap","wrapBootstrap","wrappers","wrapper","to"],"mappings":"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"}